var ZL=Object.defineProperty;var JL=(n,e,t)=>e in n?ZL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Hi=(n,e,t)=>JL(n,typeof e!="symbol"?e+"":e,t);function QL(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function E0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $L(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var tS={exports:{}},ig={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function eI(){if(Mw)return ig;Mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,r){var l=null;if(r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:r}}return ig.Fragment=e,ig.jsx=t,ig.jsxs=t,ig}var Tw;function tI(){return Tw||(Tw=1,tS.exports=eI()),tS.exports}var q=tI(),nS={exports:{}},un={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function nI(){if(ww)return un;ww=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function x(X){return X===null||typeof X!="object"?null:(X=_&&X[_]||X["@@iterator"],typeof X=="function"?X:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function M(X,oe,Re){this.props=X,this.context=oe,this.refs=T,this.updater=Re||E}M.prototype.isReactComponent={},M.prototype.setState=function(X,oe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,oe,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function R(){}R.prototype=M.prototype;function O(X,oe,Re){this.props=X,this.context=oe,this.refs=T,this.updater=Re||E}var D=O.prototype=new R;D.constructor=O,A(D,M.prototype),D.isPureReactComponent=!0;var H=Array.isArray;function I(){}var V={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function L(X,oe,Re){var le=Re.ref;return{$$typeof:n,type:X,key:oe,ref:le!==void 0?le:null,props:Re}}function P(X,oe){return L(X.type,oe,X.props)}function Z(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function de(X){var oe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Re){return oe[Re]})}var se=/\/+/g;function he(X,oe){return typeof X=="object"&&X!==null&&X.key!=null?de(""+X.key):oe.toString(36)}function xe(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(I,I):(X.status="pending",X.then(function(oe){X.status==="pending"&&(X.status="fulfilled",X.value=oe)},function(oe){X.status==="pending"&&(X.status="rejected",X.reason=oe)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function k(X,oe,Re,le,Oe){var Pe=typeof X;(Pe==="undefined"||Pe==="boolean")&&(X=null);var Ve=!1;if(X===null)Ve=!0;else switch(Pe){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(X.$$typeof){case n:case e:Ve=!0;break;case g:return Ve=X._init,k(Ve(X._payload),oe,Re,le,Oe)}}if(Ve)return Oe=Oe(X),Ve=le===""?"."+he(X,0):le,H(Oe)?(Re="",Ve!=null&&(Re=Ve.replace(se,"$&/")+"/"),k(Oe,oe,Re,"",function(wt){return wt})):Oe!=null&&(Z(Oe)&&(Oe=P(Oe,Re+(Oe.key==null||X&&X.key===Oe.key?"":(""+Oe.key).replace(se,"$&/")+"/")+Ve)),oe.push(Oe)),1;Ve=0;var rt=le===""?".":le+":";if(H(X))for(var Pt=0;Pt<X.length;Pt++)le=X[Pt],Pe=rt+he(le,Pt),Ve+=k(le,oe,Re,Pe,Oe);else if(Pt=x(X),typeof Pt=="function")for(X=Pt.call(X),Pt=0;!(le=X.next()).done;)le=le.value,Pe=rt+he(le,Pt++),Ve+=k(le,oe,Re,Pe,Oe);else if(Pe==="object"){if(typeof X.then=="function")return k(xe(X),oe,Re,le,Oe);throw oe=String(X),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function te(X,oe,Re){if(X==null)return X;var le=[],Oe=0;return k(X,le,"","",function(Pe){return oe.call(Re,Pe,Oe++)}),le}function Y(X){if(X._status===-1){var oe=X._result;oe=oe(),oe.then(function(Re){(X._status===0||X._status===-1)&&(X._status=1,X._result=Re)},function(Re){(X._status===0||X._status===-1)&&(X._status=2,X._result=Re)}),X._status===-1&&(X._status=0,X._result=oe)}if(X._status===1)return X._result.default;throw X._result}var fe=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},ve={map:te,forEach:function(X,oe,Re){te(X,function(){oe.apply(this,arguments)},Re)},count:function(X){var oe=0;return te(X,function(){oe++}),oe},toArray:function(X){return te(X,function(oe){return oe})||[]},only:function(X){if(!Z(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return un.Activity=y,un.Children=ve,un.Component=M,un.Fragment=t,un.Profiler=s,un.PureComponent=O,un.StrictMode=i,un.Suspense=d,un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,un.__COMPILER_RUNTIME={__proto__:null,c:function(X){return V.H.useMemoCache(X)}},un.cache=function(X){return function(){return X.apply(null,arguments)}},un.cacheSignal=function(){return null},un.cloneElement=function(X,oe,Re){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var le=A({},X.props),Oe=X.key;if(oe!=null)for(Pe in oe.key!==void 0&&(Oe=""+oe.key),oe)!F.call(oe,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&oe.ref===void 0||(le[Pe]=oe[Pe]);var Pe=arguments.length-2;if(Pe===1)le.children=Re;else if(1<Pe){for(var Ve=Array(Pe),rt=0;rt<Pe;rt++)Ve[rt]=arguments[rt+2];le.children=Ve}return L(X.type,Oe,le)},un.createContext=function(X){return X={$$typeof:l,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:r,_context:X},X},un.createElement=function(X,oe,Re){var le,Oe={},Pe=null;if(oe!=null)for(le in oe.key!==void 0&&(Pe=""+oe.key),oe)F.call(oe,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Oe[le]=oe[le]);var Ve=arguments.length-2;if(Ve===1)Oe.children=Re;else if(1<Ve){for(var rt=Array(Ve),Pt=0;Pt<Ve;Pt++)rt[Pt]=arguments[Pt+2];Oe.children=rt}if(X&&X.defaultProps)for(le in Ve=X.defaultProps,Ve)Oe[le]===void 0&&(Oe[le]=Ve[le]);return L(X,Pe,Oe)},un.createRef=function(){return{current:null}},un.forwardRef=function(X){return{$$typeof:c,render:X}},un.isValidElement=Z,un.lazy=function(X){return{$$typeof:g,_payload:{_status:-1,_result:X},_init:Y}},un.memo=function(X,oe){return{$$typeof:p,type:X,compare:oe===void 0?null:oe}},un.startTransition=function(X){var oe=V.T,Re={};V.T=Re;try{var le=X(),Oe=V.S;Oe!==null&&Oe(Re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(I,fe)}catch(Pe){fe(Pe)}finally{oe!==null&&Re.types!==null&&(oe.types=Re.types),V.T=oe}},un.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},un.use=function(X){return V.H.use(X)},un.useActionState=function(X,oe,Re){return V.H.useActionState(X,oe,Re)},un.useCallback=function(X,oe){return V.H.useCallback(X,oe)},un.useContext=function(X){return V.H.useContext(X)},un.useDebugValue=function(){},un.useDeferredValue=function(X,oe){return V.H.useDeferredValue(X,oe)},un.useEffect=function(X,oe){return V.H.useEffect(X,oe)},un.useEffectEvent=function(X){return V.H.useEffectEvent(X)},un.useId=function(){return V.H.useId()},un.useImperativeHandle=function(X,oe,Re){return V.H.useImperativeHandle(X,oe,Re)},un.useInsertionEffect=function(X,oe){return V.H.useInsertionEffect(X,oe)},un.useLayoutEffect=function(X,oe){return V.H.useLayoutEffect(X,oe)},un.useMemo=function(X,oe){return V.H.useMemo(X,oe)},un.useOptimistic=function(X,oe){return V.H.useOptimistic(X,oe)},un.useReducer=function(X,oe,Re){return V.H.useReducer(X,oe,Re)},un.useRef=function(X){return V.H.useRef(X)},un.useState=function(X){return V.H.useState(X)},un.useSyncExternalStore=function(X,oe,Re){return V.H.useSyncExternalStore(X,oe,Re)},un.useTransition=function(){return V.H.useTransition()},un.version="19.2.0",un}var Aw;function xp(){return Aw||(Aw=1,nS.exports=nI()),nS.exports}var me=xp();const k2=E0(me);var iS={exports:{}},sg={},sS={exports:{}},aS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function iI(){return Cw||(Cw=1,(function(n){function e(k,te){var Y=k.length;k.push(te);e:for(;0<Y;){var fe=Y-1>>>1,ve=k[fe];if(0<s(ve,te))k[fe]=te,k[Y]=ve,Y=fe;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var te=k[0],Y=k.pop();if(Y!==te){k[0]=Y;e:for(var fe=0,ve=k.length,X=ve>>>1;fe<X;){var oe=2*(fe+1)-1,Re=k[oe],le=oe+1,Oe=k[le];if(0>s(Re,Y))le<ve&&0>s(Oe,Re)?(k[fe]=Oe,k[le]=Y,fe=le):(k[fe]=Re,k[oe]=Y,fe=oe);else if(le<ve&&0>s(Oe,Y))k[fe]=Oe,k[le]=Y,fe=le;else break e}}return te}function s(k,te){var Y=k.sortIndex-te.sortIndex;return Y!==0?Y:k.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,y=null,_=3,x=!1,E=!1,A=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=k)i(p),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(p)}}function H(k){if(A=!1,D(k),!E)if(t(d)!==null)E=!0,I||(I=!0,de());else{var te=t(p);te!==null&&xe(H,te.startTime-k)}}var I=!1,V=-1,F=5,L=-1;function P(){return T?!0:!(n.unstable_now()-L<F)}function Z(){if(T=!1,I){var k=n.unstable_now();L=k;var te=!0;try{e:{E=!1,A&&(A=!1,R(V),V=-1),x=!0;var Y=_;try{t:{for(D(k),y=t(d);y!==null&&!(y.expirationTime>k&&P());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,_=y.priorityLevel;var ve=fe(y.expirationTime<=k);if(k=n.unstable_now(),typeof ve=="function"){y.callback=ve,D(k),te=!0;break t}y===t(d)&&i(d),D(k)}else i(d);y=t(d)}if(y!==null)te=!0;else{var X=t(p);X!==null&&xe(H,X.startTime-k),te=!1}}break e}finally{y=null,_=Y,x=!1}te=void 0}}finally{te?de():I=!1}}}var de;if(typeof O=="function")de=function(){O(Z)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,he=se.port2;se.port1.onmessage=Z,de=function(){he.postMessage(null)}}else de=function(){M(Z,0)};function xe(k,te){V=M(function(){k(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(k){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var Y=_;_=te;try{return k()}finally{_=Y}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(k,te){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Y=_;_=k;try{return te()}finally{_=Y}},n.unstable_scheduleCallback=function(k,te,Y){var fe=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?fe+Y:fe):Y=fe,k){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Y+ve,k={id:g++,callback:te,priorityLevel:k,startTime:Y,expirationTime:ve,sortIndex:-1},Y>fe?(k.sortIndex=Y,e(p,k),t(d)===null&&k===t(p)&&(A?(R(V),V=-1):A=!0,xe(H,Y-fe))):(k.sortIndex=ve,e(d,k),E||x||(E=!0,I||(I=!0,de()))),k},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(k){var te=_;return function(){var Y=_;_=te;try{return k.apply(this,arguments)}finally{_=Y}}}})(aS)),aS}var Rw;function sI(){return Rw||(Rw=1,sS.exports=iI()),sS.exports}var rS={exports:{}},ia={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function aI(){if(Ow)return ia;Ow=1;var n=xp();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ia.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ia.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return r(d,p,null,g)},ia.flushSync=function(d){var p=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=p,i.p=g,i.d.f()}},ia.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},ia.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ia.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:x}):g==="script"&&i.d.X(d,{crossOrigin:y,integrity:_,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ia.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},ia.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin);i.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ia.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=c(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},ia.requestFormReset=function(d){i.d.r(d)},ia.unstable_batchedUpdates=function(d,p){return d(p)},ia.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},ia.useFormStatus=function(){return l.H.useHostTransitionStatus()},ia.version="19.2.0",ia}var Dw;function rI(){if(Dw)return rS.exports;Dw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rS.exports=aI(),rS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function oI(){if(Nw)return sg;Nw=1;var n=sI(),e=xp(),t=rI();function i(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,f=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(f=o.return),a=o.return;while(a)}return o.tag===3?f:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function c(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(r(a)!==a)throw Error(i(188))}function p(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(i(188));return o!==a?null:a}for(var f=a,m=o;;){var b=f.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===f)return d(b),a;if(w===m)return d(b),o;w=w.sibling}throw Error(i(188))}if(f.return!==m.return)f=b,m=w;else{for(var U=!1,j=b.child;j;){if(j===f){U=!0,f=b,m=w;break}if(j===m){U=!0,m=b,f=w;break}j=j.sibling}if(!U){for(j=w.child;j;){if(j===f){U=!0,f=w,m=b;break}if(j===m){U=!0,m=w,f=b;break}j=j.sibling}if(!U)throw Error(i(189))}}if(f.alternate!==m)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?a:o}function g(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=g(a),o!==null)return o;a=a.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function de(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var se=Symbol.for("react.client.reference");function he(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===se?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case A:return"Fragment";case M:return"Profiler";case T:return"StrictMode";case H:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case O:return a.displayName||"Context";case R:return(a._context.displayName||"Context")+".Consumer";case D:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return o=a.displayName||null,o!==null?o:he(a.type)||"Memo";case F:o=a._payload,a=a._init;try{return he(a(o))}catch{}}return null}var xe=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},fe=[],ve=-1;function X(a){return{current:a}}function oe(a){0>ve||(a.current=fe[ve],fe[ve]=null,ve--)}function Re(a,o){ve++,fe[ve]=a.current,a.current=o}var le=X(null),Oe=X(null),Pe=X(null),Ve=X(null);function rt(a,o){switch(Re(Pe,o),Re(Oe,a),Re(le,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?WT(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=WT(o),a=YT(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}oe(le),Re(le,a)}function Pt(){oe(le),oe(Oe),oe(Pe)}function wt(a){a.memoizedState!==null&&Re(Ve,a);var o=le.current,f=YT(o,a.type);o!==f&&(Re(Oe,a),Re(le,f))}function on(a){Oe.current===a&&(oe(le),oe(Oe)),Ve.current===a&&(oe(Ve),$m._currentValue=Y)}var Qe,Ke;function $(a){if(Qe===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);Qe=o&&o[1]||"",Ke=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+a+Ke}var Mt=!1;function et(a,o){if(!a||Mt)return"";Mt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Le){var Ce=Le}Reflect.construct(a,[],We)}else{try{We.call()}catch(Le){Ce=Le}a.call(We.prototype)}}else{try{throw Error()}catch(Le){Ce=Le}(We=a())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Le){if(Le&&Ce&&typeof Le.stack=="string")return[Le.stack,Ce.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),U=w[0],j=w[1];if(U&&j){var re=U.split(`
`),Te=j.split(`
`);for(b=m=0;m<re.length&&!re[m].includes("DetermineComponentFrameRoot");)m++;for(;b<Te.length&&!Te[b].includes("DetermineComponentFrameRoot");)b++;if(m===re.length||b===Te.length)for(m=re.length-1,b=Te.length-1;1<=m&&0<=b&&re[m]!==Te[b];)b--;for(;1<=m&&0<=b;m--,b--)if(re[m]!==Te[b]){if(m!==1||b!==1)do if(m--,b--,0>b||re[m]!==Te[b]){var He=`
`+re[m].replace(" at new "," at ");return a.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",a.displayName)),He}while(1<=m&&0<=b);break}}}finally{Mt=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?$(f):""}function dt(a,o){switch(a.tag){case 26:case 27:case 5:return $(a.type);case 16:return $("Lazy");case 13:return a.child!==o&&o!==null?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return et(a.type,!1);case 11:return et(a.type.render,!1);case 1:return et(a.type,!0);case 31:return $("Activity");default:return""}}function st(a){try{var o="",f=null;do o+=dt(a,f),f=a,a=a.return;while(a);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var zt=Object.prototype.hasOwnProperty,ot=n.unstable_scheduleCallback,J=n.unstable_cancelCallback,G=n.unstable_shouldYield,Se=n.unstable_requestPaint,Be=n.unstable_now,Ze=n.unstable_getCurrentPriorityLevel,ke=n.unstable_ImmediatePriority,Tt=n.unstable_UserBlockingPriority,ct=n.unstable_NormalPriority,vt=n.unstable_LowPriority,fn=n.unstable_IdlePriority,it=n.log,bt=n.unstable_setDisableYieldValue,Et=null,ut=null;function ht(a){if(typeof it=="function"&&bt(a),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Et,a)}catch{}}var Ft=Math.clz32?Math.clz32:ge,Ut=Math.log,Yt=Math.LN2;function ge(a){return a>>>=0,a===0?32:31-(Ut(a)/Yt|0)|0}var De=256,Ue=262144,Xe=4194304;function lt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ft(a,o,f){var m=a.pendingLanes;if(m===0)return 0;var b=0,w=a.suspendedLanes,U=a.pingedLanes;a=a.warmLanes;var j=m&134217727;return j!==0?(m=j&~w,m!==0?b=lt(m):(U&=j,U!==0?b=lt(U):f||(f=j&~a,f!==0&&(b=lt(f))))):(j=m&~w,j!==0?b=lt(j):U!==0?b=lt(U):f||(f=m&~a,f!==0&&(b=lt(f)))),b===0?0:o!==0&&o!==b&&(o&w)===0&&(w=b&-b,f=o&-o,w>=f||w===32&&(f&4194048)!==0)?o:b}function Wt(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Kn(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(){var a=Xe;return Xe<<=1,(Xe&62914560)===0&&(Xe=4194304),a}function Sn(a){for(var o=[],f=0;31>f;f++)o.push(a);return o}function Bi(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function qs(a,o,f,m,b,w){var U=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var j=a.entanglements,re=a.expirationTimes,Te=a.hiddenUpdates;for(f=U&~f;0<f;){var He=31-Ft(f),We=1<<He;j[He]=0,re[He]=-1;var Ce=Te[He];if(Ce!==null)for(Te[He]=null,He=0;He<Ce.length;He++){var Le=Ce[He];Le!==null&&(Le.lane&=-536870913)}f&=~We}m!==0&&Uo(a,m,0),w!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=w&~(U&~o))}function Uo(a,o,f){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-Ft(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|f&261930}function Wr(a,o){var f=a.entangledLanes|=o;for(a=a.entanglements;f;){var m=31-Ft(f),b=1<<m;b&o|a[m]&o&&(a[m]|=o),f&=~b}}function os(a,o){var f=o&-o;return f=(f&42)!==0?1:_s(f),(f&(a.suspendedLanes|o))!==0?0:f}function _s(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function fa(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Zi(){var a=te.p;return a!==0?a:(a=window.event,a===void 0?32:vw(a.type))}function qt(a,o){var f=te.p;try{return te.p=a,o()}finally{te.p=f}}var ls=Math.random().toString(36).slice(2),an="__reactFiber$"+ls,B="__reactProps$"+ls,K="__reactContainer$"+ls,ue="__reactEvents$"+ls,Ae="__reactListeners$"+ls,ze="__reactHandles$"+ls,Ie="__reactResources$"+ls,tt="__reactMarker$"+ls;function $e(a){delete a[an],delete a[B],delete a[ue],delete a[Ae],delete a[ze]}function z(a){var o=a[an];if(o)return o;for(var f=a.parentNode;f;){if(o=f[K]||f[an]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(a=tw(a);a!==null;){if(f=a[an])return f;a=tw(a)}return o}a=f,f=a.parentNode}return null}function Q(a){if(a=a[an]||a[K]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function ne(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(i(33))}function ie(a){var o=a[Ie];return o||(o=a[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ce(a){a[tt]=!0}var Ee=new Set,Fe={};function je(a,o){Ye(a,o),Ye(a+"Capture",o)}function Ye(a,o){for(Fe[a]=o,a=0;a<o.length;a++)Ee.add(o[a])}var pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gt={},mt={};function jt(a){return zt.call(mt,a)?!0:zt.call(gt,a)?!1:pt.test(a)?mt[a]=!0:(gt[a]=!0,!1)}function Rt(a,o,f){if(jt(o))if(f===null)a.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+f)}}function Mn(a,o,f){if(f===null)a.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+f)}}function Nt(a,o,f,m){if(m===null)a.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(o,f,""+m)}}function At(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ct(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ni(a,o,f){var m=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return b.call(this)},set:function(U){f=""+U,w.call(this,U)}}),Object.defineProperty(a,o,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(U){f=""+U},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Jt(a){if(!a._valueTracker){var o=Ct(a)?"checked":"value";a._valueTracker=ni(a,o,""+a[o])}}function ln(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var f=o.getValue(),m="";return a&&(m=Ct(a)?a.checked?"true":"false":a.value),a=m,a!==f?(o.setValue(a),!0):!1}function Gn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var dn=/[\n"\\]/g;function Kt(a){return a.replace(dn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function cn(a,o,f,m,b,w,U,j){a.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.type=U:a.removeAttribute("type"),o!=null?U==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+At(o)):a.value!==""+At(o)&&(a.value=""+At(o)):U!=="submit"&&U!=="reset"||a.removeAttribute("value"),o!=null?Bn(a,U,At(o)):f!=null?Bn(a,U,At(f)):m!=null&&a.removeAttribute("value"),b==null&&w!=null&&(a.defaultChecked=!!w),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.name=""+At(j):a.removeAttribute("name")}function pi(a,o,f,m,b,w,U,j){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),o!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){Jt(a);return}f=f!=null?""+At(f):"",o=o!=null?""+At(o):f,j||o===a.value||(a.value=o),a.defaultValue=o}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=j?a.checked:!!m,a.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(a.name=U),Jt(a)}function Bn(a,o,f){o==="number"&&Gn(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function zn(a,o,f,m){if(a=a.options,o){o={};for(var b=0;b<f.length;b++)o["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=o.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&m&&(a[f].defaultSelected=!0)}else{for(f=""+At(f),o=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}o!==null||a[b].disabled||(o=a[b])}o!==null&&(o.selected=!0)}}function Ji(a,o,f){if(o!=null&&(o=""+At(o),o!==a.value&&(a.value=o),f==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=f!=null?""+At(f):""}function tr(a,o,f,m){if(o==null){if(m!=null){if(f!=null)throw Error(i(92));if(xe(m)){if(1<m.length)throw Error(i(93));m=m[0]}f=m}f==null&&(f=""),o=f}f=At(o),a.defaultValue=f,m=a.textContent,m===f&&m!==""&&m!==null&&(a.value=m),Jt(a)}function Ns(a,o){if(o){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=o;return}}a.textContent=o}var hf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(a,o,f){var m=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,f):typeof f!="number"||f===0||hf.has(o)?o==="float"?a.cssFloat=f:a[o]=(""+f).trim():a[o]=f+"px"}function Up(a,o,f){if(o!=null&&typeof o!="object")throw Error(i(62));if(a=a.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var b in o)m=o[b],o.hasOwnProperty(b)&&f[b]!==m&&Mu(a,b,m)}else for(var w in o)o.hasOwnProperty(w)&&Mu(a,w,o[w])}function Tu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Y0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(a){return Y0.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function br(){}var Au=null;function ff(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var El=null,Lo=null;function Lp(a){var o=Q(a);if(o&&(a=o.stateNode)){var f=a[B]||null;e:switch(a=o.stateNode,o.type){case"input":if(cn(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Kt(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var m=f[o];if(m!==a&&m.form===a.form){var b=m[B]||null;if(!b)throw Error(i(90));cn(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<f.length;o++)m=f[o],m.form===a.form&&ln(m)}break e;case"textarea":Ji(a,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&zn(a,!!f.multiple,o,!1)}}}var df=!1;function Ip(a,o,f){if(df)return a(o,f);df=!0;try{var m=a(o);return m}finally{if(df=!1,(El!==null||Lo!==null)&&(W(),El&&(o=El,a=Lo,Lo=El=null,Lp(o),a)))for(o=0;o<a.length;o++)Lp(a[o])}}function Ml(a,o){var f=a.stateNode;if(f===null)return null;var m=f[B]||null;if(m===null)return null;f=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(i(231,o,typeof f));return f}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pf=!1;if(Sr)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){pf=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{pf=!1}var Io=null,mf=null,Po=null;function gf(){if(Po)return Po;var a,o=mf,f=o.length,m,b="value"in Io?Io.value:Io.textContent,w=b.length;for(a=0;a<f&&o[a]===b[a];a++);var U=f-a;for(m=1;m<=U&&o[f-m]===b[w-m];m++);return Po=b.slice(a,1<m?1-m:void 0)}function Tl(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Ru(){return!0}function Pp(){return!1}function xs(a){function o(f,m,b,w,U){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=U,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(f=a[j],this[j]=f?f(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ru:Pp,this.isPropagationStopped=Pp,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),o}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=xs(Bo),nr=y({},Bo,{view:0,detail:0}),vf=xs(nr),yf,Du,dc,Nu=y({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==dc&&(dc&&a.type==="mousemove"?(yf=a.screenX-dc.screenX,Du=a.screenY-dc.screenY):Du=yf=0,dc=a),yf)},movementY:function(a){return"movementY"in a?a.movementY:Du}}),K0=xs(Nu),cs=y({},Nu,{dataTransfer:0}),Z0=xs(cs),J0=y({},nr,{relatedTarget:0}),_f=xs(J0),Q0=y({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),$0=xs(Q0),Uu=y({},Bo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Bp=xs(Uu),ev=y({},Bo,{data:0}),zp=xs(ev),tv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nv(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Vp[a])?!!o[a]:!1}function Lu(){return nv}var Hp=y({},nr,{key:function(a){if(a.key){var o=tv[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Tl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Fp[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(a){return a.type==="keypress"?Tl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Tl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),kp=xs(Hp),iv=y({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=xs(iv),sv=y({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),Yr=xs(sv),Gp=y({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),xb=xs(Gp),av=y({},Nu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zo=xs(av),Kr=y({},Bo,{newState:0,oldState:0}),jp=xs(Kr),qp=[9,13,27,32],wl=Sr&&"CompositionEvent"in window,Fo=null;Sr&&"documentMode"in document&&(Fo=document.documentMode);var Al=Sr&&"TextEvent"in window&&!Fo,us=Sr&&(!wl||Fo&&8<Fo&&11>=Fo),Iu=" ",Xp=!1;function bf(a,o){switch(a){case"keyup":return qp.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Vo=!1;function Sf(a,o){switch(a){case"compositionend":return pc(o);case"keypress":return o.which!==32?null:(Xp=!0,Iu);case"textInput":return a=o.data,a===Iu&&Xp?null:a;default:return null}}function rv(a,o){if(Vo)return a==="compositionend"||!wl&&bf(a,o)?(a=gf(),Po=mf=Io=null,Vo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return us&&o.locale!=="ko"?null:o.data;default:return null}}var da={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!da[a.type]:o==="textarea"}function Ef(a,o,f,m){El?Lo?Lo.push(m):Lo=[m]:El=m,o=Jv(o,"onChange"),0<o.length&&(f=new Ou("onChange","change",null,f,m),a.push({event:f,listeners:o}))}var mc=null,gc=null;function Yp(a){HT(a,0)}function vc(a){var o=ne(a);if(ln(o))return a}function Kp(a,o){if(a==="change")return o}var Pu=!1;if(Sr){var Cl;if(Sr){var ui="oninput"in document;if(!ui){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),ui=typeof ov.oninput=="function"}Cl=ui}else Cl=!1;Pu=Cl&&(!document.documentMode||9<document.documentMode)}function lv(){mc&&(mc.detachEvent("onpropertychange",Zp),gc=mc=null)}function Zp(a){if(a.propertyName==="value"&&vc(gc)){var o=[];Ef(o,gc,a,ff(a)),Ip(Yp,o)}}function Bu(a,o,f){a==="focusin"?(lv(),mc=o,gc=f,mc.attachEvent("onpropertychange",Zp)):a==="focusout"&&lv()}function Ho(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return vc(gc)}function cv(a,o){if(a==="click")return vc(o)}function uv(a,o){if(a==="input"||a==="change")return vc(o)}function Rl(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var hi=typeof Object.is=="function"?Object.is:Rl;function yc(a,o){if(hi(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var f=Object.keys(a),m=Object.keys(o);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!zt.call(o,b)||!hi(a[b],o[b]))return!1}return!0}function Jp(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Qp(a,o){var f=Jp(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=o&&m>=o)return{node:f,offset:o-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Jp(f)}}function Mf(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Mf(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Tf(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Gn(a.document);o instanceof a.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)a=o.contentWindow;else break;o=Gn(a.document)}return o}function _c(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var hv=Sr&&"documentMode"in document&&11>=document.documentMode,xc=null,wf=null,bc=null,pa=!1;function Af(a,o,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;pa||xc==null||xc!==Gn(m)||(m=xc,"selectionStart"in m&&_c(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),bc&&yc(bc,m)||(bc=m,m=Jv(wf,"onSelect"),0<m.length&&(o=new Ou("onSelect","select",null,o,f),a.push({event:o,listeners:m}),o.target=xc)))}function ko(a,o){var f={};return f[a.toLowerCase()]=o.toLowerCase(),f["Webkit"+a]="webkit"+o,f["Moz"+a]="moz"+o,f}var Sc={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionrun:ko("Transition","TransitionRun"),transitionstart:ko("Transition","TransitionStart"),transitioncancel:ko("Transition","TransitionCancel"),transitionend:ko("Transition","TransitionEnd")},zu={},Us={};Sr&&(Us=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function Go(a){if(zu[a])return zu[a];if(!Sc[a])return a;var o=Sc[a],f;for(f in o)if(o.hasOwnProperty(f)&&f in Us)return zu[a]=o[f];return a}var Xs=Go("animationend"),$p=Go("animationiteration"),Er=Go("animationstart"),Ec=Go("transitionrun"),jo=Go("transitionstart"),em=Go("transitioncancel"),Cf=Go("transitionend"),Zr=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function bs(a,o){Zr.set(a,o),je(o,[a])}var qo=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Qi=[],Ol=0,Of=0;function Xo(){for(var a=Ol,o=Of=Ol=0;o<a;){var f=Qi[o];Qi[o++]=null;var m=Qi[o];Qi[o++]=null;var b=Qi[o];Qi[o++]=null;var w=Qi[o];if(Qi[o++]=null,m!==null&&b!==null){var U=m.pending;U===null?b.next=b:(b.next=U.next,U.next=b),m.pending=b}w!==0&&Df(f,b,w)}}function Fu(a,o,f,m){Qi[Ol++]=a,Qi[Ol++]=o,Qi[Ol++]=f,Qi[Ol++]=m,Of|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Mc(a,o,f,m){return Fu(a,o,f,m),Tc(a)}function Wo(a,o){return Fu(a,null,null,o),Tc(a)}function Df(a,o,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var b=!1,w=a.return;w!==null;)w.childLanes|=f,m=w.alternate,m!==null&&(m.childLanes|=f),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(b=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,b&&o!==null&&(b=31-Ft(f),a=w.hiddenUpdates,m=a[b],m===null?a[b]=[o]:m.push(o),o.lane=f|536870912),w):null}function Tc(a){if(50<Wl)throw Wl=0,Yl=null,Error(i(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Yo={};function fv(a,o,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(a,o,f,m){return new fv(a,o,f,m)}function Is(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Mr(a,o){var f=a.alternate;return f===null?(f=Ls(a.tag,o,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=o,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,o=a.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function Ss(a,o){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,o=f.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Vu(a,o,f,m,b,w){var U=0;if(m=a,typeof a=="function")Is(a)&&(U=1);else if(typeof a=="string")U=zL(a,f,le.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=Ls(31,f,o,b),a.elementType=L,a.lanes=w,a;case A:return Jr(f.children,b,w,o);case T:U=8,b|=24;break;case M:return a=Ls(12,f,o,b|2),a.elementType=M,a.lanes=w,a;case H:return a=Ls(13,f,o,b),a.elementType=H,a.lanes=w,a;case I:return a=Ls(19,f,o,b),a.elementType=I,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case O:U=10;break e;case R:U=9;break e;case D:U=11;break e;case V:U=14;break e;case F:U=16,m=null;break e}U=29,f=Error(i(130,a===null?"null":typeof a,"")),m=null}return o=Ls(U,f,o,b),o.elementType=a,o.type=m,o.lanes=w,o}function Jr(a,o,f,m){return a=Ls(7,a,m,o),a.lanes=f,a}function Nf(a,o,f){return a=Ls(6,a,null,o),a.lanes=f,a}function dv(a){var o=Ls(18,null,null,0);return o.stateNode=a,o}function ir(a,o,f){return o=Ls(4,a.children!==null?a.children:[],a.key,o),o.lanes=f,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var tm=new WeakMap;function Ws(a,o){if(typeof a=="object"&&a!==null){var f=tm.get(a);return f!==void 0?f:(o={value:a,source:o,stack:st(o)},tm.set(a,o),o)}return{value:a,source:o,stack:st(o)}}var sr=[],Dl=0,Hu=null,wc=0,ma=[],Ys=0,Tr=null,wr=1,Ar="";function Qr(a,o){sr[Dl++]=wc,sr[Dl++]=Hu,Hu=a,wc=o}function nm(a,o,f){ma[Ys++]=wr,ma[Ys++]=Ar,ma[Ys++]=Tr,Tr=a;var m=wr;a=Ar;var b=32-Ft(m)-1;m&=~(1<<b),f+=1;var w=32-Ft(o)+b;if(30<w){var U=b-b%5;w=(m&(1<<U)-1).toString(32),m>>=U,b-=U,wr=1<<32-Ft(o)+b|f<<b|m,Ar=w+a}else wr=1<<w|f<<b|m,Ar=a}function Uf(a){a.return!==null&&(Qr(a,1),nm(a,1,0))}function Ko(a){for(;a===Hu;)Hu=sr[--Dl],sr[Dl]=null,wc=sr[--Dl],sr[Dl]=null;for(;a===Tr;)Tr=ma[--Ys],ma[Ys]=null,Ar=ma[--Ys],ma[Ys]=null,wr=ma[--Ys],ma[Ys]=null}function ku(a,o){ma[Ys++]=wr,ma[Ys++]=Ar,ma[Ys++]=Tr,wr=o.id,Ar=o.overflow,Tr=a}var $i=null,ii=null,An=!1,$r=null,es=!1,Lf=Error(i(519));function Tn(a){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gu(Ws(o,a)),Lf}function If(a){var o=a.stateNode,f=a.type,m=a.memoizedProps;switch(o[an]=a,o[B]=m,f){case"dialog":Cn("cancel",o),Cn("close",o);break;case"iframe":case"object":case"embed":Cn("load",o);break;case"video":case"audio":for(f=0;f<Ym.length;f++)Cn(Ym[f],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"details":Cn("toggle",o);break;case"input":Cn("invalid",o),pi(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Cn("invalid",o);break;case"textarea":Cn("invalid",o),tr(o,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||m.suppressHydrationWarning===!0||qT(o.textContent,f)?(m.popover!=null&&(Cn("beforetoggle",o),Cn("toggle",o)),m.onScroll!=null&&Cn("scroll",o),m.onScrollEnd!=null&&Cn("scrollend",o),m.onClick!=null&&(o.onclick=br),o=!0):o=!1,o||Tn(a,!0)}function pv(a){for($i=a.return;$i;)switch($i.tag){case 5:case 31:case 13:es=!1;return;case 27:case 3:es=!0;return;default:$i=$i.return}}function Nl(a){if(a!==$i)return!1;if(!An)return pv(a),An=!0,!1;var o=a.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Vb(a.type,a.memoizedProps)),f=!f),f&&ii&&Tn(a),pv(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));ii=ew(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));ii=ew(a)}else o===27?(o=ii,qc(a.type)?(a=qb,qb=null,ii=a):ii=o):ii=$i?zr(a.stateNode.nextSibling):null;return!0}function Ul(){ii=$i=null,An=!1}function im(){var a=$r;return a!==null&&(Cs===null?Cs=a:Cs.push.apply(Cs,a),$r=null),a}function Gu(a){$r===null?$r=[a]:$r.push(a)}var sm=X(null),eo=null,Es=null;function to(a,o,f){Re(sm,o._currentValue),o._currentValue=f}function Ha(a){a._currentValue=sm.current,oe(sm)}function no(a,o,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===f)break;a=a.return}}function Pf(a,o,f,m){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var w=b.dependencies;if(w!==null){var U=b.child;w=w.firstContext;e:for(;w!==null;){var j=w;w=b;for(var re=0;re<o.length;re++)if(j.context===o[re]){w.lanes|=f,j=w.alternate,j!==null&&(j.lanes|=f),no(w.return,f,a),m||(U=null);break e}w=j.next}}else if(b.tag===18){if(U=b.return,U===null)throw Error(i(341));U.lanes|=f,w=U.alternate,w!==null&&(w.lanes|=f),no(U,f,a),U=null}else U=b.child;if(U!==null)U.return=b;else for(U=b;U!==null;){if(U===a){U=null;break}if(b=U.sibling,b!==null){b.return=U.return,U=b;break}U=U.return}b=U}}function Zo(a,o,f,m){a=null;for(var b=o,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var U=b.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var j=b.type;hi(b.pendingProps.value,U.value)||(a!==null?a.push(j):a=[j])}}else if(b===Ve.current){if(U=b.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push($m):a=[$m])}b=b.return}a!==null&&Pf(o,a,f,m),o.flags|=262144}function Ac(a){for(a=a.firstContext;a!==null;){if(!hi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ll(a){eo=a,Es=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ts(a){return am(eo,a)}function ju(a,o){return eo===null&&Ll(a),am(a,o)}function am(a,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},Es===null){if(a===null)throw Error(i(308));Es=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Es=Es.next=o;return f}var mv=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(f){return f()})}},gv=n.unstable_scheduleCallback,rm=n.unstable_NormalPriority,Vt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function om(){return{controller:new mv,data:new Map,refCount:0}}function hs(a){a.refCount--,a.refCount===0&&gv(rm,function(){a.controller.abort()})}var Il=null,lm=0,io=0,ar=null;function Cc(a,o){if(Il===null){var f=Il=[];lm=0,io=Db(),ar={status:"pending",value:void 0,then:function(m){f.push(m)}}}return lm++,o.then(cm,cm),o}function cm(){if(--lm===0&&Il!==null){ar!==null&&(ar.status="fulfilled");var a=Il;Il=null,io=0,ar=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function um(a,o){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var b=0;b<f.length;b++)(0,f[b])(o)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var vv=k.S;k.S=function(a,o){kc=Be(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Cc(a,o),vv!==null&&vv(a,o)};var Jo=X(null);function Cr(){var a=Jo.current;return a!==null?a:qn.pooledCache}function Rc(a,o){o===null?Re(Jo,Jo.current):Re(Jo,o.pool)}function Bf(){var a=Cr();return a===null?null:{parent:Vt._currentValue,pool:a}}var Qo=Error(i(460)),qu=Error(i(474)),rr=Error(i(542)),Xu={then:function(){}};function yv(a){return a=a.status,a==="fulfilled"||a==="rejected"}function hm(a,o,f){switch(f=a[f],f===void 0?a.push(o):f!==o&&(o.then(br,br),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,fm(a),a;default:if(typeof o.status=="string")o.then(br,br);else{if(a=qn,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=m}},function(m){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,fm(a),a}throw Xt=o,Qo}}function Pl(a){try{var o=a._init;return o(a._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Xt=f,Qo):f}}var Xt=null;function zf(){if(Xt===null)throw Error(i(459));var a=Xt;return Xt=null,a}function fm(a){if(a===Qo||a===rr)throw Error(i(483))}var $o=null,el=0;function Ff(a){var o=el;return el+=1,$o===null&&($o=[]),hm($o,a,o)}function Wu(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Yu(a,o){throw o.$$typeof===_?Error(i(525)):(a=Object.prototype.toString.call(o),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Oc(a){function o(_e,pe){if(a){var Me=_e.deletions;Me===null?(_e.deletions=[pe],_e.flags|=16):Me.push(pe)}}function f(_e,pe){if(!a)return null;for(;pe!==null;)o(_e,pe),pe=pe.sibling;return null}function m(_e){for(var pe=new Map;_e!==null;)_e.key!==null?pe.set(_e.key,_e):pe.set(_e.index,_e),_e=_e.sibling;return pe}function b(_e,pe){return _e=Mr(_e,pe),_e.index=0,_e.sibling=null,_e}function w(_e,pe,Me){return _e.index=Me,a?(Me=_e.alternate,Me!==null?(Me=Me.index,Me<pe?(_e.flags|=67108866,pe):Me):(_e.flags|=67108866,pe)):(_e.flags|=1048576,pe)}function U(_e){return a&&_e.alternate===null&&(_e.flags|=67108866),_e}function j(_e,pe,Me,qe){return pe===null||pe.tag!==6?(pe=Nf(Me,_e.mode,qe),pe.return=_e,pe):(pe=b(pe,Me),pe.return=_e,pe)}function re(_e,pe,Me,qe){var Gt=Me.type;return Gt===A?He(_e,pe,Me.props.children,qe,Me.key):pe!==null&&(pe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===F&&Pl(Gt)===pe.type)?(pe=b(pe,Me.props),Wu(pe,Me),pe.return=_e,pe):(pe=Vu(Me.type,Me.key,Me.props,null,_e.mode,qe),Wu(pe,Me),pe.return=_e,pe)}function Te(_e,pe,Me,qe){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Me.containerInfo||pe.stateNode.implementation!==Me.implementation?(pe=ir(Me,_e.mode,qe),pe.return=_e,pe):(pe=b(pe,Me.children||[]),pe.return=_e,pe)}function He(_e,pe,Me,qe,Gt){return pe===null||pe.tag!==7?(pe=Jr(Me,_e.mode,qe,Gt),pe.return=_e,pe):(pe=b(pe,Me),pe.return=_e,pe)}function We(_e,pe,Me){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=Nf(""+pe,_e.mode,Me),pe.return=_e,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case x:return Me=Vu(pe.type,pe.key,pe.props,null,_e.mode,Me),Wu(Me,pe),Me.return=_e,Me;case E:return pe=ir(pe,_e.mode,Me),pe.return=_e,pe;case F:return pe=Pl(pe),We(_e,pe,Me)}if(xe(pe)||de(pe))return pe=Jr(pe,_e.mode,Me,null),pe.return=_e,pe;if(typeof pe.then=="function")return We(_e,Ff(pe),Me);if(pe.$$typeof===O)return We(_e,ju(_e,pe),Me);Yu(_e,pe)}return null}function Ce(_e,pe,Me,qe){var Gt=pe!==null?pe.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Gt!==null?null:j(_e,pe,""+Me,qe);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case x:return Me.key===Gt?re(_e,pe,Me,qe):null;case E:return Me.key===Gt?Te(_e,pe,Me,qe):null;case F:return Me=Pl(Me),Ce(_e,pe,Me,qe)}if(xe(Me)||de(Me))return Gt!==null?null:He(_e,pe,Me,qe,null);if(typeof Me.then=="function")return Ce(_e,pe,Ff(Me),qe);if(Me.$$typeof===O)return Ce(_e,pe,ju(_e,Me),qe);Yu(_e,Me)}return null}function Le(_e,pe,Me,qe,Gt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return _e=_e.get(Me)||null,j(pe,_e,""+qe,Gt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case x:return _e=_e.get(qe.key===null?Me:qe.key)||null,re(pe,_e,qe,Gt);case E:return _e=_e.get(qe.key===null?Me:qe.key)||null,Te(pe,_e,qe,Gt);case F:return qe=Pl(qe),Le(_e,pe,Me,qe,Gt)}if(xe(qe)||de(qe))return _e=_e.get(Me)||null,He(pe,_e,qe,Gt,null);if(typeof qe.then=="function")return Le(_e,pe,Me,Ff(qe),Gt);if(qe.$$typeof===O)return Le(_e,pe,Me,ju(pe,qe),Gt);Yu(pe,qe)}return null}function Ot(_e,pe,Me,qe){for(var Gt=null,Wn=null,Lt=pe,_n=pe=0,Dn=null;Lt!==null&&_n<Me.length;_n++){Lt.index>_n?(Dn=Lt,Lt=null):Dn=Lt.sibling;var Yn=Ce(_e,Lt,Me[_n],qe);if(Yn===null){Lt===null&&(Lt=Dn);break}a&&Lt&&Yn.alternate===null&&o(_e,Lt),pe=w(Yn,pe,_n),Wn===null?Gt=Yn:Wn.sibling=Yn,Wn=Yn,Lt=Dn}if(_n===Me.length)return f(_e,Lt),An&&Qr(_e,_n),Gt;if(Lt===null){for(;_n<Me.length;_n++)Lt=We(_e,Me[_n],qe),Lt!==null&&(pe=w(Lt,pe,_n),Wn===null?Gt=Lt:Wn.sibling=Lt,Wn=Lt);return An&&Qr(_e,_n),Gt}for(Lt=m(Lt);_n<Me.length;_n++)Dn=Le(Lt,_e,_n,Me[_n],qe),Dn!==null&&(a&&Dn.alternate!==null&&Lt.delete(Dn.key===null?_n:Dn.key),pe=w(Dn,pe,_n),Wn===null?Gt=Dn:Wn.sibling=Dn,Wn=Dn);return a&&Lt.forEach(function(Zc){return o(_e,Zc)}),An&&Qr(_e,_n),Gt}function Zt(_e,pe,Me,qe){if(Me==null)throw Error(i(151));for(var Gt=null,Wn=null,Lt=pe,_n=pe=0,Dn=null,Yn=Me.next();Lt!==null&&!Yn.done;_n++,Yn=Me.next()){Lt.index>_n?(Dn=Lt,Lt=null):Dn=Lt.sibling;var Zc=Ce(_e,Lt,Yn.value,qe);if(Zc===null){Lt===null&&(Lt=Dn);break}a&&Lt&&Zc.alternate===null&&o(_e,Lt),pe=w(Zc,pe,_n),Wn===null?Gt=Zc:Wn.sibling=Zc,Wn=Zc,Lt=Dn}if(Yn.done)return f(_e,Lt),An&&Qr(_e,_n),Gt;if(Lt===null){for(;!Yn.done;_n++,Yn=Me.next())Yn=We(_e,Yn.value,qe),Yn!==null&&(pe=w(Yn,pe,_n),Wn===null?Gt=Yn:Wn.sibling=Yn,Wn=Yn);return An&&Qr(_e,_n),Gt}for(Lt=m(Lt);!Yn.done;_n++,Yn=Me.next())Yn=Le(Lt,_e,_n,Yn.value,qe),Yn!==null&&(a&&Yn.alternate!==null&&Lt.delete(Yn.key===null?_n:Yn.key),pe=w(Yn,pe,_n),Wn===null?Gt=Yn:Wn.sibling=Yn,Wn=Yn);return a&&Lt.forEach(function(KL){return o(_e,KL)}),An&&Qr(_e,_n),Gt}function ri(_e,pe,Me,qe){if(typeof Me=="object"&&Me!==null&&Me.type===A&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case x:e:{for(var Gt=Me.key;pe!==null;){if(pe.key===Gt){if(Gt=Me.type,Gt===A){if(pe.tag===7){f(_e,pe.sibling),qe=b(pe,Me.props.children),qe.return=_e,_e=qe;break e}}else if(pe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===F&&Pl(Gt)===pe.type){f(_e,pe.sibling),qe=b(pe,Me.props),Wu(qe,Me),qe.return=_e,_e=qe;break e}f(_e,pe);break}else o(_e,pe);pe=pe.sibling}Me.type===A?(qe=Jr(Me.props.children,_e.mode,qe,Me.key),qe.return=_e,_e=qe):(qe=Vu(Me.type,Me.key,Me.props,null,_e.mode,qe),Wu(qe,Me),qe.return=_e,_e=qe)}return U(_e);case E:e:{for(Gt=Me.key;pe!==null;){if(pe.key===Gt)if(pe.tag===4&&pe.stateNode.containerInfo===Me.containerInfo&&pe.stateNode.implementation===Me.implementation){f(_e,pe.sibling),qe=b(pe,Me.children||[]),qe.return=_e,_e=qe;break e}else{f(_e,pe);break}else o(_e,pe);pe=pe.sibling}qe=ir(Me,_e.mode,qe),qe.return=_e,_e=qe}return U(_e);case F:return Me=Pl(Me),ri(_e,pe,Me,qe)}if(xe(Me))return Ot(_e,pe,Me,qe);if(de(Me)){if(Gt=de(Me),typeof Gt!="function")throw Error(i(150));return Me=Gt.call(Me),Zt(_e,pe,Me,qe)}if(typeof Me.then=="function")return ri(_e,pe,Ff(Me),qe);if(Me.$$typeof===O)return ri(_e,pe,ju(_e,Me),qe);Yu(_e,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,pe!==null&&pe.tag===6?(f(_e,pe.sibling),qe=b(pe,Me),qe.return=_e,_e=qe):(f(_e,pe),qe=Nf(Me,_e.mode,qe),qe.return=_e,_e=qe),U(_e)):f(_e,pe)}return function(_e,pe,Me,qe){try{el=0;var Gt=ri(_e,pe,Me,qe);return $o=null,Gt}catch(Lt){if(Lt===Qo||Lt===rr)throw Lt;var Wn=Ls(29,Lt,null,_e.mode);return Wn.lanes=qe,Wn.return=_e,Wn}finally{}}}var Bl=Oc(!0),_v=Oc(!1),tl=!1;function dm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pm(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Rr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function so(a,o,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(Rn&2)!==0){var b=m.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),m.pending=o,o=Tc(a),Df(a,null,f),o}return Fu(a,m,o,f),Tc(a)}function nl(a,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,f|=m,o.lanes=f,Wr(a,f)}}function Vf(a,o){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var U={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?b=w=U:w=w.next=U,f=f.next}while(f!==null);w===null?b=w=o:w=w.next=o}else b=w=o;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=o:a.next=o,f.lastBaseUpdate=o}var mm=!1;function Ku(){if(mm){var a=ar;if(a!==null)throw a}}function zl(a,o,f,m){mm=!1;var b=a.updateQueue;tl=!1;var w=b.firstBaseUpdate,U=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var re=j,Te=re.next;re.next=null,U===null?w=Te:U.next=Te,U=re;var He=a.alternate;He!==null&&(He=He.updateQueue,j=He.lastBaseUpdate,j!==U&&(j===null?He.firstBaseUpdate=Te:j.next=Te,He.lastBaseUpdate=re))}if(w!==null){var We=b.baseState;U=0,He=Te=re=null,j=w;do{var Ce=j.lane&-536870913,Le=Ce!==j.lane;if(Le?(wn&Ce)===Ce:(m&Ce)===Ce){Ce!==0&&Ce===io&&(mm=!0),He!==null&&(He=He.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ot=a,Zt=j;Ce=o;var ri=f;switch(Zt.tag){case 1:if(Ot=Zt.payload,typeof Ot=="function"){We=Ot.call(ri,We,Ce);break e}We=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Zt.payload,Ce=typeof Ot=="function"?Ot.call(ri,We,Ce):Ot,Ce==null)break e;We=y({},We,Ce);break e;case 2:tl=!0}}Ce=j.callback,Ce!==null&&(a.flags|=64,Le&&(a.flags|=8192),Le=b.callbacks,Le===null?b.callbacks=[Ce]:Le.push(Ce))}else Le={lane:Ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},He===null?(Te=He=Le,re=We):He=He.next=Le,U|=Ce;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;Le=j,j=Le.next,Le.next=null,b.lastBaseUpdate=Le,b.shared.pending=null}}while(!0);He===null&&(re=We),b.baseState=re,b.firstBaseUpdate=Te,b.lastBaseUpdate=He,w===null&&(b.shared.lanes=0),wa|=U,a.lanes=U,a.memoizedState=We}}function Or(a,o){if(typeof a!="function")throw Error(i(191,a));a.call(o)}function fs(a,o){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Or(f[a],o)}var ga=X(null),Ps=X(0);function gm(a,o){a=Di,Re(Ps,a),Re(ga,o),Di=a|o.baseLanes}function vm(){Re(Ps,Di),Re(ga,ga.current)}function Ms(){Di=Ps.current,oe(ga),oe(Ps)}var ji=X(null),ka=null;function il(a){var o=a.alternate;Re(_i,_i.current&1),Re(ji,a),ka===null&&(o===null||ga.current!==null||o.memoizedState!==null)&&(ka=a)}function ym(a){Re(_i,_i.current),Re(ji,a),ka===null&&(ka=a)}function xv(a){a.tag===22?(Re(_i,_i.current),Re(ji,a),ka===null&&(ka=a)):ao()}function ao(){Re(_i,_i.current),Re(ji,ji.current)}function va(a){oe(ji),ka===a&&(ka=null),oe(_i)}var _i=X(0);function Hf(a){for(var o=a;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Gb(f)||jb(f)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ks=0,Qt=null,Jn=null,zi=null,kf=!1,Dr=!1,Fl=!1,Gf=0,Zu=0,Nr=null,bb=0;function xi(){throw Error(i(321))}function _m(a,o){if(o===null)return!1;for(var f=0;f<o.length&&f<a.length;f++)if(!hi(a[f],o[f]))return!1;return!0}function xm(a,o,f,m,b,w){return Ks=w,Qt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,k.H=a===null||a.memoizedState===null?Vv:Uc,Fl=!1,w=f(m,b),Fl=!1,Dr&&(w=Sv(o,f,m,b)),bv(a),w}function bv(a){k.H=th;var o=Jn!==null&&Jn.next!==null;if(Ks=0,zi=Jn=Qt=null,kf=!1,Zu=0,Nr=null,o)throw Error(i(300));a===null||fi||(a=a.dependencies,a!==null&&Ac(a)&&(fi=!0))}function Sv(a,o,f,m){Qt=a;var b=0;do{if(Dr&&(Nr=null),Zu=0,Dr=!1,25<=b)throw Error(i(301));if(b+=1,zi=Jn=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}k.H=nh,w=o(f,m)}while(Dr);return w}function Sb(){var a=k.H,o=a.useState()[0];return o=typeof o.then=="function"?Qu(o):o,a=a.useState()[0],(Jn!==null?Jn.memoizedState:null)!==a&&(Qt.flags|=1024),o}function bm(){var a=Gf!==0;return Gf=0,a}function Sm(a,o,f){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~f}function Em(a){if(kf){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}kf=!1}Ks=0,zi=Jn=Qt=null,Dr=!1,Zu=Gf=0,Nr=null}function Bs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Qt.memoizedState=zi=a:zi=zi.next=a,zi}function Ai(){if(Jn===null){var a=Qt.alternate;a=a!==null?a.memoizedState:null}else a=Jn.next;var o=zi===null?Qt.memoizedState:zi.next;if(o!==null)zi=o,Jn=a;else{if(a===null)throw Qt.alternate===null?Error(i(467)):Error(i(310));Jn=a,a={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},zi===null?Qt.memoizedState=zi=a:zi=zi.next=a}return zi}function Ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qu(a){var o=Zu;return Zu+=1,Nr===null&&(Nr=[]),a=hm(Nr,a,o),o=Qt,(zi===null?o.memoizedState:zi.next)===null&&(o=o.alternate,k.H=o===null||o.memoizedState===null?Vv:Uc),a}function jf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Qu(a);if(a.$$typeof===O)return ts(a)}throw Error(i(438,String(a)))}function Mm(a){var o=null,f=Qt.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var m=Qt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=Ju(),Qt.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(a),m=0;m<a;m++)f[m]=P;return o.index++,f}function ro(a,o){return typeof o=="function"?o(a):o}function qf(a){var o=Ai();return Tm(o,Jn,a)}function Tm(a,o,f){var m=a.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=f;var b=a.baseQueue,w=m.pending;if(w!==null){if(b!==null){var U=b.next;b.next=w.next,w.next=U}o.baseQueue=b=w,m.pending=null}if(w=a.baseState,b===null)a.memoizedState=w;else{o=b.next;var j=U=null,re=null,Te=o,He=!1;do{var We=Te.lane&-536870913;if(We!==Te.lane?(wn&We)===We:(Ks&We)===We){var Ce=Te.revertLane;if(Ce===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),We===io&&(He=!0);else if((Ks&Ce)===Ce){Te=Te.next,Ce===io&&(He=!0);continue}else We={lane:0,revertLane:Te.revertLane,gesture:null,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null},re===null?(j=re=We,U=w):re=re.next=We,Qt.lanes|=Ce,wa|=Ce;We=Te.action,Fl&&f(w,We),w=Te.hasEagerState?Te.eagerState:f(w,We)}else Ce={lane:We,revertLane:Te.revertLane,gesture:Te.gesture,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null},re===null?(j=re=Ce,U=w):re=re.next=Ce,Qt.lanes|=We,wa|=We;Te=Te.next}while(Te!==null&&Te!==o);if(re===null?U=w:re.next=j,!hi(w,a.memoizedState)&&(fi=!0,He&&(f=ar,f!==null)))throw f;a.memoizedState=w,a.baseState=U,a.baseQueue=re,m.lastRenderedState=w}return b===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Xf(a){var o=Ai(),f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=a;var m=f.dispatch,b=f.pending,w=o.memoizedState;if(b!==null){f.pending=null;var U=b=b.next;do w=a(w,U.action),U=U.next;while(U!==b);hi(w,o.memoizedState)||(fi=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),f.lastRenderedState=w}return[w,m]}function wm(a,o,f){var m=Qt,b=Ai(),w=An;if(w){if(f===void 0)throw Error(i(407));f=f()}else f=o();var U=!hi((Jn||b).memoizedState,f);if(U&&(b.memoizedState=f,fi=!0),b=b.queue,Dm(Cm.bind(null,m,b,a),[a]),b.getSnapshot!==o||U||zi!==null&&zi.memoizedState.tag&1){if(m.flags|=2048,Dc(9,{destroy:void 0},Am.bind(null,m,b,f,o),null),qn===null)throw Error(i(349));w||(Ks&127)!==0||Ev(m,o,f)}return f}function Ev(a,o,f){a.flags|=16384,a={getSnapshot:o,value:f},o=Qt.updateQueue,o===null?(o=Ju(),Qt.updateQueue=o,o.stores=[a]):(f=o.stores,f===null?o.stores=[a]:f.push(a))}function Am(a,o,f,m){o.value=f,o.getSnapshot=m,Rm(o)&&Wf(a)}function Cm(a,o,f){return f(function(){Rm(o)&&Wf(a)})}function Rm(a){var o=a.getSnapshot;a=a.value;try{var f=o();return!hi(a,f)}catch{return!0}}function Wf(a){var o=Wo(a,2);o!==null&&h(o,a,2)}function $u(a){var o=Bs();if(typeof a=="function"){var f=a;if(a=f(),Fl){ht(!0);try{f()}finally{ht(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:a},o}function Mv(a,o,f,m){return a.baseState=f,Tm(a,Jn,typeof m=="function"?m:ro)}function Eb(a,o,f,m,b){if(oo(a))throw Error(i(485));if(a=o.action,a!==null){var w={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){w.listeners.push(U)}};k.T!==null?f(!0):w.isTransition=!1,m(w),f=o.pending,f===null?(w.next=o.pending=w,Tv(o,w)):(w.next=f.next,o.pending=f.next=w)}}function Tv(a,o){var f=o.action,m=o.payload,b=a.state;if(o.isTransition){var w=k.T,U={};k.T=U;try{var j=f(b,m),re=k.S;re!==null&&re(U,j),wv(a,o,j)}catch(Te){Yf(a,o,Te)}finally{w!==null&&U.types!==null&&(w.types=U.types),k.T=w}}else try{w=f(b,m),wv(a,o,w)}catch(Te){Yf(a,o,Te)}}function wv(a,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){Om(a,o,m)},function(m){return Yf(a,o,m)}):Om(a,o,f)}function Om(a,o,f){o.status="fulfilled",o.value=f,Av(o),a.state=f,o=a.pending,o!==null&&(f=o.next,f===o?a.pending=null:(f=f.next,o.next=f,Tv(a,f)))}function Yf(a,o,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=f,Av(o),o=o.next;while(o!==m)}a.action=null}function Av(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Cv(a,o){return o}function Rv(a,o){if(An){var f=qn.formState;if(f!==null){e:{var m=Qt;if(An){if(ii){t:{for(var b=ii,w=es;b.nodeType!==8;){if(!w){b=null;break t}if(b=zr(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){ii=zr(b.nextSibling),m=b.data==="F!";break e}}Tn(m)}m=!1}m&&(o=f[0])}}return f=Bs(),f.memoizedState=f.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cv,lastRenderedState:o},f.queue=m,f=Fv.bind(null,Qt,m),m.dispatch=f,m=$u(!1),w=eh.bind(null,Qt,!1,m.queue),m=Bs(),b={state:o,dispatch:null,action:a,pending:null},m.queue=b,f=Eb.bind(null,Qt,b,w,f),b.dispatch=f,m.memoizedState=a,[o,f,!1]}function Ov(a){var o=Ai();return Dv(o,Jn,a)}function Dv(a,o,f){if(o=Tm(a,o,Cv)[0],a=qf(ro)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Qu(o)}catch(U){throw U===Qo?rr:U}else m=o;o=Ai();var b=o.queue,w=b.dispatch;return f!==o.memoizedState&&(Qt.flags|=2048,Dc(9,{destroy:void 0},Mb.bind(null,b,f),null)),[m,w,a]}function Mb(a,o){a.action=o}function Nv(a){var o=Ai(),f=Jn;if(f!==null)return Dv(o,f,a);Ai(),o=o.memoizedState,f=Ai();var m=f.queue.dispatch;return f.memoizedState=a,[o,m,!1]}function Dc(a,o,f,m){return a={tag:a,create:f,deps:m,inst:o,next:null},o=Qt.updateQueue,o===null&&(o=Ju(),Qt.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,o.lastEffect=a),a}function Uv(){return Ai().memoizedState}function Kf(a,o,f,m){var b=Bs();Qt.flags|=a,b.memoizedState=Dc(1|o,{destroy:void 0},f,m===void 0?null:m)}function Zf(a,o,f,m){var b=Ai();m=m===void 0?null:m;var w=b.memoizedState.inst;Jn!==null&&m!==null&&_m(m,Jn.memoizedState.deps)?b.memoizedState=Dc(o,w,f,m):(Qt.flags|=a,b.memoizedState=Dc(1|o,w,f,m))}function Lv(a,o){Kf(8390656,8,a,o)}function Dm(a,o){Zf(2048,8,a,o)}function Iv(a){Qt.flags|=4;var o=Qt.updateQueue;if(o===null)o=Ju(),Qt.updateQueue=o,o.events=[a];else{var f=o.events;f===null?o.events=[a]:f.push(a)}}function Pv(a){var o=Ai().memoizedState;return Iv({ref:o,nextImpl:a}),function(){if((Rn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Bv(a,o){return Zf(4,2,a,o)}function ya(a,o){return Zf(4,4,a,o)}function Nm(a,o){if(typeof o=="function"){a=a();var f=o(a);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Jf(a,o,f){f=f!=null?f.concat([a]):null,Zf(4,4,Nm.bind(null,o,a),f)}function Qf(){}function Um(a,o){var f=Ai();o=o===void 0?null:o;var m=f.memoizedState;return o!==null&&_m(o,m[1])?m[0]:(f.memoizedState=[a,o],a)}function Lm(a,o){var f=Ai();o=o===void 0?null:o;var m=f.memoizedState;if(o!==null&&_m(o,m[1]))return m[0];if(m=a(),Fl){ht(!0);try{a()}finally{ht(!1)}}return f.memoizedState=[m,o],m}function Im(a,o,f){return f===void 0||(Ks&1073741824)!==0&&(wn&261930)===0?a.memoizedState=o:(a.memoizedState=f,a=u(),Qt.lanes|=a,wa|=a,f)}function Pm(a,o,f,m){return hi(f,o)?f:ga.current!==null?(a=Im(a,f,m),hi(a,o)||(fi=!0),a):(Ks&42)===0||(Ks&1073741824)!==0&&(wn&261930)===0?(fi=!0,a.memoizedState=f):(a=u(),Qt.lanes|=a,wa|=a,o)}function Bm(a,o,f,m,b){var w=te.p;te.p=w!==0&&8>w?w:8;var U=k.T,j={};k.T=j,eh(a,!1,o,f);try{var re=b(),Te=k.S;if(Te!==null&&Te(j,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var He=um(re,m);Nc(a,o,He,Fs(a))}else Nc(a,o,m,Fs(a))}catch(We){Nc(a,o,{then:function(){},status:"rejected",reason:We},Fs())}finally{te.p=w,U!==null&&j.types!==null&&(U.types=j.types),k.T=U}}function Tb(){}function zm(a,o,f,m){if(a.tag!==5)throw Error(i(476));var b=zv(a).queue;Bm(a,b,o,Y,f===null?Tb:function(){return Fm(a),f(m)})}function zv(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:Y},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:f},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Fm(a){var o=zv(a);o.next===null&&(o=a.alternate.memoizedState),Nc(a,o.next.queue,{},Fs())}function Vm(){return ts($m)}function ds(){return Ai().memoizedState}function Hm(){return Ai().memoizedState}function wb(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var f=Fs();a=Rr(f);var m=so(o,a,f);m!==null&&(h(m,o,f),nl(m,o,f)),o={cache:om()},a.payload=o;return}o=o.return}}function Ab(a,o,f){var m=Fs();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},oo(a)?Vl(o,f):(f=Mc(a,o,f,m),f!==null&&(h(f,a,m),Zs(f,o,m)))}function Fv(a,o,f){var m=Fs();Nc(a,o,f,m)}function Nc(a,o,f,m){var b={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(oo(a))Vl(o,b);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var U=o.lastRenderedState,j=w(U,f);if(b.hasEagerState=!0,b.eagerState=j,hi(j,U))return Fu(a,o,b,0),qn===null&&Xo(),!1}catch{}finally{}if(f=Mc(a,o,b,m),f!==null)return h(f,a,m),Zs(f,o,m),!0}return!1}function eh(a,o,f,m){if(m={lane:2,revertLane:Db(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},oo(a)){if(o)throw Error(i(479))}else o=Mc(a,f,m,2),o!==null&&h(o,a,2)}function oo(a){var o=a.alternate;return a===Qt||o!==null&&o===Qt}function Vl(a,o){Dr=kf=!0;var f=a.pending;f===null?o.next=o:(o.next=f.next,f.next=o),a.pending=o}function Zs(a,o,f){if((f&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,f|=m,o.lanes=f,Wr(a,f)}}var th={readContext:ts,use:jf,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useLayoutEffect:xi,useInsertionEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useSyncExternalStore:xi,useId:xi,useHostTransitionStatus:xi,useFormState:xi,useActionState:xi,useOptimistic:xi,useMemoCache:xi,useCacheRefresh:xi};th.useEffectEvent=xi;var Vv={readContext:ts,use:jf,useCallback:function(a,o){return Bs().memoizedState=[a,o===void 0?null:o],a},useContext:ts,useEffect:Lv,useImperativeHandle:function(a,o,f){f=f!=null?f.concat([a]):null,Kf(4194308,4,Nm.bind(null,o,a),f)},useLayoutEffect:function(a,o){return Kf(4194308,4,a,o)},useInsertionEffect:function(a,o){Kf(4,2,a,o)},useMemo:function(a,o){var f=Bs();o=o===void 0?null:o;var m=a();if(Fl){ht(!0);try{a()}finally{ht(!1)}}return f.memoizedState=[m,o],m},useReducer:function(a,o,f){var m=Bs();if(f!==void 0){var b=f(o);if(Fl){ht(!0);try{f(o)}finally{ht(!1)}}}else b=o;return m.memoizedState=m.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},m.queue=a,a=a.dispatch=Ab.bind(null,Qt,a),[m.memoizedState,a]},useRef:function(a){var o=Bs();return a={current:a},o.memoizedState=a},useState:function(a){a=$u(a);var o=a.queue,f=Fv.bind(null,Qt,o);return o.dispatch=f,[a.memoizedState,f]},useDebugValue:Qf,useDeferredValue:function(a,o){var f=Bs();return Im(f,a,o)},useTransition:function(){var a=$u(!1);return a=Bm.bind(null,Qt,a.queue,!0,!1),Bs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,f){var m=Qt,b=Bs();if(An){if(f===void 0)throw Error(i(407));f=f()}else{if(f=o(),qn===null)throw Error(i(349));(wn&127)!==0||Ev(m,o,f)}b.memoizedState=f;var w={value:f,getSnapshot:o};return b.queue=w,Lv(Cm.bind(null,m,w,a),[a]),m.flags|=2048,Dc(9,{destroy:void 0},Am.bind(null,m,w,f,o),null),f},useId:function(){var a=Bs(),o=qn.identifierPrefix;if(An){var f=Ar,m=wr;f=(m&~(1<<32-Ft(m)-1)).toString(32)+f,o="_"+o+"R_"+f,f=Gf++,0<f&&(o+="H"+f.toString(32)),o+="_"}else f=bb++,o="_"+o+"r_"+f.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Vm,useFormState:Rv,useActionState:Rv,useOptimistic:function(a){var o=Bs();o.memoizedState=o.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=eh.bind(null,Qt,!0,f),f.dispatch=o,[a,o]},useMemoCache:Mm,useCacheRefresh:function(){return Bs().memoizedState=wb.bind(null,Qt)},useEffectEvent:function(a){var o=Bs(),f={impl:a};return o.memoizedState=f,function(){if((Rn&2)!==0)throw Error(i(440));return f.impl.apply(void 0,arguments)}}},Uc={readContext:ts,use:jf,useCallback:Um,useContext:ts,useEffect:Dm,useImperativeHandle:Jf,useInsertionEffect:Bv,useLayoutEffect:ya,useMemo:Lm,useReducer:qf,useRef:Uv,useState:function(){return qf(ro)},useDebugValue:Qf,useDeferredValue:function(a,o){var f=Ai();return Pm(f,Jn.memoizedState,a,o)},useTransition:function(){var a=qf(ro)[0],o=Ai().memoizedState;return[typeof a=="boolean"?a:Qu(a),o]},useSyncExternalStore:wm,useId:ds,useHostTransitionStatus:Vm,useFormState:Ov,useActionState:Ov,useOptimistic:function(a,o){var f=Ai();return Mv(f,Jn,a,o)},useMemoCache:Mm,useCacheRefresh:Hm};Uc.useEffectEvent=Pv;var nh={readContext:ts,use:jf,useCallback:Um,useContext:ts,useEffect:Dm,useImperativeHandle:Jf,useInsertionEffect:Bv,useLayoutEffect:ya,useMemo:Lm,useReducer:Xf,useRef:Uv,useState:function(){return Xf(ro)},useDebugValue:Qf,useDeferredValue:function(a,o){var f=Ai();return Jn===null?Im(f,a,o):Pm(f,Jn.memoizedState,a,o)},useTransition:function(){var a=Xf(ro)[0],o=Ai().memoizedState;return[typeof a=="boolean"?a:Qu(a),o]},useSyncExternalStore:wm,useId:ds,useHostTransitionStatus:Vm,useFormState:Nv,useActionState:Nv,useOptimistic:function(a,o){var f=Ai();return Jn!==null?Mv(f,Jn,a,o):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Mm,useCacheRefresh:Hm};nh.useEffectEvent=Pv;function Lc(a,o,f,m){o=a.memoizedState,f=f(m,o),f=f==null?o:y({},o,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var ih={enqueueSetState:function(a,o,f){a=a._reactInternals;var m=Fs(),b=Rr(m);b.payload=o,f!=null&&(b.callback=f),o=so(a,b,m),o!==null&&(h(o,a,m),nl(o,a,m))},enqueueReplaceState:function(a,o,f){a=a._reactInternals;var m=Fs(),b=Rr(m);b.tag=1,b.payload=o,f!=null&&(b.callback=f),o=so(a,b,m),o!==null&&(h(o,a,m),nl(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var f=Fs(),m=Rr(f);m.tag=2,o!=null&&(m.callback=o),o=so(a,m,f),o!==null&&(h(o,a,f),nl(o,a,f))}};function Hv(a,o,f,m,b,w,U){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,w,U):o.prototype&&o.prototype.isPureReactComponent?!yc(f,m)||!yc(b,w):!0}function kv(a,o,f,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,m),o.state!==a&&ih.enqueueReplaceState(o,o.state,null)}function ps(a,o){var f=o;if("ref"in o){f={};for(var m in o)m!=="ref"&&(f[m]=o[m])}if(a=a.defaultProps){f===o&&(f=y({},f));for(var b in a)f[b]===void 0&&(f[b]=a[b])}return f}function km(a){qo(a)}function Gv(a){console.error(a)}function $f(a){qo(a)}function ed(a,o){try{var f=a.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function jv(a,o,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Gm(a,o,f){return f=Rr(f),f.tag=3,f.payload={element:null},f.callback=function(){ed(a,o)},f}function Ic(a){return a=Rr(a),a.tag=3,a}function Js(a,o,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;a.payload=function(){return b(w)},a.callback=function(){jv(o,f,m)}}var U=f.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(a.callback=function(){jv(o,f,m),typeof b!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function _a(a,o,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=f.alternate,o!==null&&Zo(o,f,b,!0),f=ji.current,f!==null){switch(f.tag){case 31:case 13:return ka===null?sn():f.alternate===null&&Xn===0&&(Xn=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===Xu?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([m]):o.add(m),Cb(a,m,b)),!1;case 22:return f.flags|=65536,m===Xu?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([m]):f.add(m)),Cb(a,m,b)),!1}throw Error(i(435,f.tag))}return Cb(a,m,b),sn(),!1}if(An)return o=ji.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,m!==Lf&&(a=Error(i(422),{cause:m}),Gu(Ws(a,f)))):(m!==Lf&&(o=Error(i(423),{cause:m}),Gu(Ws(o,f))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,m=Ws(m,f),b=Gm(a.stateNode,m,b),Vf(a,b),Xn!==4&&(Xn=2)),!1;var w=Error(i(520),{cause:m});if(w=Ws(w,f),hr===null?hr=[w]:hr.push(w),Xn!==4&&(Xn=2),o===null)return!0;m=Ws(m,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,a=b&-b,f.lanes|=a,a=Gm(f.stateNode,m,a),Vf(f,a),!1;case 1:if(o=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Br===null||!Br.has(w))))return f.flags|=65536,b&=-b,f.lanes|=b,b=Ic(b),Js(b,a,f,m),Vf(f,b),!1}f=f.return}while(f!==null);return!1}var td=Error(i(461)),fi=!1;function bi(a,o,f,m){o.child=a===null?_v(o,null,f,m):Bl(o,a.child,f,m)}function sh(a,o,f,m,b){f=f.render;var w=o.ref;if("ref"in m){var U={};for(var j in m)j!=="ref"&&(U[j]=m[j])}else U=m;return Ll(o),m=xm(a,o,f,U,w,b),j=bm(),a!==null&&!fi?(Sm(a,o,b),cr(a,o,b)):(An&&j&&Uf(o),o.flags|=1,bi(a,o,m,b),o.child)}function ah(a,o,f,m,b){if(a===null){var w=f.type;return typeof w=="function"&&!Is(w)&&w.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=w,xa(a,o,w,m,b)):(a=Vu(f.type,null,m,o,o.mode,b),a.ref=o.ref,a.return=o,o.child=a)}if(w=a.child,!al(a,b)){var U=w.memoizedProps;if(f=f.compare,f=f!==null?f:yc,f(U,m)&&a.ref===o.ref)return cr(a,o,b)}return o.flags|=1,a=Mr(w,m),a.ref=o.ref,a.return=o,o.child=a}function xa(a,o,f,m,b){if(a!==null){var w=a.memoizedProps;if(yc(w,m)&&a.ref===o.ref)if(fi=!1,o.pendingProps=m=w,al(a,b))(a.flags&131072)!==0&&(fi=!0);else return o.lanes=a.lanes,cr(a,o,b)}return Pc(a,o,f,m,b)}function ba(a,o,f,m){var b=m.children,w=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,a!==null){for(m=o.child=a.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,o.child=null;return Ur(a,o,w,f,m)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Rc(o,w!==null?w.cachePool:null),w!==null?gm(o,w):vm(),xv(o);else return m=o.lanes=536870912,Ur(a,o,w!==null?w.baseLanes|f:f,f,m)}else w!==null?(Rc(o,w.cachePool),gm(o,w),ao(),o.memoizedState=null):(a!==null&&Rc(o,null),vm(),ao());return bi(a,o,b,f),o.child}function or(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ur(a,o,f,m,b){var w=Cr();return w=w===null?null:{parent:Vt._currentValue,pool:w},o.memoizedState={baseLanes:f,cachePool:w},a!==null&&Rc(o,null),vm(),xv(o),a!==null&&Zo(a,o,m,!0),o.childLanes=b,null}function Ga(a,o){return o=Bc({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function ns(a,o,f){return Bl(o,a.child,null,f),a=Ga(o,o.pendingProps),a.flags|=2,va(o),o.memoizedState=null,a}function rh(a,o,f){var m=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(An){if(m.mode==="hidden")return a=Ga(o,m),o.lanes=536870912,or(null,a);if(ym(o),(a=ii)?(a=$T(a,es),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Tr!==null?{id:wr,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},f=dv(a),f.return=o,o.child=f,$i=o,ii=null)):a=null,a===null)throw Tn(o);return o.lanes=536870912,null}return Ga(o,m)}var w=a.memoizedState;if(w!==null){var U=w.dehydrated;if(ym(o),b)if(o.flags&256)o.flags&=-257,o=ns(a,o,f);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(i(558));else if(fi||Zo(a,o,f,!1),b=(f&a.childLanes)!==0,fi||b){if(m=qn,m!==null&&(U=os(m,f),U!==0&&U!==w.retryLane))throw w.retryLane=U,Wo(a,U),h(m,a,U),td;sn(),o=ns(a,o,f)}else a=w.treeContext,ii=zr(U.nextSibling),$i=o,An=!0,$r=null,es=!1,a!==null&&ku(o,a),o=Ga(o,m),o.flags|=4096;return o}return a=Mr(a.child,{mode:m.mode,children:m.children}),a.ref=o.ref,o.child=a,a.return=o,a}function lr(a,o){var f=o.ref;if(f===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(i(284));(a===null||a.ref!==f)&&(o.flags|=4194816)}}function Pc(a,o,f,m,b){return Ll(o),f=xm(a,o,f,m,void 0,b),m=bm(),a!==null&&!fi?(Sm(a,o,b),cr(a,o,b)):(An&&m&&Uf(o),o.flags|=1,bi(a,o,f,b),o.child)}function Ts(a,o,f,m,b,w){return Ll(o),o.updateQueue=null,f=Sv(o,m,f,b),bv(a),m=bm(),a!==null&&!fi?(Sm(a,o,w),cr(a,o,w)):(An&&m&&Uf(o),o.flags|=1,bi(a,o,f,w),o.child)}function ms(a,o,f,m,b){if(Ll(o),o.stateNode===null){var w=Yo,U=f.contextType;typeof U=="object"&&U!==null&&(w=ts(U)),w=new f(m,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=ih,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=m,w.state=o.memoizedState,w.refs={},dm(o),U=f.contextType,w.context=typeof U=="object"&&U!==null?ts(U):Yo,w.state=o.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(Lc(o,f,U,m),w.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(U=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),U!==w.state&&ih.enqueueReplaceState(w,w.state,null),zl(o,m,w,b),Ku(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){w=o.stateNode;var j=o.memoizedProps,re=ps(f,j);w.props=re;var Te=w.context,He=f.contextType;U=Yo,typeof He=="object"&&He!==null&&(U=ts(He));var We=f.getDerivedStateFromProps;He=typeof We=="function"||typeof w.getSnapshotBeforeUpdate=="function",j=o.pendingProps!==j,He||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j||Te!==U)&&kv(o,w,m,U),tl=!1;var Ce=o.memoizedState;w.state=Ce,zl(o,m,w,b),Ku(),Te=o.memoizedState,j||Ce!==Te||tl?(typeof We=="function"&&(Lc(o,f,We,m),Te=o.memoizedState),(re=tl||Hv(o,f,re,m,Ce,Te,U))?(He||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Te),w.props=m,w.state=Te,w.context=U,m=re):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{w=o.stateNode,pm(a,o),U=o.memoizedProps,He=ps(f,U),w.props=He,We=o.pendingProps,Ce=w.context,Te=f.contextType,re=Yo,typeof Te=="object"&&Te!==null&&(re=ts(Te)),j=f.getDerivedStateFromProps,(Te=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U!==We||Ce!==re)&&kv(o,w,m,re),tl=!1,Ce=o.memoizedState,w.state=Ce,zl(o,m,w,b),Ku();var Le=o.memoizedState;U!==We||Ce!==Le||tl||a!==null&&a.dependencies!==null&&Ac(a.dependencies)?(typeof j=="function"&&(Lc(o,f,j,m),Le=o.memoizedState),(He=tl||Hv(o,f,He,m,Ce,Le,re)||a!==null&&a.dependencies!==null&&Ac(a.dependencies))?(Te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,Le,re),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,Le,re)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||U===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||U===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Le),w.props=m,w.state=Le,w.context=re,m=He):(typeof w.componentDidUpdate!="function"||U===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||U===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=1024),m=!1)}return w=m,lr(a,o),m=(o.flags&128)!==0,w||m?(w=o.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,a!==null&&m?(o.child=Bl(o,a.child,null,b),o.child=Bl(o,null,f,b)):bi(a,o,f,b),o.memoizedState=w.state,a=o.child):a=cr(a,o,b),a}function Nn(a,o,f,m){return Ul(),o.flags|=256,bi(a,o,f,m),o.child}var Sa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ja(a){return{baseLanes:a,cachePool:Bf()}}function oh(a,o,f){return a=a!==null?a.childLanes&~f:0,o&&(a|=On),a}function Ea(a,o,f){var m=o.pendingProps,b=!1,w=(o.flags&128)!==0,U;if((U=w)||(U=a!==null&&a.memoizedState===null?!1:(_i.current&2)!==0),U&&(b=!0,o.flags&=-129),U=(o.flags&32)!==0,o.flags&=-33,a===null){if(An){if(b?il(o):ao(),(a=ii)?(a=$T(a,es),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Tr!==null?{id:wr,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},f=dv(a),f.return=o,o.child=f,$i=o,ii=null)):a=null,a===null)throw Tn(o);return jb(a)?o.lanes=32:o.lanes=536870912,null}var j=m.children;return m=m.fallback,b?(ao(),b=o.mode,j=Bc({mode:"hidden",children:j},b),m=Jr(m,b,f,null),j.return=o,m.return=o,j.sibling=m,o.child=j,m=o.child,m.memoizedState=ja(f),m.childLanes=oh(a,U,f),o.memoizedState=Sa,or(null,m)):(il(o),sl(o,j))}var re=a.memoizedState;if(re!==null&&(j=re.dehydrated,j!==null)){if(w)o.flags&256?(il(o),o.flags&=-257,o=zc(a,o,f)):o.memoizedState!==null?(ao(),o.child=a.child,o.flags|=128,o=null):(ao(),j=m.fallback,b=o.mode,m=Bc({mode:"visible",children:m.children},b),j=Jr(j,b,f,null),j.flags|=2,m.return=o,j.return=o,m.sibling=j,o.child=m,Bl(o,a.child,null,f),m=o.child,m.memoizedState=ja(f),m.childLanes=oh(a,U,f),o.memoizedState=Sa,o=or(null,m));else if(il(o),jb(j)){if(U=j.nextSibling&&j.nextSibling.dataset,U)var Te=U.dgst;U=Te,m=Error(i(419)),m.stack="",m.digest=U,Gu({value:m,source:null,stack:null}),o=zc(a,o,f)}else if(fi||Zo(a,o,f,!1),U=(f&a.childLanes)!==0,fi||U){if(U=qn,U!==null&&(m=os(U,f),m!==0&&m!==re.retryLane))throw re.retryLane=m,Wo(a,m),h(U,a,m),td;Gb(j)||sn(),o=zc(a,o,f)}else Gb(j)?(o.flags|=192,o.child=a.child,o=null):(a=re.treeContext,ii=zr(j.nextSibling),$i=o,An=!0,$r=null,es=!1,a!==null&&ku(o,a),o=sl(o,m.children),o.flags|=4096);return o}return b?(ao(),j=m.fallback,b=o.mode,re=a.child,Te=re.sibling,m=Mr(re,{mode:"hidden",children:m.children}),m.subtreeFlags=re.subtreeFlags&65011712,Te!==null?j=Mr(Te,j):(j=Jr(j,b,f,null),j.flags|=2),j.return=o,m.return=o,m.sibling=j,o.child=m,or(null,m),m=o.child,j=a.child.memoizedState,j===null?j=ja(f):(b=j.cachePool,b!==null?(re=Vt._currentValue,b=b.parent!==re?{parent:re,pool:re}:b):b=Bf(),j={baseLanes:j.baseLanes|f,cachePool:b}),m.memoizedState=j,m.childLanes=oh(a,U,f),o.memoizedState=Sa,or(a.child,m)):(il(o),f=a.child,a=f.sibling,f=Mr(f,{mode:"visible",children:m.children}),f.return=o,f.sibling=null,a!==null&&(U=o.deletions,U===null?(o.deletions=[a],o.flags|=16):U.push(a)),o.child=f,o.memoizedState=null,f)}function sl(a,o){return o=Bc({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Bc(a,o){return a=Ls(22,a,null,o),a.lanes=0,a}function zc(a,o,f){return Bl(o,a.child,null,f),a=sl(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Hl(a,o,f){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),no(a.return,o,f)}function lh(a,o,f,m,b,w){var U=a.memoizedState;U===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b,treeForkCount:w}:(U.isBackwards=o,U.rendering=null,U.renderingStartTime=0,U.last=m,U.tail=f,U.tailMode=b,U.treeForkCount=w)}function ch(a,o,f){var m=o.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var U=_i.current,j=(U&2)!==0;if(j?(U=U&1|2,o.flags|=128):U&=1,Re(_i,U),bi(a,o,m,f),m=An?wc:0,!j&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Hl(a,f,o);else if(a.tag===19)Hl(a,f,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(b){case"forwards":for(f=o.child,b=null;f!==null;)a=f.alternate,a!==null&&Hf(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=o.child,o.child=null):(b=f.sibling,f.sibling=null),lh(o,!1,b,f,w,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=o.child,o.child=null;b!==null;){if(a=b.alternate,a!==null&&Hf(a)===null){o.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}lh(o,!0,f,null,w,m);break;case"together":lh(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function cr(a,o,f){if(a!==null&&(o.dependencies=a.dependencies),wa|=o.lanes,(f&o.childLanes)===0)if(a!==null){if(Zo(a,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(i(153));if(o.child!==null){for(a=o.child,f=Mr(a,a.pendingProps),o.child=f,f.return=o;a.sibling!==null;)a=a.sibling,f=f.sibling=Mr(a,a.pendingProps),f.return=o;f.sibling=null}return o.child}function al(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Ac(a)))}function uh(a,o,f){switch(o.tag){case 3:rt(o,o.stateNode.containerInfo),to(o,Vt,a.memoizedState.cache),Ul();break;case 27:case 5:wt(o);break;case 4:rt(o,o.stateNode.containerInfo);break;case 10:to(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ym(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(il(o),o.flags|=128,null):(f&o.child.childLanes)!==0?Ea(a,o,f):(il(o),a=cr(a,o,f),a!==null?a.sibling:null);il(o);break;case 19:var b=(a.flags&128)!==0;if(m=(f&o.childLanes)!==0,m||(Zo(a,o,f,!1),m=(f&o.childLanes)!==0),b){if(m)return ch(a,o,f);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Re(_i,_i.current),m)break;return null;case 22:return o.lanes=0,ba(a,o,f,o.pendingProps);case 24:to(o,Vt,a.memoizedState.cache)}return cr(a,o,f)}function nd(a,o,f){if(a!==null)if(a.memoizedProps!==o.pendingProps)fi=!0;else{if(!al(a,f)&&(o.flags&128)===0)return fi=!1,uh(a,o,f);fi=(a.flags&131072)!==0}else fi=!1,An&&(o.flags&1048576)!==0&&nm(o,wc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(a=Pl(o.elementType),o.type=a,typeof a=="function")Is(a)?(m=ps(a,m),o.tag=1,o=ms(null,o,a,m,f)):(o.tag=0,o=Pc(null,o,a,m,f));else{if(a!=null){var b=a.$$typeof;if(b===D){o.tag=11,o=sh(null,o,a,m,f);break e}else if(b===V){o.tag=14,o=ah(null,o,a,m,f);break e}}throw o=he(a)||a,Error(i(306,o,""))}}return o;case 0:return Pc(a,o,o.type,o.pendingProps,f);case 1:return m=o.type,b=ps(m,o.pendingProps),ms(a,o,m,b,f);case 3:e:{if(rt(o,o.stateNode.containerInfo),a===null)throw Error(i(387));m=o.pendingProps;var w=o.memoizedState;b=w.element,pm(a,o),zl(o,m,null,f);var U=o.memoizedState;if(m=U.cache,to(o,Vt,m),m!==w.cache&&Pf(o,[Vt],f,!0),Ku(),m=U.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:U.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=Nn(a,o,m,f);break e}else if(m!==b){b=Ws(Error(i(424)),o),Gu(b),o=Nn(a,o,m,f);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ii=zr(a.firstChild),$i=o,An=!0,$r=null,es=!0,f=_v(o,null,m,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ul(),m===b){o=cr(a,o,f);break e}bi(a,o,m,f)}o=o.child}return o;case 26:return lr(a,o),a===null?(f=aw(o.type,null,o.pendingProps,null))?o.memoizedState=f:An||(f=o.type,a=o.pendingProps,m=Qv(Pe.current).createElement(f),m[an]=o,m[B]=a,Vs(m,f,a),ce(m),o.stateNode=m):o.memoizedState=aw(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return wt(o),a===null&&An&&(m=o.stateNode=nw(o.type,o.pendingProps,Pe.current),$i=o,es=!0,b=ii,qc(o.type)?(qb=b,ii=zr(m.firstChild)):ii=b),bi(a,o,o.pendingProps.children,f),lr(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&An&&((b=m=ii)&&(m=TL(m,o.type,o.pendingProps,es),m!==null?(o.stateNode=m,$i=o,ii=zr(m.firstChild),es=!1,b=!0):b=!1),b||Tn(o)),wt(o),b=o.type,w=o.pendingProps,U=a!==null?a.memoizedProps:null,m=w.children,Vb(b,w)?m=null:U!==null&&Vb(b,U)&&(o.flags|=32),o.memoizedState!==null&&(b=xm(a,o,Sb,null,null,f),$m._currentValue=b),lr(a,o),bi(a,o,m,f),o.child;case 6:return a===null&&An&&((a=f=ii)&&(f=wL(f,o.pendingProps,es),f!==null?(o.stateNode=f,$i=o,ii=null,a=!0):a=!1),a||Tn(o)),null;case 13:return Ea(a,o,f);case 4:return rt(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=Bl(o,null,m,f):bi(a,o,m,f),o.child;case 11:return sh(a,o,o.type,o.pendingProps,f);case 7:return bi(a,o,o.pendingProps,f),o.child;case 8:return bi(a,o,o.pendingProps.children,f),o.child;case 12:return bi(a,o,o.pendingProps.children,f),o.child;case 10:return m=o.pendingProps,to(o,o.type,m.value),bi(a,o,m.children,f),o.child;case 9:return b=o.type._context,m=o.pendingProps.children,Ll(o),b=ts(b),m=m(b),o.flags|=1,bi(a,o,m,f),o.child;case 14:return ah(a,o,o.type,o.pendingProps,f);case 15:return xa(a,o,o.type,o.pendingProps,f);case 19:return ch(a,o,f);case 31:return rh(a,o,f);case 22:return ba(a,o,f,o.pendingProps);case 24:return Ll(o),m=ts(Vt),a===null?(b=Cr(),b===null&&(b=qn,w=om(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=f),b=w),o.memoizedState={parent:m,cache:b},dm(o),to(o,Vt,b)):((a.lanes&f)!==0&&(pm(a,o),zl(o,null,null,f),Ku()),b=a.memoizedState,w=o.memoizedState,b.parent!==m?(b={parent:m,cache:m},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),to(o,Vt,m)):(m=w.cache,to(o,Vt,m),m!==b.cache&&Pf(o,[Vt],f,!0))),bi(a,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Qs(a){a.flags|=4}function rl(a,o,f,m,b){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(b&335544128)===b)if(a.stateNode.complete)a.flags|=8192;else if(at())a.flags|=8192;else throw Xt=Xu,qu}else a.flags&=-16777217}function lo(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!uw(o))if(at())a.flags|=8192;else throw Xt=Xu,qu}function Fc(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ci():536870912,a.lanes|=o,Aa|=o)}function hh(a,o){if(!An)switch(a.tailMode){case"hidden":o=a.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Zn(a){var o=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(o)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=f,o}function jm(a,o,f){var m=o.pendingProps;switch(Ko(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(o),null;case 1:return Zn(o),null;case 3:return f=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Ha(Vt),Pt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Nl(o)?Qs(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,im())),Zn(o),null;case 26:var b=o.type,w=o.memoizedState;return a===null?(Qs(o),w!==null?(Zn(o),lo(o,w)):(Zn(o),rl(o,b,null,m,f))):w?w!==a.memoizedState?(Qs(o),Zn(o),lo(o,w)):(Zn(o),o.flags&=-16777217):(a=a.memoizedProps,a!==m&&Qs(o),Zn(o),rl(o,b,a,m,f)),null;case 27:if(on(o),f=Pe.current,b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&Qs(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Zn(o),null}a=le.current,Nl(o)?If(o):(a=nw(b,m,f),o.stateNode=a,Qs(o))}return Zn(o),null;case 5:if(on(o),b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&Qs(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Zn(o),null}if(w=le.current,Nl(o))If(o);else{var U=Qv(Pe.current);switch(w){case 1:w=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=U.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?U.createElement("select",{is:m.is}):U.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?U.createElement(b,{is:m.is}):U.createElement(b)}}w[an]=o,w[B]=m;e:for(U=o.child;U!==null;){if(U.tag===5||U.tag===6)w.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===o)break e;for(;U.sibling===null;){if(U.return===null||U.return===o)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}o.stateNode=w;e:switch(Vs(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Qs(o)}}return Zn(o),rl(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,f),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&Qs(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(a=Pe.current,Nl(o)){if(a=o.stateNode,f=o.memoizedProps,m=null,b=$i,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}a[an]=o,a=!!(a.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||qT(a.nodeValue,f)),a||Tn(o,!0)}else a=Qv(a).createTextNode(m),a[an]=o,o.stateNode=a}return Zn(o),null;case 31:if(f=o.memoizedState,a===null||a.memoizedState!==null){if(m=Nl(o),f!==null){if(a===null){if(!m)throw Error(i(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[an]=o}else Ul(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Zn(o),a=!1}else f=im(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),a=!0;if(!a)return o.flags&256?(va(o),o):(va(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Zn(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=Nl(o),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(i(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[an]=o}else Ul(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Zn(o),b=!1}else b=im(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(va(o),o):(va(o),null)}return va(o),(o.flags&128)!==0?(o.lanes=f,o):(f=m!==null,a=a!==null&&a.memoizedState!==null,f&&(m=o.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),f!==a&&f&&(o.child.flags|=8192),Fc(o,o.updateQueue),Zn(o),null);case 4:return Pt(),a===null&&Ib(o.stateNode.containerInfo),Zn(o),null;case 10:return Ha(o.type),Zn(o),null;case 19:if(oe(_i),m=o.memoizedState,m===null)return Zn(o),null;if(b=(o.flags&128)!==0,w=m.rendering,w===null)if(b)hh(m,!1);else{if(Xn!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(w=Hf(a),w!==null){for(o.flags|=128,hh(m,!1),a=w.updateQueue,o.updateQueue=a,Fc(o,a),o.subtreeFlags=0,a=f,f=o.child;f!==null;)Ss(f,a),f=f.sibling;return Re(_i,_i.current&1|2),An&&Qr(o,m.treeForkCount),o.child}a=a.sibling}m.tail!==null&&Be()>Ca&&(o.flags|=128,b=!0,hh(m,!1),o.lanes=4194304)}else{if(!b)if(a=Hf(w),a!==null){if(o.flags|=128,b=!0,a=a.updateQueue,o.updateQueue=a,Fc(o,a),hh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!An)return Zn(o),null}else 2*Be()-m.renderingStartTime>Ca&&f!==536870912&&(o.flags|=128,b=!0,hh(m,!1),o.lanes=4194304);m.isBackwards?(w.sibling=o.child,o.child=w):(a=m.last,a!==null?a.sibling=w:o.child=w,m.last=w)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Be(),a.sibling=null,f=_i.current,Re(_i,b?f&1|2:f&1),An&&Qr(o,m.treeForkCount),a):(Zn(o),null);case 22:case 23:return va(o),Ms(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(f&536870912)!==0&&(o.flags&128)===0&&(Zn(o),o.subtreeFlags&6&&(o.flags|=8192)):Zn(o),f=o.updateQueue,f!==null&&Fc(o,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048),a!==null&&oe(Jo),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Ha(Vt),Zn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function id(a,o){switch(Ko(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ha(Vt),Pt(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return on(o),null;case 31:if(o.memoizedState!==null){if(va(o),o.alternate===null)throw Error(i(340));Ul()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(va(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Ul()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return oe(_i),null;case 4:return Pt(),null;case 10:return Ha(o.type),null;case 22:case 23:return va(o),Ms(),a!==null&&oe(Jo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ha(Vt),null;case 25:return null;default:return null}}function kl(a,o){switch(Ko(o),o.tag){case 3:Ha(Vt),Pt();break;case 26:case 27:case 5:on(o);break;case 4:Pt();break;case 31:o.memoizedState!==null&&va(o);break;case 13:va(o);break;case 19:oe(_i);break;case 10:Ha(o.type);break;case 22:case 23:va(o),Ms(),a!==null&&oe(Jo);break;case 24:Ha(Vt)}}function Lr(a,o){try{var f=o.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&a)===a){m=void 0;var w=f.create,U=f.inst;m=w(),U.destroy=m}f=f.next}while(f!==b)}}catch(j){$n(o,o.return,j)}}function qa(a,o,f){try{var m=o.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&a)===a){var U=m.inst,j=U.destroy;if(j!==void 0){U.destroy=void 0,b=o;var re=f,Te=j;try{Te()}catch(He){$n(b,re,He)}}}m=m.next}while(m!==w)}}catch(He){$n(o,o.return,He)}}function ol(a){var o=a.updateQueue;if(o!==null){var f=a.stateNode;try{fs(o,f)}catch(m){$n(a,a.return,m)}}}function qm(a,o,f){f.props=ps(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){$n(a,o,m)}}function Ir(a,o){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(b){$n(a,o,b)}}function Ma(a,o){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){$n(a,o,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){$n(a,o,b)}else f.current=null}function Ta(a){var o=a.type,f=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){$n(a,a.return,b)}}function Xa(a,o,f){try{var m=a.stateNode;_L(m,a.type,f,o),m[B]=o}catch(b){$n(a,a.return,b)}}function Fi(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&qc(a.type)||a.tag===4}function Pr(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Fi(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&qc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function pn(a,o,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(a),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=br));else if(m!==4&&(m===27&&qc(a.type)&&(f=a.stateNode,o=null),a=a.child,a!==null))for(pn(a,o,f),a=a.sibling;a!==null;)pn(a,o,f),a=a.sibling}function Fn(a,o,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?f.insertBefore(a,o):f.appendChild(a);else if(m!==4&&(m===27&&qc(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Fn(a,o,f),a=a.sibling;a!==null;)Fn(a,o,f),a=a.sibling}function Ci(a){var o=a.stateNode,f=a.memoizedProps;try{for(var m=a.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);Vs(o,m,f),o[an]=a,o[B]=f}catch(w){$n(a,a.return,w)}}var Wa=!1,di=!1,co=!1,fh=typeof WeakSet=="function"?WeakSet:Set,Si=null;function Vc(a,o){if(a=a.containerInfo,zb=ay,a=Tf(a),_c(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var U=0,j=-1,re=-1,Te=0,He=0,We=a,Ce=null;t:for(;;){for(var Le;We!==f||b!==0&&We.nodeType!==3||(j=U+b),We!==w||m!==0&&We.nodeType!==3||(re=U+m),We.nodeType===3&&(U+=We.nodeValue.length),(Le=We.firstChild)!==null;)Ce=We,We=Le;for(;;){if(We===a)break t;if(Ce===f&&++Te===b&&(j=U),Ce===w&&++He===m&&(re=U),(Le=We.nextSibling)!==null)break;We=Ce,Ce=We.parentNode}We=Le}f=j===-1||re===-1?null:{start:j,end:re}}else f=null}f=f||{start:0,end:0}}else f=null;for(Fb={focusedElem:a,selectionRange:f},ay=!1,Si=o;Si!==null;)if(o=Si,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Si=a;else for(;Si!==null;){switch(o=Si,w=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(f=0;f<a.length;f++)b=a[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,f=o,b=w.memoizedProps,w=w.memoizedState,m=f.stateNode;try{var Ot=ps(f.type,b);a=m.getSnapshotBeforeUpdate(Ot,w),m.__reactInternalSnapshotBeforeUpdate=a}catch(Zt){$n(f,f.return,Zt)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,f=a.nodeType,f===9)kb(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":kb(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=o.sibling,a!==null){a.return=o.return,Si=a;break}Si=o.return}}function qv(a,o,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:uo(a,f),m&4&&Lr(5,f);break;case 1:if(uo(a,f),m&4)if(a=f.stateNode,o===null)try{a.componentDidMount()}catch(U){$n(f,f.return,U)}else{var b=ps(f.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(b,o,a.__reactInternalSnapshotBeforeUpdate)}catch(U){$n(f,f.return,U)}}m&64&&ol(f),m&512&&Ir(f,f.return);break;case 3:if(uo(a,f),m&64&&(a=f.updateQueue,a!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{fs(a,o)}catch(U){$n(f,f.return,U)}}break;case 27:o===null&&m&4&&Ci(f);case 26:case 5:uo(a,f),o===null&&m&4&&Ta(f),m&512&&Ir(f,f.return);break;case 12:uo(a,f);break;case 31:uo(a,f),m&4&&ad(a,f);break;case 13:uo(a,f),m&4&&Xm(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=oL.bind(null,f),AL(a,f))));break;case 22:if(m=f.memoizedState!==null||Wa,!m){o=o!==null&&o.memoizedState!==null||di,b=Wa;var w=di;Wa=m,(di=o)&&!w?jn(a,f,(f.subtreeFlags&8772)!==0):uo(a,f),Wa=b,di=w}break;case 30:break;default:uo(a,f)}}function sd(a){var o=a.alternate;o!==null&&(a.alternate=null,sd(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&$e(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Un=null,Vi=!1;function ws(a,o,f){for(f=f.child;f!==null;)ll(a,o,f),f=f.sibling}function ll(a,o,f){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Et,f)}catch{}switch(f.tag){case 26:di||Ma(f,o),ws(a,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:di||Ma(f,o);var m=Un,b=Vi;qc(f.type)&&(Un=f.stateNode,Vi=!1),ws(a,o,f),Zm(f.stateNode),Un=m,Vi=b;break;case 5:di||Ma(f,o);case 6:if(m=Un,b=Vi,Un=null,ws(a,o,f),Un=m,Vi=b,Un!==null)if(Vi)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(f.stateNode)}catch(w){$n(f,o,w)}else try{Un.removeChild(f.stateNode)}catch(w){$n(f,o,w)}break;case 18:Un!==null&&(Vi?(a=Un,JT(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),gd(a)):JT(Un,f.stateNode));break;case 4:m=Un,b=Vi,Un=f.stateNode.containerInfo,Vi=!0,ws(a,o,f),Un=m,Vi=b;break;case 0:case 11:case 14:case 15:qa(2,f,o),di||qa(4,f,o),ws(a,o,f);break;case 1:di||(Ma(f,o),m=f.stateNode,typeof m.componentWillUnmount=="function"&&qm(f,o,m)),ws(a,o,f);break;case 21:ws(a,o,f);break;case 22:di=(m=di)||f.memoizedState!==null,ws(a,o,f),di=m;break;default:ws(a,o,f)}}function ad(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{gd(a)}catch(f){$n(o,o.return,f)}}}function Xm(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{gd(a)}catch(f){$n(o,o.return,f)}}function Xv(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new fh),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new fh),o;default:throw Error(i(435,a.tag))}}function Ri(a,o){var f=Xv(a);o.forEach(function(m){if(!f.has(m)){f.add(m);var b=lL.bind(null,a,m);m.then(b,b)}})}function As(a,o){var f=o.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],w=a,U=o,j=U;e:for(;j!==null;){switch(j.tag){case 27:if(qc(j.type)){Un=j.stateNode,Vi=!1;break e}break;case 5:Un=j.stateNode,Vi=!1;break e;case 3:case 4:Un=j.stateNode.containerInfo,Vi=!0;break e}j=j.return}if(Un===null)throw Error(i(160));ll(w,U,b),Un=null,Vi=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)cl(o,a),o=o.sibling}var $s=null;function cl(a,o){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:As(o,a),Ei(a),m&4&&(qa(3,a,a.return),Lr(3,a),qa(5,a,a.return));break;case 1:As(o,a),Ei(a),m&512&&(di||f===null||Ma(f,f.return)),m&64&&Wa&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=$s;if(As(o,a),Ei(a),m&512&&(di||f===null||Ma(f,f.return)),m&4){var w=f!==null?f.memoizedState:null;if(m=a.memoizedState,f===null)if(m===null)if(a.stateNode===null){e:{m=a.type,f=a.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[tt]||w[an]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),Vs(w,m,f),w[an]=a,ce(w),m=w;break e;case"link":var U=lw("link","href",b).get(m+(f.href||""));if(U){for(var j=0;j<U.length;j++)if(w=U[j],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){U.splice(j,1);break t}}w=b.createElement(m),Vs(w,m,f),b.head.appendChild(w);break;case"meta":if(U=lw("meta","content",b).get(m+(f.content||""))){for(j=0;j<U.length;j++)if(w=U[j],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){U.splice(j,1);break t}}w=b.createElement(m),Vs(w,m,f),b.head.appendChild(w);break;default:throw Error(i(468,m))}w[an]=a,ce(w),m=w}a.stateNode=m}else cw(b,a.type,a.stateNode);else a.stateNode=ow(b,m,a.memoizedProps);else w!==m?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,m===null?cw(b,a.type,a.stateNode):ow(b,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Xa(a,a.memoizedProps,f.memoizedProps)}break;case 27:As(o,a),Ei(a),m&512&&(di||f===null||Ma(f,f.return)),f!==null&&m&4&&Xa(a,a.memoizedProps,f.memoizedProps);break;case 5:if(As(o,a),Ei(a),m&512&&(di||f===null||Ma(f,f.return)),a.flags&32){b=a.stateNode;try{Ns(b,"")}catch(Ot){$n(a,a.return,Ot)}}m&4&&a.stateNode!=null&&(b=a.memoizedProps,Xa(a,b,f!==null?f.memoizedProps:b)),m&1024&&(co=!0);break;case 6:if(As(o,a),Ei(a),m&4){if(a.stateNode===null)throw Error(i(162));m=a.memoizedProps,f=a.stateNode;try{f.nodeValue=m}catch(Ot){$n(a,a.return,Ot)}}break;case 3:if(ty=null,b=$s,$s=$v(o.containerInfo),As(o,a),$s=b,Ei(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{gd(o.containerInfo)}catch(Ot){$n(a,a.return,Ot)}co&&(co=!1,Wv(a));break;case 4:m=$s,$s=$v(a.stateNode.containerInfo),As(o,a),Ei(a),$s=m;break;case 12:As(o,a),Ei(a);break;case 31:As(o,a),Ei(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Ri(a,m)));break;case 13:As(o,a),Ei(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(po=Be()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Ri(a,m)));break;case 22:b=a.memoizedState!==null;var re=f!==null&&f.memoizedState!==null,Te=Wa,He=di;if(Wa=Te||b,di=He||re,As(o,a),di=He,Wa=Te,Ei(a),m&8192)e:for(o=a.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(f===null||re||Wa||di||Gl(a)),f=null,o=a;;){if(o.tag===5||o.tag===26){if(f===null){re=f=o;try{if(w=re.stateNode,b)U=w.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{j=re.stateNode;var We=re.memoizedProps.style,Ce=We!=null&&We.hasOwnProperty("display")?We.display:null;j.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(Ot){$n(re,re.return,Ot)}}}else if(o.tag===6){if(f===null){re=o;try{re.stateNode.nodeValue=b?"":re.memoizedProps}catch(Ot){$n(re,re.return,Ot)}}}else if(o.tag===18){if(f===null){re=o;try{var Le=re.stateNode;b?QT(Le,!0):QT(re.stateNode,!1)}catch(Ot){$n(re,re.return,Ot)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,Ri(a,f))));break;case 19:As(o,a),Ei(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Ri(a,m)));break;case 30:break;case 21:break;default:As(o,a),Ei(a)}}function Ei(a){var o=a.flags;if(o&2){try{for(var f,m=a.return;m!==null;){if(Fi(m)){f=m;break}m=m.return}if(f==null)throw Error(i(160));switch(f.tag){case 27:var b=f.stateNode,w=Pr(a);Fn(a,w,b);break;case 5:var U=f.stateNode;f.flags&32&&(Ns(U,""),f.flags&=-33);var j=Pr(a);Fn(a,j,U);break;case 3:case 4:var re=f.stateNode.containerInfo,Te=Pr(a);pn(a,Te,re);break;default:throw Error(i(161))}}catch(He){$n(a,a.return,He)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function Wv(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;Wv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function uo(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)qv(a,o.alternate,o),o=o.sibling}function Gl(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:qa(4,o,o.return),Gl(o);break;case 1:Ma(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&qm(o,o.return,f),Gl(o);break;case 27:Zm(o.stateNode);case 26:case 5:Ma(o,o.return),Gl(o);break;case 22:o.memoizedState===null&&Gl(o);break;case 30:Gl(o);break;default:Gl(o)}a=a.sibling}}function jn(a,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,b=a,w=o,U=w.flags;switch(w.tag){case 0:case 11:case 15:jn(b,w,f),Lr(4,w);break;case 1:if(jn(b,w,f),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Te){$n(m,m.return,Te)}if(m=w,b=m.updateQueue,b!==null){var j=m.stateNode;try{var re=b.shared.hiddenCallbacks;if(re!==null)for(b.shared.hiddenCallbacks=null,b=0;b<re.length;b++)Or(re[b],j)}catch(Te){$n(m,m.return,Te)}}f&&U&64&&ol(w),Ir(w,w.return);break;case 27:Ci(w);case 26:case 5:jn(b,w,f),f&&m===null&&U&4&&Ta(w),Ir(w,w.return);break;case 12:jn(b,w,f);break;case 31:jn(b,w,f),f&&U&4&&ad(b,w);break;case 13:jn(b,w,f),f&&U&4&&Xm(b,w);break;case 22:w.memoizedState===null&&jn(b,w,f),Ir(w,w.return);break;case 30:break;default:jn(b,w,f)}o=o.sibling}}function rd(a,o){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&hs(f))}function ho(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&hs(a))}function qi(a,o,f,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)gi(a,o,f,m),o=o.sibling}function gi(a,o,f,m){var b=o.flags;switch(o.tag){case 0:case 11:case 15:qi(a,o,f,m),b&2048&&Lr(9,o);break;case 1:qi(a,o,f,m);break;case 3:qi(a,o,f,m),b&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&hs(a)));break;case 12:if(b&2048){qi(a,o,f,m),a=o.stateNode;try{var w=o.memoizedProps,U=w.id,j=w.onPostCommit;typeof j=="function"&&j(U,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(re){$n(o,o.return,re)}}else qi(a,o,f,m);break;case 31:qi(a,o,f,m);break;case 13:qi(a,o,f,m);break;case 23:break;case 22:w=o.stateNode,U=o.alternate,o.memoizedState!==null?w._visibility&2?qi(a,o,f,m):Hc(a,o):w._visibility&2?qi(a,o,f,m):(w._visibility|=2,ul(a,o,f,m,(o.subtreeFlags&10256)!==0||!1)),b&2048&&rd(U,o);break;case 24:qi(a,o,f,m),b&2048&&ho(o.alternate,o);break;default:qi(a,o,f,m)}}function ul(a,o,f,m,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=a,U=o,j=f,re=m,Te=U.flags;switch(U.tag){case 0:case 11:case 15:ul(w,U,j,re,b),Lr(8,U);break;case 23:break;case 22:var He=U.stateNode;U.memoizedState!==null?He._visibility&2?ul(w,U,j,re,b):Hc(w,U):(He._visibility|=2,ul(w,U,j,re,b)),b&&Te&2048&&rd(U.alternate,U);break;case 24:ul(w,U,j,re,b),b&&Te&2048&&ho(U.alternate,U);break;default:ul(w,U,j,re,b)}o=o.sibling}}function Hc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=a,m=o,b=m.flags;switch(m.tag){case 22:Hc(f,m),b&2048&&rd(m.alternate,m);break;case 24:Hc(f,m),b&2048&&ho(m.alternate,m);break;default:Hc(f,m)}o=o.sibling}}var Mi=8192;function jl(a,o,f){if(a.subtreeFlags&Mi)for(a=a.child;a!==null;)Oi(a,o,f),a=a.sibling}function Oi(a,o,f){switch(a.tag){case 26:jl(a,o,f),a.flags&Mi&&a.memoizedState!==null&&FL(f,$s,a.memoizedState,a.memoizedProps);break;case 5:jl(a,o,f);break;case 3:case 4:var m=$s;$s=$v(a.stateNode.containerInfo),jl(a,o,f),$s=m;break;case 22:a.memoizedState===null&&(m=a.alternate,m!==null&&m.memoizedState!==null?(m=Mi,Mi=16777216,jl(a,o,f),Mi=m):jl(a,o,f));break;default:jl(a,o,f)}}function ea(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function zs(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];Si=m,dh(m,a)}ea(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ql(a),a=a.sibling}function ql(a){switch(a.tag){case 0:case 11:case 15:zs(a),a.flags&2048&&qa(9,a,a.return);break;case 3:zs(a);break;case 12:zs(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,od(a)):zs(a);break;default:zs(a)}}function od(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];Si=m,dh(m,a)}ea(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:qa(8,o,o.return),od(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,od(o));break;default:od(o)}a=a.sibling}}function dh(a,o){for(;Si!==null;){var f=Si;switch(f.tag){case 0:case 11:case 15:qa(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:hs(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,Si=m;else e:for(f=a;Si!==null;){m=Si;var b=m.sibling,w=m.return;if(sd(m),m===f){Si=null;break e}if(b!==null){b.return=w,Si=b;break e}Si=w}}}var ld={getCacheForType:function(a){var o=ts(Vt),f=o.data.get(a);return f===void 0&&(f=a(),o.data.set(a,f)),f},cacheSignal:function(){return ts(Vt).controller.signal}},cd=typeof WeakMap=="function"?WeakMap:Map,Rn=0,qn=null,mn=null,wn=0,Ht=0,En=null,rn=!1,yn=!1,Qn=!1,Di=0,Xn=0,wa=0,fo=0,ur=0,On=0,Aa=0,hr=null,Cs=null,ta=!1,po=0,kc=0,Ca=1/0,Gc=null,Br=null,vi=0,fr=null,Ra=null,Ya=0,mo=0,Xl=null,ud=null,Wl=0,Yl=null;function Fs(){return(Rn&2)!==0&&wn!==0?wn&-wn:k.T!==null?Db():Zi()}function u(){if(On===0)if((wn&536870912)===0||An){var a=Ue;Ue<<=1,(Ue&3932160)===0&&(Ue=262144),On=a}else On=536870912;return a=ji.current,a!==null&&(a.flags|=32),On}function h(a,o,f){(a===qn&&(Ht===2||Ht===9)||a.cancelPendingCommit!==null)&&(be(a,0),N(a,wn,On,!1)),Bi(a,f),((Rn&2)===0||a!==qn)&&(a===qn&&((Rn&2)===0&&(fo|=f),Xn===4&&N(a,wn,On,!1)),hl(a))}function v(a,o,f){if((Rn&6)!==0)throw Error(i(327));var m=!f&&(o&127)===0&&(o&a.expiredLanes)===0||Wt(a,o),b=m?Kl(a,o):na(a,o,!0),w=m;do{if(b===0){yn&&!m&&N(a,o,0,!1);break}else{if(f=a.current.alternate,w&&!C(f)){b=na(a,o,!1),w=!1;continue}if(b===2){if(w=o,a.errorRecoveryDisabledLanes&w)var U=0;else U=a.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){o=U;e:{var j=a;b=hr;var re=j.current.memoizedState.isDehydrated;if(re&&(be(j,U).flags|=256),U=na(j,U,!1),U!==2){if(Qn&&!re){j.errorRecoveryDisabledLanes|=w,fo|=w,b=4;break e}w=Cs,Cs=b,w!==null&&(Cs===null?Cs=w:Cs.push.apply(Cs,w))}b=U}if(w=!1,b!==2)continue}}if(b===1){be(a,0),N(a,o,0,!0);break}e:{switch(m=a,w=b,w){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:N(m,o,On,!rn);break e;case 2:Cs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(b=po+300-Be(),10<b)){if(N(m,o,On,!rn),ft(m,0,!0)!==0)break e;Ya=o,m.timeoutHandle=KT(S.bind(null,m,f,Cs,Gc,ta,o,On,fo,Aa,rn,w,"Throttled",-0,0),b);break e}S(m,f,Cs,Gc,ta,o,On,fo,Aa,rn,w,null,-0,0)}}break}while(!0);hl(a)}function S(a,o,f,m,b,w,U,j,re,Te,He,We,Ce,Le){if(a.timeoutHandle=-1,We=o.subtreeFlags,We&8192||(We&16785408)===16785408){We={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:br},Oi(o,w,We);var Ot=(w&62914560)===w?po-Be():(w&4194048)===w?kc-Be():0;if(Ot=VL(We,Ot),Ot!==null){Ya=w,a.cancelPendingCommit=Ot($t.bind(null,a,o,w,f,m,b,U,j,re,He,We,null,Ce,Le)),N(a,w,U,!Te);return}}$t(a,o,w,f,m,b,U,j,re)}function C(a){for(var o=a;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],w=b.getSnapshot;b=b.value;try{if(!hi(w(),b))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function N(a,o,f,m){o&=~ur,o&=~fo,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var b=o;0<b;){var w=31-Ft(b),U=1<<w;m[w]=-1,b&=~U}f!==0&&Uo(a,f,o)}function W(){return(Rn&6)===0?(Wm(0),!1):!0}function ae(){if(mn!==null){if(Ht===0)var a=mn.return;else a=mn,Es=eo=null,Em(a),$o=null,el=0,a=mn;for(;a!==null;)kl(a.alternate,a),a=a.return;mn=null}}function be(a,o){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,SL(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),Ya=0,ae(),qn=a,mn=f=Mr(a.current,null),wn=o,Ht=0,En=null,rn=!1,yn=Wt(a,o),Qn=!1,Aa=On=ur=fo=wa=Xn=0,Cs=hr=null,ta=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var b=31-Ft(m),w=1<<b;o|=a[b],m&=~w}return Di=o,Xo(),f}function Ge(a,o){Qt=null,k.H=th,o===Qo||o===rr?(o=zf(),Ht=3):o===qu?(o=zf(),Ht=4):Ht=o===td?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,En=o,mn===null&&(Xn=1,ed(a,Ws(o,a.current)))}function at(){var a=ji.current;return a===null?!0:(wn&4194048)===wn?ka===null:(wn&62914560)===wn||(wn&536870912)!==0?a===ka:!1}function yt(){var a=k.H;return k.H=th,a===null?th:a}function xt(){var a=k.A;return k.A=ld,a}function sn(){Xn=4,rn||(wn&4194048)!==wn&&ji.current!==null||(yn=!0),(wa&134217727)===0&&(fo&134217727)===0||qn===null||N(qn,wn,On,!1)}function na(a,o,f){var m=Rn;Rn|=2;var b=yt(),w=xt();(qn!==a||wn!==o)&&(Gc=null,be(a,o)),o=!1;var U=Xn;e:do try{if(Ht!==0&&mn!==null){var j=mn,re=En;switch(Ht){case 8:ae(),U=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(o=!0);var Te=Ht;if(Ht=0,En=null,nt(a,j,re,Te),f&&yn){U=0;break e}break;default:Te=Ht,Ht=0,En=null,nt(a,j,re,Te)}}ph(),U=Xn;break}catch(He){Ge(a,He)}while(!0);return o&&a.shellSuspendCounter++,Es=eo=null,Rn=m,k.H=b,k.A=w,mn===null&&(qn=null,wn=0,Xo()),U}function ph(){for(;mn!==null;)ye(mn)}function Kl(a,o){var f=Rn;Rn|=2;var m=yt(),b=xt();qn!==a||wn!==o?(Gc=null,Ca=Be()+500,be(a,o)):yn=Wt(a,o);e:do try{if(Ht!==0&&mn!==null){o=mn;var w=En;t:switch(Ht){case 1:Ht=0,En=null,nt(a,o,w,1);break;case 2:case 9:if(yv(w)){Ht=0,En=null,Ne(o);break}o=function(){Ht!==2&&Ht!==9||qn!==a||(Ht=7),hl(a)},w.then(o,o);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:yv(w)?(Ht=0,En=null,Ne(o)):(Ht=0,En=null,nt(a,o,w,7));break;case 5:var U=null;switch(mn.tag){case 26:U=mn.memoizedState;case 5:case 27:var j=mn;if(U?uw(U):j.stateNode.complete){Ht=0,En=null;var re=j.sibling;if(re!==null)mn=re;else{var Te=j.return;Te!==null?(mn=Te,Bt(Te)):mn=null}break t}}Ht=0,En=null,nt(a,o,w,5);break;case 6:Ht=0,En=null,nt(a,o,w,6);break;case 8:ae(),Xn=6;break e;default:throw Error(i(462))}}we();break}catch(He){Ge(a,He)}while(!0);return Es=eo=null,k.H=m,k.A=b,Rn=f,mn!==null?0:(qn=null,wn=0,Xo(),Xn)}function we(){for(;mn!==null&&!G();)ye(mn)}function ye(a){var o=nd(a.alternate,a,Di);a.memoizedProps=a.pendingProps,o===null?Bt(a):mn=o}function Ne(a){var o=a,f=o.alternate;switch(o.tag){case 15:case 0:o=Ts(f,o,o.pendingProps,o.type,void 0,wn);break;case 11:o=Ts(f,o,o.pendingProps,o.type.render,o.ref,wn);break;case 5:Em(o);default:kl(f,o),o=mn=Ss(o,Di),o=nd(f,o,Di)}a.memoizedProps=a.pendingProps,o===null?Bt(a):mn=o}function nt(a,o,f,m){Es=eo=null,Em(o),$o=null,el=0;var b=o.return;try{if(_a(a,b,o,f,wn)){Xn=1,ed(a,Ws(f,a.current)),mn=null;return}}catch(w){if(b!==null)throw mn=b,w;Xn=1,ed(a,Ws(f,a.current)),mn=null;return}o.flags&32768?(An||m===1?a=!0:yn||(wn&536870912)!==0?a=!1:(rn=a=!0,(m===2||m===9||m===3||m===6)&&(m=ji.current,m!==null&&m.tag===13&&(m.flags|=16384))),si(o,a)):Bt(o)}function Bt(a){var o=a;do{if((o.flags&32768)!==0){si(o,rn);return}a=o.return;var f=jm(o.alternate,o,Di);if(f!==null){mn=f;return}if(o=o.sibling,o!==null){mn=o;return}mn=o=a}while(o!==null);Xn===0&&(Xn=5)}function si(a,o){do{var f=id(a.alternate,a);if(f!==null){f.flags&=32767,mn=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(a=a.sibling,a!==null)){mn=a;return}mn=a=f}while(a!==null);Xn=6,mn=null}function $t(a,o,f,m,b,w,U,j,re){a.cancelPendingCommit=null;do hd();while(vi!==0);if((Rn&6)!==0)throw Error(i(327));if(o!==null){if(o===a.current)throw Error(i(177));if(w=o.lanes|o.childLanes,w|=Of,qs(a,f,w,U,j,re),a===qn&&(mn=qn=null,wn=0),Ra=o,fr=a,Ya=f,mo=w,Xl=b,ud=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,cL(ct,function(){return NT(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=k.T,k.T=null,b=te.p,te.p=2,U=Rn,Rn|=4;try{Vc(a,o,f)}finally{Rn=U,te.p=b,k.T=m}}vi=1,Ln(),Xi(),In()}}function Ln(){if(vi===1){vi=0;var a=fr,o=Ra,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=k.T,k.T=null;var m=te.p;te.p=2;var b=Rn;Rn|=4;try{cl(o,a);var w=Fb,U=Tf(a.containerInfo),j=w.focusedElem,re=w.selectionRange;if(U!==j&&j&&j.ownerDocument&&Mf(j.ownerDocument.documentElement,j)){if(re!==null&&_c(j)){var Te=re.start,He=re.end;if(He===void 0&&(He=Te),"selectionStart"in j)j.selectionStart=Te,j.selectionEnd=Math.min(He,j.value.length);else{var We=j.ownerDocument||document,Ce=We&&We.defaultView||window;if(Ce.getSelection){var Le=Ce.getSelection(),Ot=j.textContent.length,Zt=Math.min(re.start,Ot),ri=re.end===void 0?Zt:Math.min(re.end,Ot);!Le.extend&&Zt>ri&&(U=ri,ri=Zt,Zt=U);var _e=Qp(j,Zt),pe=Qp(j,ri);if(_e&&pe&&(Le.rangeCount!==1||Le.anchorNode!==_e.node||Le.anchorOffset!==_e.offset||Le.focusNode!==pe.node||Le.focusOffset!==pe.offset)){var Me=We.createRange();Me.setStart(_e.node,_e.offset),Le.removeAllRanges(),Zt>ri?(Le.addRange(Me),Le.extend(pe.node,pe.offset)):(Me.setEnd(pe.node,pe.offset),Le.addRange(Me))}}}}for(We=[],Le=j;Le=Le.parentNode;)Le.nodeType===1&&We.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<We.length;j++){var qe=We[j];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}ay=!!zb,Fb=zb=null}finally{Rn=b,te.p=m,k.T=f}}a.current=o,vi=2}}function Xi(){if(vi===2){vi=0;var a=fr,o=Ra,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=k.T,k.T=null;var m=te.p;te.p=2;var b=Rn;Rn|=4;try{qv(a,o.alternate,o)}finally{Rn=b,te.p=m,k.T=f}}vi=3}}function In(){if(vi===4||vi===3){vi=0,Se();var a=fr,o=Ra,f=Ya,m=ud;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?vi=5:(vi=0,Ra=fr=null,go(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(Br=null),fa(f),o=o.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Et,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=k.T,b=te.p,te.p=2,k.T=null;try{for(var w=a.onRecoverableError,U=0;U<m.length;U++){var j=m[U];w(j.value,{componentStack:j.stack})}}finally{k.T=o,te.p=b}}(Ya&3)!==0&&hd(),hl(a),b=a.pendingLanes,(f&261930)!==0&&(b&42)!==0?a===Yl?Wl++:(Wl=0,Yl=a):Wl=0,Wm(0)}}function go(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,hs(o)))}function hd(){return Ln(),Xi(),In(),NT()}function NT(){if(vi!==5)return!1;var a=fr,o=mo;mo=0;var f=fa(Ya),m=k.T,b=te.p;try{te.p=32>f?32:f,k.T=null,f=Xl,Xl=null;var w=fr,U=Ya;if(vi=0,Ra=fr=null,Ya=0,(Rn&6)!==0)throw Error(i(331));var j=Rn;if(Rn|=4,ql(w.current),gi(w,w.current,U,f),Rn=j,Wm(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Et,w)}catch{}return!0}finally{te.p=b,k.T=m,go(a,o)}}function UT(a,o,f){o=Ws(f,o),o=Gm(a.stateNode,o,2),a=so(a,o,2),a!==null&&(Bi(a,2),hl(a))}function $n(a,o,f){if(a.tag===3)UT(a,a,f);else for(;o!==null;){if(o.tag===3){UT(o,a,f);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Br===null||!Br.has(m))){a=Ws(f,a),f=Ic(2),m=so(o,f,2),m!==null&&(Js(f,m,o,a),Bi(m,2),hl(m));break}}o=o.return}}function Cb(a,o,f){var m=a.pingCache;if(m===null){m=a.pingCache=new cd;var b=new Set;m.set(o,b)}else b=m.get(o),b===void 0&&(b=new Set,m.set(o,b));b.has(f)||(Qn=!0,b.add(f),a=rL.bind(null,a,o,f),o.then(a,a))}function rL(a,o,f){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,qn===a&&(wn&f)===f&&(Xn===4||Xn===3&&(wn&62914560)===wn&&300>Be()-po?(Rn&2)===0&&be(a,0):ur|=f,Aa===wn&&(Aa=0)),hl(a)}function LT(a,o){o===0&&(o=ci()),a=Wo(a,o),a!==null&&(Bi(a,o),hl(a))}function oL(a){var o=a.memoizedState,f=0;o!==null&&(f=o.retryLane),LT(a,f)}function lL(a,o){var f=0;switch(a.tag){case 31:case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),LT(a,f)}function cL(a,o){return ot(a,o)}var Yv=null,fd=null,Rb=!1,Kv=!1,Ob=!1,jc=0;function hl(a){a!==fd&&a.next===null&&(fd===null?Yv=fd=a:fd=fd.next=a),Kv=!0,Rb||(Rb=!0,hL())}function Wm(a,o){if(!Ob&&Kv){Ob=!0;do for(var f=!1,m=Yv;m!==null;){if(a!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var U=m.suspendedLanes,j=m.pingedLanes;w=(1<<31-Ft(42|a)+1)-1,w&=b&~(U&~j),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,zT(m,w))}else w=wn,w=ft(m,m===qn?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||Wt(m,w)||(f=!0,zT(m,w));m=m.next}while(f);Ob=!1}}function uL(){IT()}function IT(){Kv=Rb=!1;var a=0;jc!==0&&bL()&&(a=jc);for(var o=Be(),f=null,m=Yv;m!==null;){var b=m.next,w=PT(m,o);w===0?(m.next=null,f===null?Yv=b:f.next=b,b===null&&(fd=f)):(f=m,(a!==0||(w&3)!==0)&&(Kv=!0)),m=b}vi!==0&&vi!==5||Wm(a),jc!==0&&(jc=0)}function PT(a,o){for(var f=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var U=31-Ft(w),j=1<<U,re=b[U];re===-1?((j&f)===0||(j&m)!==0)&&(b[U]=Kn(j,o)):re<=o&&(a.expiredLanes|=j),w&=~j}if(o=qn,f=wn,f=ft(a,a===o?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,f===0||a===o&&(Ht===2||Ht===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&J(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Wt(a,f)){if(o=f&-f,o===a.callbackPriority)return o;switch(m!==null&&J(m),fa(f)){case 2:case 8:f=Tt;break;case 32:f=ct;break;case 268435456:f=fn;break;default:f=ct}return m=BT.bind(null,a),f=ot(f,m),a.callbackPriority=o,a.callbackNode=f,o}return m!==null&&m!==null&&J(m),a.callbackPriority=2,a.callbackNode=null,2}function BT(a,o){if(vi!==0&&vi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(hd()&&a.callbackNode!==f)return null;var m=wn;return m=ft(a,a===qn?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(v(a,m,o),PT(a,Be()),a.callbackNode!=null&&a.callbackNode===f?BT.bind(null,a):null)}function zT(a,o){if(hd())return null;v(a,o,!0)}function hL(){EL(function(){(Rn&6)!==0?ot(ke,uL):IT()})}function Db(){if(jc===0){var a=io;a===0&&(a=De,De<<=1,(De&261888)===0&&(De=256)),jc=a}return jc}function FT(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:wu(""+a)}function VT(a,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,a.id&&f.setAttribute("form",a.id),o.parentNode.insertBefore(f,o),a=new FormData(a),f.parentNode.removeChild(f),a}function fL(a,o,f,m,b){if(o==="submit"&&f&&f.stateNode===b){var w=FT((b[B]||null).action),U=m.submitter;U&&(o=(o=U[B]||null)?FT(o.formAction):U.getAttribute("formAction"),o!==null&&(w=o,U=null));var j=new Ou("action","action",null,m,b);a.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(jc!==0){var re=U?VT(b,U):new FormData(b);zm(f,{pending:!0,data:re,method:b.method,action:w},null,re)}}else typeof w=="function"&&(j.preventDefault(),re=U?VT(b,U):new FormData(b),zm(f,{pending:!0,data:re,method:b.method,action:w},w,re))},currentTarget:b}]})}}for(var Nb=0;Nb<Rf.length;Nb++){var Ub=Rf[Nb],dL=Ub.toLowerCase(),pL=Ub[0].toUpperCase()+Ub.slice(1);bs(dL,"on"+pL)}bs(Xs,"onAnimationEnd"),bs($p,"onAnimationIteration"),bs(Er,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(Ec,"onTransitionRun"),bs(jo,"onTransitionStart"),bs(em,"onTransitionCancel"),bs(Cf,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),je("onBeforeInput",["compositionend","keypress","textInput","paste"]),je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ym));function HT(a,o){o=(o&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],b=m.event;m=m.listeners;e:{var w=void 0;if(o)for(var U=m.length-1;0<=U;U--){var j=m[U],re=j.instance,Te=j.currentTarget;if(j=j.listener,re!==w&&b.isPropagationStopped())break e;w=j,b.currentTarget=Te;try{w(b)}catch(He){qo(He)}b.currentTarget=null,w=re}else for(U=0;U<m.length;U++){if(j=m[U],re=j.instance,Te=j.currentTarget,j=j.listener,re!==w&&b.isPropagationStopped())break e;w=j,b.currentTarget=Te;try{w(b)}catch(He){qo(He)}b.currentTarget=null,w=re}}}}function Cn(a,o){var f=o[ue];f===void 0&&(f=o[ue]=new Set);var m=a+"__bubble";f.has(m)||(kT(o,a,2,!1),f.add(m))}function Lb(a,o,f){var m=0;o&&(m|=4),kT(f,a,m,o)}var Zv="_reactListening"+Math.random().toString(36).slice(2);function Ib(a){if(!a[Zv]){a[Zv]=!0,Ee.forEach(function(f){f!=="selectionchange"&&(mL.has(f)||Lb(f,!1,a),Lb(f,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Zv]||(o[Zv]=!0,Lb("selectionchange",!1,o))}}function kT(a,o,f,m){switch(vw(o)){case 2:var b=GL;break;case 8:b=jL;break;default:b=Zb}f=b.bind(null,o,f,a),b=void 0,!pf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(o,f,{capture:!0,passive:b}):a.addEventListener(o,f,!0):b!==void 0?a.addEventListener(o,f,{passive:b}):a.addEventListener(o,f,!1)}function Pb(a,o,f,m,b){var w=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var j=m.stateNode.containerInfo;if(j===b)break;if(U===4)for(U=m.return;U!==null;){var re=U.tag;if((re===3||re===4)&&U.stateNode.containerInfo===b)return;U=U.return}for(;j!==null;){if(U=z(j),U===null)return;if(re=U.tag,re===5||re===6||re===26||re===27){m=w=U;continue e}j=j.parentNode}}m=m.return}Ip(function(){var Te=w,He=ff(f),We=[];e:{var Ce=Zr.get(a);if(Ce!==void 0){var Le=Ou,Ot=a;switch(a){case"keypress":if(Tl(f)===0)break e;case"keydown":case"keyup":Le=kp;break;case"focusin":Ot="focus",Le=_f;break;case"focusout":Ot="blur",Le=_f;break;case"beforeblur":case"afterblur":Le=_f;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=K0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Yr;break;case Xs:case $p:case Er:Le=$0;break;case Cf:Le=xb;break;case"scroll":case"scrollend":Le=vf;break;case"wheel":Le=zo;break;case"copy":case"cut":case"paste":Le=Bp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=xf;break;case"toggle":case"beforetoggle":Le=jp}var Zt=(o&4)!==0,ri=!Zt&&(a==="scroll"||a==="scrollend"),_e=Zt?Ce!==null?Ce+"Capture":null:Ce;Zt=[];for(var pe=Te,Me;pe!==null;){var qe=pe;if(Me=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Me===null||_e===null||(qe=Ml(pe,_e),qe!=null&&Zt.push(Km(pe,qe,Me))),ri)break;pe=pe.return}0<Zt.length&&(Ce=new Le(Ce,Ot,null,f,He),We.push({event:Ce,listeners:Zt}))}}if((o&7)===0){e:{if(Ce=a==="mouseover"||a==="pointerover",Le=a==="mouseout"||a==="pointerout",Ce&&f!==Au&&(Ot=f.relatedTarget||f.fromElement)&&(z(Ot)||Ot[K]))break e;if((Le||Ce)&&(Ce=He.window===He?He:(Ce=He.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Le?(Ot=f.relatedTarget||f.toElement,Le=Te,Ot=Ot?z(Ot):null,Ot!==null&&(ri=r(Ot),Zt=Ot.tag,Ot!==ri||Zt!==5&&Zt!==27&&Zt!==6)&&(Ot=null)):(Le=null,Ot=Te),Le!==Ot)){if(Zt=K0,qe="onMouseLeave",_e="onMouseEnter",pe="mouse",(a==="pointerout"||a==="pointerover")&&(Zt=xf,qe="onPointerLeave",_e="onPointerEnter",pe="pointer"),ri=Le==null?Ce:ne(Le),Me=Ot==null?Ce:ne(Ot),Ce=new Zt(qe,pe+"leave",Le,f,He),Ce.target=ri,Ce.relatedTarget=Me,qe=null,z(He)===Te&&(Zt=new Zt(_e,pe+"enter",Ot,f,He),Zt.target=Me,Zt.relatedTarget=ri,qe=Zt),ri=qe,Le&&Ot)t:{for(Zt=gL,_e=Le,pe=Ot,Me=0,qe=_e;qe;qe=Zt(qe))Me++;qe=0;for(var Gt=pe;Gt;Gt=Zt(Gt))qe++;for(;0<Me-qe;)_e=Zt(_e),Me--;for(;0<qe-Me;)pe=Zt(pe),qe--;for(;Me--;){if(_e===pe||pe!==null&&_e===pe.alternate){Zt=_e;break t}_e=Zt(_e),pe=Zt(pe)}Zt=null}else Zt=null;Le!==null&&GT(We,Ce,Le,Zt,!1),Ot!==null&&ri!==null&&GT(We,ri,Ot,Zt,!0)}}e:{if(Ce=Te?ne(Te):window,Le=Ce.nodeName&&Ce.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ce.type==="file")var Wn=Kp;else if(Wp(Ce))if(Pu)Wn=uv;else{Wn=Ho;var Lt=Bu}else Le=Ce.nodeName,!Le||Le.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?Te&&Tu(Te.elementType)&&(Wn=Kp):Wn=cv;if(Wn&&(Wn=Wn(a,Te))){Ef(We,Wn,f,He);break e}Lt&&Lt(a,Ce,Te),a==="focusout"&&Te&&Ce.type==="number"&&Te.memoizedProps.value!=null&&Bn(Ce,"number",Ce.value)}switch(Lt=Te?ne(Te):window,a){case"focusin":(Wp(Lt)||Lt.contentEditable==="true")&&(xc=Lt,wf=Te,bc=null);break;case"focusout":bc=wf=xc=null;break;case"mousedown":pa=!0;break;case"contextmenu":case"mouseup":case"dragend":pa=!1,Af(We,f,He);break;case"selectionchange":if(hv)break;case"keydown":case"keyup":Af(We,f,He)}var _n;if(wl)e:{switch(a){case"compositionstart":var Dn="onCompositionStart";break e;case"compositionend":Dn="onCompositionEnd";break e;case"compositionupdate":Dn="onCompositionUpdate";break e}Dn=void 0}else Vo?bf(a,f)&&(Dn="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Dn="onCompositionStart");Dn&&(us&&f.locale!=="ko"&&(Vo||Dn!=="onCompositionStart"?Dn==="onCompositionEnd"&&Vo&&(_n=gf()):(Io=He,mf="value"in Io?Io.value:Io.textContent,Vo=!0)),Lt=Jv(Te,Dn),0<Lt.length&&(Dn=new zp(Dn,a,null,f,He),We.push({event:Dn,listeners:Lt}),_n?Dn.data=_n:(_n=pc(f),_n!==null&&(Dn.data=_n)))),(_n=Al?Sf(a,f):rv(a,f))&&(Dn=Jv(Te,"onBeforeInput"),0<Dn.length&&(Lt=new zp("onBeforeInput","beforeinput",null,f,He),We.push({event:Lt,listeners:Dn}),Lt.data=_n)),fL(We,a,Te,f,He)}HT(We,o)})}function Km(a,o,f){return{instance:a,listener:o,currentTarget:f}}function Jv(a,o){for(var f=o+"Capture",m=[];a!==null;){var b=a,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Ml(a,f),b!=null&&m.unshift(Km(a,b,w)),b=Ml(a,o),b!=null&&m.push(Km(a,b,w))),a.tag===3)return m;a=a.return}return[]}function gL(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function GT(a,o,f,m,b){for(var w=o._reactName,U=[];f!==null&&f!==m;){var j=f,re=j.alternate,Te=j.stateNode;if(j=j.tag,re!==null&&re===m)break;j!==5&&j!==26&&j!==27||Te===null||(re=Te,b?(Te=Ml(f,w),Te!=null&&U.unshift(Km(f,Te,re))):b||(Te=Ml(f,w),Te!=null&&U.push(Km(f,Te,re)))),f=f.return}U.length!==0&&a.push({event:o,listeners:U})}var vL=/\r\n?/g,yL=/\u0000|\uFFFD/g;function jT(a){return(typeof a=="string"?a:""+a).replace(vL,`
`).replace(yL,"")}function qT(a,o){return o=jT(o),jT(a)===o}function ai(a,o,f,m,b,w){switch(f){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ns(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ns(a,""+m);break;case"className":Mn(a,"class",m);break;case"tabIndex":Mn(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(a,f,m);break;case"style":Up(a,m,w);break;case"data":if(o!=="object"){Mn(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||f!=="href")){a.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=wu(""+m),a.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(o!=="input"&&ai(a,o,"name",b.name,b,null),ai(a,o,"formEncType",b.formEncType,b,null),ai(a,o,"formMethod",b.formMethod,b,null),ai(a,o,"formTarget",b.formTarget,b,null)):(ai(a,o,"encType",b.encType,b,null),ai(a,o,"method",b.method,b,null),ai(a,o,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=wu(""+m),a.setAttribute(f,m);break;case"onClick":m!=null&&(a.onclick=br);break;case"onScroll":m!=null&&Cn("scroll",a);break;case"onScrollEnd":m!=null&&Cn("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(i(60));a.innerHTML=f}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}f=wu(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""+m):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":m===!0?a.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,m):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(f,m):a.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(f):a.setAttribute(f,m);break;case"popover":Cn("beforetoggle",a),Cn("toggle",a),Rt(a,"popover",m);break;case"xlinkActuate":Nt(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Nt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Nt(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Nt(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Nt(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Nt(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Nt(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Nt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Nt(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Rt(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=W0.get(f)||f,Rt(a,f,m))}}function Bb(a,o,f,m,b,w){switch(f){case"style":Up(a,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(i(60));a.innerHTML=f}}break;case"children":typeof m=="string"?Ns(a,m):(typeof m=="number"||typeof m=="bigint")&&Ns(a,""+m);break;case"onScroll":m!=null&&Cn("scroll",a);break;case"onScrollEnd":m!=null&&Cn("scrollend",a);break;case"onClick":m!=null&&(a.onclick=br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fe.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),o=f.slice(2,b?f.length-7:void 0),w=a[B]||null,w=w!=null?w[f]:null,typeof w=="function"&&a.removeEventListener(o,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(o,m,b);break e}f in a?a[f]=m:m===!0?a.setAttribute(f,""):Rt(a,f,m)}}}function Vs(a,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",a),Cn("load",a);var m=!1,b=!1,w;for(w in f)if(f.hasOwnProperty(w)){var U=f[w];if(U!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ai(a,o,w,U,f,null)}}b&&ai(a,o,"srcSet",f.srcSet,f,null),m&&ai(a,o,"src",f.src,f,null);return;case"input":Cn("invalid",a);var j=w=U=b=null,re=null,Te=null;for(m in f)if(f.hasOwnProperty(m)){var He=f[m];if(He!=null)switch(m){case"name":b=He;break;case"type":U=He;break;case"checked":re=He;break;case"defaultChecked":Te=He;break;case"value":w=He;break;case"defaultValue":j=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(i(137,o));break;default:ai(a,o,m,He,f,null)}}pi(a,w,j,re,Te,U,b,!1);return;case"select":Cn("invalid",a),m=U=w=null;for(b in f)if(f.hasOwnProperty(b)&&(j=f[b],j!=null))switch(b){case"value":w=j;break;case"defaultValue":U=j;break;case"multiple":m=j;default:ai(a,o,b,j,f,null)}o=w,f=U,a.multiple=!!m,o!=null?zn(a,!!m,o,!1):f!=null&&zn(a,!!m,f,!0);return;case"textarea":Cn("invalid",a),w=b=m=null;for(U in f)if(f.hasOwnProperty(U)&&(j=f[U],j!=null))switch(U){case"value":m=j;break;case"defaultValue":b=j;break;case"children":w=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:ai(a,o,U,j,f,null)}tr(a,m,b,w);return;case"option":for(re in f)if(f.hasOwnProperty(re)&&(m=f[re],m!=null))switch(re){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ai(a,o,re,m,f,null)}return;case"dialog":Cn("beforetoggle",a),Cn("toggle",a),Cn("cancel",a),Cn("close",a);break;case"iframe":case"object":Cn("load",a);break;case"video":case"audio":for(m=0;m<Ym.length;m++)Cn(Ym[m],a);break;case"image":Cn("error",a),Cn("load",a);break;case"details":Cn("toggle",a);break;case"embed":case"source":case"link":Cn("error",a),Cn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Te in f)if(f.hasOwnProperty(Te)&&(m=f[Te],m!=null))switch(Te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ai(a,o,Te,m,f,null)}return;default:if(Tu(o)){for(He in f)f.hasOwnProperty(He)&&(m=f[He],m!==void 0&&Bb(a,o,He,m,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(m=f[j],m!=null&&ai(a,o,j,m,f,null))}function _L(a,o,f,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,U=null,j=null,re=null,Te=null,He=null;for(Le in f){var We=f[Le];if(f.hasOwnProperty(Le)&&We!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":re=We;default:m.hasOwnProperty(Le)||ai(a,o,Le,null,m,We)}}for(var Ce in m){var Le=m[Ce];if(We=f[Ce],m.hasOwnProperty(Ce)&&(Le!=null||We!=null))switch(Ce){case"type":w=Le;break;case"name":b=Le;break;case"checked":Te=Le;break;case"defaultChecked":He=Le;break;case"value":U=Le;break;case"defaultValue":j=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(i(137,o));break;default:Le!==We&&ai(a,o,Ce,Le,m,We)}}cn(a,U,j,re,Te,He,w,b);return;case"select":Le=U=j=Ce=null;for(w in f)if(re=f[w],f.hasOwnProperty(w)&&re!=null)switch(w){case"value":break;case"multiple":Le=re;default:m.hasOwnProperty(w)||ai(a,o,w,null,m,re)}for(b in m)if(w=m[b],re=f[b],m.hasOwnProperty(b)&&(w!=null||re!=null))switch(b){case"value":Ce=w;break;case"defaultValue":j=w;break;case"multiple":U=w;default:w!==re&&ai(a,o,b,w,m,re)}o=j,f=U,m=Le,Ce!=null?zn(a,!!f,Ce,!1):!!m!=!!f&&(o!=null?zn(a,!!f,o,!0):zn(a,!!f,f?[]:"",!1));return;case"textarea":Le=Ce=null;for(j in f)if(b=f[j],f.hasOwnProperty(j)&&b!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:ai(a,o,j,null,m,b)}for(U in m)if(b=m[U],w=f[U],m.hasOwnProperty(U)&&(b!=null||w!=null))switch(U){case"value":Ce=b;break;case"defaultValue":Le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==w&&ai(a,o,U,b,m,w)}Ji(a,Ce,Le);return;case"option":for(var Ot in f)if(Ce=f[Ot],f.hasOwnProperty(Ot)&&Ce!=null&&!m.hasOwnProperty(Ot))switch(Ot){case"selected":a.selected=!1;break;default:ai(a,o,Ot,null,m,Ce)}for(re in m)if(Ce=m[re],Le=f[re],m.hasOwnProperty(re)&&Ce!==Le&&(Ce!=null||Le!=null))switch(re){case"selected":a.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:ai(a,o,re,Ce,m,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in f)Ce=f[Zt],f.hasOwnProperty(Zt)&&Ce!=null&&!m.hasOwnProperty(Zt)&&ai(a,o,Zt,null,m,Ce);for(Te in m)if(Ce=m[Te],Le=f[Te],m.hasOwnProperty(Te)&&Ce!==Le&&(Ce!=null||Le!=null))switch(Te){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,o));break;default:ai(a,o,Te,Ce,m,Le)}return;default:if(Tu(o)){for(var ri in f)Ce=f[ri],f.hasOwnProperty(ri)&&Ce!==void 0&&!m.hasOwnProperty(ri)&&Bb(a,o,ri,void 0,m,Ce);for(He in m)Ce=m[He],Le=f[He],!m.hasOwnProperty(He)||Ce===Le||Ce===void 0&&Le===void 0||Bb(a,o,He,Ce,m,Le);return}}for(var _e in f)Ce=f[_e],f.hasOwnProperty(_e)&&Ce!=null&&!m.hasOwnProperty(_e)&&ai(a,o,_e,null,m,Ce);for(We in m)Ce=m[We],Le=f[We],!m.hasOwnProperty(We)||Ce===Le||Ce==null&&Le==null||ai(a,o,We,Ce,m,Le)}function XT(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xL(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var b=f[m],w=b.transferSize,U=b.initiatorType,j=b.duration;if(w&&j&&XT(U)){for(U=0,j=b.responseEnd,m+=1;m<f.length;m++){var re=f[m],Te=re.startTime;if(Te>j)break;var He=re.transferSize,We=re.initiatorType;He&&XT(We)&&(re=re.responseEnd,U+=He*(re<j?1:(j-Te)/(re-Te)))}if(--m,o+=8*(w+U)/(b.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var zb=null,Fb=null;function Qv(a){return a.nodeType===9?a:a.ownerDocument}function WT(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YT(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Vb(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Hb=null;function bL(){var a=window.event;return a&&a.type==="popstate"?a===Hb?!1:(Hb=a,!0):(Hb=null,!1)}var KT=typeof setTimeout=="function"?setTimeout:void 0,SL=typeof clearTimeout=="function"?clearTimeout:void 0,ZT=typeof Promise=="function"?Promise:void 0,EL=typeof queueMicrotask=="function"?queueMicrotask:typeof ZT<"u"?function(a){return ZT.resolve(null).then(a).catch(ML)}:KT;function ML(a){setTimeout(function(){throw a})}function qc(a){return a==="head"}function JT(a,o){var f=o,m=0;do{var b=f.nextSibling;if(a.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(m===0){a.removeChild(b),gd(o);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")Zm(a.ownerDocument.documentElement);else if(f==="head"){f=a.ownerDocument.head,Zm(f);for(var w=f.firstChild;w;){var U=w.nextSibling,j=w.nodeName;w[tt]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=U}}else f==="body"&&Zm(a.ownerDocument.body);f=b}while(f);gd(o)}function QT(a,o){var f=a;a=0;do{var m=f.nextSibling;if(f.nodeType===1?o?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(o?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(a===0)break;a--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||a++;f=m}while(f)}function kb(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":kb(f),$e(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function TL(a,o,f,m){for(;a.nodeType===1;){var b=f;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[tt])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=zr(a.nextSibling),a===null)break}return null}function wL(a,o,f){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=zr(a.nextSibling),a===null))return null;return a}function $T(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=zr(a.nextSibling),a===null))return null;return a}function Gb(a){return a.data==="$?"||a.data==="$~"}function jb(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function AL(a,o){var f=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||f.readyState!=="loading")o();else{var m=function(){o(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function zr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var qb=null;function ew(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"||f==="/&"){if(o===0)return zr(a.nextSibling);o--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||o++}a=a.nextSibling}return null}function tw(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(o===0)return a;o--}else f!=="/$"&&f!=="/&"||o++}a=a.previousSibling}return null}function nw(a,o,f){switch(o=Qv(f),a){case"html":if(a=o.documentElement,!a)throw Error(i(452));return a;case"head":if(a=o.head,!a)throw Error(i(453));return a;case"body":if(a=o.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Zm(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);$e(a)}var Fr=new Map,iw=new Set;function $v(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Zl=te.d;te.d={f:CL,r:RL,D:OL,C:DL,L:NL,m:UL,X:IL,S:LL,M:PL};function CL(){var a=Zl.f(),o=W();return a||o}function RL(a){var o=Q(a);o!==null&&o.tag===5&&o.type==="form"?Fm(o):Zl.r(a)}var dd=typeof document>"u"?null:document;function sw(a,o,f){var m=dd;if(m&&typeof o=="string"&&o){var b=Kt(o);b='link[rel="'+a+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),iw.has(b)||(iw.add(b),a={rel:a,crossOrigin:f,href:o},m.querySelector(b)===null&&(o=m.createElement("link"),Vs(o,"link",a),ce(o),m.head.appendChild(o)))}}function OL(a){Zl.D(a),sw("dns-prefetch",a,null)}function DL(a,o){Zl.C(a,o),sw("preconnect",a,o)}function NL(a,o,f){Zl.L(a,o,f);var m=dd;if(m&&a&&o){var b='link[rel="preload"][as="'+Kt(o)+'"]';o==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Kt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Kt(f.imageSizes)+'"]')):b+='[href="'+Kt(a)+'"]';var w=b;switch(o){case"style":w=pd(a);break;case"script":w=md(a)}Fr.has(w)||(a=y({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:a,as:o},f),Fr.set(w,a),m.querySelector(b)!==null||o==="style"&&m.querySelector(Jm(w))||o==="script"&&m.querySelector(Qm(w))||(o=m.createElement("link"),Vs(o,"link",a),ce(o),m.head.appendChild(o)))}}function UL(a,o){Zl.m(a,o);var f=dd;if(f&&a){var m=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+Kt(m)+'"][href="'+Kt(a)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=md(a)}if(!Fr.has(w)&&(a=y({rel:"modulepreload",href:a},o),Fr.set(w,a),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Qm(w)))return}m=f.createElement("link"),Vs(m,"link",a),ce(m),f.head.appendChild(m)}}}function LL(a,o,f){Zl.S(a,o,f);var m=dd;if(m&&a){var b=ie(m).hoistableStyles,w=pd(a);o=o||"default";var U=b.get(w);if(!U){var j={loading:0,preload:null};if(U=m.querySelector(Jm(w)))j.loading=5;else{a=y({rel:"stylesheet",href:a,"data-precedence":o},f),(f=Fr.get(w))&&Xb(a,f);var re=U=m.createElement("link");ce(re),Vs(re,"link",a),re._p=new Promise(function(Te,He){re.onload=Te,re.onerror=He}),re.addEventListener("load",function(){j.loading|=1}),re.addEventListener("error",function(){j.loading|=2}),j.loading|=4,ey(U,o,m)}U={type:"stylesheet",instance:U,count:1,state:j},b.set(w,U)}}}function IL(a,o){Zl.X(a,o);var f=dd;if(f&&a){var m=ie(f).hoistableScripts,b=md(a),w=m.get(b);w||(w=f.querySelector(Qm(b)),w||(a=y({src:a,async:!0},o),(o=Fr.get(b))&&Wb(a,o),w=f.createElement("script"),ce(w),Vs(w,"link",a),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function PL(a,o){Zl.M(a,o);var f=dd;if(f&&a){var m=ie(f).hoistableScripts,b=md(a),w=m.get(b);w||(w=f.querySelector(Qm(b)),w||(a=y({src:a,async:!0,type:"module"},o),(o=Fr.get(b))&&Wb(a,o),w=f.createElement("script"),ce(w),Vs(w,"link",a),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function aw(a,o,f,m){var b=(b=Pe.current)?$v(b):null;if(!b)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=pd(f.href),f=ie(b).hoistableStyles,m=f.get(o),m||(m={type:"style",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=pd(f.href);var w=ie(b).hoistableStyles,U=w.get(a);if(U||(b=b.ownerDocument||b,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,U),(w=b.querySelector(Jm(a)))&&!w._p&&(U.instance=w,U.state.loading=5),Fr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Fr.set(a,f),w||BL(b,a,f,U.state))),o&&m===null)throw Error(i(528,""));return U}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=md(f),f=ie(b).hoistableScripts,m=f.get(o),m||(m={type:"script",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function pd(a){return'href="'+Kt(a)+'"'}function Jm(a){return'link[rel="stylesheet"]['+a+"]"}function rw(a){return y({},a,{"data-precedence":a.precedence,precedence:null})}function BL(a,o,f,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Vs(o,"link",f),ce(o),a.head.appendChild(o))}function md(a){return'[src="'+Kt(a)+'"]'}function Qm(a){return"script[async]"+a}function ow(a,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+Kt(f.href)+'"]');if(m)return o.instance=m,ce(m),m;var b=y({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),ce(m),Vs(m,"style",b),ey(m,f.precedence,a),o.instance=m;case"stylesheet":b=pd(f.href);var w=a.querySelector(Jm(b));if(w)return o.state.loading|=4,o.instance=w,ce(w),w;m=rw(f),(b=Fr.get(b))&&Xb(m,b),w=(a.ownerDocument||a).createElement("link"),ce(w);var U=w;return U._p=new Promise(function(j,re){U.onload=j,U.onerror=re}),Vs(w,"link",m),o.state.loading|=4,ey(w,f.precedence,a),o.instance=w;case"script":return w=md(f.src),(b=a.querySelector(Qm(w)))?(o.instance=b,ce(b),b):(m=f,(b=Fr.get(w))&&(m=y({},f),Wb(m,b)),a=a.ownerDocument||a,b=a.createElement("script"),ce(b),Vs(b,"link",m),a.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,ey(m,f.precedence,a));return o.instance}function ey(a,o,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,U=0;U<m.length;U++){var j=m[U];if(j.dataset.precedence===o)w=j;else if(w!==b)break}w?w.parentNode.insertBefore(a,w.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(a,o.firstChild))}function Xb(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Wb(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var ty=null;function lw(a,o,f){if(ty===null){var m=new Map,b=ty=new Map;b.set(f,m)}else b=ty,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(a))return m;for(m.set(a,null),f=f.getElementsByTagName(a),b=0;b<f.length;b++){var w=f[b];if(!(w[tt]||w[an]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var U=w.getAttribute(o)||"";U=a+U;var j=m.get(U);j?j.push(w):m.set(U,[w])}}return m}function cw(a,o,f){a=a.ownerDocument||a,a.head.insertBefore(f,o==="title"?a.querySelector("head > title"):null)}function zL(a,o,f){if(f===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function uw(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function FL(a,o,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=pd(m.href),w=o.querySelector(Jm(b));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=ny.bind(a),o.then(a,a)),f.state.loading|=4,f.instance=w,ce(w);return}w=o.ownerDocument||o,m=rw(m),(b=Fr.get(b))&&Xb(m,b),w=w.createElement("link"),ce(w);var U=w;U._p=new Promise(function(j,re){U.onload=j,U.onerror=re}),Vs(w,"link",m),f.instance=w}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(f,o),(o=f.state.preload)&&(f.state.loading&3)===0&&(a.count++,f=ny.bind(a),o.addEventListener("load",f),o.addEventListener("error",f))}}var Yb=0;function VL(a,o){return a.stylesheets&&a.count===0&&sy(a,a.stylesheets),0<a.count||0<a.imgCount?function(f){var m=setTimeout(function(){if(a.stylesheets&&sy(a,a.stylesheets),a.unsuspend){var w=a.unsuspend;a.unsuspend=null,w()}},6e4+o);0<a.imgBytes&&Yb===0&&(Yb=62500*xL());var b=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&sy(a,a.stylesheets),a.unsuspend)){var w=a.unsuspend;a.unsuspend=null,w()}},(a.imgBytes>Yb?50:800)+o);return a.unsuspend=f,function(){a.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function ny(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var iy=null;function sy(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,iy=new Map,o.forEach(HL,a),iy=null,ny.call(a))}function HL(a,o){if(!(o.state.loading&4)){var f=iy.get(a);if(f)var m=f.get(null);else{f=new Map,iy.set(a,f);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var U=b[w];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(f.set(U.dataset.precedence,U),m=U)}m&&f.set(null,m)}b=o.instance,U=b.getAttribute("data-precedence"),w=f.get(U)||m,w===m&&f.set(null,b),f.set(U,b),this.count++,m=ny.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),o.state.loading|=4}}var $m={$$typeof:O,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function kL(a,o,f,m,b,w,U,j,re){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.hiddenUpdates=Sn(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function hw(a,o,f,m,b,w,U,j,re,Te,He,We){return a=new kL(a,o,f,U,re,Te,He,We,j),o=1,w===!0&&(o|=24),w=Ls(3,null,null,o),a.current=w,w.stateNode=a,o=om(),o.refCount++,a.pooledCache=o,o.refCount++,w.memoizedState={element:m,isDehydrated:f,cache:o},dm(w),a}function fw(a){return a?(a=Yo,a):Yo}function dw(a,o,f,m,b,w){b=fw(b),m.context===null?m.context=b:m.pendingContext=b,m=Rr(o),m.payload={element:f},w=w===void 0?null:w,w!==null&&(m.callback=w),f=so(a,m,o),f!==null&&(h(f,a,o),nl(f,a,o))}function pw(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<o?f:o}}function Kb(a,o){pw(a,o),(a=a.alternate)&&pw(a,o)}function mw(a){if(a.tag===13||a.tag===31){var o=Wo(a,67108864);o!==null&&h(o,a,67108864),Kb(a,67108864)}}function gw(a){if(a.tag===13||a.tag===31){var o=Fs();o=_s(o);var f=Wo(a,o);f!==null&&h(f,a,o),Kb(a,o)}}var ay=!0;function GL(a,o,f,m){var b=k.T;k.T=null;var w=te.p;try{te.p=2,Zb(a,o,f,m)}finally{te.p=w,k.T=b}}function jL(a,o,f,m){var b=k.T;k.T=null;var w=te.p;try{te.p=8,Zb(a,o,f,m)}finally{te.p=w,k.T=b}}function Zb(a,o,f,m){if(ay){var b=Jb(m);if(b===null)Pb(a,o,m,ry,f),yw(a,m);else if(XL(b,a,o,f,m))m.stopPropagation();else if(yw(a,m),o&4&&-1<qL.indexOf(a)){for(;b!==null;){var w=Q(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var U=lt(w.pendingLanes);if(U!==0){var j=w;for(j.pendingLanes|=2,j.entangledLanes|=2;U;){var re=1<<31-Ft(U);j.entanglements[1]|=re,U&=~re}hl(w),(Rn&6)===0&&(Ca=Be()+500,Wm(0))}}break;case 31:case 13:j=Wo(w,2),j!==null&&h(j,w,2),W(),Kb(w,2)}if(w=Jb(m),w===null&&Pb(a,o,m,ry,f),w===b)break;b=w}b!==null&&m.stopPropagation()}else Pb(a,o,m,null,f)}}function Jb(a){return a=ff(a),Qb(a)}var ry=null;function Qb(a){if(ry=null,a=z(a),a!==null){var o=r(a);if(o===null)a=null;else{var f=o.tag;if(f===13){if(a=l(o),a!==null)return a;a=null}else if(f===31){if(a=c(o),a!==null)return a;a=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return ry=a,null}function vw(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case ke:return 2;case Tt:return 8;case ct:case vt:return 32;case fn:return 268435456;default:return 32}default:return 32}}var $b=!1,Xc=null,Wc=null,Yc=null,eg=new Map,tg=new Map,Kc=[],qL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(a,o){switch(a){case"focusin":case"focusout":Xc=null;break;case"dragenter":case"dragleave":Wc=null;break;case"mouseover":case"mouseout":Yc=null;break;case"pointerover":case"pointerout":eg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tg.delete(o.pointerId)}}function ng(a,o,f,m,b,w){return a===null||a.nativeEvent!==w?(a={blockedOn:o,domEventName:f,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},o!==null&&(o=Q(o),o!==null&&mw(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),a)}function XL(a,o,f,m,b){switch(o){case"focusin":return Xc=ng(Xc,a,o,f,m,b),!0;case"dragenter":return Wc=ng(Wc,a,o,f,m,b),!0;case"mouseover":return Yc=ng(Yc,a,o,f,m,b),!0;case"pointerover":var w=b.pointerId;return eg.set(w,ng(eg.get(w)||null,a,o,f,m,b)),!0;case"gotpointercapture":return w=b.pointerId,tg.set(w,ng(tg.get(w)||null,a,o,f,m,b)),!0}return!1}function _w(a){var o=z(a.target);if(o!==null){var f=r(o);if(f!==null){if(o=f.tag,o===13){if(o=l(f),o!==null){a.blockedOn=o,qt(a.priority,function(){gw(f)});return}}else if(o===31){if(o=c(f),o!==null){a.blockedOn=o,qt(a.priority,function(){gw(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function oy(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var f=Jb(a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Au=m,f.target.dispatchEvent(m),Au=null}else return o=Q(f),o!==null&&mw(o),a.blockedOn=f,!1;o.shift()}return!0}function xw(a,o,f){oy(a)&&f.delete(o)}function WL(){$b=!1,Xc!==null&&oy(Xc)&&(Xc=null),Wc!==null&&oy(Wc)&&(Wc=null),Yc!==null&&oy(Yc)&&(Yc=null),eg.forEach(xw),tg.forEach(xw)}function ly(a,o){a.blockedOn===o&&(a.blockedOn=null,$b||($b=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WL)))}var cy=null;function bw(a){cy!==a&&(cy=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cy===a&&(cy=null);for(var o=0;o<a.length;o+=3){var f=a[o],m=a[o+1],b=a[o+2];if(typeof m!="function"){if(Qb(m||f)===null)continue;break}var w=Q(f);w!==null&&(a.splice(o,3),o-=3,zm(w,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function gd(a){function o(re){return ly(re,a)}Xc!==null&&ly(Xc,a),Wc!==null&&ly(Wc,a),Yc!==null&&ly(Yc,a),eg.forEach(o),tg.forEach(o);for(var f=0;f<Kc.length;f++){var m=Kc[f];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Kc.length&&(f=Kc[0],f.blockedOn===null);)_w(f),f.blockedOn===null&&Kc.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],w=f[m+1],U=b[B]||null;if(typeof w=="function")U||bw(f);else if(U){var j=null;if(w&&w.hasAttribute("formAction")){if(b=w,U=w[B]||null)j=U.formAction;else if(Qb(b)!==null)continue}else j=U.action;typeof j=="function"?f[m+1]=j:(f.splice(m,3),m-=3),bw(f)}}}function Sw(){function a(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(U){return b=U})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function eS(a){this._internalRoot=a}uy.prototype.render=eS.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(i(409));var f=o.current,m=Fs();dw(f,m,a,o,null,null)},uy.prototype.unmount=eS.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;dw(a.current,2,null,a,null,null),W(),o[K]=null}};function uy(a){this._internalRoot=a}uy.prototype.unstable_scheduleHydration=function(a){if(a){var o=Zi();a={blockedOn:null,target:a,priority:o};for(var f=0;f<Kc.length&&o!==0&&o<Kc[f].priority;f++);Kc.splice(f,0,a),f===0&&_w(a)}};var Ew=e.version;if(Ew!=="19.2.0")throw Error(i(527,Ew,"19.2.0"));te.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=p(o),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var YL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hy.isDisabled&&hy.supportsFiber)try{Et=hy.inject(YL),ut=hy}catch{}}return sg.createRoot=function(a,o){if(!s(a))throw Error(i(299));var f=!1,m="",b=km,w=Gv,U=$f;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(U=o.onRecoverableError)),o=hw(a,1,!1,null,null,f,m,null,b,w,U,Sw),a[K]=o.current,Ib(a),new eS(o)},sg.hydrateRoot=function(a,o,f){if(!s(a))throw Error(i(299));var m=!1,b="",w=km,U=Gv,j=$f,re=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.formState!==void 0&&(re=f.formState)),o=hw(a,1,!0,o,f??null,m,b,re,w,U,j,Sw),o.context=fw(null),f=o.current,m=Fs(),m=_s(m),b=Rr(m),b.callback=null,so(f,b,m),f=m,o.current.lanes=f,Bi(o,f),hl(o),a[K]=o.current,Ib(a),new uy(o)},sg.version="19.2.0",sg}var Uw;function lI(){if(Uw)return iS.exports;Uw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iS.exports=oI(),iS.exports}var cI=lI();const uI=E0(cI),V1=me.createContext({});function H1(n){const e=me.useRef(null);return e.current===null&&(e.current=n()),e.current}const k1=typeof window<"u",G2=k1?me.useLayoutEffect:me.useEffect,Ux=me.createContext(null);function G1(n,e){n.indexOf(e)===-1&&n.push(e)}function j1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cc=(n,e,t)=>t>e?e:t<n?n:t;let q1=()=>{};const uc={},j2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function q2(n){return typeof n=="object"&&n!==null}const X2=n=>/^0[^.\s]+$/u.test(n);function X1(n){let e;return()=>(e===void 0&&(e=n()),e)}const qr=n=>n,hI=(n,e)=>t=>e(n(t)),M0=(...n)=>n.reduce(hI),jg=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class W1{constructor(){this.subscriptions=[]}add(e){return G1(this.subscriptions,e),()=>j1(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const l=this.subscriptions[r];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pl=n=>n*1e3,jr=n=>n/1e3;function W2(n,e){return e?n*(1e3/e):0}const Y2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,fI=1e-7,dI=12;function pI(n,e,t,i,s){let r,l,c=0;do l=e+(t-e)/2,r=Y2(l,i,s)-n,r>0?t=l:e=l;while(Math.abs(r)>fI&&++c<dI);return l}function T0(n,e,t,i){if(n===e&&t===i)return qr;const s=r=>pI(r,0,1,n,t);return r=>r===0||r===1?r:Y2(s(r),e,i)}const K2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Z2=n=>e=>1-n(1-e),J2=T0(.33,1.53,.69,.99),Y1=Z2(J2),Q2=K2(Y1),$2=n=>(n*=2)<1?.5*Y1(n):.5*(2-Math.pow(2,-10*(n-1))),K1=n=>1-Math.sin(Math.acos(n)),eO=Z2(K1),tO=K2(K1),mI=T0(.42,0,1,1),gI=T0(0,0,.58,1),nO=T0(.42,0,.58,1),vI=n=>Array.isArray(n)&&typeof n[0]!="number",iO=n=>Array.isArray(n)&&typeof n[0]=="number",yI={linear:qr,easeIn:mI,easeInOut:nO,easeOut:gI,circIn:K1,circInOut:tO,circOut:eO,backIn:Y1,backInOut:Q2,backOut:J2,anticipate:$2},_I=n=>typeof n=="string",Lw=n=>{if(iO(n)){q1(n.length===4);const[e,t,i,s]=n;return T0(e,t,i,s)}else if(_I(n))return yI[n];return n},fy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xI(n,e){let t=new Set,i=new Set,s=!1,r=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(p.schedule(g),n()),g(c)}const p={schedule:(g,y=!1,_=!1)=>{const E=_&&s?t:i;return y&&l.add(g),E.has(g)||E.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(c=g,s){r=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,r&&(r=!1,p.process(g))}};return p}const bI=40;function sO(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,l=fy.reduce((O,D)=>(O[D]=xI(r),O),{}),{setup:c,read:d,resolveKeyframes:p,preUpdate:g,update:y,preRender:_,render:x,postRender:E}=l,A=()=>{const O=uc.useManualTiming?s.timestamp:performance.now();t=!1,uc.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(O-s.timestamp,bI),1)),s.timestamp=O,s.isProcessing=!0,c.process(s),d.process(s),p.process(s),g.process(s),y.process(s),_.process(s),x.process(s),E.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(A))},T=()=>{t=!0,i=!0,s.isProcessing||n(A)};return{schedule:fy.reduce((O,D)=>{const H=l[D];return O[D]=(I,V=!1,F=!1)=>(t||T(),H.schedule(I,V,F)),O},{}),cancel:O=>{for(let D=0;D<fy.length;D++)l[fy[D]].cancel(O)},state:s,steps:l}}const{schedule:wi,cancel:du,state:ks,steps:oS}=sO(typeof requestAnimationFrame<"u"?requestAnimationFrame:qr,!0);let b_;function SI(){b_=void 0}const Qa={now:()=>(b_===void 0&&Qa.set(ks.isProcessing||uc.useManualTiming?ks.timestamp:performance.now()),b_),set:n=>{b_=n,queueMicrotask(SI)}},aO=n=>e=>typeof e=="string"&&e.startsWith(n),Z1=aO("--"),EI=aO("var(--"),J1=n=>EI(n)?MI.test(n.split("/*")[0].trim()):!1,MI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},qg={...bp,transform:n=>cc(0,1,n)},dy={...bp,default:1},Mg=n=>Math.round(n*1e5)/1e5,Q1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TI(n){return n==null}const wI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$1=(n,e)=>t=>!!(typeof t=="string"&&wI.test(t)&&t.startsWith(n)||e&&!TI(t)&&Object.prototype.hasOwnProperty.call(t,e)),rO=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,l,c]=i.match(Q1);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},AI=n=>cc(0,255,n),lS={...bp,transform:n=>Math.round(AI(n))},Fh={test:$1("rgb","red"),parse:rO("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+lS.transform(n)+", "+lS.transform(e)+", "+lS.transform(t)+", "+Mg(qg.transform(i))+")"};function CI(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const BE={test:$1("#"),parse:CI,transform:Fh.transform},w0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ru=w0("deg"),ml=w0("%"),tn=w0("px"),RI=w0("vh"),OI=w0("vw"),Iw={...ml,parse:n=>ml.parse(n)/100,transform:n=>ml.transform(n*100)},Kd={test:$1("hsl","hue"),parse:rO("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ml.transform(Mg(e))+", "+ml.transform(Mg(t))+", "+Mg(qg.transform(i))+")"},as={test:n=>Fh.test(n)||BE.test(n)||Kd.test(n),parse:n=>Fh.test(n)?Fh.parse(n):Kd.test(n)?Kd.parse(n):BE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Fh.transform(n):Kd.transform(n),getAnimatableNone:n=>{const e=as.parse(n);return e.alpha=0,as.transform(e)}},DI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NI(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Q1))==null?void 0:e.length)||0)+(((t=n.match(DI))==null?void 0:t.length)||0)>0}const oO="number",lO="color",UI="var",LI="var(",Pw="${}",II=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=e.replace(II,d=>(as.test(d)?(i.color.push(r),s.push(lO),t.push(as.parse(d))):d.startsWith(LI)?(i.var.push(r),s.push(UI),t.push(d)):(i.number.push(r),s.push(oO),t.push(parseFloat(d))),++r,Pw)).split(Pw);return{values:t,split:c,indexes:i,types:s}}function cO(n){return Xg(n).values}function uO(n){const{split:e,types:t}=Xg(n),i=e.length;return s=>{let r="";for(let l=0;l<i;l++)if(r+=e[l],s[l]!==void 0){const c=t[l];c===oO?r+=Mg(s[l]):c===lO?r+=as.transform(s[l]):r+=s[l]}return r}}const PI=n=>typeof n=="number"?0:as.test(n)?as.getAnimatableNone(n):n;function BI(n){const e=cO(n);return uO(n)(e.map(PI))}const pu={test:NI,parse:cO,createTransformer:uO,getAnimatableNone:BI};function cS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function zI({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,l=0;if(!e)s=r=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;s=cS(d,c,n+1/3),r=cS(d,c,n),l=cS(d,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(l*255),alpha:i}}function D_(n,e){return t=>t>0?e:n}const Ui=(n,e,t)=>n+(e-n)*t,uS=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},FI=[BE,Fh,Kd],VI=n=>FI.find(e=>e.test(n));function Bw(n){const e=VI(n);if(!e)return!1;let t=e.parse(n);return e===Kd&&(t=zI(t)),t}const zw=(n,e)=>{const t=Bw(n),i=Bw(e);if(!t||!i)return D_(n,e);const s={...t};return r=>(s.red=uS(t.red,i.red,r),s.green=uS(t.green,i.green,r),s.blue=uS(t.blue,i.blue,r),s.alpha=Ui(t.alpha,i.alpha,r),Fh.transform(s))},zE=new Set(["none","hidden"]);function HI(n,e){return zE.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function kI(n,e){return t=>Ui(n,e,t)}function eM(n){return typeof n=="number"?kI:typeof n=="string"?J1(n)?D_:as.test(n)?zw:qI:Array.isArray(n)?hO:typeof n=="object"?as.test(n)?zw:GI:D_}function hO(n,e){const t=[...n],i=t.length,s=n.map((r,l)=>eM(r)(r,e[l]));return r=>{for(let l=0;l<i;l++)t[l]=s[l](r);return t}}function GI(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=eM(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function jI(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],l=n.indexes[r][i[r]],c=n.values[l]??0;t[s]=c,i[r]++}return t}const qI=(n,e)=>{const t=pu.createTransformer(e),i=Xg(n),s=Xg(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?zE.has(n)&&!s.values.length||zE.has(e)&&!i.values.length?HI(n,e):M0(hO(jI(i,s),s.values),t):D_(n,e)};function fO(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ui(n,e,t):eM(n)(n,e)}const XI=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>wi.update(e,t),stop:()=>du(e),now:()=>ks.isProcessing?ks.timestamp:Qa.now()}},dO=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},N_=2e4;function tM(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<N_;)e+=t,i=n.next(e);return e>=N_?1/0:e}function WI(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(tM(i),N_);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:jr(s)}}const YI=5;function pO(n,e,t){const i=Math.max(e-YI,0);return W2(t-n(i),e-i)}const Gi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hS=.001;function KI({duration:n=Gi.duration,bounce:e=Gi.bounce,velocity:t=Gi.velocity,mass:i=Gi.mass}){let s,r,l=1-e;l=cc(Gi.minDamping,Gi.maxDamping,l),n=cc(Gi.minDuration,Gi.maxDuration,jr(n)),l<1?(s=p=>{const g=p*l,y=g*n,_=g-t,x=FE(p,l),E=Math.exp(-y);return hS-_/x*E},r=p=>{const y=p*l*n,_=y*t+t,x=Math.pow(l,2)*Math.pow(p,2)*n,E=Math.exp(-y),A=FE(Math.pow(p,2),l);return(-s(p)+hS>0?-1:1)*((_-x)*E)/A}):(s=p=>{const g=Math.exp(-p*n),y=(p-t)*n+1;return-hS+g*y},r=p=>{const g=Math.exp(-p*n),y=(t-p)*(n*n);return g*y});const c=5/n,d=JI(s,r,c);if(n=pl(n),isNaN(d))return{stiffness:Gi.stiffness,damping:Gi.damping,duration:n};{const p=Math.pow(d,2)*i;return{stiffness:p,damping:l*2*Math.sqrt(i*p),duration:n}}}const ZI=12;function JI(n,e,t){let i=t;for(let s=1;s<ZI;s++)i=i-n(i)/e(i);return i}function FE(n,e){return n*Math.sqrt(1-e*e)}const QI=["duration","bounce"],$I=["stiffness","damping","mass"];function Fw(n,e){return e.some(t=>n[t]!==void 0)}function eP(n){let e={velocity:Gi.velocity,stiffness:Gi.stiffness,damping:Gi.damping,mass:Gi.mass,isResolvedFromDuration:!1,...n};if(!Fw(n,$I)&&Fw(n,QI))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*cc(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Gi.mass,stiffness:s,damping:r}}else{const t=KI(n);e={...e,...t,mass:Gi.mass},e.isResolvedFromDuration=!0}return e}function U_(n=Gi.visualDuration,e=Gi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:r},{stiffness:d,damping:p,mass:g,duration:y,velocity:_,isResolvedFromDuration:x}=eP({...t,velocity:-jr(t.velocity||0)}),E=_||0,A=p/(2*Math.sqrt(d*g)),T=l-r,M=jr(Math.sqrt(d/g)),R=Math.abs(T)<5;i||(i=R?Gi.restSpeed.granular:Gi.restSpeed.default),s||(s=R?Gi.restDelta.granular:Gi.restDelta.default);let O;if(A<1){const H=FE(M,A);O=I=>{const V=Math.exp(-A*M*I);return l-V*((E+A*M*T)/H*Math.sin(H*I)+T*Math.cos(H*I))}}else if(A===1)O=H=>l-Math.exp(-M*H)*(T+(E+M*T)*H);else{const H=M*Math.sqrt(A*A-1);O=I=>{const V=Math.exp(-A*M*I),F=Math.min(H*I,300);return l-V*((E+A*M*T)*Math.sinh(F)+H*T*Math.cosh(F))/H}}const D={calculatedDuration:x&&y||null,next:H=>{const I=O(H);if(x)c.done=H>=y;else{let V=H===0?E:0;A<1&&(V=H===0?pl(E):pO(O,H,I));const F=Math.abs(V)<=i,L=Math.abs(l-I)<=s;c.done=F&&L}return c.value=c.done?l:I,c},toString:()=>{const H=Math.min(tM(D),N_),I=dO(V=>D.next(H*V).value,H,30);return H+"ms "+I},toTransition:()=>{}};return D}U_.applyToOptions=n=>{const e=WI(n,100,U_);return n.ease=e.ease,n.duration=pl(e.duration),n.type="keyframes",n};function VE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:l,min:c,max:d,restDelta:p=.5,restSpeed:g}){const y=n[0],_={done:!1,value:y},x=F=>c!==void 0&&F<c||d!==void 0&&F>d,E=F=>c===void 0?d:d===void 0||Math.abs(c-F)<Math.abs(d-F)?c:d;let A=t*e;const T=y+A,M=l===void 0?T:l(T);M!==T&&(A=M-y);const R=F=>-A*Math.exp(-F/i),O=F=>M+R(F),D=F=>{const L=R(F),P=O(F);_.done=Math.abs(L)<=p,_.value=_.done?M:P};let H,I;const V=F=>{x(_.value)&&(H=F,I=U_({keyframes:[_.value,E(_.value)],velocity:pO(O,F,_.value),damping:s,stiffness:r,restDelta:p,restSpeed:g}))};return V(0),{calculatedDuration:null,next:F=>{let L=!1;return!I&&H===void 0&&(L=!0,D(F),V(F)),H!==void 0&&F>=H?I.next(F-H):(!L&&D(F),_)}}}function tP(n,e,t){const i=[],s=t||uc.mix||fO,r=n.length-1;for(let l=0;l<r;l++){let c=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||qr:e;c=M0(d,c)}i.push(c)}return i}function nP(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(q1(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=tP(e,i,s),d=c.length,p=g=>{if(l&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const _=jg(n[y],n[y+1],g);return c[y](_)};return t?g=>p(cc(n[0],n[r-1],g)):p}function iP(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=jg(0,e,i);n.push(Ui(t,1,s))}}function sP(n){const e=[0];return iP(e,n.length-1),e}function aP(n,e){return n.map(t=>t*e)}function rP(n,e){return n.map(()=>e||nO).splice(0,n.length-1)}function Tg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=vI(i)?i.map(Lw):Lw(i),r={done:!1,value:e[0]},l=aP(t&&t.length===e.length?t:sP(e),n),c=nP(l,e,{ease:Array.isArray(s)?s:rP(e,s)});return{calculatedDuration:n,next:d=>(r.value=c(d),r.done=d>=n,r)}}const oP=n=>n!==null;function nM(n,{repeat:e,repeatType:t="loop"},i,s=1){const r=n.filter(oP),c=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!c||i===void 0?r[c]:i}const lP={decay:VE,inertia:VE,tween:Tg,keyframes:Tg,spring:U_};function mO(n){typeof n.type=="string"&&(n.type=lP[n.type])}class iM{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const cP=n=>n/100;class sM extends iM{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Qa.now()&&this.tick(Qa.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;mO(e);const{type:t=Tg,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:l=0}=e;let{keyframes:c}=e;const d=t||Tg;d!==Tg&&typeof c[0]!="number"&&(this.mixKeyframes=M0(cP,fO(c[0],c[1])),c=[0,100]);const p=d({...e,keyframes:c});r==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=tM(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:_,repeatDelay:x,type:E,onUpdate:A,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-p*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?M<0:M>s;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,D=i;if(y){const F=Math.min(this.currentTime,s)/c;let L=Math.floor(F),P=F%1;!P&&F>=1&&(P=1),P===1&&L--,L=Math.min(L,y+1),!!(L%2)&&(_==="reverse"?(P=1-P,x&&(P-=x/c)):_==="mirror"&&(D=l)),O=cc(0,1,P)*c}const H=R?{done:!1,value:g[0]}:D.next(O);r&&(H.value=r(H.value));let{done:I}=H;!R&&d!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return V&&E!==VE&&(H.value=nM(g,this.options,T,this.speed)),A&&A(H.value),V&&this.finish(),H}then(e,t){return this.finished.then(e,t)}get duration(){return jr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jr(e)}get time(){return jr(this.currentTime)}set time(e){var t;e=pl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Qa.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=jr(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=XI,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Qa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function uP(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Vh=n=>n*180/Math.PI,HE=n=>{const e=Vh(Math.atan2(n[1],n[0]));return kE(e)},hP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:HE,rotateZ:HE,skewX:n=>Vh(Math.atan(n[1])),skewY:n=>Vh(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},kE=n=>(n=n%360,n<0&&(n+=360),n),Vw=HE,Hw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),kw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),fP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Hw,scaleY:kw,scale:n=>(Hw(n)+kw(n))/2,rotateX:n=>kE(Vh(Math.atan2(n[6],n[5]))),rotateY:n=>kE(Vh(Math.atan2(-n[2],n[0]))),rotateZ:Vw,rotate:Vw,skewX:n=>Vh(Math.atan(n[4])),skewY:n=>Vh(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function GE(n){return n.includes("scale")?1:0}function jE(n,e){if(!n||n==="none")return GE(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=fP,s=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=hP,s=c}if(!s)return GE(e);const r=i[e],l=s[1].split(",").map(pP);return typeof r=="function"?r(l):l[r]}const dP=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return jE(t,e)};function pP(n){return parseFloat(n.trim())}const Sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ep=new Set(Sp),Gw=n=>n===bp||n===tn,mP=new Set(["x","y","z"]),gP=Sp.filter(n=>!mP.has(n));function vP(n){const e=[];return gP.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Yh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>jE(e,"x"),y:(n,{transform:e})=>jE(e,"y")};Yh.translateX=Yh.x;Yh.translateY=Yh.y;const Kh=new Set;let qE=!1,XE=!1,WE=!1;function gO(){if(XE){const n=Array.from(Kh).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=vP(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,l])=>{var c;(c=i.getValue(r))==null||c.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}XE=!1,qE=!1,Kh.forEach(n=>n.complete(WE)),Kh.clear()}function vO(){Kh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(XE=!0)})}function yP(){WE=!0,vO(),gO(),WE=!1}class aM{constructor(e,t,i,s,r,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Kh.add(this),qE||(qE=!0,wi.read(vO),wi.resolveKeyframes(gO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),l=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&t){const c=i.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&r===void 0&&s.set(e[0])}uP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Kh.delete(this)}cancel(){this.state==="scheduled"&&(Kh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _P=n=>n.startsWith("--");function xP(n,e,t){_P(e)?n.style.setProperty(e,t):n.style[e]=t}const bP=X1(()=>window.ScrollTimeline!==void 0),SP={};function EP(n,e){const t=X1(n);return()=>SP[e]??t()}const yO=EP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xg=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,jw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xg([0,.65,.55,1]),circOut:xg([.55,0,1,.45]),backIn:xg([.31,.01,.66,-.59]),backOut:xg([.33,1.53,.69,.99])};function _O(n,e){if(n)return typeof n=="function"?yO()?dO(n,e):"ease-out":iO(n)?xg(n):Array.isArray(n)?n.map(t=>_O(t,e)||jw.easeOut):jw[n]}function MP(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:l="loop",ease:c="easeOut",times:d}={},p=void 0){const g={[e]:t};d&&(g.offset=d);const y=_O(c,s);Array.isArray(y)&&(g.easing=y);const _={delay:i,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:r+1,direction:l==="reverse"?"alternate":"normal"};return p&&(_.pseudoElement=p),n.animate(g,_)}function xO(n){return typeof n=="function"&&"applyToOptions"in n}function TP({type:n,...e}){return xO(n)&&yO()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class wP extends iM{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:r,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!r,this.allowFlatten=l,this.options=e,q1(typeof e.type!="string");const p=TP(e);this.animation=MP(t,i,s,p,r),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const g=nM(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):xP(t,i,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return jr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jr(e)}get time(){return jr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&bP()?(this.animation.timeline=e,qr):t(this)}}const bO={anticipate:$2,backInOut:Q2,circInOut:tO};function AP(n){return n in bO}function CP(n){typeof n.ease=="string"&&AP(n.ease)&&(n.ease=bO[n.ease])}const qw=10;class RP extends wP{constructor(e){CP(e),mO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:r,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new sM({...l,autoplay:!1}),d=pl(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-qw).value,c.sample(d).value,qw),c.stop()}}const Xw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(pu.test(n)||n==="0")&&!n.startsWith("url("));function OP(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function DP(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],l=Xw(s,e),c=Xw(r,e);return!l||!c?!1:OP(n)||(t==="spring"||xO(t))&&i}function YE(n){n.duration=0,n.type="keyframes"}const NP=new Set(["opacity","clipPath","filter","transform"]),UP=X1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function LP(n){var g;const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:r,type:l}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=e.owner.getProps();return UP()&&t&&NP.has(t)&&(t!=="transform"||!p)&&!d&&!i&&s!=="mirror"&&r!==0&&l!=="inertia"}const IP=40;class PP extends iM{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:l="loop",keyframes:c,name:d,motionValue:p,element:g,...y}){var E;super(),this.stop=()=>{var A,T;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Qa.now();const _={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:l,name:d,motionValue:p,element:g,...y},x=(g==null?void 0:g.KeyframeResolver)||aM;this.keyframeResolver=new x(c,(A,T,M)=>this.onKeyframesResolved(A,T,_,!M),d,p,g),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:r,type:l,velocity:c,delay:d,isHandoff:p,onUpdate:g}=i;this.resolvedAt=Qa.now(),DP(e,r,l,c)||((uc.instantAnimations||!d)&&(g==null||g(nM(e,i,t))),e[0]=e[e.length-1],YE(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>IP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},x=!p&&LP(_)?new RP({..._,element:_.motionValue.owner.current}):new sM(_);x.finished.then(()=>this.notifyFinished()).catch(qr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),yP()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const BP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zP(n){const e=BP.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function SO(n,e,t=1){const[i,s]=zP(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const l=r.trim();return j2(l)?parseFloat(l):l}return J1(s)?SO(s,e,t+1):s}function rM(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const EO=new Set(["width","height","top","left","right","bottom",...Sp]),FP={test:n=>n==="auto",parse:n=>n},MO=n=>e=>e.test(n),TO=[bp,tn,ml,ru,OI,RI,FP],Ww=n=>TO.find(MO(n));function VP(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||X2(n):!0}const HP=new Set(["brightness","contrast","saturate","opacity"]);function kP(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Q1)||[];if(!i)return n;const s=t.replace(i,"");let r=HP.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const GP=/\b([a-z-]*)\(.*?\)/gu,KE={...pu,getAnimatableNone:n=>{const e=n.match(GP);return e?e.map(kP).join(" "):n}},Yw={...bp,transform:Math.round},jP={rotate:ru,rotateX:ru,rotateY:ru,rotateZ:ru,scale:dy,scaleX:dy,scaleY:dy,scaleZ:dy,skew:ru,skewX:ru,skewY:ru,distance:tn,translateX:tn,translateY:tn,translateZ:tn,x:tn,y:tn,z:tn,perspective:tn,transformPerspective:tn,opacity:qg,originX:Iw,originY:Iw,originZ:tn},oM={borderWidth:tn,borderTopWidth:tn,borderRightWidth:tn,borderBottomWidth:tn,borderLeftWidth:tn,borderRadius:tn,radius:tn,borderTopLeftRadius:tn,borderTopRightRadius:tn,borderBottomRightRadius:tn,borderBottomLeftRadius:tn,width:tn,maxWidth:tn,height:tn,maxHeight:tn,top:tn,right:tn,bottom:tn,left:tn,padding:tn,paddingTop:tn,paddingRight:tn,paddingBottom:tn,paddingLeft:tn,margin:tn,marginTop:tn,marginRight:tn,marginBottom:tn,marginLeft:tn,backgroundPositionX:tn,backgroundPositionY:tn,...jP,zIndex:Yw,fillOpacity:qg,strokeOpacity:qg,numOctaves:Yw},qP={...oM,color:as,backgroundColor:as,outlineColor:as,fill:as,stroke:as,borderColor:as,borderTopColor:as,borderRightColor:as,borderBottomColor:as,borderLeftColor:as,filter:KE,WebkitFilter:KE},wO=n=>qP[n];function AO(n,e){let t=wO(n);return t!==KE&&(t=pu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const XP=new Set(["auto","none","0"]);function WP(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!XP.has(r)&&Xg(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=AO(t,s)}class YP extends aM{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),J1(p))){const g=SO(p,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!EO.has(i)||e.length!==2)return;const[s,r]=e,l=Ww(s),c=Ww(r);if(l!==c)if(Gw(l)&&Gw(c))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else Yh[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||VP(e[s]))&&i.push(s);i.length&&WP(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yh[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,l=i[r];i[r]=Yh[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,p])=>{e.getValue(d).set(p)}),this.resolveNoneKeyframes()}}function KP(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=(t==null?void 0:t[n])??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const CO=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function RO(n){return q2(n)&&"offsetHeight"in n}const Kw=30,ZP=n=>!isNaN(parseFloat(n));class JP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=Qa.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Qa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new W1);const i=this.events[e].add(t);return e==="change"?()=>{i(),wi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Qa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Kw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Kw);return W2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cp(n,e){return new JP(n,e)}const{schedule:lM}=sO(queueMicrotask,!1),So={x:!1,y:!1};function OO(){return So.x||So.y}function QP(n){return n==="x"||n==="y"?So[n]?null:(So[n]=!0,()=>{So[n]=!1}):So.x||So.y?null:(So.x=So.y=!0,()=>{So.x=So.y=!1})}function DO(n,e){const t=KP(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function Zw(n){return!(n.pointerType==="touch"||OO())}function $P(n,e,t={}){const[i,s,r]=DO(n,t),l=c=>{if(!Zw(c))return;const{target:d}=c,p=e(d,c);if(typeof p!="function"||!d)return;const g=y=>{Zw(y)&&(p(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return i.forEach(c=>{c.addEventListener("pointerenter",l,s)}),r}const NO=(n,e)=>e?n===e?!0:NO(n,e.parentElement):!1,cM=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,eB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tB(n){return eB.has(n.tagName)||n.tabIndex!==-1}const S_=new WeakSet;function Jw(n){return e=>{e.key==="Enter"&&n(e)}}function fS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const nB=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Jw(()=>{if(S_.has(t))return;fS(t,"down");const s=Jw(()=>{fS(t,"up")}),r=()=>fS(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Qw(n){return cM(n)&&!OO()}function iB(n,e,t={}){const[i,s,r]=DO(n,t),l=c=>{const d=c.currentTarget;if(!Qw(c))return;S_.add(d);const p=e(d,c),g=(x,E)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),S_.has(d)&&S_.delete(d),Qw(x)&&typeof p=="function"&&p(x,{success:E})},y=x=>{g(x,d===window||d===document||t.useGlobalTarget||NO(d,x.target))},_=x=>{g(x,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",_,s)};return i.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),RO(c)&&(c.addEventListener("focus",p=>nB(p,s)),!tB(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function UO(n){return q2(n)&&"ownerSVGElement"in n}function sB(n){return UO(n)&&n.tagName==="svg"}const ca=n=>!!(n&&n.getVelocity),aB=[...TO,as,pu],rB=n=>aB.find(MO(n)),uM=me.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function $w(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function oB(...n){return e=>{let t=!1;const i=n.map(s=>{const r=$w(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():$w(n[s],null)}}}}function lB(...n){return me.useCallback(oB(...n),n)}class cB extends me.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=RO(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function uB({children:n,isPresent:e,anchorX:t,root:i}){const s=me.useId(),r=me.useRef(null),l=me.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=me.useContext(uM),d=lB(r,n==null?void 0:n.ref);return me.useInsertionEffect(()=>{const{width:p,height:g,top:y,left:_,right:x}=l.current;if(e||!r.current||!p||!g)return;const E=t==="left"?`left: ${_}`:`right: ${x}`;r.current.dataset.motionPopId=s;const A=document.createElement("style");c&&(A.nonce=c);const T=i??document.head;return T.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${E}px !important;
            top: ${y}px !important;
          }
        `),()=>{T.contains(A)&&T.removeChild(A)}},[e]),q.jsx(cB,{isPresent:e,childRef:r,sizeRef:l,children:me.cloneElement(n,{ref:d})})}const hB=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:l,anchorX:c,root:d})=>{const p=H1(fB),g=me.useId();let y=!0,_=me.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:x=>{p.set(x,!0);for(const E of p.values())if(!E)return;i&&i()},register:x=>(p.set(x,!1),()=>p.delete(x))}),[t,p,i]);return r&&y&&(_={..._}),me.useMemo(()=>{p.forEach((x,E)=>p.set(E,!1))},[t]),me.useEffect(()=>{!t&&!p.size&&i&&i()},[t]),l==="popLayout"&&(n=q.jsx(uB,{isPresent:t,anchorX:c,root:d,children:n})),q.jsx(Ux.Provider,{value:_,children:n})};function fB(){return new Map}function LO(n=!0){const e=me.useContext(Ux);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=me.useId();me.useEffect(()=>{if(n)return s(r)},[n]);const l=me.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,l]:[!0]}const py=n=>n.key||"";function eA(n){const e=[];return me.Children.forEach(n,t=>{me.isValidElement(t)&&e.push(t)}),e}const dB=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[p,g]=LO(l),y=me.useMemo(()=>eA(n),[n]),_=l&&!p?[]:y.map(py),x=me.useRef(!0),E=me.useRef(y),A=H1(()=>new Map),[T,M]=me.useState(y),[R,O]=me.useState(y);G2(()=>{x.current=!1,E.current=y;for(let I=0;I<R.length;I++){const V=py(R[I]);_.includes(V)?A.delete(V):A.get(V)!==!0&&A.set(V,!1)}},[R,_.length,_.join("-")]);const D=[];if(y!==T){let I=[...y];for(let V=0;V<R.length;V++){const F=R[V],L=py(F);_.includes(L)||(I.splice(V,0,F),D.push(F))}return r==="wait"&&D.length&&(I=D),O(eA(I)),M(y),null}const{forceRender:H}=me.useContext(V1);return q.jsx(q.Fragment,{children:R.map(I=>{const V=py(I),F=l&&!p?!1:y===R||_.includes(V),L=()=>{if(A.has(V))A.set(V,!0);else return;let P=!0;A.forEach(Z=>{Z||(P=!1)}),P&&(H==null||H(),O(E.current),l&&(g==null||g()),i&&i())};return q.jsx(hB,{isPresent:F,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,root:d,onExitComplete:F?void 0:L,anchorX:c,children:I},V)})})},IO=me.createContext({strict:!1}),tA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},up={};for(const n in tA)up[n]={isEnabled:e=>tA[n].some(t=>!!e[t])};function pB(n){for(const e in n)up[e]={...up[e],...n[e]}}const mB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function L_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||mB.has(n)}let PO=n=>!L_(n);function gB(n){typeof n=="function"&&(PO=e=>e.startsWith("on")?!L_(e):n(e))}try{gB(require("@emotion/is-prop-valid").default)}catch{}function vB(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(PO(s)||t===!0&&L_(s)||!e&&!L_(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const Lx=me.createContext({});function Ix(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Wg(n){return typeof n=="string"||Array.isArray(n)}const hM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fM=["initial",...hM];function Px(n){return Ix(n.animate)||fM.some(e=>Wg(n[e]))}function BO(n){return!!(Px(n)||n.variants)}function yB(n,e){if(Px(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Wg(t)?t:void 0,animate:Wg(i)?i:void 0}}return n.inherit!==!1?e:{}}function _B(n){const{initial:e,animate:t}=yB(n,me.useContext(Lx));return me.useMemo(()=>({initial:e,animate:t}),[nA(e),nA(t)])}function nA(n){return Array.isArray(n)?n.join(" "):n}const Yg={};function xB(n){for(const e in n)Yg[e]=n[e],Z1(e)&&(Yg[e].isCSSVariable=!0)}function zO(n,{layout:e,layoutId:t}){return Ep.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Yg[n]||n==="opacity")}const bB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SB=Sp.length;function EB(n,e,t){let i="",s=!0;for(let r=0;r<SB;r++){const l=Sp[r],c=n[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const p=CO(c,oM[l]);if(!d){s=!1;const g=bB[l]||l;i+=`${g}(${p}) `}t&&(e[l]=p)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function dM(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let l=!1,c=!1;for(const d in e){const p=e[d];if(Ep.has(d)){l=!0;continue}else if(Z1(d)){s[d]=p;continue}else{const g=CO(p,oM[d]);d.startsWith("origin")?(c=!0,r[d]=g):i[d]=g}}if(e.transform||(l||t?i.transform=EB(e,n.transform,t):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:p="50%",originZ:g=0}=r;i.transformOrigin=`${d} ${p} ${g}`}}const pM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FO(n,e,t){for(const i in e)!ca(e[i])&&!zO(i,t)&&(n[i]=e[i])}function MB({transformTemplate:n},e){return me.useMemo(()=>{const t=pM();return dM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function TB(n,e){const t=n.style||{},i={};return FO(i,t,n),Object.assign(i,MB(n,e)),i}function wB(n,e){const t={},i=TB(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const AB={offset:"stroke-dashoffset",array:"stroke-dasharray"},CB={offset:"strokeDashoffset",array:"strokeDasharray"};function RB(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?AB:CB;n[r.offset]=tn.transform(-i);const l=tn.transform(e),c=tn.transform(t);n[r.array]=`${l} ${c}`}function VO(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:l=0,...c},d,p,g){if(dM(n,c,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:_}=n;y.transform&&(_.transform=y.transform,delete y.transform),(_.transform||y.transformOrigin)&&(_.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),_.transform&&(_.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),i!==void 0&&(y.scale=i),s!==void 0&&RB(y,s,r,l,!1)}const HO=()=>({...pM(),attrs:{}}),kO=n=>typeof n=="string"&&n.toLowerCase()==="svg";function OB(n,e,t,i){const s=me.useMemo(()=>{const r=HO();return VO(r,e,kO(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};FO(r,n.style,n),s.style={...r,...s.style}}return s}const DB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mM(n){return typeof n!="string"||n.includes("-")?!1:!!(DB.indexOf(n)>-1||/[A-Z]/u.test(n))}function NB(n,e,t,{latestValues:i},s,r=!1){const c=(mM(n)?OB:wB)(e,i,s,n),d=vB(e,typeof n=="string",r),p=n!==me.Fragment?{...d,...c,ref:t}:{},{children:g}=e,y=me.useMemo(()=>ca(g)?g.get():g,[g]);return me.createElement(n,{...p,children:y})}function iA(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function gM(n,e,t,i){if(typeof e=="function"){const[s,r]=iA(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=iA(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function E_(n){return ca(n)?n.get():n}function UB({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:LB(t,i,s,n),renderState:e()}}function LB(n,e,t,i){const s={},r=i(n,{});for(const _ in r)s[_]=E_(r[_]);let{initial:l,animate:c}=n;const d=Px(n),p=BO(n);e&&p&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const y=g?c:l;if(y&&typeof y!="boolean"&&!Ix(y)){const _=Array.isArray(y)?y:[y];for(let x=0;x<_.length;x++){const E=gM(n,_[x]);if(E){const{transitionEnd:A,transition:T,...M}=E;for(const R in M){let O=M[R];if(Array.isArray(O)){const D=g?O.length-1:0;O=O[D]}O!==null&&(s[R]=O)}for(const R in A)s[R]=A[R]}}}return s}const GO=n=>(e,t)=>{const i=me.useContext(Lx),s=me.useContext(Ux),r=()=>UB(n,e,i,s);return t?r():H1(r)};function vM(n,e,t){var r;const{style:i}=n,s={};for(const l in i)(ca(i[l])||e.style&&ca(e.style[l])||zO(l,n)||((r=t==null?void 0:t.getValue(l))==null?void 0:r.liveStyle)!==void 0)&&(s[l]=i[l]);return s}const IB=GO({scrapeMotionValuesFromProps:vM,createRenderState:pM});function jO(n,e,t){const i=vM(n,e,t);for(const s in n)if(ca(n[s])||ca(e[s])){const r=Sp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const PB=GO({scrapeMotionValuesFromProps:jO,createRenderState:HO}),BB=Symbol.for("motionComponentSymbol");function Zd(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zB(n,e,t){return me.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Zd(t)&&(t.current=i))},[e])}const yM=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),FB="framerAppearId",qO="data-"+yM(FB),XO=me.createContext({});function VB(n,e,t,i,s){var A,T;const{visualElement:r}=me.useContext(Lx),l=me.useContext(IO),c=me.useContext(Ux),d=me.useContext(uM).reducedMotion,p=me.useRef(null);i=i||l.renderer,!p.current&&i&&(p.current=i(n,{visualState:e,parent:r,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,y=me.useContext(XO);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&HB(p.current,t,s,y);const _=me.useRef(!1);me.useInsertionEffect(()=>{g&&_.current&&g.update(t,c)});const x=t[qO],E=me.useRef(!!x&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,x))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,x)));return G2(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),E.current&&g.animationState&&g.animationState.animateChanges())}),me.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,x)}),E.current=!1),g.enteringChildren=void 0)}),g}function HB(n,e,t,i){const{layoutId:s,layout:r,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:p,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:WO(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!l||c&&Zd(c),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:d,layoutRoot:p})}function WO(n){if(n)return n.options.allowProjection!==!1?n.projection:WO(n.parent)}function dS(n,{forwardMotionProps:e=!1}={},t,i){t&&pB(t);const s=mM(n)?PB:IB;function r(c,d){let p;const g={...me.useContext(uM),...c,layoutId:kB(c)},{isStatic:y}=g,_=_B(c),x=s(c,y);if(!y&&k1){GB();const E=jB(g);p=E.MeasureLayout,_.visualElement=VB(n,x,g,i,E.ProjectionNode)}return q.jsxs(Lx.Provider,{value:_,children:[p&&_.visualElement?q.jsx(p,{visualElement:_.visualElement,...g}):null,NB(n,c,zB(x,_.visualElement,d),x,y,e)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=me.forwardRef(r);return l[BB]=n,l}function kB({layoutId:n}){const e=me.useContext(V1).id;return e&&n!==void 0?e+"-"+n:n}function GB(n,e){me.useContext(IO).strict}function jB(n){const{drag:e,layout:t}=up;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function qB(n,e){if(typeof Proxy>"u")return dS;const t=new Map,i=(r,l)=>dS(r,l,n,e),s=(r,l)=>i(r,l);return new Proxy(s,{get:(r,l)=>l==="create"?i:(t.has(l)||t.set(l,dS(l,void 0,n,e)),t.get(l))})}function YO({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function XB({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function WB(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function pS(n){return n===void 0||n===1}function ZE({scale:n,scaleX:e,scaleY:t}){return!pS(n)||!pS(e)||!pS(t)}function Dh(n){return ZE(n)||KO(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function KO(n){return sA(n.x)||sA(n.y)}function sA(n){return n&&n!=="0%"}function I_(n,e,t){const i=n-t,s=e*i;return t+s}function aA(n,e,t,i,s){return s!==void 0&&(n=I_(n,s,i)),I_(n,t,i)+e}function JE(n,e=0,t=1,i,s){n.min=aA(n.min,e,t,i,s),n.max=aA(n.max,e,t,i,s)}function ZO(n,{x:e,y:t}){JE(n.x,e.translate,e.scale,e.originPoint),JE(n.y,t.translate,t.scale,t.originPoint)}const rA=.999999999999,oA=1.0000000000001;function YB(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,l;for(let c=0;c<s;c++){r=t[c],l=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Qd(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ZO(n,l)),i&&Dh(r.latestValues)&&Qd(n,r.latestValues))}e.x<oA&&e.x>rA&&(e.x=1),e.y<oA&&e.y>rA&&(e.y=1)}function Jd(n,e){n.min=n.min+e,n.max=n.max+e}function lA(n,e,t,i,s=.5){const r=Ui(n.min,n.max,s);JE(n,e,t,r,i)}function Qd(n,e){lA(n.x,e.x,e.scaleX,e.scale,e.originX),lA(n.y,e.y,e.scaleY,e.scale,e.originY)}function JO(n,e){return YO(WB(n.getBoundingClientRect(),e))}function KB(n,e,t){const i=JO(n,t),{scroll:s}=e;return s&&(Jd(i.x,s.offset.x),Jd(i.y,s.offset.y)),i}const cA=()=>({translate:0,scale:1,origin:0,originPoint:0}),$d=()=>({x:cA(),y:cA()}),uA=()=>({min:0,max:0}),Yi=()=>({x:uA(),y:uA()}),QE={current:null},QO={current:!1};function ZB(){if(QO.current=!0,!!k1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>QE.current=n.matches;n.addEventListener("change",e),e()}else QE.current=!1}const JB=new WeakMap;function QB(n,e,t){for(const i in e){const s=e[i],r=t[i];if(ca(s))n.addValue(i,s);else if(ca(r))n.addValue(i,cp(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,cp(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const hA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $B{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=aM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Qa.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,wi.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=Px(t),this.isVariantNode=BO(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in y){const x=y[_];d[_]!==void 0&&ca(x)&&x.set(d[_])}}mount(e){var t;this.current=e,JB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),QO.current||ZB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:QE.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),du(this.notifyUpdate),du(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ep.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&wi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in up){const t=up[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<hA.length;i++){const s=hA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,l=e[r];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=QB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=cp(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(j2(i)||X2(i))?i=parseFloat(i):!rB(i)&&pu.test(t)&&(i=AO(e,t)),this.setBaseTarget(e,ca(i)?i.get():i)),ca(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const l=gM(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);l&&(i=l[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ca(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new W1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){lM.render(this.render)}}class $O extends $B{constructor(){super(...arguments),this.KeyframeResolver=YP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ca(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function e3(n,{style:e,vars:t},i,s){const r=n.style;let l;for(l in e)r[l]=e[l];s==null||s.applyProjectionStyles(r,i);for(l in t)r.setProperty(l,t[l])}function ez(n){return window.getComputedStyle(n)}class tz extends $O{constructor(){super(...arguments),this.type="html",this.renderInstance=e3}readValueFromInstance(e,t){var i;if(Ep.has(t))return(i=this.projection)!=null&&i.isProjecting?GE(t):dP(e,t);{const s=ez(e),r=(Z1(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return JO(e,t)}build(e,t,i){dM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return vM(e,t,i)}}const t3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nz(n,e,t,i){e3(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(t3.has(s)?s:yM(s),e.attrs[s])}class iz extends $O{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ep.has(t)){const i=wO(t);return i&&i.default||0}return t=t3.has(t)?t:yM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return jO(e,t,i)}build(e,t,i){VO(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){nz(e,t,i,s)}mount(e){this.isSVGTag=kO(e.tagName),super.mount(e)}}const sz=(n,e)=>mM(n)?new iz(e):new tz(e,{allowProjection:n!==me.Fragment});function ap(n,e,t){const i=n.getProps();return gM(i,e,t!==void 0?t:i.custom,n)}const $E=n=>Array.isArray(n);function az(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,cp(t))}function rz(n){return $E(n)?n[n.length-1]||0:n}function oz(n,e){const t=ap(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const l in r){const c=rz(r[l]);az(n,l,c)}}function lz(n){return!!(ca(n)&&n.add)}function e1(n,e){const t=n.getValue("willChange");if(lz(t))return t.add(e);if(!t&&uc.WillChange){const i=new uc.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function n3(n){return n.props[qO]}const cz=n=>n!==null;function uz(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(cz),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}const hz={type:"spring",stiffness:500,damping:25,restSpeed:10},fz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),dz={type:"keyframes",duration:.8},pz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mz=(n,{keyframes:e})=>e.length>2?dz:Ep.has(n)?n.startsWith("scale")?fz(e[1]):hz:pz;function gz({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:l,repeatDelay:c,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const _M=(n,e,t,i={},s,r)=>l=>{const c=rM(i,n)||{},d=c.delay||i.delay||0;let{elapsed:p=0}=i;p=p-pl(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:_=>{e.set(_),c.onUpdate&&c.onUpdate(_)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:r?void 0:s};gz(c)||Object.assign(g,mz(n,g)),g.duration&&(g.duration=pl(g.duration)),g.repeatDelay&&(g.repeatDelay=pl(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(YE(g),g.delay===0&&(y=!0)),(uc.instantAnimations||uc.skipAnimations)&&(y=!0,YE(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,y&&!r&&e.get()!==void 0){const _=uz(g.keyframes,c);if(_!==void 0){wi.update(()=>{g.onUpdate(_),g.onComplete()});return}}return c.isSync?new sM(g):new PP(g)};function vz({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function i3(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:l,...c}=e;i&&(r=i);const d=[],p=s&&n.animationState&&n.animationState.getState()[s];for(const g in c){const y=n.getValue(g,n.latestValues[g]??null),_=c[g];if(_===void 0||p&&vz(p,g))continue;const x={delay:t,...rM(r||{},g)},E=y.get();if(E!==void 0&&!y.isAnimating&&!Array.isArray(_)&&_===E&&!x.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const M=n3(n);if(M){const R=window.MotionHandoffAnimation(M,g,wi);R!==null&&(x.startTime=R,A=!0)}}e1(n,g),y.start(_M(g,y,_,n.shouldReduceMotion&&EO.has(g)?{type:!1}:x,n,A));const T=y.animation;T&&d.push(T)}return l&&Promise.all(d).then(()=>{wi.update(()=>{l&&oz(n,l)})}),d}function s3(n,e,t,i=0,s=1){const r=Array.from(n).sort((p,g)=>p.sortNodePosition(g)).indexOf(e),l=n.size,c=(l-1)*i;return typeof t=="function"?t(r,l):s===1?r*i:c-r*i}function t1(n,e,t={}){var d;const i=ap(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all(i3(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:_}=s;return yz(n,e,p,g,y,_,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[p,g]=c==="beforeChildren"?[r,l]:[l,r];return p().then(()=>g())}else return Promise.all([r(),l(t.delay)])}function yz(n,e,t=0,i=0,s=0,r=1,l){const c=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),c.push(t1(d,e,{...l,delay:t+(typeof i=="function"?0:i)+s3(n.variantChildren,d,i,s,r)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function _z(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>t1(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=t1(n,e,t);else{const s=typeof e=="function"?ap(n,e,t.custom):e;i=Promise.all(i3(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function a3(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const xz=fM.length;function r3(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?r3(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<xz;t++){const i=fM[t],s=n.props[i];(Wg(s)||s===!1)&&(e[i]=s)}return e}const bz=[...hM].reverse(),Sz=hM.length;function Ez(n){return e=>Promise.all(e.map(({animation:t,options:i})=>_z(n,t,i)))}function Mz(n){let e=Ez(n),t=fA(),i=!0;const s=d=>(p,g)=>{var _;const y=ap(n,g,d==="exit"?(_=n.presenceContext)==null?void 0:_.custom:void 0);if(y){const{transition:x,transitionEnd:E,...A}=y;p={...p,...A,...E}}return p};function r(d){e=d(n)}function l(d){const{props:p}=n,g=r3(n.parent)||{},y=[],_=new Set;let x={},E=1/0;for(let T=0;T<Sz;T++){const M=bz[T],R=t[M],O=p[M]!==void 0?p[M]:g[M],D=Wg(O),H=M===d?R.isActive:null;H===!1&&(E=T);let I=O===g[M]&&O!==p[M]&&D;if(I&&i&&n.manuallyAnimateOnMount&&(I=!1),R.protectedKeys={...x},!R.isActive&&H===null||!O&&!R.prevProp||Ix(O)||typeof O=="boolean")continue;const V=Tz(R.prevProp,O);let F=V||M===d&&R.isActive&&!I&&D||T>E&&D,L=!1;const P=Array.isArray(O)?O:[O];let Z=P.reduce(s(M),{});H===!1&&(Z={});const{prevResolvedValues:de={}}=R,se={...de,...Z},he=te=>{F=!0,_.has(te)&&(L=!0,_.delete(te)),R.needsAnimating[te]=!0;const Y=n.getValue(te);Y&&(Y.liveStyle=!1)};for(const te in se){const Y=Z[te],fe=de[te];if(x.hasOwnProperty(te))continue;let ve=!1;$E(Y)&&$E(fe)?ve=!a3(Y,fe):ve=Y!==fe,ve?Y!=null?he(te):_.add(te):Y!==void 0&&_.has(te)?he(te):R.protectedKeys[te]=!0}R.prevProp=O,R.prevResolvedValues=Z,R.isActive&&(x={...x,...Z}),i&&n.blockInitialAnimation&&(F=!1);const xe=I&&V;F&&(!xe||L)&&y.push(...P.map(te=>{const Y={type:M};if(typeof te=="string"&&i&&!xe&&n.manuallyAnimateOnMount&&n.parent){const{parent:fe}=n,ve=ap(fe,te);if(fe.enteringChildren&&ve){const{delayChildren:X}=ve.transition||{};Y.delay=s3(fe.enteringChildren,n,X)}}return{animation:te,options:Y}}))}if(_.size){const T={};if(typeof p.initial!="boolean"){const M=ap(n,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(T.transition=M.transition)}_.forEach(M=>{const R=n.getBaseTarget(M),O=n.getValue(M);O&&(O.liveStyle=!0),T[M]=R??null}),y.push({animation:T})}let A=!!y.length;return i&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(y):Promise.resolve()}function c(d,p){var y;if(t[d].isActive===p)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(_=>{var x;return(x=_.animationState)==null?void 0:x.setActive(d,p)}),t[d].isActive=p;const g=l(d);for(const _ in t)t[_].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:r,getState:()=>t,reset:()=>{t=fA()}}}function Tz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!a3(e,n):!1}function mh(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fA(){return{animate:mh(!0),whileInView:mh(),whileHover:mh(),whileTap:mh(),whileDrag:mh(),whileFocus:mh(),exit:mh()}}class yu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wz extends yu{constructor(e){super(e),e.animationState||(e.animationState=Mz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ix(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Az=0;class Cz extends yu{constructor(){super(...arguments),this.id=Az++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Rz={animation:{Feature:wz},exit:{Feature:Cz}};function Kg(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function A0(n){return{point:{x:n.pageX,y:n.pageY}}}const Oz=n=>e=>cM(e)&&n(e,A0(e));function wg(n,e,t,i){return Kg(n,e,Oz(t),i)}const o3=1e-4,Dz=1-o3,Nz=1+o3,l3=.01,Uz=0-l3,Lz=0+l3;function La(n){return n.max-n.min}function Iz(n,e,t){return Math.abs(n-e)<=t}function dA(n,e,t,i=.5){n.origin=i,n.originPoint=Ui(e.min,e.max,n.origin),n.scale=La(t)/La(e),n.translate=Ui(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Dz&&n.scale<=Nz||isNaN(n.scale))&&(n.scale=1),(n.translate>=Uz&&n.translate<=Lz||isNaN(n.translate))&&(n.translate=0)}function Ag(n,e,t,i){dA(n.x,e.x,t.x,i?i.originX:void 0),dA(n.y,e.y,t.y,i?i.originY:void 0)}function pA(n,e,t){n.min=t.min+e.min,n.max=n.min+La(e)}function Pz(n,e,t){pA(n.x,e.x,t.x),pA(n.y,e.y,t.y)}function mA(n,e,t){n.min=e.min-t.min,n.max=n.min+La(e)}function Cg(n,e,t){mA(n.x,e.x,t.x),mA(n.y,e.y,t.y)}function kr(n){return[n("x"),n("y")]}const c3=({current:n})=>n?n.ownerDocument.defaultView:null,gA=(n,e)=>Math.abs(n-e);function Bz(n,e){const t=gA(n.x,e.x),i=gA(n.y,e.y);return Math.sqrt(t**2+i**2)}class u3{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=gS(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,E=Bz(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!E)return;const{point:A}=_,{timestamp:T}=ks;this.history.push({...A,timestamp:T});const{onStart:M,onMove:R}=this.handlers;x||(M&&M(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,_)},this.handlePointerMove=(_,x)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=mS(x,this.transformPagePoint),wi.update(this.updatePoint,!0)},this.handlePointerUp=(_,x)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=gS(_.type==="pointercancel"?this.lastMoveEventInfo:mS(x,this.transformPagePoint),this.history);this.startEvent&&E&&E(_,M),A&&A(_,M)},!cM(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const c=A0(e),d=mS(c,this.transformPagePoint),{point:p}=d,{timestamp:g}=ks;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=t;y&&y(e,gS(d,this.history)),this.removeListeners=M0(wg(this.contextWindow,"pointermove",this.handlePointerMove),wg(this.contextWindow,"pointerup",this.handlePointerUp),wg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),du(this.updatePoint)}}function mS(n,e){return e?{point:e(n.point)}:n}function vA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function gS({point:n},e){return{point:n,delta:vA(n,h3(e)),offset:vA(n,zz(e)),velocity:Fz(e,.1)}}function zz(n){return n[0]}function h3(n){return n[n.length-1]}function Fz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=h3(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>pl(e)));)t--;if(!i)return{x:0,y:0};const r=jr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const l={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Vz(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ui(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ui(t,n,i.max):Math.min(n,t)),n}function yA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Hz(n,{top:e,left:t,bottom:i,right:s}){return{x:yA(n.x,t,s),y:yA(n.y,e,i)}}function _A(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function kz(n,e){return{x:_A(n.x,e.x),y:_A(n.y,e.y)}}function Gz(n,e){let t=.5;const i=La(n),s=La(e);return s>i?t=jg(e.min,e.max-i,n.min):i>s&&(t=jg(n.min,n.max-s,e.min)),cc(0,1,t)}function jz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const n1=.35;function qz(n=n1){return n===!1?n=0:n===!0&&(n=n1),{x:xA(n,"left","right"),y:xA(n,"top","bottom")}}function xA(n,e,t){return{min:bA(n,e),max:bA(n,t)}}function bA(n,e){return typeof n=="number"?n:n[e]||0}const Xz=new WeakMap;class Wz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(A0(y).point)},l=(y,_)=>{const{drag:x,dragPropagation:E,onDragStart:A}=this.getProps();if(x&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QP(x),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kr(M=>{let R=this.getAxisMotionValue(M).get()||0;if(ml.test(R)){const{projection:O}=this.visualElement;if(O&&O.layout){const D=O.layout.layoutBox[M];D&&(R=La(D)*(parseFloat(R)/100))}}this.originPoint[M]=R}),A&&wi.postRender(()=>A(y,_)),e1(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},c=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_;const{dragPropagation:x,dragDirectionLock:E,onDirectionLock:A,onDrag:T}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:M}=_;if(E&&this.currentDirection===null){this.currentDirection=Yz(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,M),this.updateAxis("y",_.point,M),this.visualElement.render(),T&&T(y,_)},d=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_,this.stop(y,_),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>kr(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)==null?void 0:_.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new u3(e,{onSessionStart:r,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:c3(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&wi.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!my(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=Vz(l,this.constraints[e],this.elastic[e])),r.set(l)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&Zd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Hz(i.layoutBox,e):this.constraints=!1,this.elastic=qz(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&kr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=jz(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Zd(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=KB(i,s.root,this.visualElement.getTransformPagePoint());let l=kz(s.layout.layoutBox,r);if(t){const c=t(XB(l));this.hasMutatedConstraints=!!c,c&&(l=YO(c))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},p=kr(g=>{if(!my(g,t,this.currentDirection))return;let y=d&&d[g]||{};l&&(y={min:0,max:0});const _=s?200:1e6,x=s?40:1e7,E={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...y};return this.startAxisValueAnimation(g,E)});return Promise.all(p).then(c)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return e1(this.visualElement,e),i.start(_M(e,i,0,t,this.visualElement,!1))}stopAnimation(){kr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){kr(t=>{const{drag:i}=this.getProps();if(!my(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[t];r.set(e[t]-Ui(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Zd(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};kr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();s[l]=Gz({min:d,max:d},this.constraints[l])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),kr(l=>{if(!my(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:p}=this.constraints[l];c.set(Ui(d,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;Xz.set(this.visualElement,this);const e=this.visualElement.current,t=wg(e,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Zd(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),wi.read(i);const l=Kg(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(kr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),r(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:l=n1,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:l,dragMomentum:c}}}function my(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Yz(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Kz extends yu{constructor(e){super(e),this.removeGroupControls=qr,this.removeListeners=qr,this.controls=new Wz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qr}unmount(){this.removeGroupControls(),this.removeListeners()}}const SA=n=>(e,t)=>{n&&wi.postRender(()=>n(e,t))};class Zz extends yu{constructor(){super(...arguments),this.removePointerDownListener=qr}onPointerDown(e){this.session=new u3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:c3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:SA(e),onStart:SA(t),onMove:i,onEnd:(r,l)=>{delete this.session,s&&wi.postRender(()=>s(r,l))}}}mount(){this.removePointerDownListener=wg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const M_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function EA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ag={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(tn.test(n))n=parseFloat(n);else return n;const t=EA(n,e.target.x),i=EA(n,e.target.y);return`${t}% ${i}%`}},Jz={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=pu.parse(n);if(s.length>5)return i;const r=pu.createTransformer(n),l=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=c,s[1+l]/=d;const p=Ui(c,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),r(s)}};let vS=!1;class Qz extends me.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;xB($z),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),vS&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),M_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,{projection:l}=i;return l&&(l.isPresent=r,vS=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?l.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?l.promote():l.relegate()||wi.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),lM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;vS=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function f3(n){const[e,t]=LO(),i=me.useContext(V1);return q.jsx(Qz,{...n,layoutGroup:i,switchLayoutGroup:me.useContext(XO),isPresent:e,safeToRemove:t})}const $z={borderRadius:{...ag,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ag,borderTopRightRadius:ag,borderBottomLeftRadius:ag,borderBottomRightRadius:ag,boxShadow:Jz};function e4(n,e,t){const i=ca(n)?n:cp(n);return i.start(_M("",i,e,t)),i.animation}const t4=(n,e)=>n.depth-e.depth;class n4{constructor(){this.children=[],this.isDirty=!1}add(e){G1(this.children,e),this.isDirty=!0}remove(e){j1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(t4),this.isDirty=!1,this.children.forEach(e)}}function i4(n,e){const t=Qa.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(du(i),n(r-e))};return wi.setup(i,!0),()=>du(i)}const d3=["TopLeft","TopRight","BottomLeft","BottomRight"],s4=d3.length,MA=n=>typeof n=="string"?parseFloat(n):n,TA=n=>typeof n=="number"||tn.test(n);function a4(n,e,t,i,s,r){s?(n.opacity=Ui(0,t.opacity??1,r4(i)),n.opacityExit=Ui(e.opacity??1,0,o4(i))):r&&(n.opacity=Ui(e.opacity??1,t.opacity??1,i));for(let l=0;l<s4;l++){const c=`border${d3[l]}Radius`;let d=wA(e,c),p=wA(t,c);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||TA(d)===TA(p)?(n[c]=Math.max(Ui(MA(d),MA(p),i),0),(ml.test(p)||ml.test(d))&&(n[c]+="%")):n[c]=p}(e.rotate||t.rotate)&&(n.rotate=Ui(e.rotate||0,t.rotate||0,i))}function wA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const r4=p3(0,.5,eO),o4=p3(.5,.95,qr);function p3(n,e,t){return i=>i<n?0:i>e?1:t(jg(n,e,i))}function AA(n,e){n.min=e.min,n.max=e.max}function Vr(n,e){AA(n.x,e.x),AA(n.y,e.y)}function CA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function RA(n,e,t,i,s){return n-=e,n=I_(n,1/t,i),s!==void 0&&(n=I_(n,1/s,i)),n}function l4(n,e=0,t=1,i=.5,s,r=n,l=n){if(ml.test(e)&&(e=parseFloat(e),e=Ui(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Ui(r.min,r.max,i);n===r&&(c-=e),n.min=RA(n.min,e,t,c,s),n.max=RA(n.max,e,t,c,s)}function OA(n,e,[t,i,s],r,l){l4(n,e[t],e[i],e[s],e.scale,r,l)}const c4=["x","scaleX","originX"],u4=["y","scaleY","originY"];function DA(n,e,t,i){OA(n.x,e,c4,t?t.x:void 0,i?i.x:void 0),OA(n.y,e,u4,t?t.y:void 0,i?i.y:void 0)}function NA(n){return n.translate===0&&n.scale===1}function m3(n){return NA(n.x)&&NA(n.y)}function UA(n,e){return n.min===e.min&&n.max===e.max}function h4(n,e){return UA(n.x,e.x)&&UA(n.y,e.y)}function LA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function g3(n,e){return LA(n.x,e.x)&&LA(n.y,e.y)}function IA(n){return La(n.x)/La(n.y)}function PA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class f4{constructor(){this.members=[]}add(e){G1(this.members,e),e.scheduleRender()}remove(e){if(j1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function d4(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||r||l)&&(i=`translate3d(${s}px, ${r}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:_,skewX:x,skewY:E}=t;p&&(i=`perspective(${p}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),_&&(i+=`rotateY(${_}deg) `),x&&(i+=`skewX(${x}deg) `),E&&(i+=`skewY(${E}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const yS=["","X","Y","Z"],p4=1e3;let m4=0;function _S(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function v3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=n3(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",wi,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&v3(i)}function y3({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=m4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(y4),this.nodes.forEach(S4),this.nodes.forEach(E4),this.nodes.forEach(_4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new n4)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new W1),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=UO(l)&&!sB(l),this.instance=l;const{layoutId:c,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let g,y=0;const _=()=>this.root.updateBlockedByResize=!1;wi.read(()=>{y=window.innerWidth}),n(l,()=>{const x=window.innerWidth;x!==y&&(y=x,this.root.updateBlockedByResize=!0,g&&g(),g=i4(_,250),M_.hasAnimatedSinceResize&&(M_.hasAnimatedSinceResize=!1,this.nodes.forEach(FA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:_,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||C4,{onLayoutAnimationStart:A,onLayoutAnimationComplete:T}=p.getProps(),M=!this.targetLayout||!g3(this.targetLayout,x),R=!y&&_;if(this.options.layoutRoot||this.resumeFrom||R||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...rM(E,"layout"),onPlay:A,onComplete:T};(p.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,R)}else y||FA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),du(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M4),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&v3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(b4),this.nodes.forEach(g4),this.nodes.forEach(v4)):this.nodes.forEach(zA),this.clearAllSnapshots();const c=Qa.now();ks.delta=cc(0,1e3/60,c-ks.timestamp),ks.timestamp=c,ks.isProcessing=!0,oS.update.process(ks),oS.preRender.process(ks),oS.render.process(ks),ks.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x4),this.sharedNodes.forEach(T4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!La(this.snapshot.measuredBox.x)&&!La(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!m3(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(c||Dh(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),R4(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:l}=this.options;if(!l)return Yi();const c=l.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(O4))){const{scroll:g}=this.root;g&&(Jd(c.x,g.offset.x),Jd(c.y,g.offset.y))}return c}removeElementScroll(l){var d;const c=Yi();if(Vr(c,l),(d=this.scroll)!=null&&d.wasRoot)return c;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:_}=g;g!==this.root&&y&&_.layoutScroll&&(y.wasRoot&&Vr(c,l),Jd(c.x,y.offset.x),Jd(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const d=Yi();Vr(d,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Qd(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Dh(g.latestValues)&&Qd(d,g.latestValues)}return Dh(this.latestValues)&&Qd(d,this.latestValues),d}removeTransform(l){const c=Yi();Vr(c,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Dh(p.latestValues))continue;ZE(p.latestValues)&&p.updateSnapshot();const g=Yi(),y=p.measurePageBox();Vr(g,y),DA(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Dh(this.latestValues)&&DA(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ks.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var _;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=ks.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yi(),this.relativeTargetOrigin=Yi(),Cg(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Yi(),this.targetWithTransforms=Yi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Pz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vr(this.target,this.layout.layoutBox),ZO(this.target,this.targetDelta)):Vr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yi(),this.relativeTargetOrigin=Yi(),Cg(this.relativeTargetOrigin,this.target,x.target),Vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ZE(this.parent.latestValues)||KO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ks.timestamp&&(d=!1),d)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Vr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;YB(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Yi());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(CA(this.prevProjectionDelta.x,this.projectionDelta.x),CA(this.prevProjectionDelta.y,this.projectionDelta.y)),Ag(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!PA(this.projectionDelta.x,this.prevProjectionDelta.x)||!PA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$d(),this.projectionDelta=$d(),this.projectionDeltaWithTransform=$d()}setAnimationOrigin(l,c=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},y=$d();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const _=Yi(),x=d?d.source:void 0,E=this.layout?this.layout.source:void 0,A=x!==E,T=this.getStack(),M=!T||T.members.length<=1,R=!!(A&&!M&&this.options.crossfade===!0&&!this.path.some(A4));this.animationProgress=0;let O;this.mixTargetDelta=D=>{const H=D/1e3;VA(y.x,l.x,H),VA(y.y,l.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cg(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),w4(this.relativeTarget,this.relativeTargetOrigin,_,H),O&&h4(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Yi()),Vr(O,this.relativeTarget)),A&&(this.animationValues=g,a4(g,p,this.latestValues,H,R,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,d,p;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(p=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||p.stop(),this.pendingAnimation&&(du(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wi.update(()=>{M_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cp(0)),this.currentAnimation=e4(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:p,latestValues:g}=l;if(!(!c||!d||!p)){if(this!==l&&this.layout&&p&&_3(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Yi();const y=La(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+y;const _=La(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}Vr(c,d),Qd(c,g),Ag(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new f4),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const p={};d.z&&_S("z",l,p,this.animationValues);for(let g=0;g<yS.length;g++)_S(`rotate${yS[g]}`,l,p,this.animationValues),_S(`skew${yS[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=E_(c==null?void 0:c.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=E_(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Dh(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=d4(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),l.transform=y;const{x:_,y:x}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${x.origin*100}% 0`,p.animationValues?l.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const E in Yg){if(g[E]===void 0)continue;const{correct:A,applyTo:T,isCSSVariable:M}=Yg[E],R=y==="none"?g[E]:A(g[E],p);if(T){const O=T.length;for(let D=0;D<O;D++)l[T[D]]=R}else M?this.options.visualElement.renderState.vars[E]=R:l[E]=R}this.options.layoutId&&(l.pointerEvents=p===this?E_(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(BA),this.root.sharedNodes.clear()}}}function g4(n){n.updateLayout()}function v4(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,l=e.source!==n.layout.source;r==="size"?kr(y=>{const _=l?e.measuredBox[y]:e.layoutBox[y],x=La(_);_.min=i[y].min,_.max=_.min+x}):_3(r,e.layoutBox,i)&&kr(y=>{const _=l?e.measuredBox[y]:e.layoutBox[y],x=La(i[y]);_.max=_.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+x)});const c=$d();Ag(c,i,e.layoutBox);const d=$d();l?Ag(d,n.applyTransform(s,!0),e.measuredBox):Ag(d,i,e.layoutBox);const p=!m3(c);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:_,layout:x}=y;if(_&&x){const E=Yi();Cg(E,e.layoutBox,_.layoutBox);const A=Yi();Cg(A,i,x.layoutBox),g3(E,A)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=E,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function y4(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function _4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function x4(n){n.clearSnapshot()}function BA(n){n.clearMeasurements()}function zA(n){n.isLayoutDirty=!1}function b4(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function FA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function S4(n){n.resolveTargetDelta()}function E4(n){n.calcProjection()}function M4(n){n.resetSkewAndRotation()}function T4(n){n.removeLeadSnapshot()}function VA(n,e,t){n.translate=Ui(e.translate,0,t),n.scale=Ui(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function HA(n,e,t,i){n.min=Ui(e.min,t.min,i),n.max=Ui(e.max,t.max,i)}function w4(n,e,t,i){HA(n.x,e.x,t.x,i),HA(n.y,e.y,t.y,i)}function A4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const C4={duration:.45,ease:[.4,0,.1,1]},kA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),GA=kA("applewebkit/")&&!kA("chrome/")?Math.round:qr;function jA(n){n.min=GA(n.min),n.max=GA(n.max)}function R4(n){jA(n.x),jA(n.y)}function _3(n,e,t){return n==="position"||n==="preserve-aspect"&&!Iz(IA(e),IA(t),.2)}function O4(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const D4=y3({attachResizeListener:(n,e)=>Kg(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xS={current:void 0},x3=y3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!xS.current){const n=new D4({});n.mount(window),n.setOptions({layoutScroll:!0}),xS.current=n}return xS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),N4={pan:{Feature:Zz},drag:{Feature:Kz,ProjectionNode:x3,MeasureLayout:f3}};function qA(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&wi.postRender(()=>r(e,A0(e)))}class U4 extends yu{mount(){const{current:e}=this.node;e&&(this.unmount=$P(e,(t,i)=>(qA(this.node,i,"Start"),s=>qA(this.node,s,"End"))))}unmount(){}}class L4 extends yu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=M0(Kg(this.node.current,"focus",()=>this.onFocus()),Kg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XA(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&wi.postRender(()=>r(e,A0(e)))}class I4 extends yu{mount(){const{current:e}=this.node;e&&(this.unmount=iB(e,(t,i)=>(XA(this.node,i,"Start"),(s,{success:r})=>XA(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const i1=new WeakMap,bS=new WeakMap,P4=n=>{const e=i1.get(n.target);e&&e(n)},B4=n=>{n.forEach(P4)};function z4({root:n,...e}){const t=n||document;bS.has(t)||bS.set(t,{});const i=bS.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(B4,{root:n,...e})),i[s]}function F4(n,e,t){const i=z4(e);return i1.set(n,t),i.observe(n),()=>{i1.delete(n),i.unobserve(n)}}const V4={some:0,all:1};class H4 extends yu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:V4[s]},c=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,r&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),_=p?g:y;_&&_(d)};return F4(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(k4(e,t))&&this.startObserver()}unmount(){}}function k4({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const G4={inView:{Feature:H4},tap:{Feature:I4},focus:{Feature:L4},hover:{Feature:U4}},j4={layout:{ProjectionNode:x3,MeasureLayout:f3}},q4={...Rz,...G4,...N4,...j4},Zg=qB(q4,sz);var SS={exports:{}},Jl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA;function X4(){return WA||(WA=1,Jl.ConcurrentRoot=1,Jl.ContinuousEventPriority=8,Jl.DefaultEventPriority=32,Jl.DiscreteEventPriority=2,Jl.IdleEventPriority=268435456,Jl.LegacyRoot=0,Jl.NoEventPriority=0),Jl}var YA;function W4(){return YA||(YA=1,SS.exports=X4()),SS.exports}var T_=W4();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Mp="173",Y4={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},K4={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},b3=0,s1=1,S3=2,Z4=3,E3=0,Bx=1,Rg=2,Eo=3,hc=0,Ia=1,Ao=2,gl=0,Zh=1,P_=2,a1=3,r1=4,M3=5,cu=100,T3=101,w3=102,A3=103,C3=104,R3=200,O3=201,D3=202,N3=203,B_=204,z_=205,U3=206,L3=207,I3=208,P3=209,B3=210,z3=211,F3=212,V3=213,H3=214,F_=0,V_=1,H_=2,ef=3,k_=4,G_=5,j_=6,q_=7,C0=0,k3=1,G3=2,vl=0,j3=1,q3=2,X3=3,xM=4,W3=5,Y3=6,K3=7,o1="attached",Z3="detached",mu=300,_l=301,gu=302,hp=303,Jg=304,Tp=306,Qg=1e3,rs=1001,$g=1002,js=1003,bM=1004,J4=1004,ep=1005,Q4=1005,ti=1006,Og=1007,$4=1007,dl=1008,l1=1008,er=1009,zx=1010,Fx=1011,fp=1012,R0=1013,xl=1014,Ii=1015,Ds=1016,Vx=1017,Hx=1018,tf=1020,SM=35902,EM=1021,MM=1022,Ki=1023,TM=1024,wM=1025,Jh=1026,nf=1027,O0=1028,D0=1029,AM=1030,kx=1031,e5=1032,Gx=1033,Dg=33776,Ng=33777,Ug=33778,Lg=33779,X_=35840,W_=35841,Y_=35842,K_=35843,Z_=36196,J_=37492,Q_=37496,$_=37808,ex=37809,tx=37810,nx=37811,ix=37812,sx=37813,ax=37814,rx=37815,ox=37816,lx=37817,cx=37818,ux=37819,hx=37820,fx=37821,Ig=36492,dx=36494,px=36495,CM=36283,mx=36284,gx=36285,vx=36286,J3=2200,Q3=2201,$3=2202,e0=2300,yx=2301,w_=2302,Hh=2400,kh=2401,t0=2402,jx=2500,RM=2501,t5=0,n5=1,i5=2,eD=3200,tD=3201,s5=3202,a5=3203,_u=0,nD=1,ac="",Gs="srgb",Oo="srgb-linear",n0="linear",ei="srgb",r5=0,Nh=7680,o5=7681,l5=7682,c5=7683,u5=34055,h5=34056,f5=5386,d5=512,p5=513,m5=514,g5=515,v5=516,y5=517,_5=518,c1=519,iD=512,sD=513,aD=514,OM=515,rD=516,oD=517,lD=518,cD=519,i0=35044,x5=35048,b5=35040,S5=35045,E5=35049,M5=35041,T5=35046,w5=35050,A5=35042,C5="100",u1="300 es",Co=2e3,s0=2001,R5={COMPUTE:"compute",RENDER:"render"};class bl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,l=s.length;r<l;r++)s[r].call(this,e);e.target=null}}}const sa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KA=1234567;const Qh=Math.PI/180,dp=180/Math.PI;function yr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(sa[n&255]+sa[n>>8&255]+sa[n>>16&255]+sa[n>>24&255]+"-"+sa[e&255]+sa[e>>8&255]+"-"+sa[e>>16&15|64]+sa[e>>24&255]+"-"+sa[t&63|128]+sa[t>>8&255]+"-"+sa[t>>16&255]+sa[t>>24&255]+sa[i&255]+sa[i>>8&255]+sa[i>>16&255]+sa[i>>24&255]).toLowerCase()}function hn(n,e,t){return Math.max(e,Math.min(t,n))}function DM(n,e){return(n%e+e)%e}function O5(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function D5(n,e,t){return n!==e?(t-n)/(e-n):0}function Pg(n,e,t){return(1-t)*n+t*e}function N5(n,e,t,i){return Pg(n,e,1-Math.exp(-t*i))}function U5(n,e=1){return e-Math.abs(DM(n,e*2)-e)}function L5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function I5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function P5(n,e){return n+Math.floor(Math.random()*(e-n+1))}function B5(n,e){return n+Math.random()*(e-n)}function z5(n){return n*(.5-Math.random())}function F5(n){n!==void 0&&(KA=n);let e=KA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function V5(n){return n*Qh}function H5(n){return n*dp}function k5(n){return(n&n-1)===0&&n!==0}function G5(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function j5(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function q5(n,e,t,i,s){const r=Math.cos,l=Math.sin,c=r(t/2),d=l(t/2),p=r((e+i)/2),g=l((e+i)/2),y=r((e-i)/2),_=l((e-i)/2),x=r((i-e)/2),E=l((i-e)/2);switch(s){case"XYX":n.set(c*g,d*y,d*_,c*p);break;case"YZY":n.set(d*_,c*g,d*y,c*p);break;case"ZXZ":n.set(d*y,d*_,c*g,c*p);break;case"XZX":n.set(c*g,d*E,d*x,c*p);break;case"YXY":n.set(d*x,c*g,d*E,c*p);break;case"ZYZ":n.set(d*E,d*x,c*g,c*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ua(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function vn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const uD={DEG2RAD:Qh,RAD2DEG:dp,generateUUID:yr,clamp:hn,euclideanModulo:DM,mapLinear:O5,inverseLerp:D5,lerp:Pg,damp:N5,pingpong:U5,smoothstep:L5,smootherstep:I5,randInt:P5,randFloat:B5,randFloatSpread:z5,seededRandom:F5,degToRad:V5,radToDeg:H5,isPowerOfTwo:k5,ceilPowerOfTwo:G5,floorPowerOfTwo:j5,setQuaternionFromProperEuler:q5,normalize:vn,denormalize:Ua};class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(hn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,l=this.y-e.y;return this.x=r*i-l*s+e.x,this.y=r*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gn{constructor(e,t,i,s,r,l,c,d,p){gn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,l,c,d,p)}set(e,t,i,s,r,l,c,d,p){const g=this.elements;return g[0]=e,g[1]=s,g[2]=c,g[3]=t,g[4]=r,g[5]=d,g[6]=i,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,l=i[0],c=i[3],d=i[6],p=i[1],g=i[4],y=i[7],_=i[2],x=i[5],E=i[8],A=s[0],T=s[3],M=s[6],R=s[1],O=s[4],D=s[7],H=s[2],I=s[5],V=s[8];return r[0]=l*A+c*R+d*H,r[3]=l*T+c*O+d*I,r[6]=l*M+c*D+d*V,r[1]=p*A+g*R+y*H,r[4]=p*T+g*O+y*I,r[7]=p*M+g*D+y*V,r[2]=_*A+x*R+E*H,r[5]=_*T+x*O+E*I,r[8]=_*M+x*D+E*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8];return t*l*g-t*c*p-i*r*g+i*c*d+s*r*p-s*l*d}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8],y=g*l-c*p,_=c*d-g*r,x=p*r-l*d,E=t*y+i*_+s*x;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/E;return e[0]=y*A,e[1]=(s*p-g*i)*A,e[2]=(c*i-s*l)*A,e[3]=_*A,e[4]=(g*t-s*d)*A,e[5]=(s*r-c*t)*A,e[6]=x*A,e[7]=(i*d-p*t)*A,e[8]=(l*t-i*r)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,l,c){const d=Math.cos(r),p=Math.sin(r);return this.set(i*d,i*p,-i*(d*l+p*c)+l+e,-s*p,s*d,-s*(-p*l+d*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(ES.makeScale(e,t)),this}rotate(e){return this.premultiply(ES.makeRotation(-e)),this}translate(e,t){return this.premultiply(ES.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ES=new gn;function hD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const X5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function tp(n,e){return new X5[n](e)}function a0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function fD(){const n=a0("canvas");return n.style.display="block",n}const ZA={};function Xd(n){n in ZA||(ZA[n]=!0,console.warn(n))}function W5(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}function Y5(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function K5(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const JA=new gn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),QA=new gn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Z5(){const n={enabled:!0,workingColorSpace:Oo,spaces:{},convert:function(s,r,l){return this.enabled===!1||r===l||!r||!l||(this.spaces[r].transfer===ei&&(s.r=lc(s.r),s.g=lc(s.g),s.b=lc(s.b)),this.spaces[r].primaries!==this.spaces[l].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===ei&&(s.r=rp(s.r),s.g=rp(s.g),s.b=rp(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===ac?n0:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,l){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Oo]:{primaries:e,whitePoint:i,transfer:n0,toXYZ:JA,fromXYZ:QA,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Gs},outputColorSpaceConfig:{drawingBufferColorSpace:Gs}},[Gs]:{primaries:e,whitePoint:i,transfer:ei,toXYZ:JA,fromXYZ:QA,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Gs}}}),n}const Pn=Z5();function lc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function rp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let vd;class dD{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vd===void 0&&(vd=a0("canvas")),vd.width=e.width,vd.height=e.height;const i=vd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=vd}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=a0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let l=0;l<r.length;l++)r[l]=lc(r[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(lc(t[i]/255)*255):t[i]=lc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let J5=0;class Gh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:J5++}),this.uuid=yr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let l=0,c=s.length;l<c;l++)s[l].isDataTexture?r.push(MS(s[l].image)):r.push(MS(s[l]))}else r=MS(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function MS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?dD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Q5=0;class oi extends bl{constructor(e=oi.DEFAULT_IMAGE,t=oi.DEFAULT_MAPPING,i=rs,s=rs,r=ti,l=dl,c=Ki,d=er,p=oi.DEFAULT_ANISOTROPY,g=ac){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Q5++}),this.uuid=yr(),this.name="",this.source=new Gh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=l,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=d,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qg:e.x=e.x-Math.floor(e.x);break;case rs:e.x=e.x<0?0:1;break;case $g:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qg:e.y=e.y-Math.floor(e.y);break;case rs:e.y=e.y<0?0:1;break;case $g:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}oi.DEFAULT_IMAGE=null;oi.DEFAULT_MAPPING=mu;oi.DEFAULT_ANISOTROPY=1;class Hn{constructor(e=0,t=0,i=0,s=1){Hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*r,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*r,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*r,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const d=e.elements,p=d[0],g=d[4],y=d[8],_=d[1],x=d[5],E=d[9],A=d[2],T=d[6],M=d[10];if(Math.abs(g-_)<.01&&Math.abs(y-A)<.01&&Math.abs(E-T)<.01){if(Math.abs(g+_)<.1&&Math.abs(y+A)<.1&&Math.abs(E+T)<.1&&Math.abs(p+x+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const O=(p+1)/2,D=(x+1)/2,H=(M+1)/2,I=(g+_)/4,V=(y+A)/4,F=(E+T)/4;return O>D&&O>H?O<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(O),s=I/i,r=V/i):D>H?D<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(D),i=I/s,r=F/s):H<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(H),i=V/r,s=F/r),this.set(i,s,r,t),this}let R=Math.sqrt((T-E)*(T-E)+(y-A)*(y-A)+(_-g)*(_-g));return Math.abs(R)<.001&&(R=1),this.x=(T-E)/R,this.y=(y-A)/R,this.z=(_-g)/R,this.w=Math.acos((p+x+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this.z=hn(this.z,e.z,t.z),this.w=hn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this.z=hn(this.z,e,t),this.w=hn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(hn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class qx extends bl{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Hn(0,0,e,t),this.scissorTest=!1,this.viewport=new Hn(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ti,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new oi(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const l=i.count;for(let c=0;c<l;c++)this.textures[c]=r.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Gh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xr extends qx{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class N0 extends oi{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=js,this.minFilter=js,this.wrapR=rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $5 extends Xr{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new N0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Xx extends oi{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=js,this.minFilter=js,this.wrapR=rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eF extends Xr{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Xx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class $a{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,l,c){let d=i[s+0],p=i[s+1],g=i[s+2],y=i[s+3];const _=r[l+0],x=r[l+1],E=r[l+2],A=r[l+3];if(c===0){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=y;return}if(c===1){e[t+0]=_,e[t+1]=x,e[t+2]=E,e[t+3]=A;return}if(y!==A||d!==_||p!==x||g!==E){let T=1-c;const M=d*_+p*x+g*E+y*A,R=M>=0?1:-1,O=1-M*M;if(O>Number.EPSILON){const H=Math.sqrt(O),I=Math.atan2(H,M*R);T=Math.sin(T*I)/H,c=Math.sin(c*I)/H}const D=c*R;if(d=d*T+_*D,p=p*T+x*D,g=g*T+E*D,y=y*T+A*D,T===1-c){const H=1/Math.sqrt(d*d+p*p+g*g+y*y);d*=H,p*=H,g*=H,y*=H}}e[t]=d,e[t+1]=p,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,i,s,r,l){const c=i[s],d=i[s+1],p=i[s+2],g=i[s+3],y=r[l],_=r[l+1],x=r[l+2],E=r[l+3];return e[t]=c*E+g*y+d*x-p*_,e[t+1]=d*E+g*_+p*y-c*x,e[t+2]=p*E+g*x+c*_-d*y,e[t+3]=g*E-c*y-d*_-p*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,l=e._order,c=Math.cos,d=Math.sin,p=c(i/2),g=c(s/2),y=c(r/2),_=d(i/2),x=d(s/2),E=d(r/2);switch(l){case"XYZ":this._x=_*g*y+p*x*E,this._y=p*x*y-_*g*E,this._z=p*g*E+_*x*y,this._w=p*g*y-_*x*E;break;case"YXZ":this._x=_*g*y+p*x*E,this._y=p*x*y-_*g*E,this._z=p*g*E-_*x*y,this._w=p*g*y+_*x*E;break;case"ZXY":this._x=_*g*y-p*x*E,this._y=p*x*y+_*g*E,this._z=p*g*E+_*x*y,this._w=p*g*y-_*x*E;break;case"ZYX":this._x=_*g*y-p*x*E,this._y=p*x*y+_*g*E,this._z=p*g*E-_*x*y,this._w=p*g*y+_*x*E;break;case"YZX":this._x=_*g*y+p*x*E,this._y=p*x*y+_*g*E,this._z=p*g*E-_*x*y,this._w=p*g*y-_*x*E;break;case"XZY":this._x=_*g*y-p*x*E,this._y=p*x*y-_*g*E,this._z=p*g*E+_*x*y,this._w=p*g*y+_*x*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],l=t[1],c=t[5],d=t[9],p=t[2],g=t[6],y=t[10],_=i+c+y;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(g-d)*x,this._y=(r-p)*x,this._z=(l-s)*x}else if(i>c&&i>y){const x=2*Math.sqrt(1+i-c-y);this._w=(g-d)/x,this._x=.25*x,this._y=(s+l)/x,this._z=(r+p)/x}else if(c>y){const x=2*Math.sqrt(1+c-i-y);this._w=(r-p)/x,this._x=(s+l)/x,this._y=.25*x,this._z=(d+g)/x}else{const x=2*Math.sqrt(1+y-i-c);this._w=(l-s)/x,this._x=(r+p)/x,this._y=(d+g)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,l=e._w,c=t._x,d=t._y,p=t._z,g=t._w;return this._x=i*g+l*c+s*p-r*d,this._y=s*g+l*d+r*c-i*p,this._z=r*g+l*p+i*d-s*c,this._w=l*g-i*c-s*d-r*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,l=this._w;let c=l*e._w+i*e._x+s*e._y+r*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=i,this._y=s,this._z=r,this;const d=1-c*c;if(d<=Number.EPSILON){const x=1-t;return this._w=x*l+t*this._w,this._x=x*i+t*this._x,this._y=x*s+t*this._y,this._z=x*r+t*this._z,this.normalize(),this}const p=Math.sqrt(d),g=Math.atan2(p,c),y=Math.sin((1-t)*g)/p,_=Math.sin(t*g)/p;return this._w=l*y+this._w*_,this._x=i*y+this._x*_,this._y=s*y+this._y*_,this._z=r*y+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ee{constructor(e=0,t=0,i=0){ee.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion($A.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($A.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,l=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*l,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*l,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,l=e.y,c=e.z,d=e.w,p=2*(l*s-c*i),g=2*(c*t-r*s),y=2*(r*i-l*t);return this.x=t+d*p+l*y-c*g,this.y=i+d*g+c*p-r*y,this.z=s+d*y+r*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this.z=hn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this.z=hn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(hn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,l=t.x,c=t.y,d=t.z;return this.x=s*d-r*c,this.y=r*l-i*d,this.z=i*c-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return TS.copy(this).projectOnVector(e),this.sub(TS)}reflect(e){return this.sub(TS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const TS=new ee,$A=new $a;class Pa{constructor(e=new ee(1/0,1/0,1/0),t=new ee(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=r.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,vo):vo.fromBufferAttribute(r,l),vo.applyMatrix4(e.matrixWorld),this.expandByPoint(vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),gy.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),gy.copy(i.boundingBox)),gy.applyMatrix4(e.matrixWorld),this.union(gy)}const s=e.children;for(let r=0,l=s.length;r<l;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rg),vy.subVectors(this.max,rg),yd.subVectors(e.a,rg),_d.subVectors(e.b,rg),xd.subVectors(e.c,rg),Jc.subVectors(_d,yd),Qc.subVectors(xd,_d),gh.subVectors(yd,xd);let t=[0,-Jc.z,Jc.y,0,-Qc.z,Qc.y,0,-gh.z,gh.y,Jc.z,0,-Jc.x,Qc.z,0,-Qc.x,gh.z,0,-gh.x,-Jc.y,Jc.x,0,-Qc.y,Qc.x,0,-gh.y,gh.x,0];return!wS(t,yd,_d,xd,vy)||(t=[1,0,0,0,1,0,0,0,1],!wS(t,yd,_d,xd,vy))?!1:(yy.crossVectors(Jc,Qc),t=[yy.x,yy.y,yy.z],wS(t,yd,_d,xd,vy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ql[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ql[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ql[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ql[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ql[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ql[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ql[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ql[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ql),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ql=[new ee,new ee,new ee,new ee,new ee,new ee,new ee,new ee],vo=new ee,gy=new Pa,yd=new ee,_d=new ee,xd=new ee,Jc=new ee,Qc=new ee,gh=new ee,rg=new ee,vy=new ee,yy=new ee,vh=new ee;function wS(n,e,t,i,s){for(let r=0,l=n.length-3;r<=l;r+=3){vh.fromArray(n,r);const c=s.x*Math.abs(vh.x)+s.y*Math.abs(vh.y)+s.z*Math.abs(vh.z),d=e.dot(vh),p=t.dot(vh),g=i.dot(vh);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>c)return!1}return!0}const tF=new Pa,og=new ee,AS=new ee;let ua=class{constructor(e=new ee,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):tF.setFromPoints(e).getCenter(i);let s=0;for(let r=0,l=e.length;r<l;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;og.subVectors(e,this.center);const t=og.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(og,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(AS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(og.copy(e.center).add(AS)),this.expandByPoint(og.copy(e.center).sub(AS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const $l=new ee,CS=new ee,_y=new ee,$c=new ee,RS=new ee,xy=new ee,OS=new ee;class wp{constructor(e=new ee,t=new ee(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$l)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$l.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($l.copy(this.origin).addScaledVector(this.direction,t),$l.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){CS.copy(e).add(t).multiplyScalar(.5),_y.copy(t).sub(e).normalize(),$c.copy(this.origin).sub(CS);const r=e.distanceTo(t)*.5,l=-this.direction.dot(_y),c=$c.dot(this.direction),d=-$c.dot(_y),p=$c.lengthSq(),g=Math.abs(1-l*l);let y,_,x,E;if(g>0)if(y=l*d-c,_=l*c-d,E=r*g,y>=0)if(_>=-E)if(_<=E){const A=1/g;y*=A,_*=A,x=y*(y+l*_+2*c)+_*(l*y+_+2*d)+p}else _=r,y=Math.max(0,-(l*_+c)),x=-y*y+_*(_+2*d)+p;else _=-r,y=Math.max(0,-(l*_+c)),x=-y*y+_*(_+2*d)+p;else _<=-E?(y=Math.max(0,-(-l*r+c)),_=y>0?-r:Math.min(Math.max(-r,-d),r),x=-y*y+_*(_+2*d)+p):_<=E?(y=0,_=Math.min(Math.max(-r,-d),r),x=_*(_+2*d)+p):(y=Math.max(0,-(l*r+c)),_=y>0?r:Math.min(Math.max(-r,-d),r),x=-y*y+_*(_+2*d)+p);else _=l>0?-r:r,y=Math.max(0,-(l*_+c)),x=-y*y+_*(_+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(CS).addScaledVector(_y,_),x}intersectSphere(e,t){$l.subVectors(e.center,this.origin);const i=$l.dot(this.direction),s=$l.dot($l)-i*i,r=e.radius*e.radius;if(s>r)return null;const l=Math.sqrt(r-s),c=i-l,d=i+l;return d<0?null:c<0?this.at(d,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,l,c,d;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,_=this.origin;return p>=0?(i=(e.min.x-_.x)*p,s=(e.max.x-_.x)*p):(i=(e.max.x-_.x)*p,s=(e.min.x-_.x)*p),g>=0?(r=(e.min.y-_.y)*g,l=(e.max.y-_.y)*g):(r=(e.max.y-_.y)*g,l=(e.min.y-_.y)*g),i>l||r>s||((r>i||isNaN(i))&&(i=r),(l<s||isNaN(s))&&(s=l),y>=0?(c=(e.min.z-_.z)*y,d=(e.max.z-_.z)*y):(c=(e.max.z-_.z)*y,d=(e.min.z-_.z)*y),i>d||c>s)||((c>i||i!==i)&&(i=c),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,$l)!==null}intersectTriangle(e,t,i,s,r){RS.subVectors(t,e),xy.subVectors(i,e),OS.crossVectors(RS,xy);let l=this.direction.dot(OS),c;if(l>0){if(s)return null;c=1}else if(l<0)c=-1,l=-l;else return null;$c.subVectors(this.origin,e);const d=c*this.direction.dot(xy.crossVectors($c,xy));if(d<0)return null;const p=c*this.direction.dot(RS.cross($c));if(p<0||d+p>l)return null;const g=-c*$c.dot(OS);return g<0?null:this.at(g/l,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nn{constructor(e,t,i,s,r,l,c,d,p,g,y,_,x,E,A,T){nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,l,c,d,p,g,y,_,x,E,A,T)}set(e,t,i,s,r,l,c,d,p,g,y,_,x,E,A,T){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=s,M[1]=r,M[5]=l,M[9]=c,M[13]=d,M[2]=p,M[6]=g,M[10]=y,M[14]=_,M[3]=x,M[7]=E,M[11]=A,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/bd.setFromMatrixColumn(e,0).length(),r=1/bd.setFromMatrixColumn(e,1).length(),l=1/bd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,l=Math.cos(i),c=Math.sin(i),d=Math.cos(s),p=Math.sin(s),g=Math.cos(r),y=Math.sin(r);if(e.order==="XYZ"){const _=l*g,x=l*y,E=c*g,A=c*y;t[0]=d*g,t[4]=-d*y,t[8]=p,t[1]=x+E*p,t[5]=_-A*p,t[9]=-c*d,t[2]=A-_*p,t[6]=E+x*p,t[10]=l*d}else if(e.order==="YXZ"){const _=d*g,x=d*y,E=p*g,A=p*y;t[0]=_+A*c,t[4]=E*c-x,t[8]=l*p,t[1]=l*y,t[5]=l*g,t[9]=-c,t[2]=x*c-E,t[6]=A+_*c,t[10]=l*d}else if(e.order==="ZXY"){const _=d*g,x=d*y,E=p*g,A=p*y;t[0]=_-A*c,t[4]=-l*y,t[8]=E+x*c,t[1]=x+E*c,t[5]=l*g,t[9]=A-_*c,t[2]=-l*p,t[6]=c,t[10]=l*d}else if(e.order==="ZYX"){const _=l*g,x=l*y,E=c*g,A=c*y;t[0]=d*g,t[4]=E*p-x,t[8]=_*p+A,t[1]=d*y,t[5]=A*p+_,t[9]=x*p-E,t[2]=-p,t[6]=c*d,t[10]=l*d}else if(e.order==="YZX"){const _=l*d,x=l*p,E=c*d,A=c*p;t[0]=d*g,t[4]=A-_*y,t[8]=E*y+x,t[1]=y,t[5]=l*g,t[9]=-c*g,t[2]=-p*g,t[6]=x*y+E,t[10]=_-A*y}else if(e.order==="XZY"){const _=l*d,x=l*p,E=c*d,A=c*p;t[0]=d*g,t[4]=-y,t[8]=p*g,t[1]=_*y+A,t[5]=l*g,t[9]=x*y-E,t[2]=E*y-x,t[6]=c*g,t[10]=A*y+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nF,e,iF)}lookAt(e,t,i){const s=this.elements;return dr.subVectors(e,t),dr.lengthSq()===0&&(dr.z=1),dr.normalize(),eu.crossVectors(i,dr),eu.lengthSq()===0&&(Math.abs(i.z)===1?dr.x+=1e-4:dr.z+=1e-4,dr.normalize(),eu.crossVectors(i,dr)),eu.normalize(),by.crossVectors(dr,eu),s[0]=eu.x,s[4]=by.x,s[8]=dr.x,s[1]=eu.y,s[5]=by.y,s[9]=dr.y,s[2]=eu.z,s[6]=by.z,s[10]=dr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,l=i[0],c=i[4],d=i[8],p=i[12],g=i[1],y=i[5],_=i[9],x=i[13],E=i[2],A=i[6],T=i[10],M=i[14],R=i[3],O=i[7],D=i[11],H=i[15],I=s[0],V=s[4],F=s[8],L=s[12],P=s[1],Z=s[5],de=s[9],se=s[13],he=s[2],xe=s[6],k=s[10],te=s[14],Y=s[3],fe=s[7],ve=s[11],X=s[15];return r[0]=l*I+c*P+d*he+p*Y,r[4]=l*V+c*Z+d*xe+p*fe,r[8]=l*F+c*de+d*k+p*ve,r[12]=l*L+c*se+d*te+p*X,r[1]=g*I+y*P+_*he+x*Y,r[5]=g*V+y*Z+_*xe+x*fe,r[9]=g*F+y*de+_*k+x*ve,r[13]=g*L+y*se+_*te+x*X,r[2]=E*I+A*P+T*he+M*Y,r[6]=E*V+A*Z+T*xe+M*fe,r[10]=E*F+A*de+T*k+M*ve,r[14]=E*L+A*se+T*te+M*X,r[3]=R*I+O*P+D*he+H*Y,r[7]=R*V+O*Z+D*xe+H*fe,r[11]=R*F+O*de+D*k+H*ve,r[15]=R*L+O*se+D*te+H*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],l=e[1],c=e[5],d=e[9],p=e[13],g=e[2],y=e[6],_=e[10],x=e[14],E=e[3],A=e[7],T=e[11],M=e[15];return E*(+r*d*y-s*p*y-r*c*_+i*p*_+s*c*x-i*d*x)+A*(+t*d*x-t*p*_+r*l*_-s*l*x+s*p*g-r*d*g)+T*(+t*p*y-t*c*x-r*l*y+i*l*x+r*c*g-i*p*g)+M*(-s*c*g-t*d*y+t*c*_+s*l*y-i*l*_+i*d*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8],y=e[9],_=e[10],x=e[11],E=e[12],A=e[13],T=e[14],M=e[15],R=y*T*p-A*_*p+A*d*x-c*T*x-y*d*M+c*_*M,O=E*_*p-g*T*p-E*d*x+l*T*x+g*d*M-l*_*M,D=g*A*p-E*y*p+E*c*x-l*A*x-g*c*M+l*y*M,H=E*y*d-g*A*d-E*c*_+l*A*_+g*c*T-l*y*T,I=t*R+i*O+s*D+r*H;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/I;return e[0]=R*V,e[1]=(A*_*r-y*T*r-A*s*x+i*T*x+y*s*M-i*_*M)*V,e[2]=(c*T*r-A*d*r+A*s*p-i*T*p-c*s*M+i*d*M)*V,e[3]=(y*d*r-c*_*r-y*s*p+i*_*p+c*s*x-i*d*x)*V,e[4]=O*V,e[5]=(g*T*r-E*_*r+E*s*x-t*T*x-g*s*M+t*_*M)*V,e[6]=(E*d*r-l*T*r-E*s*p+t*T*p+l*s*M-t*d*M)*V,e[7]=(l*_*r-g*d*r+g*s*p-t*_*p-l*s*x+t*d*x)*V,e[8]=D*V,e[9]=(E*y*r-g*A*r-E*i*x+t*A*x+g*i*M-t*y*M)*V,e[10]=(l*A*r-E*c*r+E*i*p-t*A*p-l*i*M+t*c*M)*V,e[11]=(g*c*r-l*y*r-g*i*p+t*y*p+l*i*x-t*c*x)*V,e[12]=H*V,e[13]=(g*A*s-E*y*s+E*i*_-t*A*_-g*i*T+t*y*T)*V,e[14]=(E*c*s-l*A*s-E*i*d+t*A*d+l*i*T-t*c*T)*V,e[15]=(l*y*s-g*c*s+g*i*d-t*y*d-l*i*_+t*c*_)*V,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,l=e.x,c=e.y,d=e.z,p=r*l,g=r*c;return this.set(p*l+i,p*c-s*d,p*d+s*c,0,p*c+s*d,g*c+i,g*d-s*l,0,p*d-s*c,g*d+s*l,r*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,l){return this.set(1,i,r,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,l=t._y,c=t._z,d=t._w,p=r+r,g=l+l,y=c+c,_=r*p,x=r*g,E=r*y,A=l*g,T=l*y,M=c*y,R=d*p,O=d*g,D=d*y,H=i.x,I=i.y,V=i.z;return s[0]=(1-(A+M))*H,s[1]=(x+D)*H,s[2]=(E-O)*H,s[3]=0,s[4]=(x-D)*I,s[5]=(1-(_+M))*I,s[6]=(T+R)*I,s[7]=0,s[8]=(E+O)*V,s[9]=(T-R)*V,s[10]=(1-(_+A))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=bd.set(s[0],s[1],s[2]).length();const l=bd.set(s[4],s[5],s[6]).length(),c=bd.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],yo.copy(this);const p=1/r,g=1/l,y=1/c;return yo.elements[0]*=p,yo.elements[1]*=p,yo.elements[2]*=p,yo.elements[4]*=g,yo.elements[5]*=g,yo.elements[6]*=g,yo.elements[8]*=y,yo.elements[9]*=y,yo.elements[10]*=y,t.setFromRotationMatrix(yo),i.x=r,i.y=l,i.z=c,this}makePerspective(e,t,i,s,r,l,c=Co){const d=this.elements,p=2*r/(t-e),g=2*r/(i-s),y=(t+e)/(t-e),_=(i+s)/(i-s);let x,E;if(c===Co)x=-(l+r)/(l-r),E=-2*l*r/(l-r);else if(c===s0)x=-l/(l-r),E=-l*r/(l-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return d[0]=p,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=g,d[9]=_,d[13]=0,d[2]=0,d[6]=0,d[10]=x,d[14]=E,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,i,s,r,l,c=Co){const d=this.elements,p=1/(t-e),g=1/(i-s),y=1/(l-r),_=(t+e)*p,x=(i+s)*g;let E,A;if(c===Co)E=(l+r)*y,A=-2*y;else if(c===s0)E=r*y,A=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return d[0]=2*p,d[4]=0,d[8]=0,d[12]=-_,d[1]=0,d[5]=2*g,d[9]=0,d[13]=-x,d[2]=0,d[6]=0,d[10]=A,d[14]=-E,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const bd=new ee,yo=new nn,nF=new ee(0,0,0),iF=new ee(1,1,1),eu=new ee,by=new ee,dr=new ee,eC=new nn,tC=new $a;class xr{constructor(e=0,t=0,i=0,s=xr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],l=s[4],c=s[8],d=s[1],p=s[5],g=s[9],y=s[2],_=s[6],x=s[10];switch(t){case"XYZ":this._y=Math.asin(hn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,x),this._z=Math.atan2(-l,r)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-hn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,x),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,r),this._z=0);break;case"ZXY":this._x=Math.asin(hn(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-y,x),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-hn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(hn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-y,r)):(this._x=0,this._y=Math.atan2(c,x));break;case"XZY":this._z=Math.asin(-hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(c,r)):(this._x=Math.atan2(-g,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return eC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tC.setFromEuler(this),this.setFromQuaternion(tC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xr.DEFAULT_ORDER="XYZ";class pp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let sF=0;const nC=new ee,Sd=new $a,ec=new nn,Sy=new ee,lg=new ee,aF=new ee,rF=new $a,iC=new ee(1,0,0),sC=new ee(0,1,0),aC=new ee(0,0,1),rC={type:"added"},oF={type:"removed"},Ed={type:"childadded",child:null},DS={type:"childremoved",child:null};class kn extends bl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sF++}),this.uuid=yr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kn.DEFAULT_UP.clone();const e=new ee,t=new xr,i=new $a,s=new ee(1,1,1);function r(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new nn},normalMatrix:{value:new gn}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=kn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sd.setFromAxisAngle(e,t),this.quaternion.multiply(Sd),this}rotateOnWorldAxis(e,t){return Sd.setFromAxisAngle(e,t),this.quaternion.premultiply(Sd),this}rotateX(e){return this.rotateOnAxis(iC,e)}rotateY(e){return this.rotateOnAxis(sC,e)}rotateZ(e){return this.rotateOnAxis(aC,e)}translateOnAxis(e,t){return nC.copy(e).applyQuaternion(this.quaternion),this.position.add(nC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(iC,e)}translateY(e){return this.translateOnAxis(sC,e)}translateZ(e){return this.translateOnAxis(aC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ec.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Sy.copy(e):Sy.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),lg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ec.lookAt(lg,Sy,this.up):ec.lookAt(Sy,lg,this.up),this.quaternion.setFromRotationMatrix(ec),s&&(ec.extractRotation(s.matrixWorld),Sd.setFromRotationMatrix(ec),this.quaternion.premultiply(Sd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(rC),Ed.child=e,this.dispatchEvent(Ed),Ed.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oF),DS.child=e,this.dispatchEvent(DS),DS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ec.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ec.multiply(e.parent.matrixWorld)),e.applyMatrix4(ec),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(rC),Ed.child=e,this.dispatchEvent(Ed),Ed.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,l=s.length;r<l;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lg,e,aF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lg,rF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,l=s.length;r<l;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const d=c.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const y=d[p];r(e.shapes,y)}else r(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let d=0,p=this.material.length;d<p;d++)c.push(r(e.materials,this.material[d]));s.material=c}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){const d=this.animations[c];s.animations.push(r(e.animations,d))}}if(t){const c=l(e.geometries),d=l(e.materials),p=l(e.textures),g=l(e.images),y=l(e.shapes),_=l(e.skeletons),x=l(e.animations),E=l(e.nodes);c.length>0&&(i.geometries=c),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),g.length>0&&(i.images=g),y.length>0&&(i.shapes=y),_.length>0&&(i.skeletons=_),x.length>0&&(i.animations=x),E.length>0&&(i.nodes=E)}return i.object=s,i;function l(c){const d=[];for(const p in c){const g=c[p];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}kn.DEFAULT_UP=new ee(0,1,0);kn.DEFAULT_MATRIX_AUTO_UPDATE=!0;kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _o=new ee,tc=new ee,NS=new ee,nc=new ee,Md=new ee,Td=new ee,oC=new ee,US=new ee,LS=new ee,IS=new ee,PS=new Hn,BS=new Hn,zS=new Hn;class Ja{constructor(e=new ee,t=new ee,i=new ee){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),_o.subVectors(e,t),s.cross(_o);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){_o.subVectors(s,t),tc.subVectors(i,t),NS.subVectors(e,t);const l=_o.dot(_o),c=_o.dot(tc),d=_o.dot(NS),p=tc.dot(tc),g=tc.dot(NS),y=l*p-c*c;if(y===0)return r.set(0,0,0),null;const _=1/y,x=(p*d-c*g)*_,E=(l*g-c*d)*_;return r.set(1-x-E,E,x)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,nc)===null?!1:nc.x>=0&&nc.y>=0&&nc.x+nc.y<=1}static getInterpolation(e,t,i,s,r,l,c,d){return this.getBarycoord(e,t,i,s,nc)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,nc.x),d.addScaledVector(l,nc.y),d.addScaledVector(c,nc.z),d)}static getInterpolatedAttribute(e,t,i,s,r,l){return PS.setScalar(0),BS.setScalar(0),zS.setScalar(0),PS.fromBufferAttribute(e,t),BS.fromBufferAttribute(e,i),zS.fromBufferAttribute(e,s),l.setScalar(0),l.addScaledVector(PS,r.x),l.addScaledVector(BS,r.y),l.addScaledVector(zS,r.z),l}static isFrontFacing(e,t,i,s){return _o.subVectors(i,t),tc.subVectors(e,t),_o.cross(tc).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _o.subVectors(this.c,this.b),tc.subVectors(this.a,this.b),_o.cross(tc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ja.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ja.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return Ja.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return Ja.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ja.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let l,c;Md.subVectors(s,i),Td.subVectors(r,i),US.subVectors(e,i);const d=Md.dot(US),p=Td.dot(US);if(d<=0&&p<=0)return t.copy(i);LS.subVectors(e,s);const g=Md.dot(LS),y=Td.dot(LS);if(g>=0&&y<=g)return t.copy(s);const _=d*y-g*p;if(_<=0&&d>=0&&g<=0)return l=d/(d-g),t.copy(i).addScaledVector(Md,l);IS.subVectors(e,r);const x=Md.dot(IS),E=Td.dot(IS);if(E>=0&&x<=E)return t.copy(r);const A=x*p-d*E;if(A<=0&&p>=0&&E<=0)return c=p/(p-E),t.copy(i).addScaledVector(Td,c);const T=g*E-x*y;if(T<=0&&y-g>=0&&x-E>=0)return oC.subVectors(r,s),c=(y-g)/(y-g+(x-E)),t.copy(s).addScaledVector(oC,c);const M=1/(T+A+_);return l=A*M,c=_*M,t.copy(i).addScaledVector(Md,l).addScaledVector(Td,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tu={h:0,s:0,l:0},Ey={h:0,s:0,l:0};function FS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class St{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Pn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Pn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Pn.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Pn.workingColorSpace){if(e=DM(e,1),t=hn(t,0,1),i=hn(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,l=2*i-r;this.r=FS(l,r,e+1/3),this.g=FS(l,r,e),this.b=FS(l,r,e-1/3)}return Pn.toWorkingColorSpace(this,s),this}setStyle(e,t=Gs){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const l=s[1],c=s[2];switch(l){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],l=r.length;if(l===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gs){const i=pD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lc(e.r),this.g=lc(e.g),this.b=lc(e.b),this}copyLinearToSRGB(e){return this.r=rp(e.r),this.g=rp(e.g),this.b=rp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gs){return Pn.fromWorkingColorSpace(aa.copy(this),e),Math.round(hn(aa.r*255,0,255))*65536+Math.round(hn(aa.g*255,0,255))*256+Math.round(hn(aa.b*255,0,255))}getHexString(e=Gs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Pn.workingColorSpace){Pn.fromWorkingColorSpace(aa.copy(this),t);const i=aa.r,s=aa.g,r=aa.b,l=Math.max(i,s,r),c=Math.min(i,s,r);let d,p;const g=(c+l)/2;if(c===l)d=0,p=0;else{const y=l-c;switch(p=g<=.5?y/(l+c):y/(2-l-c),l){case i:d=(s-r)/y+(s<r?6:0);break;case s:d=(r-i)/y+2;break;case r:d=(i-s)/y+4;break}d/=6}return e.h=d,e.s=p,e.l=g,e}getRGB(e,t=Pn.workingColorSpace){return Pn.fromWorkingColorSpace(aa.copy(this),t),e.r=aa.r,e.g=aa.g,e.b=aa.b,e}getStyle(e=Gs){Pn.fromWorkingColorSpace(aa.copy(this),e);const t=aa.r,i=aa.g,s=aa.b;return e!==Gs?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(tu),this.setHSL(tu.h+e,tu.s+t,tu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(tu),e.getHSL(Ey);const i=Pg(tu.h,Ey.h,t),s=Pg(tu.s,Ey.s,t),r=Pg(tu.l,Ey.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const aa=new St;St.NAMES=pD;let lF=0;class ha extends bl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lF++}),this.uuid=yr(),this.name="",this.type="Material",this.blending=Zh,this.side=hc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=B_,this.blendDst=z_,this.blendEquation=cu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new St(0,0,0),this.blendAlpha=0,this.depthFunc=ef,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=c1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Nh,this.stencilZFail=Nh,this.stencilZPass=Nh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Zh&&(i.blending=this.blending),this.side!==hc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==B_&&(i.blendSrc=this.blendSrc),this.blendDst!==z_&&(i.blendDst=this.blendDst),this.blendEquation!==cu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ef&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==c1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Nh&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Nh&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Nh&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const l=[];for(const c in r){const d=r[c];delete d.metadata,l.push(d)}return l}if(t){const r=s(e.textures),l=s(e.images);r.length>0&&(i.textures=r),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class fc extends ha{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rc=cF();function cF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,s[d]=24,s[d|256]=24):(i[d]=31744,i[d|256]=64512,s[d]=13,s[d|256]=13)}const r=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,r[d]=p|g}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(c[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:l,offsetTable:c}}function Za(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=hn(n,-65504,65504),rc.floatView[0]=n;const e=rc.uint32View[0],t=e>>23&511;return rc.baseTable[t]+((e&8388607)>>rc.shiftTable[t])}function bg(n){const e=n>>10;return rc.uint32View[0]=rc.mantissaTable[rc.offsetTable[e]+(n&1023)]+rc.exponentTable[e],rc.floatView[0]}const jh={toHalfFloat:Za,fromHalfFloat:bg},is=new ee,My=new Je;let uF=0;class li{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:uF++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=i0,this.updateRanges=[],this.gpuType=Ii,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)My.fromBufferAttribute(this,t),My.applyMatrix3(e),this.setXY(t,My.x,My.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)is.fromBufferAttribute(this,t),is.applyMatrix3(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)is.fromBufferAttribute(this,t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)is.fromBufferAttribute(this,t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)is.fromBufferAttribute(this,t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ua(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=vn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ua(t,this.array)),t}setX(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ua(t,this.array)),t}setY(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ua(t,this.array)),t}setZ(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ua(t,this.array)),t}setW(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array),s=vn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array),s=vn(s,this.array),r=vn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==i0&&(e.usage=this.usage),e}}class hF extends li{constructor(e,t,i){super(new Int8Array(e),t,i)}}class fF extends li{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class dF extends li{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class pF extends li{constructor(e,t,i){super(new Int16Array(e),t,i)}}class NM extends li{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class mF extends li{constructor(e,t,i){super(new Int32Array(e),t,i)}}class UM extends li{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class gF extends li{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=bg(this.array[e*this.itemSize]);return this.normalized&&(t=Ua(t,this.array)),t}setX(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize]=Za(t),this}getY(e){let t=bg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ua(t,this.array)),t}setY(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+1]=Za(t),this}getZ(e){let t=bg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ua(t,this.array)),t}setZ(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+2]=Za(t),this}getW(e){let t=bg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ua(t,this.array)),t}setW(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+3]=Za(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array)),this.array[e+0]=Za(t),this.array[e+1]=Za(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array),s=vn(s,this.array)),this.array[e+0]=Za(t),this.array[e+1]=Za(i),this.array[e+2]=Za(s),this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array),s=vn(s,this.array),r=vn(r,this.array)),this.array[e+0]=Za(t),this.array[e+1]=Za(i),this.array[e+2]=Za(s),this.array[e+3]=Za(r),this}}class It extends li{constructor(e,t,i){super(new Float32Array(e),t,i)}}let vF=0;const Hr=new nn,VS=new kn,wd=new ee,pr=new Pa,cg=new Pa,Rs=new ee;class bn extends bl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vF++}),this.uuid=yr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hD(e)?UM:NM)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new gn().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Hr.makeRotationFromQuaternion(e),this.applyMatrix4(Hr),this}rotateX(e){return Hr.makeRotationX(e),this.applyMatrix4(Hr),this}rotateY(e){return Hr.makeRotationY(e),this.applyMatrix4(Hr),this}rotateZ(e){return Hr.makeRotationZ(e),this.applyMatrix4(Hr),this}translate(e,t,i){return Hr.makeTranslation(e,t,i),this.applyMatrix4(Hr),this}scale(e,t,i){return Hr.makeScale(e,t,i),this.applyMatrix4(Hr),this}lookAt(e){return VS.lookAt(e),VS.updateMatrix(),this.applyMatrix4(VS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wd).negate(),this.translate(wd.x,wd.y,wd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const l=e[s];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new It(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ee(-1/0,-1/0,-1/0),new ee(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];pr.setFromBufferAttribute(r),this.morphTargetsRelative?(Rs.addVectors(this.boundingBox.min,pr.min),this.boundingBox.expandByPoint(Rs),Rs.addVectors(this.boundingBox.max,pr.max),this.boundingBox.expandByPoint(Rs)):(this.boundingBox.expandByPoint(pr.min),this.boundingBox.expandByPoint(pr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ua);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ee,1/0);return}if(e){const i=this.boundingSphere.center;if(pr.setFromBufferAttribute(e),t)for(let r=0,l=t.length;r<l;r++){const c=t[r];cg.setFromBufferAttribute(c),this.morphTargetsRelative?(Rs.addVectors(pr.min,cg.min),pr.expandByPoint(Rs),Rs.addVectors(pr.max,cg.max),pr.expandByPoint(Rs)):(pr.expandByPoint(cg.min),pr.expandByPoint(cg.max))}pr.getCenter(i);let s=0;for(let r=0,l=e.count;r<l;r++)Rs.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(Rs));if(t)for(let r=0,l=t.length;r<l;r++){const c=t[r],d=this.morphTargetsRelative;for(let p=0,g=c.count;p<g;p++)Rs.fromBufferAttribute(c,p),d&&(wd.fromBufferAttribute(e,p),Rs.add(wd)),s=Math.max(s,i.distanceToSquared(Rs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new li(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),c=[],d=[];for(let F=0;F<i.count;F++)c[F]=new ee,d[F]=new ee;const p=new ee,g=new ee,y=new ee,_=new Je,x=new Je,E=new Je,A=new ee,T=new ee;function M(F,L,P){p.fromBufferAttribute(i,F),g.fromBufferAttribute(i,L),y.fromBufferAttribute(i,P),_.fromBufferAttribute(r,F),x.fromBufferAttribute(r,L),E.fromBufferAttribute(r,P),g.sub(p),y.sub(p),x.sub(_),E.sub(_);const Z=1/(x.x*E.y-E.x*x.y);isFinite(Z)&&(A.copy(g).multiplyScalar(E.y).addScaledVector(y,-x.y).multiplyScalar(Z),T.copy(y).multiplyScalar(x.x).addScaledVector(g,-E.x).multiplyScalar(Z),c[F].add(A),c[L].add(A),c[P].add(A),d[F].add(T),d[L].add(T),d[P].add(T))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let F=0,L=R.length;F<L;++F){const P=R[F],Z=P.start,de=P.count;for(let se=Z,he=Z+de;se<he;se+=3)M(e.getX(se+0),e.getX(se+1),e.getX(se+2))}const O=new ee,D=new ee,H=new ee,I=new ee;function V(F){H.fromBufferAttribute(s,F),I.copy(H);const L=c[F];O.copy(L),O.sub(H.multiplyScalar(H.dot(L))).normalize(),D.crossVectors(I,L);const Z=D.dot(d[F])<0?-1:1;l.setXYZW(F,O.x,O.y,O.z,Z)}for(let F=0,L=R.length;F<L;++F){const P=R[F],Z=P.start,de=P.count;for(let se=Z,he=Z+de;se<he;se+=3)V(e.getX(se+0)),V(e.getX(se+1)),V(e.getX(se+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new li(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,x=i.count;_<x;_++)i.setXYZ(_,0,0,0);const s=new ee,r=new ee,l=new ee,c=new ee,d=new ee,p=new ee,g=new ee,y=new ee;if(e)for(let _=0,x=e.count;_<x;_+=3){const E=e.getX(_+0),A=e.getX(_+1),T=e.getX(_+2);s.fromBufferAttribute(t,E),r.fromBufferAttribute(t,A),l.fromBufferAttribute(t,T),g.subVectors(l,r),y.subVectors(s,r),g.cross(y),c.fromBufferAttribute(i,E),d.fromBufferAttribute(i,A),p.fromBufferAttribute(i,T),c.add(g),d.add(g),p.add(g),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(A,d.x,d.y,d.z),i.setXYZ(T,p.x,p.y,p.z)}else for(let _=0,x=t.count;_<x;_+=3)s.fromBufferAttribute(t,_+0),r.fromBufferAttribute(t,_+1),l.fromBufferAttribute(t,_+2),g.subVectors(l,r),y.subVectors(s,r),g.cross(y),i.setXYZ(_+0,g.x,g.y,g.z),i.setXYZ(_+1,g.x,g.y,g.z),i.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Rs.fromBufferAttribute(e,t),Rs.normalize(),e.setXYZ(t,Rs.x,Rs.y,Rs.z)}toNonIndexed(){function e(c,d){const p=c.array,g=c.itemSize,y=c.normalized,_=new p.constructor(d.length*g);let x=0,E=0;for(let A=0,T=d.length;A<T;A++){c.isInterleavedBufferAttribute?x=d[A]*c.data.stride+c.offset:x=d[A]*g;for(let M=0;M<g;M++)_[E++]=p[x++]}return new li(_,g,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bn,i=this.index.array,s=this.attributes;for(const c in s){const d=s[c],p=e(d,i);t.setAttribute(c,p)}const r=this.morphAttributes;for(const c in r){const d=[],p=r[c];for(let g=0,y=p.length;g<y;g++){const _=p[g],x=e(_,i);d.push(x)}t.morphAttributes[c]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,d=l.length;c<d;c++){const p=l[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let r=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let y=0,_=p.length;y<_;y++){const x=p[y];g.push(x.toJSON(e.data))}g.length>0&&(s[d]=g,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const g=s[p];this.setAttribute(p,g.clone(t))}const r=e.morphAttributes;for(const p in r){const g=[],y=r[p];for(let _=0,x=y.length;_<x;_++)g.push(y[_].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const lC=new nn,yh=new wp,Ty=new ua,cC=new ee,wy=new ee,Ay=new ee,Cy=new ee,HS=new ee,Ry=new ee,uC=new ee,Oy=new ee;class Pi extends kn{constructor(e=new bn,t=new fc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=s.length;r<l;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const c=this.morphTargetInfluences;if(r&&c){Ry.set(0,0,0);for(let d=0,p=r.length;d<p;d++){const g=c[d],y=r[d];g!==0&&(HS.fromBufferAttribute(y,e),l?Ry.addScaledVector(HS,g):Ry.addScaledVector(HS.sub(t),g))}t.add(Ry)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Ty.copy(i.boundingSphere),Ty.applyMatrix4(r),yh.copy(e.ray).recast(e.near),!(Ty.containsPoint(yh.origin)===!1&&(yh.intersectSphere(Ty,cC)===null||yh.origin.distanceToSquared(cC)>(e.far-e.near)**2))&&(lC.copy(r).invert(),yh.copy(e.ray).applyMatrix4(lC),!(i.boundingBox!==null&&yh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,yh)))}_computeIntersections(e,t,i){let s;const r=this.geometry,l=this.material,c=r.index,d=r.attributes.position,p=r.attributes.uv,g=r.attributes.uv1,y=r.attributes.normal,_=r.groups,x=r.drawRange;if(c!==null)if(Array.isArray(l))for(let E=0,A=_.length;E<A;E++){const T=_[E],M=l[T.materialIndex],R=Math.max(T.start,x.start),O=Math.min(c.count,Math.min(T.start+T.count,x.start+x.count));for(let D=R,H=O;D<H;D+=3){const I=c.getX(D),V=c.getX(D+1),F=c.getX(D+2);s=Dy(this,M,e,i,p,g,y,I,V,F),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const E=Math.max(0,x.start),A=Math.min(c.count,x.start+x.count);for(let T=E,M=A;T<M;T+=3){const R=c.getX(T),O=c.getX(T+1),D=c.getX(T+2);s=Dy(this,l,e,i,p,g,y,R,O,D),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}else if(d!==void 0)if(Array.isArray(l))for(let E=0,A=_.length;E<A;E++){const T=_[E],M=l[T.materialIndex],R=Math.max(T.start,x.start),O=Math.min(d.count,Math.min(T.start+T.count,x.start+x.count));for(let D=R,H=O;D<H;D+=3){const I=D,V=D+1,F=D+2;s=Dy(this,M,e,i,p,g,y,I,V,F),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const E=Math.max(0,x.start),A=Math.min(d.count,x.start+x.count);for(let T=E,M=A;T<M;T+=3){const R=T,O=T+1,D=T+2;s=Dy(this,l,e,i,p,g,y,R,O,D),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}}}function yF(n,e,t,i,s,r,l,c){let d;if(e.side===Ia?d=i.intersectTriangle(l,r,s,!0,c):d=i.intersectTriangle(s,r,l,e.side===hc,c),d===null)return null;Oy.copy(c),Oy.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(Oy);return p<t.near||p>t.far?null:{distance:p,point:Oy.clone(),object:n}}function Dy(n,e,t,i,s,r,l,c,d,p){n.getVertexPosition(c,wy),n.getVertexPosition(d,Ay),n.getVertexPosition(p,Cy);const g=yF(n,e,t,i,wy,Ay,Cy,uC);if(g){const y=new ee;Ja.getBarycoord(uC,wy,Ay,Cy,y),s&&(g.uv=Ja.getInterpolatedAttribute(s,c,d,p,y,new Je)),r&&(g.uv1=Ja.getInterpolatedAttribute(r,c,d,p,y,new Je)),l&&(g.normal=Ja.getInterpolatedAttribute(l,c,d,p,y,new ee),g.normal.dot(i.direction)>0&&g.normal.multiplyScalar(-1));const _={a:c,b:d,c:p,normal:new ee,materialIndex:0};Ja.getNormal(wy,Ay,Cy,_.normal),g.face=_,g.barycoord=y}return g}class lf extends bn{constructor(e=1,t=1,i=1,s=1,r=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:l};const c=this;s=Math.floor(s),r=Math.floor(r),l=Math.floor(l);const d=[],p=[],g=[],y=[];let _=0,x=0;E("z","y","x",-1,-1,i,t,e,l,r,0),E("z","y","x",1,-1,i,t,-e,l,r,1),E("x","z","y",1,1,e,i,t,s,l,2),E("x","z","y",1,-1,e,i,-t,s,l,3),E("x","y","z",1,-1,e,t,i,s,r,4),E("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(d),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(g,3)),this.setAttribute("uv",new It(y,2));function E(A,T,M,R,O,D,H,I,V,F,L){const P=D/V,Z=H/F,de=D/2,se=H/2,he=I/2,xe=V+1,k=F+1;let te=0,Y=0;const fe=new ee;for(let ve=0;ve<k;ve++){const X=ve*Z-se;for(let oe=0;oe<xe;oe++){const Re=oe*P-de;fe[A]=Re*R,fe[T]=X*O,fe[M]=he,p.push(fe.x,fe.y,fe.z),fe[A]=0,fe[T]=0,fe[M]=I>0?1:-1,g.push(fe.x,fe.y,fe.z),y.push(oe/V),y.push(1-ve/F),te+=1}}for(let ve=0;ve<F;ve++)for(let X=0;X<V;X++){const oe=_+X+xe*ve,Re=_+X+xe*(ve+1),le=_+(X+1)+xe*(ve+1),Oe=_+(X+1)+xe*ve;d.push(oe,Re,Oe),d.push(Re,le,Oe),Y+=6}c.addGroup(x,Y,L),x+=Y,_+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Da(n){const e={};for(let t=0;t<n.length;t++){const i=mp(n[t]);for(const s in i)e[s]=i[s]}return e}function _F(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function mD(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Pn.workingColorSpace}const gD={clone:mp,merge:Da};var xF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ba extends ha{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=xF,this.fragmentShader=bF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mp(e.uniforms),this.uniformsGroups=_F(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const l=this.uniforms[s].value;l&&l.isTexture?t.uniforms[s]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[s]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[s]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[s]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[s]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[s]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[s]={type:"m4",value:l.toArray()}:t.uniforms[s]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Wx extends kn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn,this.coordinateSystem=Co}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const nu=new ee,hC=new Je,fC=new Je;class Os extends Wx{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=dp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Qh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dp*2*Math.atan(Math.tan(Qh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){nu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(nu.x,nu.y).multiplyScalar(-e/nu.z),nu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(nu.x,nu.y).multiplyScalar(-e/nu.z)}getViewSize(e,t){return this.getViewBounds(e,hC,fC),t.subVectors(fC,hC)}setViewOffset(e,t,i,s,r,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Qh*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;r+=l.offsetX*s/d,t-=l.offsetY*i/p,s*=l.width/d,i*=l.height/p}const c=this.filmOffset;c!==0&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ad=-90,Cd=1;class vD extends kn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Os(Ad,Cd,e,t);s.layers=this.layers,this.add(s);const r=new Os(Ad,Cd,e,t);r.layers=this.layers,this.add(r);const l=new Os(Ad,Cd,e,t);l.layers=this.layers,this.add(l);const c=new Os(Ad,Cd,e,t);c.layers=this.layers,this.add(c);const d=new Os(Ad,Cd,e,t);d.layers=this.layers,this.add(d);const p=new Os(Ad,Cd,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,l,c,d]=t;for(const p of t)this.remove(p);if(e===Co)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===s0)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,l,c,d,p,g]=this.children,y=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,l),e.setRenderTarget(i,2,s),e.render(t,c),e.setRenderTarget(i,3,s),e.render(t,d),e.setRenderTarget(i,4,s),e.render(t,p),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,s),e.render(t,g),e.setRenderTarget(y,_,x),e.xr.enabled=E,i.texture.needsPMREMUpdate=!0}}class U0 extends oi{constructor(e,t,i,s,r,l,c,d,p,g){e=e!==void 0?e:[],t=t!==void 0?t:_l,super(e,t,i,s,r,l,c,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LM extends Xr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new U0(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ti}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new lf(5,5,5),r=new Ba({name:"CubemapFromEquirect",uniforms:mp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ia,blending:gl});r.uniforms.tEquirect.value=t;const l=new Pi(s,r),c=t.minFilter;return t.minFilter===dl&&(t.minFilter=ti),new vD(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(r)}}class np extends kn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const SF={type:"move"};class A_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new np,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new np,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ee,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ee),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new np,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ee,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ee),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,l=null;const c=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const A of e.hand.values()){const T=t.getJointPose(A,i),M=this._getHandJoint(p,A);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const g=p.joints["index-finger-tip"],y=p.joints["thumb-tip"],_=g.position.distanceTo(y.position),x=.02,E=.005;p.inputState.pinching&&_>x+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&_<=x-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));c!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(SF)))}return c!==null&&(c.visible=s!==null),d!==null&&(d.visible=r!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new np;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Yx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new St(e),this.density=t}clone(){return new Yx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Kx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new St(e),this.near=t,this.far=i}clone(){return new Kx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class L0 extends kn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new xr,this.environmentIntensity=1,this.environmentRotation=new xr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Zx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=i0,this.updateRanges=[],this.version=0,this.uuid=yr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Oa=new ee;class sf{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Oa.fromBufferAttribute(this,t),Oa.applyMatrix4(e),this.setXYZ(t,Oa.x,Oa.y,Oa.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Oa.fromBufferAttribute(this,t),Oa.applyNormalMatrix(e),this.setXYZ(t,Oa.x,Oa.y,Oa.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Oa.fromBufferAttribute(this,t),Oa.transformDirection(e),this.setXYZ(t,Oa.x,Oa.y,Oa.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ua(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=vn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=vn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ua(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ua(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ua(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ua(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array),s=vn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=vn(t,this.array),i=vn(i,this.array),s=vn(s,this.array),r=vn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new li(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class IM extends ha{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Rd;const ug=new ee,Od=new ee,Dd=new ee,Nd=new Je,hg=new Je,yD=new nn,Ny=new ee,fg=new ee,Uy=new ee,dC=new Je,kS=new Je,pC=new Je;class _D extends kn{constructor(e=new IM){if(super(),this.isSprite=!0,this.type="Sprite",Rd===void 0){Rd=new bn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Zx(t,5);Rd.setIndex([0,1,2,0,2,3]),Rd.setAttribute("position",new sf(i,3,0,!1)),Rd.setAttribute("uv",new sf(i,2,3,!1))}this.geometry=Rd,this.material=e,this.center=new Je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Od.setFromMatrixScale(this.matrixWorld),yD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Dd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Od.multiplyScalar(-Dd.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const l=this.center;Ly(Ny.set(-.5,-.5,0),Dd,l,Od,s,r),Ly(fg.set(.5,-.5,0),Dd,l,Od,s,r),Ly(Uy.set(.5,.5,0),Dd,l,Od,s,r),dC.set(0,0),kS.set(1,0),pC.set(1,1);let c=e.ray.intersectTriangle(Ny,fg,Uy,!1,ug);if(c===null&&(Ly(fg.set(-.5,.5,0),Dd,l,Od,s,r),kS.set(0,1),c=e.ray.intersectTriangle(Ny,Uy,fg,!1,ug),c===null))return;const d=e.ray.origin.distanceTo(ug);d<e.near||d>e.far||t.push({distance:d,point:ug.clone(),uv:Ja.getInterpolation(ug,Ny,fg,Uy,dC,kS,pC,new Je),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ly(n,e,t,i,s,r){Nd.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(hg.x=r*Nd.x-s*Nd.y,hg.y=s*Nd.x+r*Nd.y):hg.copy(Nd),n.copy(e),n.x+=hg.x,n.y+=hg.y,n.applyMatrix4(yD)}const Iy=new ee,mC=new ee;class xD extends kn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const s=t.splice(i,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Iy.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(Iy);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Iy.setFromMatrixPosition(e.matrixWorld),mC.setFromMatrixPosition(this.matrixWorld);const i=Iy.distanceTo(mC)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let l=t[s].distance;if(t[s].object.visible&&(l-=l*t[s].hysteresis),i>=l)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,r=i.length;s<r;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const gC=new ee,vC=new Hn,yC=new Hn,EF=new ee,_C=new nn,Py=new ee,GS=new ua,xC=new nn,jS=new wp;class bD extends Pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=o1,this.bindMatrix=new nn,this.bindMatrixInverse=new nn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Pa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Py),this.boundingBox.expandByPoint(Py)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ua),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Py),this.boundingSphere.expandByPoint(Py)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),GS.copy(this.boundingSphere),GS.applyMatrix4(s),e.ray.intersectsSphere(GS)!==!1&&(xC.copy(s).invert(),jS.copy(e.ray).applyMatrix4(xC),!(this.boundingBox!==null&&jS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,jS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hn,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===o1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Z3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;vC.fromBufferAttribute(s.attributes.skinIndex,e),yC.fromBufferAttribute(s.attributes.skinWeight,e),gC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const l=yC.getComponent(r);if(l!==0){const c=vC.getComponent(r);_C.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),t.addScaledVector(EF.copy(gC).applyMatrix4(_C),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class PM extends kn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ro extends oi{constructor(e=null,t=1,i=1,s,r,l,c,d,p=js,g=js,y,_){super(null,l,c,d,p,g,s,r,y,_),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const bC=new nn,MF=new nn;class Jx{constructor(e=[],t=[]){this.uuid=yr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new nn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,l=e.length;r<l;r++){const c=e[r]?e[r].matrixWorld:MF;bC.multiplyMatrices(c,t[r]),bC.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Jx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ro(t,e,e,Ki,Ii);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let l=t[r];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),l=new PM),this.bones.push(l),this.boneInverses.push(new nn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const l=t[s];e.bones.push(l.uuid);const c=i[s];e.boneInverses.push(c.toArray())}return e}}class gp extends li{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ud=new nn,SC=new nn,By=[],EC=new Pa,TF=new nn,dg=new Pi,pg=new ua;class SD extends Pi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new gp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,TF)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Pa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ud),EC.copy(e.boundingBox).applyMatrix4(Ud),this.boundingBox.union(EC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ua),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ud),pg.copy(e.boundingSphere).applyMatrix4(Ud),this.boundingSphere.union(pg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,l=e*r+1;for(let c=0;c<i.length;c++)i[c]=s[l+c]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(dg.geometry=this.geometry,dg.material=this.material,dg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),pg.copy(this.boundingSphere),pg.applyMatrix4(i),e.ray.intersectsSphere(pg)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Ud),SC.multiplyMatrices(i,Ud),dg.matrixWorld=SC,dg.raycast(e,By);for(let l=0,c=By.length;l<c;l++){const d=By[l];d.instanceId=r,d.object=this,t.push(d)}By.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new gp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ro(new Float32Array(s*this.count),s,this.count,O0,Ii));const r=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const c=this.geometry.morphTargetsRelative?1:1-l,d=s*e;r[d]=c,r.set(i,d+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const qS=new ee,wF=new ee,AF=new gn;class ou{constructor(e=new ee(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=qS.subVectors(i,t).cross(wF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(qS),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||AF.getNormalMatrix(e),s=this.coplanarPoint(qS).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new ua,zy=new ee;class I0{constructor(e=new ou,t=new ou,i=new ou,s=new ou,r=new ou,l=new ou){this.planes=[e,t,i,s,r,l]}set(e,t,i,s,r,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(s),c[4].copy(r),c[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Co){const i=this.planes,s=e.elements,r=s[0],l=s[1],c=s[2],d=s[3],p=s[4],g=s[5],y=s[6],_=s[7],x=s[8],E=s[9],A=s[10],T=s[11],M=s[12],R=s[13],O=s[14],D=s[15];if(i[0].setComponents(d-r,_-p,T-x,D-M).normalize(),i[1].setComponents(d+r,_+p,T+x,D+M).normalize(),i[2].setComponents(d+l,_+g,T+E,D+R).normalize(),i[3].setComponents(d-l,_-g,T-E,D-R).normalize(),i[4].setComponents(d-c,_-y,T-A,D-O).normalize(),t===Co)i[5].setComponents(d+c,_+y,T+A,D+O).normalize();else if(t===s0)i[5].setComponents(c,y,A,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_h.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){return _h.center.set(0,0,0),_h.radius=.7071067811865476,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(zy.x=s.normal.x>0?e.max.x:e.min.x,zy.y=s.normal.y>0?e.max.y:e.min.y,zy.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(zy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function XS(n,e){return n-e}function CF(n,e){return n.z-e.z}function RF(n,e){return e.z-n.z}class OF{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,s){const r=this.pool,l=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const c=r[this.index];l.push(c),this.index++,c.start=e,c.count=t,c.z=i,c.index=s}reset(){this.list.length=0,this.index=0}}const Ka=new nn,DF=new St(1,1,1),WS=new I0,Fy=new Pa,xh=new ua,mg=new ee,MC=new ee,NF=new ee,YS=new OF,ra=new Pi,Vy=[];function UF(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let r=0;r<s;r++)for(let l=0;l<i;l++)e.setComponent(r+t,l,n.getComponent(r,l))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function bh(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class ED extends Pi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,s){super(new bn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ro(t,e,e,Ki,Ii);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ro(t,e,e,D0,xl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ro(t,e,e,Ki,Ii);i.colorSpace=Pn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const l=e.getAttribute(r),{array:c,itemSize:d,normalized:p}=l,g=new c.constructor(i*d),y=new li(g,d,p);t.setAttribute(r,y)}if(e.getIndex()!==null){const r=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new li(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),r=t.getAttribute(i);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pa);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,Ka),this.getBoundingBoxAt(r,Fy).applyMatrix4(Ka),e.union(Fy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ua);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,Ka),this.getBoundingSphereAt(r,xh).applyMatrix4(Ka),e.union(xh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(XS),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=i):(s=this._instanceInfo.length,this._instanceInfo.push(i));const r=this._matricesTexture;Ka.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const l=this._colorsTexture;return l&&(DF.toArray(l.image.data,s*4),l.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=i===-1?l.count:i),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(XS),d=this._availableGeometryIds.shift(),r[d]=s):(d=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(d,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,r=i.getIndex(),l=t.getIndex(),c=this._geometryInfo[e];if(s&&l.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const g in i.attributes){const y=t.getAttribute(g),_=i.getAttribute(g);UF(y,_,d);const x=y.itemSize;for(let E=y.count,A=p;E<A;E++){const T=d+E;for(let M=0;M<x;M++)_.setComponent(T,M,0)}_.needsUpdate=!0,_.addUpdateRange(d*x,p*x)}if(s){const g=c.indexStart,y=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let _=0;_<l.count;_++)r.setX(g+_,d+l.getX(_));for(let _=l.count,x=y;_<x;_++)r.setX(g+_,d);r.needsUpdate=!0,r.addUpdateRange(g,c.reservedIndexCount)}return c.start=s?c.indexStart:c.vertexStart,c.count=s?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let s=0,r=i.length;s<r;s++)i[s].active&&i[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,s=i.map((l,c)=>c).sort((l,c)=>i[l].vertexStart-i[c].vertexStart),r=this.geometry;for(let l=0,c=i.length;l<c;l++){const d=s[l],p=i[d];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:y,reservedIndexCount:_}=p,x=r.index,E=x.array,A=e-y;for(let T=g;T<g+_;T++)E[T]=E[T]+A;x.array.copyWithin(t,g,g+_),x.addUpdateRange(t,_),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:y}=p,_=r.attributes;for(const x in _){const E=_[x],{array:A,itemSize:T}=E;A.copyWithin(e*T,g*T,(g+y)*T),E.addUpdateRange(e*T,y*T)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new Pa,l=i.index,c=i.attributes.position;for(let d=s.start,p=s.start+s.count;d<p;d++){let g=d;l&&(g=l.getX(g)),r.expandByPoint(mg.fromBufferAttribute(c,g))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new ua;this.getBoundingBoxAt(e,Fy),Fy.getCenter(r.center);const l=i.index,c=i.attributes.position;let d=0;for(let p=s.start,g=s.start+s.count;p<g;p++){let y=p;l&&(y=l.getX(y)),mg.fromBufferAttribute(c,y),d=Math.max(d,r.center.distanceToSquared(mg))}r.radius=Math.sqrt(d),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(XS);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);bh(this._multiDrawCounts,s),bh(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const l=this._indirectTexture,c=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),bh(l.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),bh(c.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),bh(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...i.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new bn,this._initializeGeometry(r));const l=this.geometry;r.index&&bh(r.index.array,l.index.array);for(const c in r.attributes)bh(r.attributes[c].array,l.attributes[c].array)}raycast(e,t){const i=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,l=this.geometry;ra.material=this.material,ra.geometry.index=l.index,ra.geometry.attributes=l.attributes,ra.geometry.boundingBox===null&&(ra.geometry.boundingBox=new Pa),ra.geometry.boundingSphere===null&&(ra.geometry.boundingSphere=new ua);for(let c=0,d=i.length;c<d;c++){if(!i[c].visible||!i[c].active)continue;const p=i[c].geometryIndex,g=s[p];ra.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(c,ra.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,ra.geometry.boundingBox),this.getBoundingSphereAt(p,ra.geometry.boundingSphere),ra.raycast(e,Vy);for(let y=0,_=Vy.length;y<_;y++){const x=Vy[y];x.object=this,x.batchId=c,t.push(x)}Vy.length=0}ra.material=null,ra.geometry.index=null,ra.geometry.attributes={},ra.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=s.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,_=this.perObjectFrustumCulled,x=this._indirectTexture,E=x.image.data;_&&(Ka.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),WS.setFromProjectionMatrix(Ka,e.coordinateSystem));let A=0;if(this.sortObjects){Ka.copy(this.matrixWorld).invert(),mg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ka),MC.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ka);for(let R=0,O=d.length;R<O;R++)if(d[R].visible&&d[R].active){const D=d[R].geometryIndex;this.getMatrixAt(R,Ka),this.getBoundingSphereAt(D,xh).applyMatrix4(Ka);let H=!1;if(_&&(H=!WS.intersectsSphere(xh)),!H){const I=y[D],V=NF.subVectors(xh.center,mg).dot(MC);YS.push(I.start,I.count,V,R)}}const T=YS.list,M=this.customSort;M===null?T.sort(r.transparent?RF:CF):M.call(this,T,i);for(let R=0,O=T.length;R<O;R++){const D=T[R];p[A]=D.start*c,g[A]=D.count,E[A]=D.index,A++}YS.reset()}else for(let T=0,M=d.length;T<M;T++)if(d[T].visible&&d[T].active){const R=d[T].geometryIndex;let O=!1;if(_&&(this.getMatrixAt(T,Ka),this.getBoundingSphereAt(R,xh).applyMatrix4(Ka),O=!WS.intersectsSphere(xh)),!O){const D=y[R];p[A]=D.start*c,g[A]=D.count,E[A]=T,A++}}x.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,r,l){this.onBeforeRender(e,null,s,r,l)}}class za extends ha{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _x=new ee,xx=new ee,TC=new nn,gg=new wp,Hy=new ua,KS=new ee,wC=new ee;class vu extends kn{constructor(e=new bn,t=new za){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)_x.fromBufferAttribute(t,s-1),xx.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=_x.distanceTo(xx);e.setAttribute("lineDistance",new It(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Hy.copy(i.boundingSphere),Hy.applyMatrix4(s),Hy.radius+=r,e.ray.intersectsSphere(Hy)===!1)return;TC.copy(s).invert(),gg.copy(e.ray).applyMatrix4(TC);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=this.isLineSegments?2:1,g=i.index,_=i.attributes.position;if(g!==null){const x=Math.max(0,l.start),E=Math.min(g.count,l.start+l.count);for(let A=x,T=E-1;A<T;A+=p){const M=g.getX(A),R=g.getX(A+1),O=ky(this,e,gg,d,M,R,A);O&&t.push(O)}if(this.isLineLoop){const A=g.getX(E-1),T=g.getX(x),M=ky(this,e,gg,d,A,T,E-1);M&&t.push(M)}}else{const x=Math.max(0,l.start),E=Math.min(_.count,l.start+l.count);for(let A=x,T=E-1;A<T;A+=p){const M=ky(this,e,gg,d,A,A+1,A);M&&t.push(M)}if(this.isLineLoop){const A=ky(this,e,gg,d,E-1,x,E-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=s.length;r<l;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function ky(n,e,t,i,s,r,l){const c=n.geometry.attributes.position;if(_x.fromBufferAttribute(c,s),xx.fromBufferAttribute(c,r),t.distanceSqToSegment(_x,xx,KS,wC)>i)return;KS.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(KS);if(!(p<e.near||p>e.far))return{distance:p,point:wC.clone().applyMatrix4(n.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:n}}const AC=new ee,CC=new ee;class Sl extends vu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)AC.fromBufferAttribute(t,s),CC.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+AC.distanceTo(CC);e.setAttribute("lineDistance",new It(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MD extends vu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class BM extends ha{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const RC=new nn,h1=new wp,Gy=new ua,jy=new ee;class TD extends kn{constructor(e=new bn,t=new BM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Gy.copy(i.boundingSphere),Gy.applyMatrix4(s),Gy.radius+=r,e.ray.intersectsSphere(Gy)===!1)return;RC.copy(s).invert(),h1.copy(e.ray).applyMatrix4(RC);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=i.index,y=i.attributes.position;if(p!==null){const _=Math.max(0,l.start),x=Math.min(p.count,l.start+l.count);for(let E=_,A=x;E<A;E++){const T=p.getX(E);jy.fromBufferAttribute(y,T),OC(jy,T,d,s,e,t,this)}}else{const _=Math.max(0,l.start),x=Math.min(y.count,l.start+l.count);for(let E=_,A=x;E<A;E++)jy.fromBufferAttribute(y,E),OC(jy,E,d,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=s.length;r<l;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function OC(n,e,t,i,s,r,l){const c=h1.distanceSqToPoint(n);if(c<t){const d=new ee;h1.closestPointToPoint(n,d),d.applyMatrix4(i);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;r.push({distance:p,distanceToRay:Math.sqrt(c),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class wD extends oi{constructor(e,t,i,s,r,l,c,d,p){super(e,t,i,s,r,l,c,d,p),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:ti,this.magFilter=r!==void 0?r:ti,this.generateMipmaps=!1;const g=this;function y(){g.needsUpdate=!0,e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class LF extends wD{constructor(e,t,i,s,r,l,c,d){super({},e,t,i,s,r,l,c,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class IF extends oi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=js,this.minFilter=js,this.generateMipmaps=!1,this.needsUpdate=!0}}class Qx extends oi{constructor(e,t,i,s,r,l,c,d,p,g,y,_){super(null,l,c,d,p,g,s,r,y,_),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class PF extends Qx{constructor(e,t,i,s,r,l){super(e,t,i,r,l),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=rs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class BF extends Qx{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,_l),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zF extends oi{constructor(e,t,i,s,r,l,c,d,p){super(e,t,i,s,r,l,c,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class zM extends oi{constructor(e,t,i,s,r,l,c,d,p,g=Jh){if(g!==Jh&&g!==nf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&g===Jh&&(i=xl),i===void 0&&g===nf&&(i=tf),super(null,s,r,l,c,d,g,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:js,this.minFilter=d!==void 0?d:js,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Do{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),r=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),r+=i.distanceTo(s),t.push(r),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const r=i.length;let l;t?l=t:l=e*i[r-1];let c=0,d=r-1,p;for(;c<=d;)if(s=Math.floor(c+(d-c)/2),p=i[s]-l,p<0)c=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,i[s]===l)return s/(r-1);const g=i[s],_=i[s+1]-g,x=(l-g)/_;return(s+x)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const l=this.getPoint(s),c=this.getPoint(r),d=t||(l.isVector2?new Je:new ee);return d.copy(c).sub(l).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ee,s=[],r=[],l=[],c=new ee,d=new nn;for(let x=0;x<=e;x++){const E=x/e;s[x]=this.getTangentAt(E,new ee)}r[0]=new ee,l[0]=new ee;let p=Number.MAX_VALUE;const g=Math.abs(s[0].x),y=Math.abs(s[0].y),_=Math.abs(s[0].z);g<=p&&(p=g,i.set(1,0,0)),y<=p&&(p=y,i.set(0,1,0)),_<=p&&i.set(0,0,1),c.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],c),l[0].crossVectors(s[0],r[0]);for(let x=1;x<=e;x++){if(r[x]=r[x-1].clone(),l[x]=l[x-1].clone(),c.crossVectors(s[x-1],s[x]),c.length()>Number.EPSILON){c.normalize();const E=Math.acos(hn(s[x-1].dot(s[x]),-1,1));r[x].applyMatrix4(d.makeRotationAxis(c,E))}l[x].crossVectors(s[x],r[x])}if(t===!0){let x=Math.acos(hn(r[0].dot(r[e]),-1,1));x/=e,s[0].dot(c.crossVectors(r[0],r[e]))>0&&(x=-x);for(let E=1;E<=e;E++)r[E].applyMatrix4(d.makeRotationAxis(s[E],x*E)),l[E].crossVectors(s[E],r[E])}return{tangents:s,normals:r,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class $x extends Do{constructor(e=0,t=0,i=1,s=1,r=0,l=Math.PI*2,c=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=l,this.aClockwise=c,this.aRotation=d}getPoint(e,t=new Je){const i=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const l=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(l?r=0:r=s),this.aClockwise===!0&&!l&&(r===s?r=-s:r=r-s);const c=this.aStartAngle+e*r;let d=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),_=d-this.aX,x=p-this.aY;d=_*g-x*y+this.aX,p=_*y+x*g+this.aY}return i.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class AD extends $x{constructor(e,t,i,s,r,l){super(e,t,i,i,s,r,l),this.isArcCurve=!0,this.type="ArcCurve"}}function FM(){let n=0,e=0,t=0,i=0;function s(r,l,c,d){n=r,e=c,t=-3*r+3*l-2*c-d,i=2*r-2*l+c+d}return{initCatmullRom:function(r,l,c,d,p){s(l,c,p*(c-r),p*(d-l))},initNonuniformCatmullRom:function(r,l,c,d,p,g,y){let _=(l-r)/p-(c-r)/(p+g)+(c-l)/g,x=(c-l)/g-(d-l)/(g+y)+(d-c)/y;_*=g,x*=g,s(l,c,_,x)},calc:function(r){const l=r*r,c=l*r;return n+e*r+t*l+i*c}}}const qy=new ee,ZS=new FM,JS=new FM,QS=new FM;class CD extends Do{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new ee){const i=t,s=this.points,r=s.length,l=(r-(this.closed?0:1))*e;let c=Math.floor(l),d=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:d===0&&c===r-1&&(c=r-2,d=1);let p,g;this.closed||c>0?p=s[(c-1)%r]:(qy.subVectors(s[0],s[1]).add(s[0]),p=qy);const y=s[c%r],_=s[(c+1)%r];if(this.closed||c+2<r?g=s[(c+2)%r]:(qy.subVectors(s[r-1],s[r-2]).add(s[r-1]),g=qy),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(y),x),A=Math.pow(y.distanceToSquared(_),x),T=Math.pow(_.distanceToSquared(g),x);A<1e-4&&(A=1),E<1e-4&&(E=A),T<1e-4&&(T=A),ZS.initNonuniformCatmullRom(p.x,y.x,_.x,g.x,E,A,T),JS.initNonuniformCatmullRom(p.y,y.y,_.y,g.y,E,A,T),QS.initNonuniformCatmullRom(p.z,y.z,_.z,g.z,E,A,T)}else this.curveType==="catmullrom"&&(ZS.initCatmullRom(p.x,y.x,_.x,g.x,this.tension),JS.initCatmullRom(p.y,y.y,_.y,g.y,this.tension),QS.initCatmullRom(p.z,y.z,_.z,g.z,this.tension));return i.set(ZS.calc(d),JS.calc(d),QS.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new ee().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function DC(n,e,t,i,s){const r=(i-e)*.5,l=(s-t)*.5,c=n*n,d=n*c;return(2*t-2*i+r+l)*d+(-3*t+3*i-2*r-l)*c+r*n+t}function FF(n,e){const t=1-n;return t*t*e}function VF(n,e){return 2*(1-n)*n*e}function HF(n,e){return n*n*e}function Bg(n,e,t,i){return FF(n,e)+VF(n,t)+HF(n,i)}function kF(n,e){const t=1-n;return t*t*t*e}function GF(n,e){const t=1-n;return 3*t*t*n*e}function jF(n,e){return 3*(1-n)*n*n*e}function qF(n,e){return n*n*n*e}function zg(n,e,t,i,s){return kF(n,e)+GF(n,t)+jF(n,i)+qF(n,s)}class VM extends Do{constructor(e=new Je,t=new Je,i=new Je,s=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Je){const i=t,s=this.v0,r=this.v1,l=this.v2,c=this.v3;return i.set(zg(e,s.x,r.x,l.x,c.x),zg(e,s.y,r.y,l.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RD extends Do{constructor(e=new ee,t=new ee,i=new ee,s=new ee){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new ee){const i=t,s=this.v0,r=this.v1,l=this.v2,c=this.v3;return i.set(zg(e,s.x,r.x,l.x,c.x),zg(e,s.y,r.y,l.y,c.y),zg(e,s.z,r.z,l.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HM extends Do{constructor(e=new Je,t=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Je){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Je){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OD extends Do{constructor(e=new ee,t=new ee){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ee){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kM extends Do{constructor(e=new Je,t=new Je,i=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Je){const i=t,s=this.v0,r=this.v1,l=this.v2;return i.set(Bg(e,s.x,r.x,l.x),Bg(e,s.y,r.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GM extends Do{constructor(e=new ee,t=new ee,i=new ee){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ee){const i=t,s=this.v0,r=this.v1,l=this.v2;return i.set(Bg(e,s.x,r.x,l.x),Bg(e,s.y,r.y,l.y),Bg(e,s.z,r.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jM extends Do{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Je){const i=t,s=this.points,r=(s.length-1)*e,l=Math.floor(r),c=r-l,d=s[l===0?l:l-1],p=s[l],g=s[l>s.length-2?s.length-1:l+1],y=s[l>s.length-3?s.length-1:l+2];return i.set(DC(c,d.x,p.x,g.x,y.x),DC(c,d.y,p.y,g.y,y.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Je().fromArray(s))}return this}}var bx=Object.freeze({__proto__:null,ArcCurve:AD,CatmullRomCurve3:CD,CubicBezierCurve:VM,CubicBezierCurve3:RD,EllipseCurve:$x,LineCurve:HM,LineCurve3:OD,QuadraticBezierCurve:kM,QuadraticBezierCurve3:GM,SplineCurve:jM});class DD extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new bx[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const l=s[r]-i,c=this.curves[r],d=c.getLength(),p=d===0?0:1-l/d;return c.getPointAt(p,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const l=r[s],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(c);for(let p=0;p<d.length;p++){const g=d[p];i&&i.equals(g)||(t.push(g),i=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new bx[s.type]().fromJSON(s))}return this}}class r0 extends DD{constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new HM(this.currentPoint.clone(),new Je(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const r=new kM(this.currentPoint.clone(),new Je(e,t),new Je(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,r,l){const c=new VM(this.currentPoint.clone(),new Je(e,t),new Je(i,s),new Je(r,l));return this.curves.push(c),this.currentPoint.set(r,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new jM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,r,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+c,t+d,i,s,r,l),this}absarc(e,t,i,s,r,l){return this.absellipse(e,t,i,i,s,r,l),this}ellipse(e,t,i,s,r,l,c,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,i,s,r,l,c,d),this}absellipse(e,t,i,s,r,l,c,d){const p=new $x(e,t,i,s,r,l,c,d);if(this.curves.length>0){const y=p.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class P0 extends bn{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=hn(s,0,Math.PI*2);const r=[],l=[],c=[],d=[],p=[],g=1/t,y=new ee,_=new Je,x=new ee,E=new ee,A=new ee;let T=0,M=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:T=e[R+1].x-e[R].x,M=e[R+1].y-e[R].y,x.x=M*1,x.y=-T,x.z=M*0,A.copy(x),x.normalize(),d.push(x.x,x.y,x.z);break;case e.length-1:d.push(A.x,A.y,A.z);break;default:T=e[R+1].x-e[R].x,M=e[R+1].y-e[R].y,x.x=M*1,x.y=-T,x.z=M*0,E.copy(x),x.x+=A.x,x.y+=A.y,x.z+=A.z,x.normalize(),d.push(x.x,x.y,x.z),A.copy(E)}for(let R=0;R<=t;R++){const O=i+R*g*s,D=Math.sin(O),H=Math.cos(O);for(let I=0;I<=e.length-1;I++){y.x=e[I].x*D,y.y=e[I].y,y.z=e[I].x*H,l.push(y.x,y.y,y.z),_.x=R/t,_.y=I/(e.length-1),c.push(_.x,_.y);const V=d[3*I+0]*D,F=d[3*I+1],L=d[3*I+0]*H;p.push(V,F,L)}}for(let R=0;R<t;R++)for(let O=0;O<e.length-1;O++){const D=O+R*e.length,H=D,I=D+e.length,V=D+e.length+1,F=D+1;r.push(H,I,F),r.push(V,F,I)}this.setIndex(r),this.setAttribute("position",new It(l,3)),this.setAttribute("uv",new It(c,2)),this.setAttribute("normal",new It(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P0(e.points,e.segments,e.phiStart,e.phiLength)}}class eb extends P0{constructor(e=1,t=1,i=4,s=8){const r=new r0;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new eb(e.radius,e.length,e.capSegments,e.radialSegments)}}class tb extends bn{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const r=[],l=[],c=[],d=[],p=new ee,g=new Je;l.push(0,0,0),c.push(0,0,1),d.push(.5,.5);for(let y=0,_=3;y<=t;y++,_+=3){const x=i+y/t*s;p.x=e*Math.cos(x),p.y=e*Math.sin(x),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(l[_]/e+1)/2,g.y=(l[_+1]/e+1)/2,d.push(g.x,g.y)}for(let y=1;y<=t;y++)r.push(y,y+1,0);this.setIndex(r),this.setAttribute("position",new It(l,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ap extends bn{constructor(e=1,t=1,i=1,s=32,r=1,l=!1,c=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:r,openEnded:l,thetaStart:c,thetaLength:d};const p=this;s=Math.floor(s),r=Math.floor(r);const g=[],y=[],_=[],x=[];let E=0;const A=[],T=i/2;let M=0;R(),l===!1&&(e>0&&O(!0),t>0&&O(!1)),this.setIndex(g),this.setAttribute("position",new It(y,3)),this.setAttribute("normal",new It(_,3)),this.setAttribute("uv",new It(x,2));function R(){const D=new ee,H=new ee;let I=0;const V=(t-e)/i;for(let F=0;F<=r;F++){const L=[],P=F/r,Z=P*(t-e)+e;for(let de=0;de<=s;de++){const se=de/s,he=se*d+c,xe=Math.sin(he),k=Math.cos(he);H.x=Z*xe,H.y=-P*i+T,H.z=Z*k,y.push(H.x,H.y,H.z),D.set(xe,V,k).normalize(),_.push(D.x,D.y,D.z),x.push(se,1-P),L.push(E++)}A.push(L)}for(let F=0;F<s;F++)for(let L=0;L<r;L++){const P=A[L][F],Z=A[L+1][F],de=A[L+1][F+1],se=A[L][F+1];(e>0||L!==0)&&(g.push(P,Z,se),I+=3),(t>0||L!==r-1)&&(g.push(Z,de,se),I+=3)}p.addGroup(M,I,0),M+=I}function O(D){const H=E,I=new Je,V=new ee;let F=0;const L=D===!0?e:t,P=D===!0?1:-1;for(let de=1;de<=s;de++)y.push(0,T*P,0),_.push(0,P,0),x.push(.5,.5),E++;const Z=E;for(let de=0;de<=s;de++){const he=de/s*d+c,xe=Math.cos(he),k=Math.sin(he);V.x=L*k,V.y=T*P,V.z=L*xe,y.push(V.x,V.y,V.z),_.push(0,P,0),I.x=xe*.5+.5,I.y=k*.5*P+.5,x.push(I.x,I.y),E++}for(let de=0;de<s;de++){const se=H+de,he=Z+de;D===!0?g.push(he,he+1,se):g.push(he+1,he,se),F+=3}p.addGroup(M,F,D===!0?1:2),M+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ap(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nb extends Ap{constructor(e=1,t=1,i=32,s=1,r=!1,l=0,c=Math.PI*2){super(0,e,t,i,s,r,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:l,thetaLength:c}}static fromJSON(e){return new nb(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xu extends bn{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const r=[],l=[];c(s),p(i),g(),this.setAttribute("position",new It(r,3)),this.setAttribute("normal",new It(r.slice(),3)),this.setAttribute("uv",new It(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function c(R){const O=new ee,D=new ee,H=new ee;for(let I=0;I<t.length;I+=3)x(t[I+0],O),x(t[I+1],D),x(t[I+2],H),d(O,D,H,R)}function d(R,O,D,H){const I=H+1,V=[];for(let F=0;F<=I;F++){V[F]=[];const L=R.clone().lerp(D,F/I),P=O.clone().lerp(D,F/I),Z=I-F;for(let de=0;de<=Z;de++)de===0&&F===I?V[F][de]=L:V[F][de]=L.clone().lerp(P,de/Z)}for(let F=0;F<I;F++)for(let L=0;L<2*(I-F)-1;L++){const P=Math.floor(L/2);L%2===0?(_(V[F][P+1]),_(V[F+1][P]),_(V[F][P])):(_(V[F][P+1]),_(V[F+1][P+1]),_(V[F+1][P]))}}function p(R){const O=new ee;for(let D=0;D<r.length;D+=3)O.x=r[D+0],O.y=r[D+1],O.z=r[D+2],O.normalize().multiplyScalar(R),r[D+0]=O.x,r[D+1]=O.y,r[D+2]=O.z}function g(){const R=new ee;for(let O=0;O<r.length;O+=3){R.x=r[O+0],R.y=r[O+1],R.z=r[O+2];const D=T(R)/2/Math.PI+.5,H=M(R)/Math.PI+.5;l.push(D,1-H)}E(),y()}function y(){for(let R=0;R<l.length;R+=6){const O=l[R+0],D=l[R+2],H=l[R+4],I=Math.max(O,D,H),V=Math.min(O,D,H);I>.9&&V<.1&&(O<.2&&(l[R+0]+=1),D<.2&&(l[R+2]+=1),H<.2&&(l[R+4]+=1))}}function _(R){r.push(R.x,R.y,R.z)}function x(R,O){const D=R*3;O.x=e[D+0],O.y=e[D+1],O.z=e[D+2]}function E(){const R=new ee,O=new ee,D=new ee,H=new ee,I=new Je,V=new Je,F=new Je;for(let L=0,P=0;L<r.length;L+=9,P+=6){R.set(r[L+0],r[L+1],r[L+2]),O.set(r[L+3],r[L+4],r[L+5]),D.set(r[L+6],r[L+7],r[L+8]),I.set(l[P+0],l[P+1]),V.set(l[P+2],l[P+3]),F.set(l[P+4],l[P+5]),H.copy(R).add(O).add(D).divideScalar(3);const Z=T(H);A(I,P+0,R,Z),A(V,P+2,O,Z),A(F,P+4,D,Z)}}function A(R,O,D,H){H<0&&R.x===1&&(l[O]=R.x-1),D.x===0&&D.z===0&&(l[O]=H/2/Math.PI+.5)}function T(R){return Math.atan2(R.z,-R.x)}function M(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xu(e.vertices,e.indices,e.radius,e.details)}}class ib extends xu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ib(e.radius,e.detail)}}const Xy=new ee,Wy=new ee,$S=new ee,Yy=new Ja;class ND extends bn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Qh*t),l=e.getIndex(),c=e.getAttribute("position"),d=l?l.count:c.count,p=[0,0,0],g=["a","b","c"],y=new Array(3),_={},x=[];for(let E=0;E<d;E+=3){l?(p[0]=l.getX(E),p[1]=l.getX(E+1),p[2]=l.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:A,b:T,c:M}=Yy;if(A.fromBufferAttribute(c,p[0]),T.fromBufferAttribute(c,p[1]),M.fromBufferAttribute(c,p[2]),Yy.getNormal($S),y[0]=`${Math.round(A.x*s)},${Math.round(A.y*s)},${Math.round(A.z*s)}`,y[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,y[2]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let R=0;R<3;R++){const O=(R+1)%3,D=y[R],H=y[O],I=Yy[g[R]],V=Yy[g[O]],F=`${D}_${H}`,L=`${H}_${D}`;L in _&&_[L]?($S.dot(_[L].normal)<=r&&(x.push(I.x,I.y,I.z),x.push(V.x,V.y,V.z)),_[L]=null):F in _||(_[F]={index0:p[R],index1:p[O],normal:$S.clone()})}}for(const E in _)if(_[E]){const{index0:A,index1:T}=_[E];Xy.fromBufferAttribute(c,A),Wy.fromBufferAttribute(c,T),x.push(Xy.x,Xy.y,Xy.z),x.push(Wy.x,Wy.y,Wy.z)}this.setAttribute("position",new It(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class $h extends r0{constructor(e){super(e),this.uuid=yr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new r0().fromJSON(s))}return this}}const XF={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let r=UD(n,0,s,t,!0);const l=[];if(!r||r.next===r.prev)return l;let c,d,p,g,y,_,x;if(i&&(r=JF(n,e,r,t)),n.length>80*t){c=p=n[0],d=g=n[1];for(let E=t;E<s;E+=t)y=n[E],_=n[E+1],y<c&&(c=y),_<d&&(d=_),y>p&&(p=y),_>g&&(g=_);x=Math.max(p-c,g-d),x=x!==0?32767/x:0}return o0(r,l,t,c,d,x,0),l}};function UD(n,e,t,i,s){let r,l;if(s===lV(n,e,t,i)>0)for(r=e;r<t;r+=i)l=NC(r,n[r],n[r+1],l);else for(r=t-i;r>=e;r-=i)l=NC(r,n[r],n[r+1],l);return l&&sb(l,l.next)&&(c0(l),l=l.next),l}function af(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(sb(t,t.next)||Li(t.prev,t,t.next)===0)){if(c0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function o0(n,e,t,i,s,r,l){if(!n)return;!l&&r&&nV(n,i,s,r);let c=n,d,p;for(;n.prev!==n.next;){if(d=n.prev,p=n.next,r?YF(n,i,s,r):WF(n)){e.push(d.i/t|0),e.push(n.i/t|0),e.push(p.i/t|0),c0(n),n=p.next,c=p.next;continue}if(n=p,n===c){l?l===1?(n=KF(af(n),e,t),o0(n,e,t,i,s,r,2)):l===2&&ZF(n,e,t,i,s,r):o0(af(n),e,t,i,s,r,1);break}}}function WF(n){const e=n.prev,t=n,i=n.next;if(Li(e,t,i)>=0)return!1;const s=e.x,r=t.x,l=i.x,c=e.y,d=t.y,p=i.y,g=s<r?s<l?s:l:r<l?r:l,y=c<d?c<p?c:p:d<p?d:p,_=s>r?s>l?s:l:r>l?r:l,x=c>d?c>p?c:p:d>p?d:p;let E=i.next;for(;E!==e;){if(E.x>=g&&E.x<=_&&E.y>=y&&E.y<=x&&ip(s,c,r,d,l,p,E.x,E.y)&&Li(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function YF(n,e,t,i){const s=n.prev,r=n,l=n.next;if(Li(s,r,l)>=0)return!1;const c=s.x,d=r.x,p=l.x,g=s.y,y=r.y,_=l.y,x=c<d?c<p?c:p:d<p?d:p,E=g<y?g<_?g:_:y<_?y:_,A=c>d?c>p?c:p:d>p?d:p,T=g>y?g>_?g:_:y>_?y:_,M=f1(x,E,e,t,i),R=f1(A,T,e,t,i);let O=n.prevZ,D=n.nextZ;for(;O&&O.z>=M&&D&&D.z<=R;){if(O.x>=x&&O.x<=A&&O.y>=E&&O.y<=T&&O!==s&&O!==l&&ip(c,g,d,y,p,_,O.x,O.y)&&Li(O.prev,O,O.next)>=0||(O=O.prevZ,D.x>=x&&D.x<=A&&D.y>=E&&D.y<=T&&D!==s&&D!==l&&ip(c,g,d,y,p,_,D.x,D.y)&&Li(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;O&&O.z>=M;){if(O.x>=x&&O.x<=A&&O.y>=E&&O.y<=T&&O!==s&&O!==l&&ip(c,g,d,y,p,_,O.x,O.y)&&Li(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;D&&D.z<=R;){if(D.x>=x&&D.x<=A&&D.y>=E&&D.y<=T&&D!==s&&D!==l&&ip(c,g,d,y,p,_,D.x,D.y)&&Li(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function KF(n,e,t){let i=n;do{const s=i.prev,r=i.next.next;!sb(s,r)&&LD(s,i,i.next,r)&&l0(s,r)&&l0(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),c0(i),c0(i.next),i=n=r),i=i.next}while(i!==n);return af(i)}function ZF(n,e,t,i,s,r){let l=n;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&aV(l,c)){let d=ID(l,c);l=af(l,l.next),d=af(d,d.next),o0(l,e,t,i,s,r,0),o0(d,e,t,i,s,r,0);return}c=c.next}l=l.next}while(l!==n)}function JF(n,e,t,i){const s=[];let r,l,c,d,p;for(r=0,l=e.length;r<l;r++)c=e[r]*i,d=r<l-1?e[r+1]*i:n.length,p=UD(n,c,d,i,!1),p===p.next&&(p.steiner=!0),s.push(sV(p));for(s.sort(QF),r=0;r<s.length;r++)t=$F(s[r],t);return t}function QF(n,e){return n.x-e.x}function $F(n,e){const t=eV(n,e);if(!t)return e;const i=ID(t,n);return af(i,i.next),af(t,t.next)}function eV(n,e){let t=e,i=-1/0,s;const r=n.x,l=n.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){const _=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=r&&_>i&&(i=_,s=t.x<t.next.x?t:t.next,_===r))return s}t=t.next}while(t!==e);if(!s)return null;const c=s,d=s.x,p=s.y;let g=1/0,y;t=s;do r>=t.x&&t.x>=d&&r!==t.x&&ip(l<p?r:i,l,d,p,l<p?i:r,l,t.x,t.y)&&(y=Math.abs(l-t.y)/(r-t.x),l0(t,n)&&(y<g||y===g&&(t.x>s.x||t.x===s.x&&tV(s,t)))&&(s=t,g=y)),t=t.next;while(t!==c);return s}function tV(n,e){return Li(n.prev,n,e.prev)<0&&Li(e.next,n,n.next)<0}function nV(n,e,t,i){let s=n;do s.z===0&&(s.z=f1(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,iV(s)}function iV(n){let e,t,i,s,r,l,c,d,p=1;do{for(t=n,n=null,r=null,l=0;t;){for(l++,i=t,c=0,e=0;e<p&&(c++,i=i.nextZ,!!i);e++);for(d=p;c>0||d>0&&i;)c!==0&&(d===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,c--):(s=i,i=i.nextZ,d--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;t=i}r.nextZ=null,p*=2}while(l>1);return n}function f1(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function sV(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ip(n,e,t,i,s,r,l,c){return(s-l)*(e-c)>=(n-l)*(r-c)&&(n-l)*(i-c)>=(t-l)*(e-c)&&(t-l)*(r-c)>=(s-l)*(i-c)}function aV(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!rV(n,e)&&(l0(n,e)&&l0(e,n)&&oV(n,e)&&(Li(n.prev,n,e.prev)||Li(n,e.prev,e))||sb(n,e)&&Li(n.prev,n,n.next)>0&&Li(e.prev,e,e.next)>0)}function Li(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function sb(n,e){return n.x===e.x&&n.y===e.y}function LD(n,e,t,i){const s=Zy(Li(n,e,t)),r=Zy(Li(n,e,i)),l=Zy(Li(t,i,n)),c=Zy(Li(t,i,e));return!!(s!==r&&l!==c||s===0&&Ky(n,t,e)||r===0&&Ky(n,i,e)||l===0&&Ky(t,n,i)||c===0&&Ky(t,e,i))}function Ky(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Zy(n){return n>0?1:n<0?-1:0}function rV(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&LD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function l0(n,e){return Li(n.prev,n,n.next)<0?Li(n,e,n.next)>=0&&Li(n,n.prev,e)>=0:Li(n,e,n.prev)<0||Li(n,n.next,e)<0}function oV(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,r=(n.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function ID(n,e){const t=new d1(n.i,n.x,n.y),i=new d1(e.i,e.x,e.y),s=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function NC(n,e,t,i){const s=new d1(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function c0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function d1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lV(n,e,t,i){let s=0;for(let r=e,l=t-i;r<t;r+=i)s+=(n[l]-n[r])*(n[r+1]+n[l+1]),l=r;return s}class yl{static area(e){const t=e.length;let i=0;for(let s=t-1,r=0;r<t;s=r++)i+=e[s].x*e[r].y-e[r].x*e[s].y;return i*.5}static isClockWise(e){return yl.area(e)<0}static triangulateShape(e,t){const i=[],s=[],r=[];UC(e),LC(i,e);let l=e.length;t.forEach(UC);for(let d=0;d<t.length;d++)s.push(l),l+=t[d].length,LC(i,t[d]);const c=XF.triangulate(i,s);for(let d=0;d<c.length;d+=3)r.push(c.slice(d,d+3));return r}}function UC(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function LC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ab extends bn{constructor(e=new $h([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let c=0,d=e.length;c<d;c++){const p=e[c];l(p)}this.setAttribute("position",new It(s,3)),this.setAttribute("uv",new It(r,2)),this.computeVertexNormals();function l(c){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,E=t.bevelSize!==void 0?t.bevelSize:x-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:cV;let O,D=!1,H,I,V,F;M&&(O=M.getSpacedPoints(g),D=!0,_=!1,H=M.computeFrenetFrames(g,!1),I=new ee,V=new ee,F=new ee),_||(T=0,x=0,E=0,A=0);const L=c.extractPoints(p);let P=L.shape;const Z=L.holes;if(!yl.isClockWise(P)){P=P.reverse();for(let Qe=0,Ke=Z.length;Qe<Ke;Qe++){const $=Z[Qe];yl.isClockWise($)&&(Z[Qe]=$.reverse())}}const se=yl.triangulateShape(P,Z),he=P;for(let Qe=0,Ke=Z.length;Qe<Ke;Qe++){const $=Z[Qe];P=P.concat($)}function xe(Qe,Ke,$){return Ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),Qe.clone().addScaledVector(Ke,$)}const k=P.length,te=se.length;function Y(Qe,Ke,$){let Mt,et,dt;const st=Qe.x-Ke.x,zt=Qe.y-Ke.y,ot=$.x-Qe.x,J=$.y-Qe.y,G=st*st+zt*zt,Se=st*J-zt*ot;if(Math.abs(Se)>Number.EPSILON){const Be=Math.sqrt(G),Ze=Math.sqrt(ot*ot+J*J),ke=Ke.x-zt/Be,Tt=Ke.y+st/Be,ct=$.x-J/Ze,vt=$.y+ot/Ze,fn=((ct-ke)*J-(vt-Tt)*ot)/(st*J-zt*ot);Mt=ke+st*fn-Qe.x,et=Tt+zt*fn-Qe.y;const it=Mt*Mt+et*et;if(it<=2)return new Je(Mt,et);dt=Math.sqrt(it/2)}else{let Be=!1;st>Number.EPSILON?ot>Number.EPSILON&&(Be=!0):st<-Number.EPSILON?ot<-Number.EPSILON&&(Be=!0):Math.sign(zt)===Math.sign(J)&&(Be=!0),Be?(Mt=-zt,et=st,dt=Math.sqrt(G)):(Mt=st,et=zt,dt=Math.sqrt(G/2))}return new Je(Mt/dt,et/dt)}const fe=[];for(let Qe=0,Ke=he.length,$=Ke-1,Mt=Qe+1;Qe<Ke;Qe++,$++,Mt++)$===Ke&&($=0),Mt===Ke&&(Mt=0),fe[Qe]=Y(he[Qe],he[$],he[Mt]);const ve=[];let X,oe=fe.concat();for(let Qe=0,Ke=Z.length;Qe<Ke;Qe++){const $=Z[Qe];X=[];for(let Mt=0,et=$.length,dt=et-1,st=Mt+1;Mt<et;Mt++,dt++,st++)dt===et&&(dt=0),st===et&&(st=0),X[Mt]=Y($[Mt],$[dt],$[st]);ve.push(X),oe=oe.concat(X)}for(let Qe=0;Qe<T;Qe++){const Ke=Qe/T,$=x*Math.cos(Ke*Math.PI/2),Mt=E*Math.sin(Ke*Math.PI/2)+A;for(let et=0,dt=he.length;et<dt;et++){const st=xe(he[et],fe[et],Mt);Ve(st.x,st.y,-$)}for(let et=0,dt=Z.length;et<dt;et++){const st=Z[et];X=ve[et];for(let zt=0,ot=st.length;zt<ot;zt++){const J=xe(st[zt],X[zt],Mt);Ve(J.x,J.y,-$)}}}const Re=E+A;for(let Qe=0;Qe<k;Qe++){const Ke=_?xe(P[Qe],oe[Qe],Re):P[Qe];D?(V.copy(H.normals[0]).multiplyScalar(Ke.x),I.copy(H.binormals[0]).multiplyScalar(Ke.y),F.copy(O[0]).add(V).add(I),Ve(F.x,F.y,F.z)):Ve(Ke.x,Ke.y,0)}for(let Qe=1;Qe<=g;Qe++)for(let Ke=0;Ke<k;Ke++){const $=_?xe(P[Ke],oe[Ke],Re):P[Ke];D?(V.copy(H.normals[Qe]).multiplyScalar($.x),I.copy(H.binormals[Qe]).multiplyScalar($.y),F.copy(O[Qe]).add(V).add(I),Ve(F.x,F.y,F.z)):Ve($.x,$.y,y/g*Qe)}for(let Qe=T-1;Qe>=0;Qe--){const Ke=Qe/T,$=x*Math.cos(Ke*Math.PI/2),Mt=E*Math.sin(Ke*Math.PI/2)+A;for(let et=0,dt=he.length;et<dt;et++){const st=xe(he[et],fe[et],Mt);Ve(st.x,st.y,y+$)}for(let et=0,dt=Z.length;et<dt;et++){const st=Z[et];X=ve[et];for(let zt=0,ot=st.length;zt<ot;zt++){const J=xe(st[zt],X[zt],Mt);D?Ve(J.x,J.y+O[g-1].y,O[g-1].x+$):Ve(J.x,J.y,y+$)}}}le(),Oe();function le(){const Qe=s.length/3;if(_){let Ke=0,$=k*Ke;for(let Mt=0;Mt<te;Mt++){const et=se[Mt];rt(et[2]+$,et[1]+$,et[0]+$)}Ke=g+T*2,$=k*Ke;for(let Mt=0;Mt<te;Mt++){const et=se[Mt];rt(et[0]+$,et[1]+$,et[2]+$)}}else{for(let Ke=0;Ke<te;Ke++){const $=se[Ke];rt($[2],$[1],$[0])}for(let Ke=0;Ke<te;Ke++){const $=se[Ke];rt($[0]+k*g,$[1]+k*g,$[2]+k*g)}}i.addGroup(Qe,s.length/3-Qe,0)}function Oe(){const Qe=s.length/3;let Ke=0;Pe(he,Ke),Ke+=he.length;for(let $=0,Mt=Z.length;$<Mt;$++){const et=Z[$];Pe(et,Ke),Ke+=et.length}i.addGroup(Qe,s.length/3-Qe,1)}function Pe(Qe,Ke){let $=Qe.length;for(;--$>=0;){const Mt=$;let et=$-1;et<0&&(et=Qe.length-1);for(let dt=0,st=g+T*2;dt<st;dt++){const zt=k*dt,ot=k*(dt+1),J=Ke+Mt+zt,G=Ke+et+zt,Se=Ke+et+ot,Be=Ke+Mt+ot;Pt(J,G,Se,Be)}}}function Ve(Qe,Ke,$){d.push(Qe),d.push(Ke),d.push($)}function rt(Qe,Ke,$){wt(Qe),wt(Ke),wt($);const Mt=s.length/3,et=R.generateTopUV(i,s,Mt-3,Mt-2,Mt-1);on(et[0]),on(et[1]),on(et[2])}function Pt(Qe,Ke,$,Mt){wt(Qe),wt(Ke),wt(Mt),wt(Ke),wt($),wt(Mt);const et=s.length/3,dt=R.generateSideWallUV(i,s,et-6,et-3,et-2,et-1);on(dt[0]),on(dt[1]),on(dt[3]),on(dt[1]),on(dt[2]),on(dt[3])}function wt(Qe){s.push(d[Qe*3+0]),s.push(d[Qe*3+1]),s.push(d[Qe*3+2])}function on(Qe){r.push(Qe.x),r.push(Qe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return uV(t,i,e)}static fromJSON(e,t){const i=[];for(let r=0,l=e.shapes.length;r<l;r++){const c=t[e.shapes[r]];i.push(c)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new bx[s.type]().fromJSON(s)),new ab(i,e.options)}}const cV={generateTopUV:function(n,e,t,i,s){const r=e[t*3],l=e[t*3+1],c=e[i*3],d=e[i*3+1],p=e[s*3],g=e[s*3+1];return[new Je(r,l),new Je(c,d),new Je(p,g)]},generateSideWallUV:function(n,e,t,i,s,r){const l=e[t*3],c=e[t*3+1],d=e[t*3+2],p=e[i*3],g=e[i*3+1],y=e[i*3+2],_=e[s*3],x=e[s*3+1],E=e[s*3+2],A=e[r*3],T=e[r*3+1],M=e[r*3+2];return Math.abs(c-g)<Math.abs(l-p)?[new Je(l,1-d),new Je(p,1-y),new Je(_,1-E),new Je(A,1-M)]:[new Je(c,1-d),new Je(g,1-y),new Je(x,1-E),new Je(T,1-M)]}};function uV(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const r=n[i];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class B0 extends xu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B0(e.radius,e.detail)}}class z0 extends xu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new z0(e.radius,e.detail)}}class bu extends bn{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,l=t/2,c=Math.floor(i),d=Math.floor(s),p=c+1,g=d+1,y=e/c,_=t/d,x=[],E=[],A=[],T=[];for(let M=0;M<g;M++){const R=M*_-l;for(let O=0;O<p;O++){const D=O*y-r;E.push(D,-R,0),A.push(0,0,1),T.push(O/c),T.push(1-M/d)}}for(let M=0;M<d;M++)for(let R=0;R<c;R++){const O=R+p*M,D=R+p*(M+1),H=R+1+p*(M+1),I=R+1+p*M;x.push(O,D,I),x.push(D,H,I)}this.setIndex(x),this.setAttribute("position",new It(E,3)),this.setAttribute("normal",new It(A,3)),this.setAttribute("uv",new It(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bu(e.width,e.height,e.widthSegments,e.heightSegments)}}class rb extends bn{constructor(e=.5,t=1,i=32,s=1,r=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const c=[],d=[],p=[],g=[];let y=e;const _=(t-e)/s,x=new ee,E=new Je;for(let A=0;A<=s;A++){for(let T=0;T<=i;T++){const M=r+T/i*l;x.x=y*Math.cos(M),x.y=y*Math.sin(M),d.push(x.x,x.y,x.z),p.push(0,0,1),E.x=(x.x/t+1)/2,E.y=(x.y/t+1)/2,g.push(E.x,E.y)}y+=_}for(let A=0;A<s;A++){const T=A*(i+1);for(let M=0;M<i;M++){const R=M+T,O=R,D=R+i+1,H=R+i+2,I=R+1;c.push(O,D,I),c.push(D,H,I)}}this.setIndex(c),this.setAttribute("position",new It(d,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ob extends bn{constructor(e=new $h([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],r=[],l=[];let c=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(c,d,g),c+=d,d=0;this.setIndex(i),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(r,3)),this.setAttribute("uv",new It(l,2));function p(g){const y=s.length/3,_=g.extractPoints(t);let x=_.shape;const E=_.holes;yl.isClockWise(x)===!1&&(x=x.reverse());for(let T=0,M=E.length;T<M;T++){const R=E[T];yl.isClockWise(R)===!0&&(E[T]=R.reverse())}const A=yl.triangulateShape(x,E);for(let T=0,M=E.length;T<M;T++){const R=E[T];x=x.concat(R)}for(let T=0,M=x.length;T<M;T++){const R=x[T];s.push(R.x,R.y,0),r.push(0,0,1),l.push(R.x,R.y)}for(let T=0,M=A.length;T<M;T++){const R=A[T],O=R[0]+y,D=R[1]+y,H=R[2]+y;i.push(O,D,H),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return hV(t,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const l=t[e.shapes[s]];i.push(l)}return new ob(i,e.curveSegments)}}function hV(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class F0 extends bn{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(l+c,Math.PI);let p=0;const g=[],y=new ee,_=new ee,x=[],E=[],A=[],T=[];for(let M=0;M<=i;M++){const R=[],O=M/i;let D=0;M===0&&l===0?D=.5/t:M===i&&d===Math.PI&&(D=-.5/t);for(let H=0;H<=t;H++){const I=H/t;y.x=-e*Math.cos(s+I*r)*Math.sin(l+O*c),y.y=e*Math.cos(l+O*c),y.z=e*Math.sin(s+I*r)*Math.sin(l+O*c),E.push(y.x,y.y,y.z),_.copy(y).normalize(),A.push(_.x,_.y,_.z),T.push(I+D,1-O),R.push(p++)}g.push(R)}for(let M=0;M<i;M++)for(let R=0;R<t;R++){const O=g[M][R+1],D=g[M][R],H=g[M+1][R],I=g[M+1][R+1];(M!==0||l>0)&&x.push(O,D,I),(M!==i-1||d<Math.PI)&&x.push(D,H,I)}this.setIndex(x),this.setAttribute("position",new It(E,3)),this.setAttribute("normal",new It(A,3)),this.setAttribute("uv",new It(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class lb extends xu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lb(e.radius,e.detail)}}class cb extends bn{constructor(e=1,t=.4,i=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:r},i=Math.floor(i),s=Math.floor(s);const l=[],c=[],d=[],p=[],g=new ee,y=new ee,_=new ee;for(let x=0;x<=i;x++)for(let E=0;E<=s;E++){const A=E/s*r,T=x/i*Math.PI*2;y.x=(e+t*Math.cos(T))*Math.cos(A),y.y=(e+t*Math.cos(T))*Math.sin(A),y.z=t*Math.sin(T),c.push(y.x,y.y,y.z),g.x=e*Math.cos(A),g.y=e*Math.sin(A),_.subVectors(y,g).normalize(),d.push(_.x,_.y,_.z),p.push(E/s),p.push(x/i)}for(let x=1;x<=i;x++)for(let E=1;E<=s;E++){const A=(s+1)*x+E-1,T=(s+1)*(x-1)+E-1,M=(s+1)*(x-1)+E,R=(s+1)*x+E;l.push(A,T,R),l.push(T,M,R)}this.setIndex(l),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(d,3)),this.setAttribute("uv",new It(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ub extends bn{constructor(e=1,t=.4,i=64,s=8,r=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:r,q:l},i=Math.floor(i),s=Math.floor(s);const c=[],d=[],p=[],g=[],y=new ee,_=new ee,x=new ee,E=new ee,A=new ee,T=new ee,M=new ee;for(let O=0;O<=i;++O){const D=O/i*r*Math.PI*2;R(D,r,l,e,x),R(D+.01,r,l,e,E),T.subVectors(E,x),M.addVectors(E,x),A.crossVectors(T,M),M.crossVectors(A,T),A.normalize(),M.normalize();for(let H=0;H<=s;++H){const I=H/s*Math.PI*2,V=-t*Math.cos(I),F=t*Math.sin(I);y.x=x.x+(V*M.x+F*A.x),y.y=x.y+(V*M.y+F*A.y),y.z=x.z+(V*M.z+F*A.z),d.push(y.x,y.y,y.z),_.subVectors(y,x).normalize(),p.push(_.x,_.y,_.z),g.push(O/i),g.push(H/s)}}for(let O=1;O<=i;O++)for(let D=1;D<=s;D++){const H=(s+1)*(O-1)+(D-1),I=(s+1)*O+(D-1),V=(s+1)*O+D,F=(s+1)*(O-1)+D;c.push(H,I,F),c.push(I,V,F)}this.setIndex(c),this.setAttribute("position",new It(d,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(g,2));function R(O,D,H,I,V){const F=Math.cos(O),L=Math.sin(O),P=H/D*O,Z=Math.cos(P);V.x=I*(2+Z)*.5*F,V.y=I*(2+Z)*L*.5,V.z=I*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ub(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class hb extends bn{constructor(e=new GM(new ee(-1,-1,0),new ee(-1,1,0),new ee(1,1,0)),t=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:r};const l=e.computeFrenetFrames(t,r);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new ee,d=new ee,p=new Je;let g=new ee;const y=[],_=[],x=[],E=[];A(),this.setIndex(E),this.setAttribute("position",new It(y,3)),this.setAttribute("normal",new It(_,3)),this.setAttribute("uv",new It(x,2));function A(){for(let O=0;O<t;O++)T(O);T(r===!1?t:0),R(),M()}function T(O){g=e.getPointAt(O/t,g);const D=l.normals[O],H=l.binormals[O];for(let I=0;I<=s;I++){const V=I/s*Math.PI*2,F=Math.sin(V),L=-Math.cos(V);d.x=L*D.x+F*H.x,d.y=L*D.y+F*H.y,d.z=L*D.z+F*H.z,d.normalize(),_.push(d.x,d.y,d.z),c.x=g.x+i*d.x,c.y=g.y+i*d.y,c.z=g.z+i*d.z,y.push(c.x,c.y,c.z)}}function M(){for(let O=1;O<=t;O++)for(let D=1;D<=s;D++){const H=(s+1)*(O-1)+(D-1),I=(s+1)*O+(D-1),V=(s+1)*O+D,F=(s+1)*(O-1)+D;E.push(H,I,F),E.push(I,V,F)}}function R(){for(let O=0;O<=t;O++)for(let D=0;D<=s;D++)p.x=O/t,p.y=D/s,x.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hb(new bx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class PD extends bn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new ee,r=new ee;if(e.index!==null){const l=e.attributes.position,c=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const y=d[p],_=y.start,x=y.count;for(let E=_,A=_+x;E<A;E+=3)for(let T=0;T<3;T++){const M=c.getX(E+T),R=c.getX(E+(T+1)%3);s.fromBufferAttribute(l,M),r.fromBufferAttribute(l,R),IC(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const l=e.attributes.position;for(let c=0,d=l.count/3;c<d;c++)for(let p=0;p<3;p++){const g=3*c+p,y=3*c+(p+1)%3;s.fromBufferAttribute(l,g),r.fromBufferAttribute(l,y),IC(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new It(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function IC(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var PC=Object.freeze({__proto__:null,BoxGeometry:lf,CapsuleGeometry:eb,CircleGeometry:tb,ConeGeometry:nb,CylinderGeometry:Ap,DodecahedronGeometry:ib,EdgesGeometry:ND,ExtrudeGeometry:ab,IcosahedronGeometry:B0,LatheGeometry:P0,OctahedronGeometry:z0,PlaneGeometry:bu,PolyhedronGeometry:xu,RingGeometry:rb,ShapeGeometry:ob,SphereGeometry:F0,TetrahedronGeometry:lb,TorusGeometry:cb,TorusKnotGeometry:ub,TubeGeometry:hb,WireframeGeometry:PD});class BD extends ha{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new St(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class zD extends Ba{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qM extends ha{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new St(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FD extends qM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new St(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new St(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new St(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class VD extends ha{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new St(16777215),this.specular=new St(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HD extends ha{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new St(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kD extends ha{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GD extends ha{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xr,this.combine=C0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class XM extends ha{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=eD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WM extends ha{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class jD extends ha{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new St(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qD extends za{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function XD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function WD(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function p1(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,l=0;l!==i;++r){const c=t[r]*e;for(let d=0;d!==e;++d)s[l++]=n[c+d]}return s}function YM(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let l=r[i];if(l!==void 0)if(Array.isArray(l))do l=r[i],l!==void 0&&(e.push(r.time),t.push.apply(t,l)),r=n[s++];while(r!==void 0);else if(l.toArray!==void 0)do l=r[i],l!==void 0&&(e.push(r.time),l.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do l=r[i],l!==void 0&&(e.push(r.time),t.push(l)),r=n[s++];while(r!==void 0)}function fV(n,e,t,i,s=30){const r=n.clone();r.name=e;const l=[];for(let d=0;d<r.tracks.length;++d){const p=r.tracks[d],g=p.getValueSize(),y=[],_=[];for(let x=0;x<p.times.length;++x){const E=p.times[x]*s;if(!(E<t||E>=i)){y.push(p.times[x]);for(let A=0;A<g;++A)_.push(p.values[x*g+A])}}y.length!==0&&(p.times=qh(y,p.times.constructor),p.values=qh(_,p.values.constructor),l.push(p))}r.tracks=l;let c=1/0;for(let d=0;d<r.tracks.length;++d)c>r.tracks[d].times[0]&&(c=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*c);return r.resetDuration(),r}function dV(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,r=e/i;for(let l=0;l<s;++l){const c=t.tracks[l],d=c.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(M){return M.name===c.name&&M.ValueTypeName===d});if(p===void 0)continue;let g=0;const y=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let _=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const E=c.times.length-1;let A;if(r<=c.times[0]){const M=g,R=y-g;A=c.values.slice(M,R)}else if(r>=c.times[E]){const M=E*y+g,R=M+y-g;A=c.values.slice(M,R)}else{const M=c.createInterpolant(),R=g,O=y-g;M.evaluate(r),A=M.resultBuffer.slice(R,O)}d==="quaternion"&&new $a().fromArray(A).normalize().conjugate().toArray(A);const T=p.times.length;for(let M=0;M<T;++M){const R=M*x+_;if(d==="quaternion")$a.multiplyQuaternionsFlat(p.values,R,A,0,p.values,R);else{const O=x-_*2;for(let D=0;D<O;++D)p.values[R+D]-=A[D]}}}return n.blendMode=RM,n}const pV={convertArray:qh,isTypedArray:XD,getKeyframeOrder:WD,sortedArray:p1,flattenJSON:YM,subclip:fV,makeClipAdditive:dV};class V0{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let l;n:{i:if(!(e<s)){for(let c=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(r=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=r)){const c=t[1];e<c&&(i=2,r=c);for(let d=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=r,r=t[--i-1],e>=r)break t}l=i,i=0;break n}break e}for(;i<l;){const c=i+l>>>1;e<t[c]?l=c:i=c+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let l=0;l!==s;++l)t[l]=i[r+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class YD extends V0{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hh,endingEnd:Hh}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,l=e+1,c=s[r],d=s[l];if(c===void 0)switch(this.getSettings_().endingStart){case kh:r=e,c=2*t-i;break;case t0:r=s.length-2,c=t+s[r]-s[r+1];break;default:r=e,c=i}if(d===void 0)switch(this.getSettings_().endingEnd){case kh:l=e,d=2*i-t;break;case t0:l=1,d=i+s[1]-s[0];break;default:l=e-1,d=t}const p=(i-t)*.5,g=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(d-i),this._offsetPrev=r*g,this._offsetNext=l*g}interpolate_(e,t,i,s){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,g=this._offsetPrev,y=this._offsetNext,_=this._weightPrev,x=this._weightNext,E=(i-t)/(s-t),A=E*E,T=A*E,M=-_*T+2*_*A-_*E,R=(1+_)*T+(-1.5-2*_)*A+(-.5+_)*E+1,O=(-1-x)*T+(1.5+x)*A+.5*E,D=x*T-x*A;for(let H=0;H!==c;++H)r[H]=M*l[g+H]+R*l[p+H]+O*l[d+H]+D*l[y+H];return r}}class KM extends V0{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,g=(i-t)/(s-t),y=1-g;for(let _=0;_!==c;++_)r[_]=l[p+_]*y+l[d+_]*g;return r}}class KD extends V0{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class No{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qh(t,this.TimeBufferType),this.values=qh(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:qh(e.times,Array),values:qh(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new KD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new KM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new YD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case e0:t=this.InterpolantFactoryMethodDiscrete;break;case yx:t=this.InterpolantFactoryMethodLinear;break;case w_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return e0;case this.InterpolantFactoryMethodLinear:return yx;case this.InterpolantFactoryMethodSmooth:return w_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,l=s-1;for(;r!==s&&i[r]<e;)++r;for(;l!==-1&&i[l]>t;)--l;if(++l,r!==0||l!==s){r>=l&&(l=Math.max(l,1),r=l-1);const c=this.getValueSize();this.times=i.slice(r,l),this.values=this.values.slice(r*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==r;c++){const d=i[c];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,d),e=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,d,l),e=!1;break}l=d}if(s!==void 0&&XD(s))for(let c=0,d=s.length;c!==d;++c){const p=s[c];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===w_,r=e.length-1;let l=1;for(let c=1;c<r;++c){let d=!1;const p=e[c],g=e[c+1];if(p!==g&&(c!==1||p!==e[0]))if(s)d=!0;else{const y=c*i,_=y-i,x=y+i;for(let E=0;E!==i;++E){const A=t[y+E];if(A!==t[_+E]||A!==t[x+E]){d=!0;break}}}if(d){if(c!==l){e[l]=e[c];const y=c*i,_=l*i;for(let x=0;x!==i;++x)t[_+x]=t[y+x]}++l}}if(r>0){e[l]=e[r];for(let c=r*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[c+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}No.prototype.TimeBufferType=Float32Array;No.prototype.ValueBufferType=Float32Array;No.prototype.DefaultInterpolation=yx;class cf extends No{constructor(e,t,i){super(e,t,i)}}cf.prototype.ValueTypeName="bool";cf.prototype.ValueBufferType=Array;cf.prototype.DefaultInterpolation=e0;cf.prototype.InterpolantFactoryMethodLinear=void 0;cf.prototype.InterpolantFactoryMethodSmooth=void 0;class ZM extends No{}ZM.prototype.ValueTypeName="color";class u0 extends No{}u0.prototype.ValueTypeName="number";class ZD extends V0{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=(i-t)/(s-t);let p=e*c;for(let g=p+c;p!==g;p+=4)$a.slerpFlat(r,0,l,p-c,l,p,d);return r}}class H0 extends No{InterpolantFactoryMethodLinear(e){return new ZD(this.times,this.values,this.getValueSize(),e)}}H0.prototype.ValueTypeName="quaternion";H0.prototype.InterpolantFactoryMethodSmooth=void 0;class uf extends No{constructor(e,t,i){super(e,t,i)}}uf.prototype.ValueTypeName="string";uf.prototype.ValueBufferType=Array;uf.prototype.DefaultInterpolation=e0;uf.prototype.InterpolantFactoryMethodLinear=void 0;uf.prototype.InterpolantFactoryMethodSmooth=void 0;class h0 extends No{}h0.prototype.ValueTypeName="vector";class f0{constructor(e="",t=-1,i=[],s=jx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=yr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,c=i.length;l!==c;++l)t.push(gV(i[l]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,l=i.length;r!==l;++r)t.push(No.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,l=[];for(let c=0;c<r;c++){let d=[],p=[];d.push((c+r-1)%r,c,(c+1)%r),p.push(0,1,0);const g=WD(d);d=p1(d,1,g),p=p1(p,1,g),!s&&d[0]===0&&(d.push(r),p.push(p[0])),l.push(new u0(".morphTargetInfluences["+t[c].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let c=0,d=e.length;c<d;c++){const p=e[c],g=p.name.match(r);if(g&&g.length>1){const y=g[1];let _=s[y];_||(s[y]=_=[]),_.push(p)}}const l=[];for(const c in s)l.push(this.CreateFromMorphTargetSequence(c,s[c],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(y,_,x,E,A){if(x.length!==0){const T=[],M=[];YM(x,T,M,E),T.length!==0&&A.push(new y(_,T,M))}},s=[],r=e.name||"default",l=e.fps||30,c=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let y=0;y<p.length;y++){const _=p[y].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let E;for(E=0;E<_.length;E++)if(_[E].morphTargets)for(let A=0;A<_[E].morphTargets.length;A++)x[_[E].morphTargets[A]]=-1;for(const A in x){const T=[],M=[];for(let R=0;R!==_[E].morphTargets.length;++R){const O=_[E];T.push(O.time),M.push(O.morphTarget===A?1:0)}s.push(new u0(".morphTargetInfluence["+A+"]",T,M))}d=x.length*l}else{const x=".bones["+t[y].name+"]";i(h0,x+".position",_,"pos",s),i(H0,x+".quaternion",_,"rot",s),i(h0,x+".scale",_,"scl",s)}}return s.length===0?null:new this(r,d,s,c)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function mV(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return u0;case"vector":case"vector2":case"vector3":case"vector4":return h0;case"color":return ZM;case"quaternion":return H0;case"bool":case"boolean":return cf;case"string":return uf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function gV(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=mV(n.type);if(n.times===void 0){const t=[],i=[];YM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const oc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class fb{constructor(e,t,i){const s=this;let r=!1,l=0,c=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(g){c++,r===!1&&s.onStart!==void 0&&s.onStart(g,l,c),r=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,c),l===c&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,y){return p.push(g,y),this},this.removeHandler=function(g){const y=p.indexOf(g);return y!==-1&&p.splice(y,2),this},this.getHandler=function(g){for(let y=0,_=p.length;y<_;y+=2){const x=p[y],E=p[y+1];if(x.global&&(x.lastIndex=0),x.test(g))return E}return null}}}const JD=new fb;class Fa{constructor(e){this.manager=e!==void 0?e:JD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Fa.DEFAULT_MATERIAL_NAME="__DEFAULT";const ic={};class vV extends Error{constructor(e,t){super(e),this.response=t}}class _r extends Fa{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=oc.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(ic[e]!==void 0){ic[e].push({onLoad:t,onProgress:i,onError:s});return}ic[e]=[],ic[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=ic[e],y=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=_?parseInt(_):0,E=x!==0;let A=0;const T=new ReadableStream({start(M){R();function R(){y.read().then(({done:O,value:D})=>{if(O)M.close();else{A+=D.byteLength;const H=new ProgressEvent("progress",{lengthComputable:E,loaded:A,total:x});for(let I=0,V=g.length;I<V;I++){const F=g[I];F.onProgress&&F.onProgress(H)}M.enqueue(D),R()}},O=>{M.error(O)})}}});return new Response(T)}else throw new vV(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return p.json();default:if(c===void 0)return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(c),_=y&&y[1]?y[1].toLowerCase():void 0,x=new TextDecoder(_);return p.arrayBuffer().then(E=>x.decode(E))}}}).then(p=>{oc.add(e,p);const g=ic[e];delete ic[e];for(let y=0,_=g.length;y<_;y++){const x=g[y];x.onLoad&&x.onLoad(p)}}).catch(p=>{const g=ic[e];if(g===void 0)throw this.manager.itemError(e),p;delete ic[e];for(let y=0,_=g.length;y<_;y++){const x=g[y];x.onError&&x.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class yV extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=this,l=new _r(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){s?s(d):console.error(d),r.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=f0.parse(e[i]);t.push(s)}return t}}class _V extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=this,l=[],c=new Qx,d=new _r(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let p=0;function g(y){d.load(e[y],function(_){const x=r.parse(_,!0);l[y]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(c.minFilter=ti),c.image=l,c.format=x.format,c.needsUpdate=!0,t&&t(c))},i,s)}if(Array.isArray(e))for(let y=0,_=e.length;y<_;++y)g(y);else d.load(e,function(y){const _=r.parse(y,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let E=0;E<x;E++){l[E]={mipmaps:[]};for(let A=0;A<_.mipmapCount;A++)l[E].mipmaps.push(_.mipmaps[E*_.mipmapCount+A]),l[E].format=_.format,l[E].width=_.width,l[E].height=_.height}c.image=l}else c.image.width=_.width,c.image.height=_.height,c.mipmaps=_.mipmaps;_.mipmapCount===1&&(c.minFilter=ti),c.format=_.format,c.needsUpdate=!0,t&&t(c)},i,s);return c}}class d0 extends Fa{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,l=oc.get(e);if(l!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(l),r.manager.itemEnd(e)},0),l;const c=a0("img");function d(){g(),oc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function p(y){g(),s&&s(y),r.manager.itemError(e),r.manager.itemEnd(e)}function g(){c.removeEventListener("load",d,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",d,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),r.manager.itemStart(e),c.src=e,c}}class QD extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=new U0;r.colorSpace=Gs;const l=new d0(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function d(p){l.load(e[p],function(g){r.images[p]=g,c++,c===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let p=0;p<e.length;++p)d(p);return r}}class JM extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=this,l=new Ro,c=new _r(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(r.withCredentials),c.load(e,function(d){let p;try{p=r.parse(d)}catch(g){if(s!==void 0)s(g);else{console.error(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:rs,l.wrapT=p.wrapT!==void 0?p.wrapT:rs,l.magFilter=p.magFilter!==void 0?p.magFilter:ti,l.minFilter=p.minFilter!==void 0?p.minFilter:ti,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=dl),p.mipmapCount===1&&(l.minFilter=ti),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},i,s),l}}class xV extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=new oi,l=new d0(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){r.image=c,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Su extends kn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new St(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class $D extends Su{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(kn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new St(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const eE=new nn,BC=new ee,zC=new ee;class QM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new I0,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;BC.setFromMatrixPosition(e.matrixWorld),t.position.copy(BC),zC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zC),t.updateMatrixWorld(),eE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(eE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class bV extends QM{constructor(){super(new Os(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=dp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eN extends Su{constructor(e,t,i=0,s=Math.PI/3,r=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(kn.DEFAULT_UP),this.updateMatrix(),this.target=new kn,this.distance=i,this.angle=s,this.penumbra=r,this.decay=l,this.map=null,this.shadow=new bV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const FC=new nn,vg=new ee,tE=new ee;class SV extends QM{constructor(){super(new Os(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new Hn(2,1,1,1),new Hn(0,1,1,1),new Hn(3,1,1,1),new Hn(1,1,1,1),new Hn(3,0,1,1),new Hn(1,0,1,1)],this._cubeDirections=[new ee(1,0,0),new ee(-1,0,0),new ee(0,0,1),new ee(0,0,-1),new ee(0,1,0),new ee(0,-1,0)],this._cubeUps=[new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,0,1),new ee(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),vg.setFromMatrixPosition(e.matrixWorld),i.position.copy(vg),tE.copy(i.position),tE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(tE),i.updateMatrixWorld(),s.makeTranslation(-vg.x,-vg.y,-vg.z),FC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FC)}}class tN extends Su{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new SV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Cp extends Wx{constructor(e=-1,t=1,i=1,s=-1,r=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,l=i+e,c=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,l=r+p*this.view.width,c-=g*this.view.offsetY,d=c-g*this.view.height}this.projectionMatrix.makeOrthographic(r,l,c,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class EV extends QM{constructor(){super(new Cp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nN extends Su{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(kn.DEFAULT_UP),this.updateMatrix(),this.target=new kn,this.shadow=new EV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class iN extends Su{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sN extends Su{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class aN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ee)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*r),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*r)),t.addScaledVector(l[6],.315392*(3*r*r-1)),t.addScaledVector(l[7],1.092548*(i*r)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*r),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*r),t.addScaledVector(l[6],.743125*r*r-.247708),t.addScaledVector(l[7],2*.429043*i*r),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class rN extends Su{constructor(e=new aN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class db extends Fa{constructor(e){super(e),this.textures={}}load(e,t,i,s){const r=this,l=new _r(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){s?s(d):console.error(d),r.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new St().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const l=e.uniforms[r];switch(s.uniforms[r]={},l.type){case"t":s.uniforms[r].value=i(l.value);break;case"c":s.uniforms[r].value=new St().setHex(l.value);break;case"v2":s.uniforms[r].value=new Je().fromArray(l.value);break;case"v3":s.uniforms[r].value=new ee().fromArray(l.value);break;case"v4":s.uniforms[r].value=new Hn().fromArray(l.value);break;case"m3":s.uniforms[r].value=new gn().fromArray(l.value);break;case"m4":s.uniforms[r].value=new nn().fromArray(l.value);break;default:s.uniforms[r].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Je().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return db.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:BD,SpriteMaterial:IM,RawShaderMaterial:zD,ShaderMaterial:Ba,PointsMaterial:BM,MeshPhysicalMaterial:FD,MeshStandardMaterial:qM,MeshPhongMaterial:VD,MeshToonMaterial:HD,MeshNormalMaterial:kD,MeshLambertMaterial:GD,MeshDepthMaterial:XM,MeshDistanceMaterial:WM,MeshBasicMaterial:fc,MeshMatcapMaterial:jD,LineDashedMaterial:qD,LineBasicMaterial:za,Material:ha};return new t[e]}}class m1{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class oN extends bn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lN extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=this,l=new _r(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){s?s(d):console.error(d),r.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(x,E){if(t[E]!==void 0)return t[E];const T=x.interleavedBuffers[E],M=r(x,T.buffer),R=tp(T.type,M),O=new Zx(R,T.stride);return O.uuid=T.uuid,t[E]=O,O}function r(x,E){if(i[E]!==void 0)return i[E];const T=x.arrayBuffers[E],M=new Uint32Array(T).buffer;return i[E]=M,M}const l=e.isInstancedBufferGeometry?new oN:new bn,c=e.data.index;if(c!==void 0){const x=tp(c.type,c.array);l.setIndex(new li(x,1))}const d=e.data.attributes;for(const x in d){const E=d[x];let A;if(E.isInterleavedBufferAttribute){const T=s(e.data,E.data);A=new sf(T,E.itemSize,E.offset,E.normalized)}else{const T=tp(E.type,E.array),M=E.isInstancedBufferAttribute?gp:li;A=new M(T,E.itemSize,E.normalized)}E.name!==void 0&&(A.name=E.name),E.usage!==void 0&&A.setUsage(E.usage),l.setAttribute(x,A)}const p=e.data.morphAttributes;if(p)for(const x in p){const E=p[x],A=[];for(let T=0,M=E.length;T<M;T++){const R=E[T];let O;if(R.isInterleavedBufferAttribute){const D=s(e.data,R.data);O=new sf(D,R.itemSize,R.offset,R.normalized)}else{const D=tp(R.type,R.array);O=new li(D,R.itemSize,R.normalized)}R.name!==void 0&&(O.name=R.name),A.push(O)}l.morphAttributes[x]=A}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let x=0,E=y.length;x!==E;++x){const A=y[x];l.addGroup(A.start,A.count,A.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const x=new ee;_.center!==void 0&&x.fromArray(_.center),l.boundingSphere=new ua(x,_.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class MV extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=this,l=this.path===""?m1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new _r(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(y){s!==void 0&&s(y),console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(p,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?m1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new _r(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const l=await r.loadAsync(e,t),c=JSON.parse(l),d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,r,d,c,i),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let y=!1;for(const _ in l)if(l[_].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,r),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,c,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const r=new $h().fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,l=e.length;r<l;r++){const c=new Jx().fromJSON(e[r],s);i[c.uuid]=c}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new lN;for(let r=0,l=e.length;r<l;r++){let c;const d=e[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(d);break;default:d.type in PC?c=PC[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}c.uuid=d.uuid,d.name!==void 0&&(c.name=d.name),d.userData!==void 0&&(c.userData=d.userData),i[d.uuid]=c}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const r=new db;r.setTextures(t);for(let l=0,c=e.length;l<c;l++){const d=e[l];i[d.uuid]===void 0&&(i[d.uuid]=r.parse(d)),s[d.uuid]=i[d.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],r=f0.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const i=this,s={};let r;function l(d){return i.manager.itemStart(d),r.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function c(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(g)}else return d.data?{data:tp(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new fb(t);r=new d0(d),r.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const y=e[p],_=y.url;if(Array.isArray(_)){const x=[];for(let E=0,A=_.length;E<A;E++){const T=_[E],M=c(T);M!==null&&(M instanceof HTMLImageElement?x.push(M):x.push(new Ro(M.data,M.width,M.height)))}s[y.uuid]=new Gh(x)}else{const x=c(y.url);s[y.uuid]=new Gh(x)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function r(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await s.loadAsync(d)}else return l.data?{data:tp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new d0(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const g=[];for(let y=0,_=p.length;y<_;y++){const x=p[y],E=await r(x);E!==null&&(E instanceof HTMLImageElement?g.push(E):g.push(new Ro(E.data,E.width,E.height)))}i[d.uuid]=new Gh(g)}else{const g=await r(d.url);i[d.uuid]=new Gh(g)}}}return i}parseTextures(e,t){function i(r,l){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),l[r])}const s={};if(e!==void 0)for(let r=0,l=e.length;r<l;r++){const c=e[r];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const d=t[c.image],p=d.data;let g;Array.isArray(p)?(g=new U0,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Ro:g=new oi,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=i(c.mapping,TV)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=i(c.wrap[0],VC),g.wrapT=i(c.wrap[1],VC)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.minFilter!==void 0&&(g.minFilter=i(c.minFilter,HC)),c.magFilter!==void 0&&(g.magFilter=i(c.magFilter,HC)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),s[c.uuid]=g}return s}parseObject(e,t,i,s,r){let l;function c(_){return t[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),t[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let E=0,A=_.length;E<A;E++){const T=_[E];i[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),x.push(i[T])}return x}return i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),i[_]}}function p(_){return s[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),s[_]}let g,y;switch(e.type){case"Scene":l=new L0,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new St(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Kx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new Yx(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new Os(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Cp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new iN(e.color,e.intensity);break;case"DirectionalLight":l=new nN(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new tN(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new sN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new eN(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new $D(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new rN().fromJSON(e);break;case"SkinnedMesh":g=c(e.geometry),y=d(e.material),l=new bD(g,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=c(e.geometry),y=d(e.material),l=new Pi(g,y);break;case"InstancedMesh":g=c(e.geometry),y=d(e.material);const _=e.count,x=e.instanceMatrix,E=e.instanceColor;l=new SD(g,y,_),l.instanceMatrix=new gp(new Float32Array(x.array),16),E!==void 0&&(l.instanceColor=new gp(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":g=c(e.geometry),y=d(e.material),l=new ED(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,y),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._visibility=e.visibility,l._active=e.active,l._bounds=e.bounds.map(A=>{const T=new Pa;T.min.fromArray(A.boxMin),T.max.fromArray(A.boxMax);const M=new ua;return M.radius=A.sphereRadius,M.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:T,sphereInitialized:A.sphereInitialized,sphere:M}}),l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._geometryCount=e.geometryCount,l._matricesTexture=p(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid));break;case"LOD":l=new xD;break;case"Line":l=new vu(c(e.geometry),d(e.material));break;case"LineLoop":l=new MD(c(e.geometry),d(e.material));break;case"LineSegments":l=new Sl(c(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new TD(c(e.geometry),d(e.material));break;case"Sprite":l=new _D(d(e.material));break;case"Group":l=new np;break;case"Bone":l=new PM;break;default:l=new kn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let x=0;x<_.length;x++)l.add(this.parseObject(_[x],t,i,s,r))}if(e.animations!==void 0){const _=e.animations;for(let x=0;x<_.length;x++){const E=_[x];l.animations.push(r[E])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const _=e.levels;for(let x=0;x<_.length;x++){const E=_[x],A=l.getObjectByProperty("uuid",E.object);A!==void 0&&l.addLevel(A,E.distance,E.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new kn}})}}const TV={UVMapping:mu,CubeReflectionMapping:_l,CubeRefractionMapping:gu,EquirectangularReflectionMapping:hp,EquirectangularRefractionMapping:Jg,CubeUVReflectionMapping:Tp},VC={RepeatWrapping:Qg,ClampToEdgeWrapping:rs,MirroredRepeatWrapping:$g},HC={NearestFilter:js,NearestMipmapNearestFilter:bM,NearestMipmapLinearFilter:ep,LinearFilter:ti,LinearMipmapNearestFilter:Og,LinearMipmapLinearFilter:dl};class wV extends Fa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,l=oc.get(e);if(l!==void 0){if(r.manager.itemStart(e),l.then){l.then(p=>{t&&t(p),r.manager.itemEnd(e)}).catch(p=>{s&&s(p)});return}return setTimeout(function(){t&&t(l),r.manager.itemEnd(e)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const d=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return oc.add(e,p),t&&t(p),r.manager.itemEnd(e),p}).catch(function(p){s&&s(p),oc.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});oc.add(e,d),r.manager.itemStart(e)}}let Jy;class $M{static getContext(){return Jy===void 0&&(Jy=new(window.AudioContext||window.webkitAudioContext)),Jy}static setContext(e){Jy=e}}class AV extends Fa{constructor(e){super(e)}load(e,t,i,s){const r=this,l=new _r(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const p=d.slice(0);$M.getContext().decodeAudioData(p,function(y){t(y)}).catch(c)}catch(p){c(p)}},i,s);function c(d){s?s(d):console.error(d),r.manager.itemError(e)}}}const kC=new nn,GC=new nn,Sh=new nn;class CV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Os,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Os,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Sh.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,l=t.near*Math.tan(Qh*t.fov*.5)/t.zoom;let c,d;GC.elements[12]=-s,kC.elements[12]=s,c=-l*t.aspect+r,d=l*t.aspect+r,Sh.elements[0]=2*t.near/(d-c),Sh.elements[8]=(d+c)/(d-c),this.cameraL.projectionMatrix.copy(Sh),c=-l*t.aspect-r,d=l*t.aspect-r,Sh.elements[0]=2*t.near/(d-c),Sh.elements[8]=(d+c)/(d-c),this.cameraR.projectionMatrix.copy(Sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(GC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(kC)}}class cN extends Os{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class eT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=jC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function jC(){return performance.now()}const Eh=new ee,qC=new $a,RV=new ee,Mh=new ee;class OV extends kn{constructor(){super(),this.type="AudioListener",this.context=$M.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Eh,qC,RV),Mh.set(0,0,-1).applyQuaternion(qC),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Eh.x,s),t.positionY.linearRampToValueAtTime(Eh.y,s),t.positionZ.linearRampToValueAtTime(Eh.z,s),t.forwardX.linearRampToValueAtTime(Mh.x,s),t.forwardY.linearRampToValueAtTime(Mh.y,s),t.forwardZ.linearRampToValueAtTime(Mh.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(Eh.x,Eh.y,Eh.z),t.setOrientation(Mh.x,Mh.y,Mh.z,i.x,i.y,i.z)}}class uN extends kn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Th=new ee,XC=new $a,DV=new ee,wh=new ee;class NV extends uN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Th,XC,DV),wh.set(0,0,1).applyQuaternion(XC);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Th.x,i),t.positionY.linearRampToValueAtTime(Th.y,i),t.positionZ.linearRampToValueAtTime(Th.z,i),t.orientationX.linearRampToValueAtTime(wh.x,i),t.orientationY.linearRampToValueAtTime(wh.y,i),t.orientationZ.linearRampToValueAtTime(wh.z,i)}else t.setPosition(Th.x,Th.y,Th.z),t.setOrientation(wh.x,wh.y,wh.z)}}class UV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class hN{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,l;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==s;++c)i[r+c]=i[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(i,r,0,c,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=t*this._origIndex;this._mixBufferRegion(i,s,d,1-r,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(i[d]!==i[d+t]){c.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,l=s;r!==l;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let l=0;l!==r;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){$a.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const l=this._workIndex*r;$a.multiplyQuaternionsFlat(e,l,e,t,e,i),$a.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,r){const l=1-s;for(let c=0;c!==r;++c){const d=t+c;e[d]=e[d]*l+e[i+c]*s}}_lerpAdditive(e,t,i,s,r){for(let l=0;l!==r;++l){const c=t+l;e[c]=e[c]+e[i+l]*s}}}const tT="\\[\\]\\.:\\/",LV=new RegExp("["+tT+"]","g"),nT="[^"+tT+"]",IV="[^"+tT.replace("\\.","")+"]",PV=/((?:WC+[\/:])*)/.source.replace("WC",nT),BV=/(WCOD+)?/.source.replace("WCOD",IV),zV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nT),FV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nT),VV=new RegExp("^"+PV+BV+zV+FV+"$"),HV=["material","materials","bones","map"];class kV{constructor(e,t,i){const s=i||Vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Vn{constructor(e,t,i){this.path=t,this.parsedPath=i||Vn.parseTrackName(t),this.node=Vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Vn.Composite(e,t,i):new Vn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(LV,"")}static parseTrackName(e){const t=VV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);HV.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let l=0;l<r.length;l++){const c=r[l];if(c.name===t||c.uuid===t)return c;const d=i(c.children);if(d)return d}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=r}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vn.Composite=kV;Vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vn.prototype.GetterByBindingType=[Vn.prototype._getValue_direct,Vn.prototype._getValue_array,Vn.prototype._getValue_arrayElement,Vn.prototype._getValue_toArray];Vn.prototype.SetterByBindingTypeAndVersioning=[[Vn.prototype._setValue_direct,Vn.prototype._setValue_direct_setNeedsUpdate,Vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_array,Vn.prototype._setValue_array_setNeedsUpdate,Vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_arrayElement,Vn.prototype._setValue_arrayElement_setNeedsUpdate,Vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_fromArray,Vn.prototype._setValue_fromArray_setNeedsUpdate,Vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class GV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=yr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,r=this._bindings,l=r.length;let c,d=e.length,p=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const _=arguments[g],x=_.uuid;let E=t[x];if(E===void 0){E=d++,t[x]=E,e.push(_);for(let A=0,T=l;A!==T;++A)r[A].push(new Vn(_,i[A],s[A]))}else if(E<p){c=e[E];const A=--p,T=e[A];t[T.uuid]=E,e[E]=T,t[x]=A,e[A]=_;for(let M=0,R=l;M!==R;++M){const O=r[M],D=O[A];let H=O[E];O[E]=D,H===void 0&&(H=new Vn(_,i[M],s[M])),O[A]=H}}else e[E]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0&&g>=r){const y=r++,_=e[y];t[_.uuid]=g,e[g]=_,t[p]=y,e[y]=d;for(let x=0,E=s;x!==E;++x){const A=i[x],T=A[y],M=A[g];A[g]=T,A[y]=M}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_,l=e.length;for(let c=0,d=arguments.length;c!==d;++c){const p=arguments[c],g=p.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<r){const _=--r,x=e[_],E=--l,A=e[E];t[x.uuid]=y,e[y]=x,t[A.uuid]=_,e[_]=A,e.pop();for(let T=0,M=s;T!==M;++T){const R=i[T],O=R[_],D=R[E];R[y]=O,R[_]=D,R.pop()}}else{const _=--l,x=e[_];_>0&&(t[x.uuid]=y),e[y]=x,e.pop();for(let E=0,A=s;E!==A;++E){const T=i[E];T[y]=T[_],T.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const r=this._bindings;if(s!==void 0)return r[s];const l=this._paths,c=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,y=new Array(p);s=r.length,i[e]=s,l.push(e),c.push(t),r.push(y);for(let _=g,x=d.length;_!==x;++_){const E=d[_];y[_]=new Vn(E,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,r=this._parsedPaths,l=this._bindings,c=l.length-1,d=l[c],p=e[c];t[p]=i,l[i]=d,l.pop(),r[i]=r[c],r.pop(),s[i]=s[c],s.pop()}}}class fN{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,l=r.length,c=new Array(l),d={endingStart:Hh,endingEnd:Hh};for(let p=0;p!==l;++p){const g=r[p].createInterpolant(null);c[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Q3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,l=r/s,c=s/r;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=s._lendControlInterpolant(),this._timeScaleInterpolant=c);const d=c.parameterPositions,p=c.sampleValues;return d[0]=r,d[1]=r+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const d=(e-r)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case RM:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulateAdditive(c);break;case jx:default:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulate(s,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const l=i===$3;if(e===0)return r===-1?s:l&&(r&1)===1?t-s:s;if(i===J3){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const c=Math.floor(s/t);s-=t*c,r+=Math.abs(c);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=s;if(l&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=kh,s.endingEnd=kh):(e?s.endingStart=this.zeroSlopeAtStart?kh:Hh:s.endingStart=t0,t?s.endingEnd=this.zeroSlopeAtEnd?kh:Hh:s.endingEnd=t0)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=r,d[0]=t,c[1]=r+e,d[1]=i,this}}const jV=new Float32Array(1);class qV extends bl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,l=e._propertyBindings,c=e._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let y=0;y!==r;++y){const _=s[y],x=_.name;let E=g[x];if(E!==void 0)++E.referenceCount,l[y]=E;else{if(E=l[y],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,x));continue}const A=t&&t._propertyBindings[y].binding.parsedPath;E=new hN(Vn.create(i,x,A),_.ValueTypeName,_.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,x),l[y]=E}c[y].resultBuffer=E.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let l=r[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,l=this._actionsByClip,c=l[r],d=c.knownActions,p=d[d.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),e._byClipCacheIndex=null;const y=c.actionByRoot,_=(e._localRoot||this._root).uuid;delete y[_],d.length===0&&delete l[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,l=this._bindingsByRootAndName,c=l[s],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete c[r],Object.keys(c).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new KM(new Float32Array(2),new Float32Array(2),1,jV),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let l=typeof e=="string"?f0.findByName(s,e):e;const c=l!==null?l.uuid:e,d=this._actionsByClip[c];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=jx),d!==void 0){const y=d.actionByRoot[r];if(y!==void 0&&y.blendMode===i)return y;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new fN(this,l,t,i);return this._bindAction(g,p),this._addInactiveAction(g,c,r),g}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?f0.findByName(i,e):e,l=r?r.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(s,e,r,l);const c=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)c[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const l=r.knownActions;for(let c=0,d=l.length;c!==d;++c){const p=l[c];this._deactivateAction(p);const g=p._cacheIndex,y=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const c=i[l].actionByRoot,d=c[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const l in r){const c=r[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class XV extends qx{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Xx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class WV extends qx{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=i,this.texture=new N0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class iT{constructor(e){this.value=e}clone(){return new iT(this.value.clone===void 0?this.value:this.value.clone())}}let YV=0;class KV extends bl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:YV++}),this.name="",this.usage=i0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const r=Array.isArray(t[i])?t[i]:[t[i]];for(let l=0;l<r.length;l++)this.uniforms.push(r[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class ZV extends Zx{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class JV{constructor(e,t,i,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const WC=new nn;class sT{constructor(e,t,i=0,s=1/0){this.ray=new wp(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new pp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return WC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(WC),this}intersectObject(e,t=!0,i=[]){return g1(e,this,i,t),i.sort(YC),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)g1(e[s],this,i,t);return i.sort(YC),i}}function YC(n,e){return n.distance-e.distance}function g1(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let l=0,c=r.length;l<c;l++)g1(r[l],e,t,!0)}}class dN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=hn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(hn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class QV{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class aT{constructor(e,t,i,s){aT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=i,r[3]=s,this}}const KC=new Je;class $V{constructor(e=new Je(1/0,1/0),t=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=KC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,KC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZC=new ee,Qy=new ee;class eH{constructor(e=new ee,t=new ee){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ZC.subVectors(e,this.start),Qy.subVectors(this.end,this.start);const i=Qy.dot(Qy);let r=Qy.dot(ZC)/i;return t&&(r=hn(r,0,1)),r}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const JC=new ee;class tH extends kn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new bn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,d=32;l<d;l++,c++){const p=l/d*Math.PI*2,g=c/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}i.setAttribute("position",new It(s,3));const r=new za({fog:!1,toneMapped:!1});this.cone=new Sl(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),JC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(JC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const iu=new ee,$y=new nn,nE=new nn;class nH extends Sl{constructor(e){const t=pN(e),i=new bn,s=[],r=[],l=new St(0,0,1),c=new St(0,1,0);for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(l.r,l.g,l.b),r.push(c.r,c.g,c.b))}i.setAttribute("position",new It(s,3)),i.setAttribute("color",new It(r,3));const d=new za({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");nE.copy(this.root.matrixWorld).invert();for(let r=0,l=0;r<t.length;r++){const c=t[r];c.parent&&c.parent.isBone&&($y.multiplyMatrices(nE,c.matrixWorld),iu.setFromMatrixPosition($y),s.setXYZ(l,iu.x,iu.y,iu.z),$y.multiplyMatrices(nE,c.parent.matrixWorld),iu.setFromMatrixPosition($y),s.setXYZ(l+1,iu.x,iu.y,iu.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function pN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,pN(n.children[t]));return e}class iH extends Pi{constructor(e,t,i){const s=new F0(t,4,2),r=new fc({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sH=new ee,QC=new St,$C=new St;class aH extends kn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new z0(t);s.rotateY(Math.PI*.5),this.material=new fc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),l=new Float32Array(r.count*3);s.setAttribute("color",new li(l,3)),this.add(new Pi(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");QC.copy(this.light.color),$C.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const r=i<s/2?QC:$C;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sH.setFromMatrixPosition(this.light.matrixWorld).negate())}}class rH extends Sl{constructor(e=10,t=10,i=4473924,s=8947848){i=new St(i),s=new St(s);const r=t/2,l=e/t,c=e/2,d=[],p=[];for(let _=0,x=0,E=-c;_<=t;_++,E+=l){d.push(-c,0,E,c,0,E),d.push(E,0,-c,E,0,c);const A=_===r?i:s;A.toArray(p,x),x+=3,A.toArray(p,x),x+=3,A.toArray(p,x),x+=3,A.toArray(p,x),x+=3}const g=new bn;g.setAttribute("position",new It(d,3)),g.setAttribute("color",new It(p,3));const y=new za({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class oH extends Sl{constructor(e=10,t=16,i=8,s=64,r=4473924,l=8947848){r=new St(r),l=new St(l);const c=[],d=[];if(t>1)for(let y=0;y<t;y++){const _=y/t*(Math.PI*2),x=Math.sin(_)*e,E=Math.cos(_)*e;c.push(0,0,0),c.push(x,0,E);const A=y&1?r:l;d.push(A.r,A.g,A.b),d.push(A.r,A.g,A.b)}for(let y=0;y<i;y++){const _=y&1?r:l,x=e-e/i*y;for(let E=0;E<s;E++){let A=E/s*(Math.PI*2),T=Math.sin(A)*x,M=Math.cos(A)*x;c.push(T,0,M),d.push(_.r,_.g,_.b),A=(E+1)/s*(Math.PI*2),T=Math.sin(A)*x,M=Math.cos(A)*x,c.push(T,0,M),d.push(_.r,_.g,_.b)}}const p=new bn;p.setAttribute("position",new It(c,3)),p.setAttribute("color",new It(d,3));const g=new za({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const eR=new ee,e_=new ee,tR=new ee;class lH extends kn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new bn;s.setAttribute("position",new It([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new za({fog:!1,toneMapped:!1});this.lightPlane=new vu(s,r),this.add(this.lightPlane),s=new bn,s.setAttribute("position",new It([0,0,0,0,0,1],3)),this.targetLine=new vu(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),eR.setFromMatrixPosition(this.light.matrixWorld),e_.setFromMatrixPosition(this.light.target.matrixWorld),tR.subVectors(e_,eR),this.lightPlane.lookAt(e_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e_),this.targetLine.scale.z=tR.length()}}const t_=new ee,ki=new Wx;class cH extends Sl{constructor(e){const t=new bn,i=new za({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(E,A){d(E),d(A)}function d(E){s.push(0,0,0),r.push(0,0,0),l[E]===void 0&&(l[E]=[]),l[E].push(s.length/3-1)}t.setAttribute("position",new It(s,3)),t.setAttribute("color",new It(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new St(16755200),g=new St(16711680),y=new St(43775),_=new St(16777215),x=new St(3355443);this.setColors(p,g,y,_,x)}setColors(e,t,i,s,r){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,s.r,s.g,s.b),c.setXYZ(39,s.r,s.g,s.b),c.setXYZ(40,r.r,r.g,r.b),c.setXYZ(41,r.r,r.g,r.b),c.setXYZ(42,r.r,r.g,r.b),c.setXYZ(43,r.r,r.g,r.b),c.setXYZ(44,r.r,r.g,r.b),c.setXYZ(45,r.r,r.g,r.b),c.setXYZ(46,r.r,r.g,r.b),c.setXYZ(47,r.r,r.g,r.b),c.setXYZ(48,r.r,r.g,r.b),c.setXYZ(49,r.r,r.g,r.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;ki.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===Co?-1:0;Wi("c",t,e,ki,0,0,r),Wi("t",t,e,ki,0,0,1),Wi("n1",t,e,ki,-i,-s,r),Wi("n2",t,e,ki,i,-s,r),Wi("n3",t,e,ki,-i,s,r),Wi("n4",t,e,ki,i,s,r),Wi("f1",t,e,ki,-i,-s,1),Wi("f2",t,e,ki,i,-s,1),Wi("f3",t,e,ki,-i,s,1),Wi("f4",t,e,ki,i,s,1),Wi("u1",t,e,ki,i*.7,s*1.1,r),Wi("u2",t,e,ki,-i*.7,s*1.1,r),Wi("u3",t,e,ki,0,s*2,r),Wi("cf1",t,e,ki,-i,0,1),Wi("cf2",t,e,ki,i,0,1),Wi("cf3",t,e,ki,0,-s,1),Wi("cf4",t,e,ki,0,s,1),Wi("cn1",t,e,ki,-i,0,r),Wi("cn2",t,e,ki,i,0,r),Wi("cn3",t,e,ki,0,-s,r),Wi("cn4",t,e,ki,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wi(n,e,t,i,s,r,l){t_.set(s,r,l).unproject(i);const c=e[n];if(c!==void 0){const d=t.getAttribute("position");for(let p=0,g=c.length;p<g;p++)d.setXYZ(c[p],t_.x,t_.y,t_.z)}}const n_=new Pa;class uH extends Sl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),r=new bn;r.setIndex(new li(i,1)),r.setAttribute("position",new li(s,3)),super(r,new za({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&n_.setFromObject(this.object),n_.isEmpty())return;const t=n_.min,i=n_.max,s=this.geometry.attributes.position,r=s.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hH extends Sl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new bn;r.setIndex(new li(i,1)),r.setAttribute("position",new It(s,3)),super(r,new za({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fH extends vu{constructor(e,t=1,i=16776960){const s=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new bn;l.setAttribute("position",new It(r,3)),l.computeBoundingSphere(),super(l,new za({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new bn;d.setAttribute("position",new It(c,3)),d.computeBoundingSphere(),this.add(new Pi(d,new fc({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const nR=new ee;let i_,iE;class dH extends kn{constructor(e=new ee(0,0,1),t=new ee(0,0,0),i=1,s=16776960,r=i*.2,l=r*.2){super(),this.type="ArrowHelper",i_===void 0&&(i_=new bn,i_.setAttribute("position",new It([0,0,0,0,1,0],3)),iE=new Ap(0,.5,1,5,1),iE.translate(0,-.5,0)),this.position.copy(t),this.line=new vu(i_,new za({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(iE,new fc({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{nR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(nR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pH extends Sl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new bn;s.setAttribute("position",new It(t,3)),s.setAttribute("color",new It(i,3));const r=new za({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,i){const s=new St,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(i),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mH{constructor(){this.type="ShapePath",this.color=new St,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new r0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,r,l){return this.currentPath.bezierCurveTo(e,t,i,s,r,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const R=[];for(let O=0,D=M.length;O<D;O++){const H=M[O],I=new $h;I.curves=H.curves,R.push(I)}return R}function i(M,R){const O=R.length;let D=!1;for(let H=O-1,I=0;I<O;H=I++){let V=R[H],F=R[I],L=F.x-V.x,P=F.y-V.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(V=R[I],L=-L,F=R[H],P=-P),M.y<V.y||M.y>F.y)continue;if(M.y===V.y){if(M.x===V.x)return!0}else{const Z=P*(M.x-V.x)-L*(M.y-V.y);if(Z===0)return!0;if(Z<0)continue;D=!D}}else{if(M.y!==V.y)continue;if(F.x<=M.x&&M.x<=V.x||V.x<=M.x&&M.x<=F.x)return!0}}return D}const s=yl.isClockWise,r=this.subPaths;if(r.length===0)return[];let l,c,d;const p=[];if(r.length===1)return c=r[0],d=new $h,d.curves=c.curves,p.push(d),p;let g=!s(r[0].getPoints());g=e?!g:g;const y=[],_=[];let x=[],E=0,A;_[E]=void 0,x[E]=[];for(let M=0,R=r.length;M<R;M++)c=r[M],A=c.getPoints(),l=s(A),l=e?!l:l,l?(!g&&_[E]&&E++,_[E]={s:new $h,p:A},_[E].s.curves=c.curves,g&&E++,x[E]=[]):x[E].push({h:c,p:A[0]});if(!_[0])return t(r);if(_.length>1){let M=!1,R=0;for(let O=0,D=_.length;O<D;O++)y[O]=[];for(let O=0,D=_.length;O<D;O++){const H=x[O];for(let I=0;I<H.length;I++){const V=H[I];let F=!0;for(let L=0;L<_.length;L++)i(V.p,_[L].p)&&(O!==L&&R++,F?(F=!1,y[L].push(V)):M=!0);F&&y[O].push(V)}}R>0&&M===!1&&(x=y)}let T;for(let M=0,R=_.length;M<R;M++){d=_[M].s,p.push(d),T=x[M];for(let O=0,D=T.length;O<D;O++)d.holes.push(T[O].h)}return p}}class gH extends bl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function vH(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function yH(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function _H(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function v1(n,e,t,i){const s=xH(i);switch(t){case EM:return n*e;case TM:return n*e;case wM:return n*e*2;case O0:return n*e/s.components*s.byteLength;case D0:return n*e/s.components*s.byteLength;case AM:return n*e*2/s.components*s.byteLength;case kx:return n*e*2/s.components*s.byteLength;case MM:return n*e*3/s.components*s.byteLength;case Ki:return n*e*4/s.components*s.byteLength;case Gx:return n*e*4/s.components*s.byteLength;case Dg:case Ng:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ug:case Lg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case W_:case K_:return Math.max(n,16)*Math.max(e,8)/4;case X_:case Y_:return Math.max(n,8)*Math.max(e,8)/2;case Z_:case J_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Q_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ex:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case tx:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case nx:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case ix:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case sx:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case ax:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case rx:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ox:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case lx:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case cx:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case ux:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case hx:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case fx:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Ig:case dx:case px:return Math.ceil(n/4)*Math.ceil(e/4)*16;case CM:case mx:return Math.ceil(n/4)*Math.ceil(e/4)*8;case gx:case vx:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function xH(n){switch(n){case er:case zx:return{byteLength:1,components:1};case fp:case Fx:case Ds:return{byteLength:2,components:1};case Vx:case Hx:return{byteLength:2,components:4};case xl:case R0:case Ii:return{byteLength:4,components:1};case SM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const bH={contain:vH,cover:yH,fill:_H,getByteLength:v1};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Mp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Mp);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function mN(){let n=null,e=!1,t=null,i=null;function s(r,l){t(r,l),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function SH(n){const e=new WeakMap;function t(c,d){const p=c.array,g=c.usage,y=p.byteLength,_=n.createBuffer();n.bindBuffer(d,_),n.bufferData(d,p,g),c.onUploadCallback();let x;if(p instanceof Float32Array)x=n.FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=n.SHORT;else if(p instanceof Uint32Array)x=n.UNSIGNED_INT;else if(p instanceof Int32Array)x=n.INT;else if(p instanceof Int8Array)x=n.BYTE;else if(p instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:y}}function i(c,d,p){const g=d.array,y=d.updateRanges;if(n.bindBuffer(p,c),y.length===0)n.bufferSubData(p,0,g);else{y.sort((x,E)=>x.start-E.start);let _=0;for(let x=1;x<y.length;x++){const E=y[_],A=y[x];A.start<=E.start+E.count+1?E.count=Math.max(E.count,A.start+A.count-E.start):(++_,y[_]=A)}y.length=_+1;for(let x=0,E=y.length;x<E;x++){const A=y[x];n.bufferSubData(p,A.start*g.BYTES_PER_ELEMENT,g,A.start,A.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function r(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);d&&(n.deleteBuffer(d.buffer),e.delete(c))}function l(c,d){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const g=e.get(c);(!g||g.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,d));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,c,d),p.version=c.version}}return{get:s,remove:r,update:l}}var EH=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,MH=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,TH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,wH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,AH=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,CH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,RH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,OH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,DH=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,NH=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,UH=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,LH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,IH=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,PH=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,BH=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zH=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,FH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,VH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,HH=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,qH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,XH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,WH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YH=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,KH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ZH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,QH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$H="gl_FragColor = linearToOutputTexel( gl_FragColor );",e6=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,t6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,n6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,i6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,s6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,a6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,r6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,o6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,l6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,c6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,u6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,h6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,f6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,d6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,p6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,m6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,g6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,v6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,y6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,x6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,b6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,S6=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,E6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,M6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,T6=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,w6=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,A6=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,C6=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,R6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,O6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,D6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,N6=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,U6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,L6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,I6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,P6=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,B6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,z6=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,F6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,V6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,H6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,k6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,G6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,j6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,q6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,X6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,W6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Y6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,K6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Z6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,J6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Q6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,e8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,t8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,n8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,i8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,s8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,a8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,r8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,o8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,l8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,c8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,u8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,h8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,f8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,d8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,p8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,m8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,g8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,v8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,y8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,x8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,b8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const S8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,E8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,M8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,A8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,R8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,O8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,D8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,N8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,U8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,I8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,P8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,B8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,F8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,H8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,k8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,G8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,j8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,q8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,W8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,J8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ek=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xn={alphahash_fragment:EH,alphahash_pars_fragment:MH,alphamap_fragment:TH,alphamap_pars_fragment:wH,alphatest_fragment:AH,alphatest_pars_fragment:CH,aomap_fragment:RH,aomap_pars_fragment:OH,batching_pars_vertex:DH,batching_vertex:NH,begin_vertex:UH,beginnormal_vertex:LH,bsdfs:IH,iridescence_fragment:PH,bumpmap_pars_fragment:BH,clipping_planes_fragment:zH,clipping_planes_pars_fragment:FH,clipping_planes_pars_vertex:VH,clipping_planes_vertex:HH,color_fragment:kH,color_pars_fragment:GH,color_pars_vertex:jH,color_vertex:qH,common:XH,cube_uv_reflection_fragment:WH,defaultnormal_vertex:YH,displacementmap_pars_vertex:KH,displacementmap_vertex:ZH,emissivemap_fragment:JH,emissivemap_pars_fragment:QH,colorspace_fragment:$H,colorspace_pars_fragment:e6,envmap_fragment:t6,envmap_common_pars_fragment:n6,envmap_pars_fragment:i6,envmap_pars_vertex:s6,envmap_physical_pars_fragment:m6,envmap_vertex:a6,fog_vertex:r6,fog_pars_vertex:o6,fog_fragment:l6,fog_pars_fragment:c6,gradientmap_pars_fragment:u6,lightmap_pars_fragment:h6,lights_lambert_fragment:f6,lights_lambert_pars_fragment:d6,lights_pars_begin:p6,lights_toon_fragment:g6,lights_toon_pars_fragment:v6,lights_phong_fragment:y6,lights_phong_pars_fragment:_6,lights_physical_fragment:x6,lights_physical_pars_fragment:b6,lights_fragment_begin:S6,lights_fragment_maps:E6,lights_fragment_end:M6,logdepthbuf_fragment:T6,logdepthbuf_pars_fragment:w6,logdepthbuf_pars_vertex:A6,logdepthbuf_vertex:C6,map_fragment:R6,map_pars_fragment:O6,map_particle_fragment:D6,map_particle_pars_fragment:N6,metalnessmap_fragment:U6,metalnessmap_pars_fragment:L6,morphinstance_vertex:I6,morphcolor_vertex:P6,morphnormal_vertex:B6,morphtarget_pars_vertex:z6,morphtarget_vertex:F6,normal_fragment_begin:V6,normal_fragment_maps:H6,normal_pars_fragment:k6,normal_pars_vertex:G6,normal_vertex:j6,normalmap_pars_fragment:q6,clearcoat_normal_fragment_begin:X6,clearcoat_normal_fragment_maps:W6,clearcoat_pars_fragment:Y6,iridescence_pars_fragment:K6,opaque_fragment:Z6,packing:J6,premultiplied_alpha_fragment:Q6,project_vertex:$6,dithering_fragment:e8,dithering_pars_fragment:t8,roughnessmap_fragment:n8,roughnessmap_pars_fragment:i8,shadowmap_pars_fragment:s8,shadowmap_pars_vertex:a8,shadowmap_vertex:r8,shadowmask_pars_fragment:o8,skinbase_vertex:l8,skinning_pars_vertex:c8,skinning_vertex:u8,skinnormal_vertex:h8,specularmap_fragment:f8,specularmap_pars_fragment:d8,tonemapping_fragment:p8,tonemapping_pars_fragment:m8,transmission_fragment:g8,transmission_pars_fragment:v8,uv_pars_fragment:y8,uv_pars_vertex:_8,uv_vertex:x8,worldpos_vertex:b8,background_vert:S8,background_frag:E8,backgroundCube_vert:M8,backgroundCube_frag:T8,cube_vert:w8,cube_frag:A8,depth_vert:C8,depth_frag:R8,distanceRGBA_vert:O8,distanceRGBA_frag:D8,equirect_vert:N8,equirect_frag:U8,linedashed_vert:L8,linedashed_frag:I8,meshbasic_vert:P8,meshbasic_frag:B8,meshlambert_vert:z8,meshlambert_frag:F8,meshmatcap_vert:V8,meshmatcap_frag:H8,meshnormal_vert:k8,meshnormal_frag:G8,meshphong_vert:j8,meshphong_frag:q8,meshphysical_vert:X8,meshphysical_frag:W8,meshtoon_vert:Y8,meshtoon_frag:K8,points_vert:Z8,points_frag:J8,shadow_vert:Q8,shadow_frag:$8,sprite_vert:ek,sprite_frag:tk},_t={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gn}},envmap:{envMap:{value:null},envMapRotation:{value:new gn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gn},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}}},wo={basic:{uniforms:Da([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.fog]),vertexShader:xn.meshbasic_vert,fragmentShader:xn.meshbasic_frag},lambert:{uniforms:Da([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new St(0)}}]),vertexShader:xn.meshlambert_vert,fragmentShader:xn.meshlambert_frag},phong:{uniforms:Da([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:xn.meshphong_vert,fragmentShader:xn.meshphong_frag},standard:{uniforms:Da([_t.common,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.roughnessmap,_t.metalnessmap,_t.fog,_t.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},toon:{uniforms:Da([_t.common,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.gradientmap,_t.fog,_t.lights,{emissive:{value:new St(0)}}]),vertexShader:xn.meshtoon_vert,fragmentShader:xn.meshtoon_frag},matcap:{uniforms:Da([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,{matcap:{value:null}}]),vertexShader:xn.meshmatcap_vert,fragmentShader:xn.meshmatcap_frag},points:{uniforms:Da([_t.points,_t.fog]),vertexShader:xn.points_vert,fragmentShader:xn.points_frag},dashed:{uniforms:Da([_t.common,_t.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xn.linedashed_vert,fragmentShader:xn.linedashed_frag},depth:{uniforms:Da([_t.common,_t.displacementmap]),vertexShader:xn.depth_vert,fragmentShader:xn.depth_frag},normal:{uniforms:Da([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,{opacity:{value:1}}]),vertexShader:xn.meshnormal_vert,fragmentShader:xn.meshnormal_frag},sprite:{uniforms:Da([_t.sprite,_t.fog]),vertexShader:xn.sprite_vert,fragmentShader:xn.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xn.background_vert,fragmentShader:xn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gn}},vertexShader:xn.backgroundCube_vert,fragmentShader:xn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xn.cube_vert,fragmentShader:xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xn.equirect_vert,fragmentShader:xn.equirect_frag},distanceRGBA:{uniforms:Da([_t.common,_t.displacementmap,{referencePosition:{value:new ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xn.distanceRGBA_vert,fragmentShader:xn.distanceRGBA_frag},shadow:{uniforms:Da([_t.lights,_t.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:xn.shadow_vert,fragmentShader:xn.shadow_frag}};wo.physical={uniforms:Da([wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gn},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gn},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gn},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gn},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gn},anisotropyVector:{value:new Je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gn}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag};const s_={r:0,b:0,g:0},Ah=new xr,nk=new nn;function ik(n,e,t,i,s,r,l){const c=new St(0);let d=r===!0?0:1,p,g,y=null,_=0,x=null;function E(O){let D=O.isScene===!0?O.background:null;return D&&D.isTexture&&(D=(O.backgroundBlurriness>0?t:e).get(D)),D}function A(O){let D=!1;const H=E(O);H===null?M(c,d):H&&H.isColor&&(M(H,1),D=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?i.buffers.color.setClear(0,0,0,1,l):I==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,l),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(O,D){const H=E(D);H&&(H.isCubeTexture||H.mapping===Tp)?(g===void 0&&(g=new Pi(new lf(1,1,1),new Ba({name:"BackgroundCubeMaterial",uniforms:mp(wo.backgroundCube.uniforms),vertexShader:wo.backgroundCube.vertexShader,fragmentShader:wo.backgroundCube.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(I,V,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(g)),Ah.copy(D.backgroundRotation),Ah.x*=-1,Ah.y*=-1,Ah.z*=-1,H.isCubeTexture&&H.isRenderTargetTexture===!1&&(Ah.y*=-1,Ah.z*=-1),g.material.uniforms.envMap.value=H,g.material.uniforms.flipEnvMap.value=H.isCubeTexture&&H.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(nk.makeRotationFromEuler(Ah)),g.material.toneMapped=Pn.getTransfer(H.colorSpace)!==ei,(y!==H||_!==H.version||x!==n.toneMapping)&&(g.material.needsUpdate=!0,y=H,_=H.version,x=n.toneMapping),g.layers.enableAll(),O.unshift(g,g.geometry,g.material,0,0,null)):H&&H.isTexture&&(p===void 0&&(p=new Pi(new bu(2,2),new Ba({name:"BackgroundMaterial",uniforms:mp(wo.background.uniforms),vertexShader:wo.background.vertexShader,fragmentShader:wo.background.fragmentShader,side:hc,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=H,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=Pn.getTransfer(H.colorSpace)!==ei,H.matrixAutoUpdate===!0&&H.updateMatrix(),p.material.uniforms.uvTransform.value.copy(H.matrix),(y!==H||_!==H.version||x!==n.toneMapping)&&(p.material.needsUpdate=!0,y=H,_=H.version,x=n.toneMapping),p.layers.enableAll(),O.unshift(p,p.geometry,p.material,0,0,null))}function M(O,D){O.getRGB(s_,mD(n)),i.buffers.color.setClear(s_.r,s_.g,s_.b,D,l)}function R(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(O,D=1){c.set(O),d=D,M(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(O){d=O,M(c,d)},render:A,addToRenderList:T,dispose:R}}function sk(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=_(null);let r=s,l=!1;function c(P,Z,de,se,he){let xe=!1;const k=y(se,de,Z);r!==k&&(r=k,p(r.object)),xe=x(P,se,de,he),xe&&E(P,se,de,he),he!==null&&e.update(he,n.ELEMENT_ARRAY_BUFFER),(xe||l)&&(l=!1,D(P,Z,de,se),he!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(he).buffer))}function d(){return n.createVertexArray()}function p(P){return n.bindVertexArray(P)}function g(P){return n.deleteVertexArray(P)}function y(P,Z,de){const se=de.wireframe===!0;let he=i[P.id];he===void 0&&(he={},i[P.id]=he);let xe=he[Z.id];xe===void 0&&(xe={},he[Z.id]=xe);let k=xe[se];return k===void 0&&(k=_(d()),xe[se]=k),k}function _(P){const Z=[],de=[],se=[];for(let he=0;he<t;he++)Z[he]=0,de[he]=0,se[he]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:de,attributeDivisors:se,object:P,attributes:{},index:null}}function x(P,Z,de,se){const he=r.attributes,xe=Z.attributes;let k=0;const te=de.getAttributes();for(const Y in te)if(te[Y].location>=0){const ve=he[Y];let X=xe[Y];if(X===void 0&&(Y==="instanceMatrix"&&P.instanceMatrix&&(X=P.instanceMatrix),Y==="instanceColor"&&P.instanceColor&&(X=P.instanceColor)),ve===void 0||ve.attribute!==X||X&&ve.data!==X.data)return!0;k++}return r.attributesNum!==k||r.index!==se}function E(P,Z,de,se){const he={},xe=Z.attributes;let k=0;const te=de.getAttributes();for(const Y in te)if(te[Y].location>=0){let ve=xe[Y];ve===void 0&&(Y==="instanceMatrix"&&P.instanceMatrix&&(ve=P.instanceMatrix),Y==="instanceColor"&&P.instanceColor&&(ve=P.instanceColor));const X={};X.attribute=ve,ve&&ve.data&&(X.data=ve.data),he[Y]=X,k++}r.attributes=he,r.attributesNum=k,r.index=se}function A(){const P=r.newAttributes;for(let Z=0,de=P.length;Z<de;Z++)P[Z]=0}function T(P){M(P,0)}function M(P,Z){const de=r.newAttributes,se=r.enabledAttributes,he=r.attributeDivisors;de[P]=1,se[P]===0&&(n.enableVertexAttribArray(P),se[P]=1),he[P]!==Z&&(n.vertexAttribDivisor(P,Z),he[P]=Z)}function R(){const P=r.newAttributes,Z=r.enabledAttributes;for(let de=0,se=Z.length;de<se;de++)Z[de]!==P[de]&&(n.disableVertexAttribArray(de),Z[de]=0)}function O(P,Z,de,se,he,xe,k){k===!0?n.vertexAttribIPointer(P,Z,de,he,xe):n.vertexAttribPointer(P,Z,de,se,he,xe)}function D(P,Z,de,se){A();const he=se.attributes,xe=de.getAttributes(),k=Z.defaultAttributeValues;for(const te in xe){const Y=xe[te];if(Y.location>=0){let fe=he[te];if(fe===void 0&&(te==="instanceMatrix"&&P.instanceMatrix&&(fe=P.instanceMatrix),te==="instanceColor"&&P.instanceColor&&(fe=P.instanceColor)),fe!==void 0){const ve=fe.normalized,X=fe.itemSize,oe=e.get(fe);if(oe===void 0)continue;const Re=oe.buffer,le=oe.type,Oe=oe.bytesPerElement,Pe=le===n.INT||le===n.UNSIGNED_INT||fe.gpuType===R0;if(fe.isInterleavedBufferAttribute){const Ve=fe.data,rt=Ve.stride,Pt=fe.offset;if(Ve.isInstancedInterleavedBuffer){for(let wt=0;wt<Y.locationSize;wt++)M(Y.location+wt,Ve.meshPerAttribute);P.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let wt=0;wt<Y.locationSize;wt++)T(Y.location+wt);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let wt=0;wt<Y.locationSize;wt++)O(Y.location+wt,X/Y.locationSize,le,ve,rt*Oe,(Pt+X/Y.locationSize*wt)*Oe,Pe)}else{if(fe.isInstancedBufferAttribute){for(let Ve=0;Ve<Y.locationSize;Ve++)M(Y.location+Ve,fe.meshPerAttribute);P.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let Ve=0;Ve<Y.locationSize;Ve++)T(Y.location+Ve);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let Ve=0;Ve<Y.locationSize;Ve++)O(Y.location+Ve,X/Y.locationSize,le,ve,X*Oe,X/Y.locationSize*Ve*Oe,Pe)}}else if(k!==void 0){const ve=k[te];if(ve!==void 0)switch(ve.length){case 2:n.vertexAttrib2fv(Y.location,ve);break;case 3:n.vertexAttrib3fv(Y.location,ve);break;case 4:n.vertexAttrib4fv(Y.location,ve);break;default:n.vertexAttrib1fv(Y.location,ve)}}}}R()}function H(){F();for(const P in i){const Z=i[P];for(const de in Z){const se=Z[de];for(const he in se)g(se[he].object),delete se[he];delete Z[de]}delete i[P]}}function I(P){if(i[P.id]===void 0)return;const Z=i[P.id];for(const de in Z){const se=Z[de];for(const he in se)g(se[he].object),delete se[he];delete Z[de]}delete i[P.id]}function V(P){for(const Z in i){const de=i[Z];if(de[P.id]===void 0)continue;const se=de[P.id];for(const he in se)g(se[he].object),delete se[he];delete de[P.id]}}function F(){L(),l=!0,r!==s&&(r=s,p(r.object))}function L(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:c,reset:F,resetDefaultState:L,dispose:H,releaseStatesOfGeometry:I,releaseStatesOfProgram:V,initAttributes:A,enableAttribute:T,disableUnusedAttributes:R}}function ak(n,e,t){let i;function s(p){i=p}function r(p,g){n.drawArrays(i,p,g),t.update(g,i,1)}function l(p,g,y){y!==0&&(n.drawArraysInstanced(i,p,g,y),t.update(g,i,y))}function c(p,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,g,0,y);let x=0;for(let E=0;E<y;E++)x+=g[E];t.update(x,i,1)}function d(p,g,y,_){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let E=0;E<p.length;E++)l(p[E],g[E],_[E]);else{x.multiDrawArraysInstancedWEBGL(i,p,0,g,0,_,0,y);let E=0;for(let A=0;A<y;A++)E+=g[A]*_[A];t.update(E,i,1)}}this.setMode=s,this.render=r,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function rk(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function l(V){return!(V!==Ki&&i.convert(V)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(V){const F=V===Ds&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(V!==er&&i.convert(V)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&V!==Ii&&!F)}function d(V){if(V==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=d(p);g!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const y=t.logarithmicDepthBuffer===!0,_=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),O=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),H=E>0,I=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:y,reverseDepthBuffer:_,maxTextures:x,maxVertexTextures:E,maxTextureSize:A,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:R,maxVaryings:O,maxFragmentUniforms:D,vertexTextures:H,maxSamples:I}}function ok(n){const e=this;let t=null,i=0,s=!1,r=!1;const l=new ou,c=new gn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,_){const x=y.length!==0||_||i!==0||s;return s=_,i=y.length,x},this.beginShadows=function(){r=!0,g(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(y,_){t=g(y,_,0)},this.setState=function(y,_,x){const E=y.clippingPlanes,A=y.clipIntersection,T=y.clipShadows,M=n.get(y);if(!s||E===null||E.length===0||r&&!T)r?g(null):p();else{const R=r?0:i,O=R*4;let D=M.clippingState||null;d.value=D,D=g(E,_,O,x);for(let H=0;H!==O;++H)D[H]=t[H];M.clippingState=D,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=R}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function g(y,_,x,E){const A=y!==null?y.length:0;let T=null;if(A!==0){if(T=d.value,E!==!0||T===null){const M=x+A*4,R=_.matrixWorldInverse;c.getNormalMatrix(R),(T===null||T.length<M)&&(T=new Float32Array(M));for(let O=0,D=x;O!==A;++O,D+=4)l.copy(y[O]).applyMatrix4(R,c),l.normal.toArray(T,D),T[D+3]=l.constant}d.value=T,d.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,T}}function lk(n){let e=new WeakMap;function t(l,c){return c===hp?l.mapping=_l:c===Jg&&(l.mapping=gu),l}function i(l){if(l&&l.isTexture){const c=l.mapping;if(c===hp||c===Jg)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new LM(d.height);return p.fromEquirectangularTexture(n,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}else return null}}return l}function s(l){const c=l.target;c.removeEventListener("dispose",s);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const sp=4,iR=[.125,.215,.35,.446,.526,.582],Ih=20,sE=new Cp,sR=new St;let aE=null,rE=0,oE=0,lE=!1;const Uh=(1+Math.sqrt(5))/2,Ld=1/Uh,aR=[new ee(-Uh,Ld,0),new ee(Uh,Ld,0),new ee(-Ld,0,Uh),new ee(Ld,0,Uh),new ee(0,Uh,-Ld),new ee(0,Uh,Ld),new ee(-1,1,-1),new ee(1,1,-1),new ee(-1,1,1),new ee(1,1,1)];class y1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){aE=this._renderer.getRenderTarget(),rE=this._renderer.getActiveCubeFace(),oE=this._renderer.getActiveMipmapLevel(),lE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=oR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(aE,rE,oE),this._renderer.xr.enabled=lE,e.scissorTest=!1,a_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_l||e.mapping===gu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),aE=this._renderer.getRenderTarget(),rE=this._renderer.getActiveCubeFace(),oE=this._renderer.getActiveMipmapLevel(),lE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ti,minFilter:ti,generateMipmaps:!1,type:Ds,format:Ki,colorSpace:Oo,depthBuffer:!1},s=rR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=rR(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ck(r)),this._blurMaterial=uk(r,e,t)}return s}_compileMaterial(e){const t=new Pi(this._lodPlanes[0],e);this._renderer.compile(t,sE)}_sceneToCubeUV(e,t,i,s){const c=new Os(90,1,t,i),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,_=g.toneMapping;g.getClearColor(sR),g.toneMapping=vl,g.autoClear=!1;const x=new fc({name:"PMREM.Background",side:Ia,depthWrite:!1,depthTest:!1}),E=new Pi(new lf,x);let A=!1;const T=e.background;T?T.isColor&&(x.color.copy(T),e.background=null,A=!0):(x.color.copy(sR),A=!0);for(let M=0;M<6;M++){const R=M%3;R===0?(c.up.set(0,d[M],0),c.lookAt(p[M],0,0)):R===1?(c.up.set(0,0,d[M]),c.lookAt(0,p[M],0)):(c.up.set(0,d[M],0),c.lookAt(0,0,p[M]));const O=this._cubeSize;a_(s,R*O,M>2?O:0,O,O),g.setRenderTarget(s),A&&g.render(E,c),g.render(e,c)}E.geometry.dispose(),E.material.dispose(),g.toneMapping=_,g.autoClear=y,e.background=T}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===_l||e.mapping===gu;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=lR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=oR());const r=s?this._cubemapMaterial:this._equirectMaterial,l=new Pi(this._lodPlanes[0],r),c=r.uniforms;c.envMap.value=e;const d=this._cubeSize;a_(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(l,sE)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const l=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),c=aR[(s-r-1)%aR.length];this._blur(e,r-1,r,l,c)}t.autoClear=i}_blur(e,t,i,s,r){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",r),this._halfBlur(l,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,l,c){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,y=new Pi(this._lodPlanes[s],p),_=p.uniforms,x=this._sizeLods[i]-1,E=isFinite(r)?Math.PI/(2*x):2*Math.PI/(2*Ih-1),A=r/E,T=isFinite(r)?1+Math.floor(g*A):Ih;T>Ih&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Ih}`);const M=[];let R=0;for(let V=0;V<Ih;++V){const F=V/A,L=Math.exp(-F*F/2);M.push(L),V===0?R+=L:V<T&&(R+=2*L)}for(let V=0;V<M.length;V++)M[V]=M[V]/R;_.envMap.value=e.texture,_.samples.value=T,_.weights.value=M,_.latitudinal.value=l==="latitudinal",c&&(_.poleAxis.value=c);const{_lodMax:O}=this;_.dTheta.value=E,_.mipInt.value=O-i;const D=this._sizeLods[s],H=3*D*(s>O-sp?s-O+sp:0),I=4*(this._cubeSize-D);a_(t,H,I,3*D,2*D),d.setRenderTarget(t),d.render(y,sE)}}function ck(n){const e=[],t=[],i=[];let s=n;const r=n-sp+1+iR.length;for(let l=0;l<r;l++){const c=Math.pow(2,s);t.push(c);let d=1/c;l>n-sp?d=iR[l-n+sp-1]:l===0&&(d=0),i.push(d);const p=1/(c-2),g=-p,y=1+p,_=[g,g,y,g,y,y,g,g,y,y,g,y],x=6,E=6,A=3,T=2,M=1,R=new Float32Array(A*E*x),O=new Float32Array(T*E*x),D=new Float32Array(M*E*x);for(let I=0;I<x;I++){const V=I%3*2/3-1,F=I>2?0:-1,L=[V,F,0,V+2/3,F,0,V+2/3,F+1,0,V,F,0,V+2/3,F+1,0,V,F+1,0];R.set(L,A*E*I),O.set(_,T*E*I);const P=[I,I,I,I,I,I];D.set(P,M*E*I)}const H=new bn;H.setAttribute("position",new li(R,A)),H.setAttribute("uv",new li(O,T)),H.setAttribute("faceIndex",new li(D,M)),e.push(H),s>sp&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function rR(n,e,t){const i=new Xr(n,e,t);return i.texture.mapping=Tp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function a_(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function uk(n,e,t){const i=new Float32Array(Ih),s=new ee(0,1,0);return new Ba({name:"SphericalGaussianBlur",defines:{n:Ih,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:rT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function oR(){return new Ba({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function lR(){return new Ba({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gl,depthTest:!1,depthWrite:!1})}function rT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hk(n){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){const d=c.mapping,p=d===hp||d===Jg,g=d===_l||d===gu;if(p||g){let y=e.get(c);const _=y!==void 0?y.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==_)return t===null&&(t=new y1(n)),y=p?t.fromEquirectangular(c,y):t.fromCubemap(c,y),y.texture.pmremVersion=c.pmremVersion,e.set(c,y),y.texture;if(y!==void 0)return y.texture;{const x=c.image;return p&&x&&x.height>0||g&&x&&s(x)?(t===null&&(t=new y1(n)),y=p?t.fromEquirectangular(c):t.fromCubemap(c),y.texture.pmremVersion=c.pmremVersion,e.set(c,y),c.addEventListener("dispose",r),y.texture):null}}}return c}function s(c){let d=0;const p=6;for(let g=0;g<p;g++)c[g]!==void 0&&d++;return d===p}function r(c){const d=c.target;d.removeEventListener("dispose",r);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function fk(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&Xd("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function dk(n,e,t,i){const s={},r=new WeakMap;function l(y){const _=y.target;_.index!==null&&e.remove(_.index);for(const E in _.attributes)e.remove(_.attributes[E]);_.removeEventListener("dispose",l),delete s[_.id];const x=r.get(_);x&&(e.remove(x),r.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function c(y,_){return s[_.id]===!0||(_.addEventListener("dispose",l),s[_.id]=!0,t.memory.geometries++),_}function d(y){const _=y.attributes;for(const x in _)e.update(_[x],n.ARRAY_BUFFER)}function p(y){const _=[],x=y.index,E=y.attributes.position;let A=0;if(x!==null){const R=x.array;A=x.version;for(let O=0,D=R.length;O<D;O+=3){const H=R[O+0],I=R[O+1],V=R[O+2];_.push(H,I,I,V,V,H)}}else if(E!==void 0){const R=E.array;A=E.version;for(let O=0,D=R.length/3-1;O<D;O+=3){const H=O+0,I=O+1,V=O+2;_.push(H,I,I,V,V,H)}}else return;const T=new(hD(_)?UM:NM)(_,1);T.version=A;const M=r.get(y);M&&e.remove(M),r.set(y,T)}function g(y){const _=r.get(y);if(_){const x=y.index;x!==null&&_.version<x.version&&p(y)}else p(y);return r.get(y)}return{get:c,update:d,getWireframeAttribute:g}}function pk(n,e,t){let i;function s(_){i=_}let r,l;function c(_){r=_.type,l=_.bytesPerElement}function d(_,x){n.drawElements(i,x,r,_*l),t.update(x,i,1)}function p(_,x,E){E!==0&&(n.drawElementsInstanced(i,x,r,_*l,E),t.update(x,i,E))}function g(_,x,E){if(E===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,r,_,0,E);let T=0;for(let M=0;M<E;M++)T+=x[M];t.update(T,i,1)}function y(_,x,E,A){if(E===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<_.length;M++)p(_[M]/l,x[M],A[M]);else{T.multiDrawElementsInstancedWEBGL(i,x,0,r,_,0,A,0,E);let M=0;for(let R=0;R<E;R++)M+=x[R]*A[R];t.update(M,i,1)}}this.setMode=s,this.setIndex=c,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function mk(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,l,c){switch(t.calls++,l){case n.TRIANGLES:t.triangles+=c*(r/3);break;case n.LINES:t.lines+=c*(r/2);break;case n.LINE_STRIP:t.lines+=c*(r-1);break;case n.LINE_LOOP:t.lines+=c*r;break;case n.POINTS:t.points+=c*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function gk(n,e,t){const i=new WeakMap,s=new Hn;function r(l,c,d){const p=l.morphTargetInfluences,g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,y=g!==void 0?g.length:0;let _=i.get(c);if(_===void 0||_.count!==y){let P=function(){F.dispose(),i.delete(c),c.removeEventListener("dispose",P)};var x=P;_!==void 0&&_.texture.dispose();const E=c.morphAttributes.position!==void 0,A=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],R=c.morphAttributes.normal||[],O=c.morphAttributes.color||[];let D=0;E===!0&&(D=1),A===!0&&(D=2),T===!0&&(D=3);let H=c.attributes.position.count*D,I=1;H>e.maxTextureSize&&(I=Math.ceil(H/e.maxTextureSize),H=e.maxTextureSize);const V=new Float32Array(H*I*4*y),F=new N0(V,H,I,y);F.type=Ii,F.needsUpdate=!0;const L=D*4;for(let Z=0;Z<y;Z++){const de=M[Z],se=R[Z],he=O[Z],xe=H*I*4*Z;for(let k=0;k<de.count;k++){const te=k*L;E===!0&&(s.fromBufferAttribute(de,k),V[xe+te+0]=s.x,V[xe+te+1]=s.y,V[xe+te+2]=s.z,V[xe+te+3]=0),A===!0&&(s.fromBufferAttribute(se,k),V[xe+te+4]=s.x,V[xe+te+5]=s.y,V[xe+te+6]=s.z,V[xe+te+7]=0),T===!0&&(s.fromBufferAttribute(he,k),V[xe+te+8]=s.x,V[xe+te+9]=s.y,V[xe+te+10]=s.z,V[xe+te+11]=he.itemSize===4?s.w:1)}}_={count:y,texture:F,size:new Je(H,I)},i.set(c,_),c.addEventListener("dispose",P)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",l.morphTexture,t);else{let E=0;for(let T=0;T<p.length;T++)E+=p[T];const A=c.morphTargetsRelative?1:1-E;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",p)}d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}return{update:r}}function vk(n,e,t,i){let s=new WeakMap;function r(d){const p=i.render.frame,g=d.geometry,y=e.get(d,g);if(s.get(y)!==p&&(e.update(y),s.set(y,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",c)===!1&&d.addEventListener("dispose",c),s.get(d)!==p&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),s.set(d,p))),d.isSkinnedMesh){const _=d.skeleton;s.get(_)!==p&&(_.update(),s.set(_,p))}return y}function l(){s=new WeakMap}function c(d){const p=d.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:r,dispose:l}}const gN=new oi,cR=new zM(1,1),vN=new N0,yN=new Xx,_N=new U0,uR=[],hR=[],fR=new Float32Array(16),dR=new Float32Array(9),pR=new Float32Array(4);function Rp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=uR[s];if(r===void 0&&(r=new Float32Array(s),uR[s]=r),e!==0){i.toArray(r,0);for(let l=1,c=0;l!==e;++l)c+=t,n[l].toArray(r,c)}return r}function vs(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ys(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function pb(n,e){let t=hR[e];t===void 0&&(t=new Int32Array(e),hR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function yk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function _k(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vs(t,e))return;n.uniform2fv(this.addr,e),ys(t,e)}}function xk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vs(t,e))return;n.uniform3fv(this.addr,e),ys(t,e)}}function bk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vs(t,e))return;n.uniform4fv(this.addr,e),ys(t,e)}}function Sk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(vs(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ys(t,e)}else{if(vs(t,i))return;pR.set(i),n.uniformMatrix2fv(this.addr,!1,pR),ys(t,i)}}function Ek(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(vs(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ys(t,e)}else{if(vs(t,i))return;dR.set(i),n.uniformMatrix3fv(this.addr,!1,dR),ys(t,i)}}function Mk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(vs(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ys(t,e)}else{if(vs(t,i))return;fR.set(i),n.uniformMatrix4fv(this.addr,!1,fR),ys(t,i)}}function Tk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function wk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vs(t,e))return;n.uniform2iv(this.addr,e),ys(t,e)}}function Ak(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vs(t,e))return;n.uniform3iv(this.addr,e),ys(t,e)}}function Ck(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vs(t,e))return;n.uniform4iv(this.addr,e),ys(t,e)}}function Rk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Ok(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vs(t,e))return;n.uniform2uiv(this.addr,e),ys(t,e)}}function Dk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vs(t,e))return;n.uniform3uiv(this.addr,e),ys(t,e)}}function Nk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vs(t,e))return;n.uniform4uiv(this.addr,e),ys(t,e)}}function Uk(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(cR.compareFunction=OM,r=cR):r=gN,t.setTexture2D(e||r,s)}function Lk(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||yN,s)}function Ik(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||_N,s)}function Pk(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||vN,s)}function Bk(n){switch(n){case 5126:return yk;case 35664:return _k;case 35665:return xk;case 35666:return bk;case 35674:return Sk;case 35675:return Ek;case 35676:return Mk;case 5124:case 35670:return Tk;case 35667:case 35671:return wk;case 35668:case 35672:return Ak;case 35669:case 35673:return Ck;case 5125:return Rk;case 36294:return Ok;case 36295:return Dk;case 36296:return Nk;case 35678:case 36198:case 36298:case 36306:case 35682:return Uk;case 35679:case 36299:case 36307:return Lk;case 35680:case 36300:case 36308:case 36293:return Ik;case 36289:case 36303:case 36311:case 36292:return Pk}}function zk(n,e){n.uniform1fv(this.addr,e)}function Fk(n,e){const t=Rp(e,this.size,2);n.uniform2fv(this.addr,t)}function Vk(n,e){const t=Rp(e,this.size,3);n.uniform3fv(this.addr,t)}function Hk(n,e){const t=Rp(e,this.size,4);n.uniform4fv(this.addr,t)}function kk(n,e){const t=Rp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Gk(n,e){const t=Rp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function jk(n,e){const t=Rp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function qk(n,e){n.uniform1iv(this.addr,e)}function Xk(n,e){n.uniform2iv(this.addr,e)}function Wk(n,e){n.uniform3iv(this.addr,e)}function Yk(n,e){n.uniform4iv(this.addr,e)}function Kk(n,e){n.uniform1uiv(this.addr,e)}function Zk(n,e){n.uniform2uiv(this.addr,e)}function Jk(n,e){n.uniform3uiv(this.addr,e)}function Qk(n,e){n.uniform4uiv(this.addr,e)}function $k(n,e,t){const i=this.cache,s=e.length,r=pb(t,s);vs(i,r)||(n.uniform1iv(this.addr,r),ys(i,r));for(let l=0;l!==s;++l)t.setTexture2D(e[l]||gN,r[l])}function eG(n,e,t){const i=this.cache,s=e.length,r=pb(t,s);vs(i,r)||(n.uniform1iv(this.addr,r),ys(i,r));for(let l=0;l!==s;++l)t.setTexture3D(e[l]||yN,r[l])}function tG(n,e,t){const i=this.cache,s=e.length,r=pb(t,s);vs(i,r)||(n.uniform1iv(this.addr,r),ys(i,r));for(let l=0;l!==s;++l)t.setTextureCube(e[l]||_N,r[l])}function nG(n,e,t){const i=this.cache,s=e.length,r=pb(t,s);vs(i,r)||(n.uniform1iv(this.addr,r),ys(i,r));for(let l=0;l!==s;++l)t.setTexture2DArray(e[l]||vN,r[l])}function iG(n){switch(n){case 5126:return zk;case 35664:return Fk;case 35665:return Vk;case 35666:return Hk;case 35674:return kk;case 35675:return Gk;case 35676:return jk;case 5124:case 35670:return qk;case 35667:case 35671:return Xk;case 35668:case 35672:return Wk;case 35669:case 35673:return Yk;case 5125:return Kk;case 36294:return Zk;case 36295:return Jk;case 36296:return Qk;case 35678:case 36198:case 36298:case 36306:case 35682:return $k;case 35679:case 36299:case 36307:return eG;case 35680:case 36300:case 36308:case 36293:return tG;case 36289:case 36303:case 36311:case 36292:return nG}}class sG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Bk(t.type)}}class aG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=iG(t.type)}}class rG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,l=s.length;r!==l;++r){const c=s[r];c.setValue(e,t[c.id],i)}}}const cE=/(\w+)(\])?(\[|\.)?/g;function mR(n,e){n.seq.push(e),n.map[e.id]=e}function oG(n,e,t){const i=n.name,s=i.length;for(cE.lastIndex=0;;){const r=cE.exec(i),l=cE.lastIndex;let c=r[1];const d=r[2]==="]",p=r[3];if(d&&(c=c|0),p===void 0||p==="["&&l+2===s){mR(t,p===void 0?new sG(c,n,e):new aG(c,n,e));break}else{let y=t.map[c];y===void 0&&(y=new rG(c),mR(t,y)),t=y}}}class C_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),l=e.getUniformLocation(t,r.name);oG(r,l,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,l=t.length;r!==l;++r){const c=t[r],d=i[c.id];d.needsUpdate!==!1&&c.setValue(e,d.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function gR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const lG=37297;let cG=0;function uG(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let l=s;l<r;l++){const c=l+1;i.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return i.join(`
`)}const vR=new gn;function hG(n){Pn._getMatrix(vR,Pn.workingColorSpace,n);const e=`mat3( ${vR.elements.map(t=>t.toFixed(4))} )`;switch(Pn.getTransfer(n)){case n0:return[e,"LinearTransferOETF"];case ei:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function yR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const l=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+uG(n.getShaderSource(e),l)}else return s}function fG(n,e){const t=hG(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function dG(n,e){let t;switch(e){case j3:t="Linear";break;case q3:t="Reinhard";break;case X3:t="Cineon";break;case xM:t="ACESFilmic";break;case Y3:t="AgX";break;case K3:t="Neutral";break;case W3:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const r_=new ee;function pG(){Pn.getLuminanceCoefficients(r_);const n=r_.x.toFixed(4),e=r_.y.toFixed(4),t=r_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function mG(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sg).join(`
`)}function gG(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function vG(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),l=r.name;let c=1;r.type===n.FLOAT_MAT2&&(c=2),r.type===n.FLOAT_MAT3&&(c=3),r.type===n.FLOAT_MAT4&&(c=4),t[l]={type:r.type,location:n.getAttribLocation(e,l),locationSize:c}}return t}function Sg(n){return n!==""}function _R(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yG=/^[ \t]*#include +<([\w\d./]+)>/gm;function _1(n){return n.replace(yG,xG)}const _G=new Map;function xG(n,e){let t=xn[e];if(t===void 0){const i=_G.get(e);if(i!==void 0)t=xn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return _1(t)}const bG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bR(n){return n.replace(bG,SG)}function SG(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function SR(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function EG(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Bx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Rg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Eo&&(e="SHADOWMAP_TYPE_VSM"),e}function MG(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case _l:case gu:e="ENVMAP_TYPE_CUBE";break;case Tp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function TG(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case gu:e="ENVMAP_MODE_REFRACTION";break}return e}function wG(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case C0:e="ENVMAP_BLENDING_MULTIPLY";break;case k3:e="ENVMAP_BLENDING_MIX";break;case G3:e="ENVMAP_BLENDING_ADD";break}return e}function AG(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function CG(n,e,t,i){const s=n.getContext(),r=t.defines;let l=t.vertexShader,c=t.fragmentShader;const d=EG(t),p=MG(t),g=TG(t),y=wG(t),_=AG(t),x=mG(t),E=gG(r),A=s.createProgram();let T,M,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Sg).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Sg).join(`
`),M.length>0&&(M+=`
`)):(T=[SR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sg).join(`
`),M=[SR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vl?"#define TONE_MAPPING":"",t.toneMapping!==vl?xn.tonemapping_pars_fragment:"",t.toneMapping!==vl?dG("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",xn.colorspace_pars_fragment,fG("linearToOutputTexel",t.outputColorSpace),pG(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sg).join(`
`)),l=_1(l),l=_R(l,t),l=xR(l,t),c=_1(c),c=_R(c,t),c=xR(c,t),l=bR(l),c=bR(c),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,T=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",t.glslVersion===u1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===u1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const O=R+T+l,D=R+M+c,H=gR(s,s.VERTEX_SHADER,O),I=gR(s,s.FRAGMENT_SHADER,D);s.attachShader(A,H),s.attachShader(A,I),t.index0AttributeName!==void 0?s.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(A,0,"position"),s.linkProgram(A);function V(Z){if(n.debug.checkShaderErrors){const de=s.getProgramInfoLog(A).trim(),se=s.getShaderInfoLog(H).trim(),he=s.getShaderInfoLog(I).trim();let xe=!0,k=!0;if(s.getProgramParameter(A,s.LINK_STATUS)===!1)if(xe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,A,H,I);else{const te=yR(s,H,"vertex"),Y=yR(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(A,s.VALIDATE_STATUS)+`

Material Name: `+Z.name+`
Material Type: `+Z.type+`

Program Info Log: `+de+`
`+te+`
`+Y)}else de!==""?console.warn("THREE.WebGLProgram: Program Info Log:",de):(se===""||he==="")&&(k=!1);k&&(Z.diagnostics={runnable:xe,programLog:de,vertexShader:{log:se,prefix:T},fragmentShader:{log:he,prefix:M}})}s.deleteShader(H),s.deleteShader(I),F=new C_(s,A),L=vG(s,A)}let F;this.getUniforms=function(){return F===void 0&&V(this),F};let L;this.getAttributes=function(){return L===void 0&&V(this),L};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(A,lG)),P},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=cG++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=H,this.fragmentShader=I,this}let RG=0;class OG{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(r)===!1&&(l.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new DG(e),t.set(e,i)),i}}class DG{constructor(e){this.id=RG++,this.code=e,this.usedTimes=0}}function NG(n,e,t,i,s,r,l){const c=new pp,d=new OG,p=new Set,g=[],y=s.logarithmicDepthBuffer,_=s.vertexTextures;let x=s.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(L){return p.add(L),L===0?"uv":`uv${L}`}function T(L,P,Z,de,se){const he=de.fog,xe=se.geometry,k=L.isMeshStandardMaterial?de.environment:null,te=(L.isMeshStandardMaterial?t:e).get(L.envMap||k),Y=te&&te.mapping===Tp?te.image.height:null,fe=E[L.type];L.precision!==null&&(x=s.getMaxPrecision(L.precision),x!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",x,"instead."));const ve=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,X=ve!==void 0?ve.length:0;let oe=0;xe.morphAttributes.position!==void 0&&(oe=1),xe.morphAttributes.normal!==void 0&&(oe=2),xe.morphAttributes.color!==void 0&&(oe=3);let Re,le,Oe,Pe;if(fe){const Sn=wo[fe];Re=Sn.vertexShader,le=Sn.fragmentShader}else Re=L.vertexShader,le=L.fragmentShader,d.update(L),Oe=d.getVertexShaderID(L),Pe=d.getFragmentShaderID(L);const Ve=n.getRenderTarget(),rt=n.state.buffers.depth.getReversed(),Pt=se.isInstancedMesh===!0,wt=se.isBatchedMesh===!0,on=!!L.map,Qe=!!L.matcap,Ke=!!te,$=!!L.aoMap,Mt=!!L.lightMap,et=!!L.bumpMap,dt=!!L.normalMap,st=!!L.displacementMap,zt=!!L.emissiveMap,ot=!!L.metalnessMap,J=!!L.roughnessMap,G=L.anisotropy>0,Se=L.clearcoat>0,Be=L.dispersion>0,Ze=L.iridescence>0,ke=L.sheen>0,Tt=L.transmission>0,ct=G&&!!L.anisotropyMap,vt=Se&&!!L.clearcoatMap,fn=Se&&!!L.clearcoatNormalMap,it=Se&&!!L.clearcoatRoughnessMap,bt=Ze&&!!L.iridescenceMap,Et=Ze&&!!L.iridescenceThicknessMap,ut=ke&&!!L.sheenColorMap,ht=ke&&!!L.sheenRoughnessMap,Ft=!!L.specularMap,Ut=!!L.specularColorMap,Yt=!!L.specularIntensityMap,ge=Tt&&!!L.transmissionMap,De=Tt&&!!L.thicknessMap,Ue=!!L.gradientMap,Xe=!!L.alphaMap,lt=L.alphaTest>0,ft=!!L.alphaHash,Wt=!!L.extensions;let Kn=vl;L.toneMapped&&(Ve===null||Ve.isXRRenderTarget===!0)&&(Kn=n.toneMapping);const ci={shaderID:fe,shaderType:L.type,shaderName:L.name,vertexShader:Re,fragmentShader:le,defines:L.defines,customVertexShaderID:Oe,customFragmentShaderID:Pe,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:x,batching:wt,batchingColor:wt&&se._colorsTexture!==null,instancing:Pt,instancingColor:Pt&&se.instanceColor!==null,instancingMorph:Pt&&se.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:Ve===null?n.outputColorSpace:Ve.isXRRenderTarget===!0?Ve.texture.colorSpace:Oo,alphaToCoverage:!!L.alphaToCoverage,map:on,matcap:Qe,envMap:Ke,envMapMode:Ke&&te.mapping,envMapCubeUVHeight:Y,aoMap:$,lightMap:Mt,bumpMap:et,normalMap:dt,displacementMap:_&&st,emissiveMap:zt,normalMapObjectSpace:dt&&L.normalMapType===nD,normalMapTangentSpace:dt&&L.normalMapType===_u,metalnessMap:ot,roughnessMap:J,anisotropy:G,anisotropyMap:ct,clearcoat:Se,clearcoatMap:vt,clearcoatNormalMap:fn,clearcoatRoughnessMap:it,dispersion:Be,iridescence:Ze,iridescenceMap:bt,iridescenceThicknessMap:Et,sheen:ke,sheenColorMap:ut,sheenRoughnessMap:ht,specularMap:Ft,specularColorMap:Ut,specularIntensityMap:Yt,transmission:Tt,transmissionMap:ge,thicknessMap:De,gradientMap:Ue,opaque:L.transparent===!1&&L.blending===Zh&&L.alphaToCoverage===!1,alphaMap:Xe,alphaTest:lt,alphaHash:ft,combine:L.combine,mapUv:on&&A(L.map.channel),aoMapUv:$&&A(L.aoMap.channel),lightMapUv:Mt&&A(L.lightMap.channel),bumpMapUv:et&&A(L.bumpMap.channel),normalMapUv:dt&&A(L.normalMap.channel),displacementMapUv:st&&A(L.displacementMap.channel),emissiveMapUv:zt&&A(L.emissiveMap.channel),metalnessMapUv:ot&&A(L.metalnessMap.channel),roughnessMapUv:J&&A(L.roughnessMap.channel),anisotropyMapUv:ct&&A(L.anisotropyMap.channel),clearcoatMapUv:vt&&A(L.clearcoatMap.channel),clearcoatNormalMapUv:fn&&A(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:it&&A(L.clearcoatRoughnessMap.channel),iridescenceMapUv:bt&&A(L.iridescenceMap.channel),iridescenceThicknessMapUv:Et&&A(L.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&A(L.sheenColorMap.channel),sheenRoughnessMapUv:ht&&A(L.sheenRoughnessMap.channel),specularMapUv:Ft&&A(L.specularMap.channel),specularColorMapUv:Ut&&A(L.specularColorMap.channel),specularIntensityMapUv:Yt&&A(L.specularIntensityMap.channel),transmissionMapUv:ge&&A(L.transmissionMap.channel),thicknessMapUv:De&&A(L.thicknessMap.channel),alphaMapUv:Xe&&A(L.alphaMap.channel),vertexTangents:!!xe.attributes.tangent&&(dt||G),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,pointsUvs:se.isPoints===!0&&!!xe.attributes.uv&&(on||Xe),fog:!!he,useFog:L.fog===!0,fogExp2:!!he&&he.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:y,reverseDepthBuffer:rt,skinning:se.isSkinnedMesh===!0,morphTargets:xe.morphAttributes.position!==void 0,morphNormals:xe.morphAttributes.normal!==void 0,morphColors:xe.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:oe,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&Z.length>0,shadowMapType:n.shadowMap.type,toneMapping:Kn,decodeVideoTexture:on&&L.map.isVideoTexture===!0&&Pn.getTransfer(L.map.colorSpace)===ei,decodeVideoTextureEmissive:zt&&L.emissiveMap.isVideoTexture===!0&&Pn.getTransfer(L.emissiveMap.colorSpace)===ei,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Ao,flipSided:L.side===Ia,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Wt&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Wt&&L.extensions.multiDraw===!0||wt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return ci.vertexUv1s=p.has(1),ci.vertexUv2s=p.has(2),ci.vertexUv3s=p.has(3),p.clear(),ci}function M(L){const P=[];if(L.shaderID?P.push(L.shaderID):(P.push(L.customVertexShaderID),P.push(L.customFragmentShaderID)),L.defines!==void 0)for(const Z in L.defines)P.push(Z),P.push(L.defines[Z]);return L.isRawShaderMaterial===!1&&(R(P,L),O(P,L),P.push(n.outputColorSpace)),P.push(L.customProgramCacheKey),P.join()}function R(L,P){L.push(P.precision),L.push(P.outputColorSpace),L.push(P.envMapMode),L.push(P.envMapCubeUVHeight),L.push(P.mapUv),L.push(P.alphaMapUv),L.push(P.lightMapUv),L.push(P.aoMapUv),L.push(P.bumpMapUv),L.push(P.normalMapUv),L.push(P.displacementMapUv),L.push(P.emissiveMapUv),L.push(P.metalnessMapUv),L.push(P.roughnessMapUv),L.push(P.anisotropyMapUv),L.push(P.clearcoatMapUv),L.push(P.clearcoatNormalMapUv),L.push(P.clearcoatRoughnessMapUv),L.push(P.iridescenceMapUv),L.push(P.iridescenceThicknessMapUv),L.push(P.sheenColorMapUv),L.push(P.sheenRoughnessMapUv),L.push(P.specularMapUv),L.push(P.specularColorMapUv),L.push(P.specularIntensityMapUv),L.push(P.transmissionMapUv),L.push(P.thicknessMapUv),L.push(P.combine),L.push(P.fogExp2),L.push(P.sizeAttenuation),L.push(P.morphTargetsCount),L.push(P.morphAttributeCount),L.push(P.numDirLights),L.push(P.numPointLights),L.push(P.numSpotLights),L.push(P.numSpotLightMaps),L.push(P.numHemiLights),L.push(P.numRectAreaLights),L.push(P.numDirLightShadows),L.push(P.numPointLightShadows),L.push(P.numSpotLightShadows),L.push(P.numSpotLightShadowsWithMaps),L.push(P.numLightProbes),L.push(P.shadowMapType),L.push(P.toneMapping),L.push(P.numClippingPlanes),L.push(P.numClipIntersection),L.push(P.depthPacking)}function O(L,P){c.disableAll(),P.supportsVertexTextures&&c.enable(0),P.instancing&&c.enable(1),P.instancingColor&&c.enable(2),P.instancingMorph&&c.enable(3),P.matcap&&c.enable(4),P.envMap&&c.enable(5),P.normalMapObjectSpace&&c.enable(6),P.normalMapTangentSpace&&c.enable(7),P.clearcoat&&c.enable(8),P.iridescence&&c.enable(9),P.alphaTest&&c.enable(10),P.vertexColors&&c.enable(11),P.vertexAlphas&&c.enable(12),P.vertexUv1s&&c.enable(13),P.vertexUv2s&&c.enable(14),P.vertexUv3s&&c.enable(15),P.vertexTangents&&c.enable(16),P.anisotropy&&c.enable(17),P.alphaHash&&c.enable(18),P.batching&&c.enable(19),P.dispersion&&c.enable(20),P.batchingColor&&c.enable(21),L.push(c.mask),c.disableAll(),P.fog&&c.enable(0),P.useFog&&c.enable(1),P.flatShading&&c.enable(2),P.logarithmicDepthBuffer&&c.enable(3),P.reverseDepthBuffer&&c.enable(4),P.skinning&&c.enable(5),P.morphTargets&&c.enable(6),P.morphNormals&&c.enable(7),P.morphColors&&c.enable(8),P.premultipliedAlpha&&c.enable(9),P.shadowMapEnabled&&c.enable(10),P.doubleSided&&c.enable(11),P.flipSided&&c.enable(12),P.useDepthPacking&&c.enable(13),P.dithering&&c.enable(14),P.transmission&&c.enable(15),P.sheen&&c.enable(16),P.opaque&&c.enable(17),P.pointsUvs&&c.enable(18),P.decodeVideoTexture&&c.enable(19),P.decodeVideoTextureEmissive&&c.enable(20),P.alphaToCoverage&&c.enable(21),L.push(c.mask)}function D(L){const P=E[L.type];let Z;if(P){const de=wo[P];Z=gD.clone(de.uniforms)}else Z=L.uniforms;return Z}function H(L,P){let Z;for(let de=0,se=g.length;de<se;de++){const he=g[de];if(he.cacheKey===P){Z=he,++Z.usedTimes;break}}return Z===void 0&&(Z=new CG(n,P,L,r),g.push(Z)),Z}function I(L){if(--L.usedTimes===0){const P=g.indexOf(L);g[P]=g[g.length-1],g.pop(),L.destroy()}}function V(L){d.remove(L)}function F(){d.dispose()}return{getParameters:T,getProgramCacheKey:M,getUniforms:D,acquireProgram:H,releaseProgram:I,releaseShaderCache:V,programs:g,dispose:F}}function UG(){let n=new WeakMap;function e(l){return n.has(l)}function t(l){let c=n.get(l);return c===void 0&&(c={},n.set(l,c)),c}function i(l){n.delete(l)}function s(l,c,d){n.get(l)[c]=d}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:r}}function LG(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function ER(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function MR(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function l(y,_,x,E,A,T){let M=n[e];return M===void 0?(M={id:y.id,object:y,geometry:_,material:x,groupOrder:E,renderOrder:y.renderOrder,z:A,group:T},n[e]=M):(M.id=y.id,M.object=y,M.geometry=_,M.material=x,M.groupOrder=E,M.renderOrder=y.renderOrder,M.z=A,M.group=T),e++,M}function c(y,_,x,E,A,T){const M=l(y,_,x,E,A,T);x.transmission>0?i.push(M):x.transparent===!0?s.push(M):t.push(M)}function d(y,_,x,E,A,T){const M=l(y,_,x,E,A,T);x.transmission>0?i.unshift(M):x.transparent===!0?s.unshift(M):t.unshift(M)}function p(y,_){t.length>1&&t.sort(y||LG),i.length>1&&i.sort(_||ER),s.length>1&&s.sort(_||ER)}function g(){for(let y=e,_=n.length;y<_;y++){const x=n[y];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:c,unshift:d,finish:g,sort:p}}function IG(){let n=new WeakMap;function e(i,s){const r=n.get(i);let l;return r===void 0?(l=new MR,n.set(i,[l])):s>=r.length?(l=new MR,r.push(l)):l=r[s],l}function t(){n=new WeakMap}return{get:e,dispose:t}}function PG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ee,color:new St};break;case"SpotLight":t={position:new ee,direction:new ee,color:new St,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ee,color:new St,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ee,skyColor:new St,groundColor:new St};break;case"RectAreaLight":t={color:new St,position:new ee,halfWidth:new ee,halfHeight:new ee};break}return n[e.id]=t,t}}}function BG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let zG=0;function FG(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function VG(n){const e=new PG,t=BG(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new ee);const s=new ee,r=new nn,l=new nn;function c(p){let g=0,y=0,_=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let x=0,E=0,A=0,T=0,M=0,R=0,O=0,D=0,H=0,I=0,V=0;p.sort(FG);for(let L=0,P=p.length;L<P;L++){const Z=p[L],de=Z.color,se=Z.intensity,he=Z.distance,xe=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)g+=de.r*se,y+=de.g*se,_+=de.b*se;else if(Z.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(Z.sh.coefficients[k],se);V++}else if(Z.isDirectionalLight){const k=e.get(Z);if(k.color.copy(Z.color).multiplyScalar(Z.intensity),Z.castShadow){const te=Z.shadow,Y=t.get(Z);Y.shadowIntensity=te.intensity,Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,i.directionalShadow[x]=Y,i.directionalShadowMap[x]=xe,i.directionalShadowMatrix[x]=Z.shadow.matrix,R++}i.directional[x]=k,x++}else if(Z.isSpotLight){const k=e.get(Z);k.position.setFromMatrixPosition(Z.matrixWorld),k.color.copy(de).multiplyScalar(se),k.distance=he,k.coneCos=Math.cos(Z.angle),k.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),k.decay=Z.decay,i.spot[A]=k;const te=Z.shadow;if(Z.map&&(i.spotLightMap[H]=Z.map,H++,te.updateMatrices(Z),Z.castShadow&&I++),i.spotLightMatrix[A]=te.matrix,Z.castShadow){const Y=t.get(Z);Y.shadowIntensity=te.intensity,Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,i.spotShadow[A]=Y,i.spotShadowMap[A]=xe,D++}A++}else if(Z.isRectAreaLight){const k=e.get(Z);k.color.copy(de).multiplyScalar(se),k.halfWidth.set(Z.width*.5,0,0),k.halfHeight.set(0,Z.height*.5,0),i.rectArea[T]=k,T++}else if(Z.isPointLight){const k=e.get(Z);if(k.color.copy(Z.color).multiplyScalar(Z.intensity),k.distance=Z.distance,k.decay=Z.decay,Z.castShadow){const te=Z.shadow,Y=t.get(Z);Y.shadowIntensity=te.intensity,Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,Y.shadowCameraNear=te.camera.near,Y.shadowCameraFar=te.camera.far,i.pointShadow[E]=Y,i.pointShadowMap[E]=xe,i.pointShadowMatrix[E]=Z.shadow.matrix,O++}i.point[E]=k,E++}else if(Z.isHemisphereLight){const k=e.get(Z);k.skyColor.copy(Z.color).multiplyScalar(se),k.groundColor.copy(Z.groundColor).multiplyScalar(se),i.hemi[M]=k,M++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=_t.LTC_FLOAT_1,i.rectAreaLTC2=_t.LTC_FLOAT_2):(i.rectAreaLTC1=_t.LTC_HALF_1,i.rectAreaLTC2=_t.LTC_HALF_2)),i.ambient[0]=g,i.ambient[1]=y,i.ambient[2]=_;const F=i.hash;(F.directionalLength!==x||F.pointLength!==E||F.spotLength!==A||F.rectAreaLength!==T||F.hemiLength!==M||F.numDirectionalShadows!==R||F.numPointShadows!==O||F.numSpotShadows!==D||F.numSpotMaps!==H||F.numLightProbes!==V)&&(i.directional.length=x,i.spot.length=A,i.rectArea.length=T,i.point.length=E,i.hemi.length=M,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=O,i.pointShadowMap.length=O,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=O,i.spotLightMatrix.length=D+H-I,i.spotLightMap.length=H,i.numSpotLightShadowsWithMaps=I,i.numLightProbes=V,F.directionalLength=x,F.pointLength=E,F.spotLength=A,F.rectAreaLength=T,F.hemiLength=M,F.numDirectionalShadows=R,F.numPointShadows=O,F.numSpotShadows=D,F.numSpotMaps=H,F.numLightProbes=V,i.version=zG++)}function d(p,g){let y=0,_=0,x=0,E=0,A=0;const T=g.matrixWorldInverse;for(let M=0,R=p.length;M<R;M++){const O=p[M];if(O.isDirectionalLight){const D=i.directional[y];D.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),y++}else if(O.isSpotLight){const D=i.spot[x];D.position.setFromMatrixPosition(O.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),x++}else if(O.isRectAreaLight){const D=i.rectArea[E];D.position.setFromMatrixPosition(O.matrixWorld),D.position.applyMatrix4(T),l.identity(),r.copy(O.matrixWorld),r.premultiply(T),l.extractRotation(r),D.halfWidth.set(O.width*.5,0,0),D.halfHeight.set(0,O.height*.5,0),D.halfWidth.applyMatrix4(l),D.halfHeight.applyMatrix4(l),E++}else if(O.isPointLight){const D=i.point[_];D.position.setFromMatrixPosition(O.matrixWorld),D.position.applyMatrix4(T),_++}else if(O.isHemisphereLight){const D=i.hemi[A];D.direction.setFromMatrixPosition(O.matrixWorld),D.direction.transformDirection(T),A++}}}return{setup:c,setupView:d,state:i}}function TR(n){const e=new VG(n),t=[],i=[];function s(g){p.camera=g,t.length=0,i.length=0}function r(g){t.push(g)}function l(g){i.push(g)}function c(){e.setup(t)}function d(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:c,setupLightsView:d,pushLight:r,pushShadow:l}}function HG(n){let e=new WeakMap;function t(s,r=0){const l=e.get(s);let c;return l===void 0?(c=new TR(n),e.set(s,[c])):r>=l.length?(c=new TR(n),l.push(c)):c=l[r],c}function i(){e=new WeakMap}return{get:t,dispose:i}}const kG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jG(n,e,t){let i=new I0;const s=new Je,r=new Je,l=new Hn,c=new XM({depthPacking:tD}),d=new WM,p={},g=t.maxTextureSize,y={[hc]:Ia,[Ia]:hc,[Ao]:Ao},_=new Ba({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:kG,fragmentShader:GG}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const E=new bn;E.setAttribute("position",new li(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Pi(E,_),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bx;let M=this.type;this.render=function(I,V,F){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||I.length===0)return;const L=n.getRenderTarget(),P=n.getActiveCubeFace(),Z=n.getActiveMipmapLevel(),de=n.state;de.setBlending(gl),de.buffers.color.setClear(1,1,1,1),de.buffers.depth.setTest(!0),de.setScissorTest(!1);const se=M!==Eo&&this.type===Eo,he=M===Eo&&this.type!==Eo;for(let xe=0,k=I.length;xe<k;xe++){const te=I[xe],Y=te.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;s.copy(Y.mapSize);const fe=Y.getFrameExtents();if(s.multiply(fe),r.copy(Y.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(r.x=Math.floor(g/fe.x),s.x=r.x*fe.x,Y.mapSize.x=r.x),s.y>g&&(r.y=Math.floor(g/fe.y),s.y=r.y*fe.y,Y.mapSize.y=r.y)),Y.map===null||se===!0||he===!0){const X=this.type!==Eo?{minFilter:js,magFilter:js}:{};Y.map!==null&&Y.map.dispose(),Y.map=new Xr(s.x,s.y,X),Y.map.texture.name=te.name+".shadowMap",Y.camera.updateProjectionMatrix()}n.setRenderTarget(Y.map),n.clear();const ve=Y.getViewportCount();for(let X=0;X<ve;X++){const oe=Y.getViewport(X);l.set(r.x*oe.x,r.y*oe.y,r.x*oe.z,r.y*oe.w),de.viewport(l),Y.updateMatrices(te,X),i=Y.getFrustum(),D(V,F,Y.camera,te,this.type)}Y.isPointLightShadow!==!0&&this.type===Eo&&R(Y,F),Y.needsUpdate=!1}M=this.type,T.needsUpdate=!1,n.setRenderTarget(L,P,Z)};function R(I,V){const F=e.update(A);_.defines.VSM_SAMPLES!==I.blurSamples&&(_.defines.VSM_SAMPLES=I.blurSamples,x.defines.VSM_SAMPLES=I.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Xr(s.x,s.y)),_.uniforms.shadow_pass.value=I.map.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(V,null,F,_,A,null),x.uniforms.shadow_pass.value=I.mapPass.texture,x.uniforms.resolution.value=I.mapSize,x.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(V,null,F,x,A,null)}function O(I,V,F,L){let P=null;const Z=F.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(Z!==void 0)P=Z;else if(P=F.isPointLight===!0?d:c,n.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0){const de=P.uuid,se=V.uuid;let he=p[de];he===void 0&&(he={},p[de]=he);let xe=he[se];xe===void 0&&(xe=P.clone(),he[se]=xe,V.addEventListener("dispose",H)),P=xe}if(P.visible=V.visible,P.wireframe=V.wireframe,L===Eo?P.side=V.shadowSide!==null?V.shadowSide:V.side:P.side=V.shadowSide!==null?V.shadowSide:y[V.side],P.alphaMap=V.alphaMap,P.alphaTest=V.alphaTest,P.map=V.map,P.clipShadows=V.clipShadows,P.clippingPlanes=V.clippingPlanes,P.clipIntersection=V.clipIntersection,P.displacementMap=V.displacementMap,P.displacementScale=V.displacementScale,P.displacementBias=V.displacementBias,P.wireframeLinewidth=V.wireframeLinewidth,P.linewidth=V.linewidth,F.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const de=n.properties.get(P);de.light=F}return P}function D(I,V,F,L,P){if(I.visible===!1)return;if(I.layers.test(V.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===Eo)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,I.matrixWorld);const se=e.update(I),he=I.material;if(Array.isArray(he)){const xe=se.groups;for(let k=0,te=xe.length;k<te;k++){const Y=xe[k],fe=he[Y.materialIndex];if(fe&&fe.visible){const ve=O(I,fe,L,P);I.onBeforeShadow(n,I,V,F,se,ve,Y),n.renderBufferDirect(F,null,se,ve,I,Y),I.onAfterShadow(n,I,V,F,se,ve,Y)}}}else if(he.visible){const xe=O(I,he,L,P);I.onBeforeShadow(n,I,V,F,se,xe,null),n.renderBufferDirect(F,null,se,xe,I,null),I.onAfterShadow(n,I,V,F,se,xe,null)}}const de=I.children;for(let se=0,he=de.length;se<he;se++)D(de[se],V,F,L,P)}function H(I){I.target.removeEventListener("dispose",H);for(const F in p){const L=p[F],P=I.target.uuid;P in L&&(L[P].dispose(),delete L[P])}}}const qG={[F_]:V_,[H_]:j_,[k_]:q_,[ef]:G_,[V_]:F_,[j_]:H_,[q_]:k_,[G_]:ef};function XG(n,e){function t(){let ge=!1;const De=new Hn;let Ue=null;const Xe=new Hn(0,0,0,0);return{setMask:function(lt){Ue!==lt&&!ge&&(n.colorMask(lt,lt,lt,lt),Ue=lt)},setLocked:function(lt){ge=lt},setClear:function(lt,ft,Wt,Kn,ci){ci===!0&&(lt*=Kn,ft*=Kn,Wt*=Kn),De.set(lt,ft,Wt,Kn),Xe.equals(De)===!1&&(n.clearColor(lt,ft,Wt,Kn),Xe.copy(De))},reset:function(){ge=!1,Ue=null,Xe.set(-1,0,0,0)}}}function i(){let ge=!1,De=!1,Ue=null,Xe=null,lt=null;return{setReversed:function(ft){if(De!==ft){const Wt=e.get("EXT_clip_control");De?Wt.clipControlEXT(Wt.LOWER_LEFT_EXT,Wt.ZERO_TO_ONE_EXT):Wt.clipControlEXT(Wt.LOWER_LEFT_EXT,Wt.NEGATIVE_ONE_TO_ONE_EXT);const Kn=lt;lt=null,this.setClear(Kn)}De=ft},getReversed:function(){return De},setTest:function(ft){ft?Ve(n.DEPTH_TEST):rt(n.DEPTH_TEST)},setMask:function(ft){Ue!==ft&&!ge&&(n.depthMask(ft),Ue=ft)},setFunc:function(ft){if(De&&(ft=qG[ft]),Xe!==ft){switch(ft){case F_:n.depthFunc(n.NEVER);break;case V_:n.depthFunc(n.ALWAYS);break;case H_:n.depthFunc(n.LESS);break;case ef:n.depthFunc(n.LEQUAL);break;case k_:n.depthFunc(n.EQUAL);break;case G_:n.depthFunc(n.GEQUAL);break;case j_:n.depthFunc(n.GREATER);break;case q_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Xe=ft}},setLocked:function(ft){ge=ft},setClear:function(ft){lt!==ft&&(De&&(ft=1-ft),n.clearDepth(ft),lt=ft)},reset:function(){ge=!1,Ue=null,Xe=null,lt=null,De=!1}}}function s(){let ge=!1,De=null,Ue=null,Xe=null,lt=null,ft=null,Wt=null,Kn=null,ci=null;return{setTest:function(Sn){ge||(Sn?Ve(n.STENCIL_TEST):rt(n.STENCIL_TEST))},setMask:function(Sn){De!==Sn&&!ge&&(n.stencilMask(Sn),De=Sn)},setFunc:function(Sn,Bi,qs){(Ue!==Sn||Xe!==Bi||lt!==qs)&&(n.stencilFunc(Sn,Bi,qs),Ue=Sn,Xe=Bi,lt=qs)},setOp:function(Sn,Bi,qs){(ft!==Sn||Wt!==Bi||Kn!==qs)&&(n.stencilOp(Sn,Bi,qs),ft=Sn,Wt=Bi,Kn=qs)},setLocked:function(Sn){ge=Sn},setClear:function(Sn){ci!==Sn&&(n.clearStencil(Sn),ci=Sn)},reset:function(){ge=!1,De=null,Ue=null,Xe=null,lt=null,ft=null,Wt=null,Kn=null,ci=null}}}const r=new t,l=new i,c=new s,d=new WeakMap,p=new WeakMap;let g={},y={},_=new WeakMap,x=[],E=null,A=!1,T=null,M=null,R=null,O=null,D=null,H=null,I=null,V=new St(0,0,0),F=0,L=!1,P=null,Z=null,de=null,se=null,he=null;const xe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,te=0;const Y=n.getParameter(n.VERSION);Y.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(Y)[1]),k=te>=1):Y.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),k=te>=2);let fe=null,ve={};const X=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),Re=new Hn().fromArray(X),le=new Hn().fromArray(oe);function Oe(ge,De,Ue,Xe){const lt=new Uint8Array(4),ft=n.createTexture();n.bindTexture(ge,ft),n.texParameteri(ge,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ge,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Wt=0;Wt<Ue;Wt++)ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY?n.texImage3D(De,0,n.RGBA,1,1,Xe,0,n.RGBA,n.UNSIGNED_BYTE,lt):n.texImage2D(De+Wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,lt);return ft}const Pe={};Pe[n.TEXTURE_2D]=Oe(n.TEXTURE_2D,n.TEXTURE_2D,1),Pe[n.TEXTURE_CUBE_MAP]=Oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Pe[n.TEXTURE_2D_ARRAY]=Oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Pe[n.TEXTURE_3D]=Oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ve(n.DEPTH_TEST),l.setFunc(ef),et(!1),dt(s1),Ve(n.CULL_FACE),$(gl);function Ve(ge){g[ge]!==!0&&(n.enable(ge),g[ge]=!0)}function rt(ge){g[ge]!==!1&&(n.disable(ge),g[ge]=!1)}function Pt(ge,De){return y[ge]!==De?(n.bindFramebuffer(ge,De),y[ge]=De,ge===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=De),ge===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=De),!0):!1}function wt(ge,De){let Ue=x,Xe=!1;if(ge){Ue=_.get(De),Ue===void 0&&(Ue=[],_.set(De,Ue));const lt=ge.textures;if(Ue.length!==lt.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let ft=0,Wt=lt.length;ft<Wt;ft++)Ue[ft]=n.COLOR_ATTACHMENT0+ft;Ue.length=lt.length,Xe=!0}}else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,Xe=!0);Xe&&n.drawBuffers(Ue)}function on(ge){return E!==ge?(n.useProgram(ge),E=ge,!0):!1}const Qe={[cu]:n.FUNC_ADD,[T3]:n.FUNC_SUBTRACT,[w3]:n.FUNC_REVERSE_SUBTRACT};Qe[A3]=n.MIN,Qe[C3]=n.MAX;const Ke={[R3]:n.ZERO,[O3]:n.ONE,[D3]:n.SRC_COLOR,[B_]:n.SRC_ALPHA,[B3]:n.SRC_ALPHA_SATURATE,[I3]:n.DST_COLOR,[U3]:n.DST_ALPHA,[N3]:n.ONE_MINUS_SRC_COLOR,[z_]:n.ONE_MINUS_SRC_ALPHA,[P3]:n.ONE_MINUS_DST_COLOR,[L3]:n.ONE_MINUS_DST_ALPHA,[z3]:n.CONSTANT_COLOR,[F3]:n.ONE_MINUS_CONSTANT_COLOR,[V3]:n.CONSTANT_ALPHA,[H3]:n.ONE_MINUS_CONSTANT_ALPHA};function $(ge,De,Ue,Xe,lt,ft,Wt,Kn,ci,Sn){if(ge===gl){A===!0&&(rt(n.BLEND),A=!1);return}if(A===!1&&(Ve(n.BLEND),A=!0),ge!==M3){if(ge!==T||Sn!==L){if((M!==cu||D!==cu)&&(n.blendEquation(n.FUNC_ADD),M=cu,D=cu),Sn)switch(ge){case Zh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case P_:n.blendFunc(n.ONE,n.ONE);break;case a1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case r1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case Zh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case P_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case a1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case r1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}R=null,O=null,H=null,I=null,V.set(0,0,0),F=0,T=ge,L=Sn}return}lt=lt||De,ft=ft||Ue,Wt=Wt||Xe,(De!==M||lt!==D)&&(n.blendEquationSeparate(Qe[De],Qe[lt]),M=De,D=lt),(Ue!==R||Xe!==O||ft!==H||Wt!==I)&&(n.blendFuncSeparate(Ke[Ue],Ke[Xe],Ke[ft],Ke[Wt]),R=Ue,O=Xe,H=ft,I=Wt),(Kn.equals(V)===!1||ci!==F)&&(n.blendColor(Kn.r,Kn.g,Kn.b,ci),V.copy(Kn),F=ci),T=ge,L=!1}function Mt(ge,De){ge.side===Ao?rt(n.CULL_FACE):Ve(n.CULL_FACE);let Ue=ge.side===Ia;De&&(Ue=!Ue),et(Ue),ge.blending===Zh&&ge.transparent===!1?$(gl):$(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),l.setFunc(ge.depthFunc),l.setTest(ge.depthTest),l.setMask(ge.depthWrite),r.setMask(ge.colorWrite);const Xe=ge.stencilWrite;c.setTest(Xe),Xe&&(c.setMask(ge.stencilWriteMask),c.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),c.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),zt(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?Ve(n.SAMPLE_ALPHA_TO_COVERAGE):rt(n.SAMPLE_ALPHA_TO_COVERAGE)}function et(ge){P!==ge&&(ge?n.frontFace(n.CW):n.frontFace(n.CCW),P=ge)}function dt(ge){ge!==b3?(Ve(n.CULL_FACE),ge!==Z&&(ge===s1?n.cullFace(n.BACK):ge===S3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):rt(n.CULL_FACE),Z=ge}function st(ge){ge!==de&&(k&&n.lineWidth(ge),de=ge)}function zt(ge,De,Ue){ge?(Ve(n.POLYGON_OFFSET_FILL),(se!==De||he!==Ue)&&(n.polygonOffset(De,Ue),se=De,he=Ue)):rt(n.POLYGON_OFFSET_FILL)}function ot(ge){ge?Ve(n.SCISSOR_TEST):rt(n.SCISSOR_TEST)}function J(ge){ge===void 0&&(ge=n.TEXTURE0+xe-1),fe!==ge&&(n.activeTexture(ge),fe=ge)}function G(ge,De,Ue){Ue===void 0&&(fe===null?Ue=n.TEXTURE0+xe-1:Ue=fe);let Xe=ve[Ue];Xe===void 0&&(Xe={type:void 0,texture:void 0},ve[Ue]=Xe),(Xe.type!==ge||Xe.texture!==De)&&(fe!==Ue&&(n.activeTexture(Ue),fe=Ue),n.bindTexture(ge,De||Pe[ge]),Xe.type=ge,Xe.texture=De)}function Se(){const ge=ve[fe];ge!==void 0&&ge.type!==void 0&&(n.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function Be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ze(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ke(){try{n.texSubImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Tt(){try{n.texSubImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ct(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function vt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function fn(){try{n.texStorage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function it(){try{n.texStorage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function bt(){try{n.texImage2D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Et(){try{n.texImage3D.apply(n,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ut(ge){Re.equals(ge)===!1&&(n.scissor(ge.x,ge.y,ge.z,ge.w),Re.copy(ge))}function ht(ge){le.equals(ge)===!1&&(n.viewport(ge.x,ge.y,ge.z,ge.w),le.copy(ge))}function Ft(ge,De){let Ue=p.get(De);Ue===void 0&&(Ue=new WeakMap,p.set(De,Ue));let Xe=Ue.get(ge);Xe===void 0&&(Xe=n.getUniformBlockIndex(De,ge.name),Ue.set(ge,Xe))}function Ut(ge,De){const Xe=p.get(De).get(ge);d.get(De)!==Xe&&(n.uniformBlockBinding(De,Xe,ge.__bindingPointIndex),d.set(De,Xe))}function Yt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),l.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},fe=null,ve={},y={},_=new WeakMap,x=[],E=null,A=!1,T=null,M=null,R=null,O=null,D=null,H=null,I=null,V=new St(0,0,0),F=0,L=!1,P=null,Z=null,de=null,se=null,he=null,Re.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),r.reset(),l.reset(),c.reset()}return{buffers:{color:r,depth:l,stencil:c},enable:Ve,disable:rt,bindFramebuffer:Pt,drawBuffers:wt,useProgram:on,setBlending:$,setMaterial:Mt,setFlipSided:et,setCullFace:dt,setLineWidth:st,setPolygonOffset:zt,setScissorTest:ot,activeTexture:J,bindTexture:G,unbindTexture:Se,compressedTexImage2D:Be,compressedTexImage3D:Ze,texImage2D:bt,texImage3D:Et,updateUBOMapping:Ft,uniformBlockBinding:Ut,texStorage2D:fn,texStorage3D:it,texSubImage2D:ke,texSubImage3D:Tt,compressedTexSubImage2D:ct,compressedTexSubImage3D:vt,scissor:ut,viewport:ht,reset:Yt}}function WG(n,e,t,i,s,r,l){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Je,g=new WeakMap;let y;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(J,G){return x?new OffscreenCanvas(J,G):a0("canvas")}function A(J,G,Se){let Be=1;const Ze=ot(J);if((Ze.width>Se||Ze.height>Se)&&(Be=Se/Math.max(Ze.width,Ze.height)),Be<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const ke=Math.floor(Be*Ze.width),Tt=Math.floor(Be*Ze.height);y===void 0&&(y=E(ke,Tt));const ct=G?E(ke,Tt):y;return ct.width=ke,ct.height=Tt,ct.getContext("2d").drawImage(J,0,0,ke,Tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+ke+"x"+Tt+")."),ct}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+")."),J;return J}function T(J){return J.generateMipmaps}function M(J){n.generateMipmap(J)}function R(J){return J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?n.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function O(J,G,Se,Be,Ze=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let ke=G;if(G===n.RED&&(Se===n.FLOAT&&(ke=n.R32F),Se===n.HALF_FLOAT&&(ke=n.R16F),Se===n.UNSIGNED_BYTE&&(ke=n.R8)),G===n.RED_INTEGER&&(Se===n.UNSIGNED_BYTE&&(ke=n.R8UI),Se===n.UNSIGNED_SHORT&&(ke=n.R16UI),Se===n.UNSIGNED_INT&&(ke=n.R32UI),Se===n.BYTE&&(ke=n.R8I),Se===n.SHORT&&(ke=n.R16I),Se===n.INT&&(ke=n.R32I)),G===n.RG&&(Se===n.FLOAT&&(ke=n.RG32F),Se===n.HALF_FLOAT&&(ke=n.RG16F),Se===n.UNSIGNED_BYTE&&(ke=n.RG8)),G===n.RG_INTEGER&&(Se===n.UNSIGNED_BYTE&&(ke=n.RG8UI),Se===n.UNSIGNED_SHORT&&(ke=n.RG16UI),Se===n.UNSIGNED_INT&&(ke=n.RG32UI),Se===n.BYTE&&(ke=n.RG8I),Se===n.SHORT&&(ke=n.RG16I),Se===n.INT&&(ke=n.RG32I)),G===n.RGB_INTEGER&&(Se===n.UNSIGNED_BYTE&&(ke=n.RGB8UI),Se===n.UNSIGNED_SHORT&&(ke=n.RGB16UI),Se===n.UNSIGNED_INT&&(ke=n.RGB32UI),Se===n.BYTE&&(ke=n.RGB8I),Se===n.SHORT&&(ke=n.RGB16I),Se===n.INT&&(ke=n.RGB32I)),G===n.RGBA_INTEGER&&(Se===n.UNSIGNED_BYTE&&(ke=n.RGBA8UI),Se===n.UNSIGNED_SHORT&&(ke=n.RGBA16UI),Se===n.UNSIGNED_INT&&(ke=n.RGBA32UI),Se===n.BYTE&&(ke=n.RGBA8I),Se===n.SHORT&&(ke=n.RGBA16I),Se===n.INT&&(ke=n.RGBA32I)),G===n.RGB&&Se===n.UNSIGNED_INT_5_9_9_9_REV&&(ke=n.RGB9_E5),G===n.RGBA){const Tt=Ze?n0:Pn.getTransfer(Be);Se===n.FLOAT&&(ke=n.RGBA32F),Se===n.HALF_FLOAT&&(ke=n.RGBA16F),Se===n.UNSIGNED_BYTE&&(ke=Tt===ei?n.SRGB8_ALPHA8:n.RGBA8),Se===n.UNSIGNED_SHORT_4_4_4_4&&(ke=n.RGBA4),Se===n.UNSIGNED_SHORT_5_5_5_1&&(ke=n.RGB5_A1)}return(ke===n.R16F||ke===n.R32F||ke===n.RG16F||ke===n.RG32F||ke===n.RGBA16F||ke===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function D(J,G){let Se;return J?G===null||G===xl||G===tf?Se=n.DEPTH24_STENCIL8:G===Ii?Se=n.DEPTH32F_STENCIL8:G===fp&&(Se=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):G===null||G===xl||G===tf?Se=n.DEPTH_COMPONENT24:G===Ii?Se=n.DEPTH_COMPONENT32F:G===fp&&(Se=n.DEPTH_COMPONENT16),Se}function H(J,G){return T(J)===!0||J.isFramebufferTexture&&J.minFilter!==js&&J.minFilter!==ti?Math.log2(Math.max(G.width,G.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?G.mipmaps.length:1}function I(J){const G=J.target;G.removeEventListener("dispose",I),F(G),G.isVideoTexture&&g.delete(G)}function V(J){const G=J.target;G.removeEventListener("dispose",V),P(G)}function F(J){const G=i.get(J);if(G.__webglInit===void 0)return;const Se=J.source,Be=_.get(Se);if(Be){const Ze=Be[G.__cacheKey];Ze.usedTimes--,Ze.usedTimes===0&&L(J),Object.keys(Be).length===0&&_.delete(Se)}i.remove(J)}function L(J){const G=i.get(J);n.deleteTexture(G.__webglTexture);const Se=J.source,Be=_.get(Se);delete Be[G.__cacheKey],l.memory.textures--}function P(J){const G=i.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),i.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++){if(Array.isArray(G.__webglFramebuffer[Be]))for(let Ze=0;Ze<G.__webglFramebuffer[Be].length;Ze++)n.deleteFramebuffer(G.__webglFramebuffer[Be][Ze]);else n.deleteFramebuffer(G.__webglFramebuffer[Be]);G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[Be])}else{if(Array.isArray(G.__webglFramebuffer))for(let Be=0;Be<G.__webglFramebuffer.length;Be++)n.deleteFramebuffer(G.__webglFramebuffer[Be]);else n.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let Be=0;Be<G.__webglColorRenderbuffer.length;Be++)G.__webglColorRenderbuffer[Be]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[Be]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const Se=J.textures;for(let Be=0,Ze=Se.length;Be<Ze;Be++){const ke=i.get(Se[Be]);ke.__webglTexture&&(n.deleteTexture(ke.__webglTexture),l.memory.textures--),i.remove(Se[Be])}i.remove(J)}let Z=0;function de(){Z=0}function se(){const J=Z;return J>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+s.maxTextures),Z+=1,J}function he(J){const G=[];return G.push(J.wrapS),G.push(J.wrapT),G.push(J.wrapR||0),G.push(J.magFilter),G.push(J.minFilter),G.push(J.anisotropy),G.push(J.internalFormat),G.push(J.format),G.push(J.type),G.push(J.generateMipmaps),G.push(J.premultiplyAlpha),G.push(J.flipY),G.push(J.unpackAlignment),G.push(J.colorSpace),G.join()}function xe(J,G){const Se=i.get(J);if(J.isVideoTexture&&st(J),J.isRenderTargetTexture===!1&&J.version>0&&Se.__version!==J.version){const Be=J.image;if(Be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(Se,J,G);return}}t.bindTexture(n.TEXTURE_2D,Se.__webglTexture,n.TEXTURE0+G)}function k(J,G){const Se=i.get(J);if(J.version>0&&Se.__version!==J.version){le(Se,J,G);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Se.__webglTexture,n.TEXTURE0+G)}function te(J,G){const Se=i.get(J);if(J.version>0&&Se.__version!==J.version){le(Se,J,G);return}t.bindTexture(n.TEXTURE_3D,Se.__webglTexture,n.TEXTURE0+G)}function Y(J,G){const Se=i.get(J);if(J.version>0&&Se.__version!==J.version){Oe(Se,J,G);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture,n.TEXTURE0+G)}const fe={[Qg]:n.REPEAT,[rs]:n.CLAMP_TO_EDGE,[$g]:n.MIRRORED_REPEAT},ve={[js]:n.NEAREST,[bM]:n.NEAREST_MIPMAP_NEAREST,[ep]:n.NEAREST_MIPMAP_LINEAR,[ti]:n.LINEAR,[Og]:n.LINEAR_MIPMAP_NEAREST,[dl]:n.LINEAR_MIPMAP_LINEAR},X={[iD]:n.NEVER,[cD]:n.ALWAYS,[sD]:n.LESS,[OM]:n.LEQUAL,[aD]:n.EQUAL,[lD]:n.GEQUAL,[rD]:n.GREATER,[oD]:n.NOTEQUAL};function oe(J,G){if(G.type===Ii&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===ti||G.magFilter===Og||G.magFilter===ep||G.magFilter===dl||G.minFilter===ti||G.minFilter===Og||G.minFilter===ep||G.minFilter===dl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,fe[G.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,fe[G.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,fe[G.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,ve[G.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,ve[G.minFilter]),G.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,X[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===js||G.minFilter!==ep&&G.minFilter!==dl||G.type===Ii&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||i.get(G).__currentAnisotropy){const Se=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,s.getMaxAnisotropy())),i.get(G).__currentAnisotropy=G.anisotropy}}}function Re(J,G){let Se=!1;J.__webglInit===void 0&&(J.__webglInit=!0,G.addEventListener("dispose",I));const Be=G.source;let Ze=_.get(Be);Ze===void 0&&(Ze={},_.set(Be,Ze));const ke=he(G);if(ke!==J.__cacheKey){Ze[ke]===void 0&&(Ze[ke]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,Se=!0),Ze[ke].usedTimes++;const Tt=Ze[J.__cacheKey];Tt!==void 0&&(Ze[J.__cacheKey].usedTimes--,Tt.usedTimes===0&&L(G)),J.__cacheKey=ke,J.__webglTexture=Ze[ke].texture}return Se}function le(J,G,Se){let Be=n.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(Be=n.TEXTURE_2D_ARRAY),G.isData3DTexture&&(Be=n.TEXTURE_3D);const Ze=Re(J,G),ke=G.source;t.bindTexture(Be,J.__webglTexture,n.TEXTURE0+Se);const Tt=i.get(ke);if(ke.version!==Tt.__version||Ze===!0){t.activeTexture(n.TEXTURE0+Se);const ct=Pn.getPrimaries(Pn.workingColorSpace),vt=G.colorSpace===ac?null:Pn.getPrimaries(G.colorSpace),fn=G.colorSpace===ac||ct===vt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,fn);let it=A(G.image,!1,s.maxTextureSize);it=zt(G,it);const bt=r.convert(G.format,G.colorSpace),Et=r.convert(G.type);let ut=O(G.internalFormat,bt,Et,G.colorSpace,G.isVideoTexture);oe(Be,G);let ht;const Ft=G.mipmaps,Ut=G.isVideoTexture!==!0,Yt=Tt.__version===void 0||Ze===!0,ge=ke.dataReady,De=H(G,it);if(G.isDepthTexture)ut=D(G.format===nf,G.type),Yt&&(Ut?t.texStorage2D(n.TEXTURE_2D,1,ut,it.width,it.height):t.texImage2D(n.TEXTURE_2D,0,ut,it.width,it.height,0,bt,Et,null));else if(G.isDataTexture)if(Ft.length>0){Ut&&Yt&&t.texStorage2D(n.TEXTURE_2D,De,ut,Ft[0].width,Ft[0].height);for(let Ue=0,Xe=Ft.length;Ue<Xe;Ue++)ht=Ft[Ue],Ut?ge&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,ht.width,ht.height,bt,Et,ht.data):t.texImage2D(n.TEXTURE_2D,Ue,ut,ht.width,ht.height,0,bt,Et,ht.data);G.generateMipmaps=!1}else Ut?(Yt&&t.texStorage2D(n.TEXTURE_2D,De,ut,it.width,it.height),ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,it.width,it.height,bt,Et,it.data)):t.texImage2D(n.TEXTURE_2D,0,ut,it.width,it.height,0,bt,Et,it.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Ut&&Yt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,ut,Ft[0].width,Ft[0].height,it.depth);for(let Ue=0,Xe=Ft.length;Ue<Xe;Ue++)if(ht=Ft[Ue],G.format!==Ki)if(bt!==null)if(Ut){if(ge)if(G.layerUpdates.size>0){const lt=v1(ht.width,ht.height,G.format,G.type);for(const ft of G.layerUpdates){const Wt=ht.data.subarray(ft*lt/ht.data.BYTES_PER_ELEMENT,(ft+1)*lt/ht.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,ft,ht.width,ht.height,1,bt,Wt)}G.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,ht.width,ht.height,it.depth,bt,ht.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ue,ut,ht.width,ht.height,it.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ut?ge&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,ht.width,ht.height,it.depth,bt,Et,ht.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ue,ut,ht.width,ht.height,it.depth,0,bt,Et,ht.data)}else{Ut&&Yt&&t.texStorage2D(n.TEXTURE_2D,De,ut,Ft[0].width,Ft[0].height);for(let Ue=0,Xe=Ft.length;Ue<Xe;Ue++)ht=Ft[Ue],G.format!==Ki?bt!==null?Ut?ge&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ue,0,0,ht.width,ht.height,bt,ht.data):t.compressedTexImage2D(n.TEXTURE_2D,Ue,ut,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?ge&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,ht.width,ht.height,bt,Et,ht.data):t.texImage2D(n.TEXTURE_2D,Ue,ut,ht.width,ht.height,0,bt,Et,ht.data)}else if(G.isDataArrayTexture)if(Ut){if(Yt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,ut,it.width,it.height,it.depth),ge)if(G.layerUpdates.size>0){const Ue=v1(it.width,it.height,G.format,G.type);for(const Xe of G.layerUpdates){const lt=it.data.subarray(Xe*Ue/it.data.BYTES_PER_ELEMENT,(Xe+1)*Ue/it.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Xe,it.width,it.height,1,bt,Et,lt)}G.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,it.width,it.height,it.depth,bt,Et,it.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ut,it.width,it.height,it.depth,0,bt,Et,it.data);else if(G.isData3DTexture)Ut?(Yt&&t.texStorage3D(n.TEXTURE_3D,De,ut,it.width,it.height,it.depth),ge&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,it.width,it.height,it.depth,bt,Et,it.data)):t.texImage3D(n.TEXTURE_3D,0,ut,it.width,it.height,it.depth,0,bt,Et,it.data);else if(G.isFramebufferTexture){if(Yt)if(Ut)t.texStorage2D(n.TEXTURE_2D,De,ut,it.width,it.height);else{let Ue=it.width,Xe=it.height;for(let lt=0;lt<De;lt++)t.texImage2D(n.TEXTURE_2D,lt,ut,Ue,Xe,0,bt,Et,null),Ue>>=1,Xe>>=1}}else if(Ft.length>0){if(Ut&&Yt){const Ue=ot(Ft[0]);t.texStorage2D(n.TEXTURE_2D,De,ut,Ue.width,Ue.height)}for(let Ue=0,Xe=Ft.length;Ue<Xe;Ue++)ht=Ft[Ue],Ut?ge&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,bt,Et,ht):t.texImage2D(n.TEXTURE_2D,Ue,ut,bt,Et,ht);G.generateMipmaps=!1}else if(Ut){if(Yt){const Ue=ot(it);t.texStorage2D(n.TEXTURE_2D,De,ut,Ue.width,Ue.height)}ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,bt,Et,it)}else t.texImage2D(n.TEXTURE_2D,0,ut,bt,Et,it);T(G)&&M(Be),Tt.__version=ke.version,G.onUpdate&&G.onUpdate(G)}J.__version=G.version}function Oe(J,G,Se){if(G.image.length!==6)return;const Be=Re(J,G),Ze=G.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+Se);const ke=i.get(Ze);if(Ze.version!==ke.__version||Be===!0){t.activeTexture(n.TEXTURE0+Se);const Tt=Pn.getPrimaries(Pn.workingColorSpace),ct=G.colorSpace===ac?null:Pn.getPrimaries(G.colorSpace),vt=G.colorSpace===ac||Tt===ct?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);const fn=G.isCompressedTexture||G.image[0].isCompressedTexture,it=G.image[0]&&G.image[0].isDataTexture,bt=[];for(let Xe=0;Xe<6;Xe++)!fn&&!it?bt[Xe]=A(G.image[Xe],!0,s.maxCubemapSize):bt[Xe]=it?G.image[Xe].image:G.image[Xe],bt[Xe]=zt(G,bt[Xe]);const Et=bt[0],ut=r.convert(G.format,G.colorSpace),ht=r.convert(G.type),Ft=O(G.internalFormat,ut,ht,G.colorSpace),Ut=G.isVideoTexture!==!0,Yt=ke.__version===void 0||Be===!0,ge=Ze.dataReady;let De=H(G,Et);oe(n.TEXTURE_CUBE_MAP,G);let Ue;if(fn){Ut&&Yt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,De,Ft,Et.width,Et.height);for(let Xe=0;Xe<6;Xe++){Ue=bt[Xe].mipmaps;for(let lt=0;lt<Ue.length;lt++){const ft=Ue[lt];G.format!==Ki?ut!==null?Ut?ge&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt,0,0,ft.width,ft.height,ut,ft.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt,Ft,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ut?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt,0,0,ft.width,ft.height,ut,ht,ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt,Ft,ft.width,ft.height,0,ut,ht,ft.data)}}}else{if(Ue=G.mipmaps,Ut&&Yt){Ue.length>0&&De++;const Xe=ot(bt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,De,Ft,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(it){Ut?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,bt[Xe].width,bt[Xe].height,ut,ht,bt[Xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,Ft,bt[Xe].width,bt[Xe].height,0,ut,ht,bt[Xe].data);for(let lt=0;lt<Ue.length;lt++){const Wt=Ue[lt].image[Xe].image;Ut?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt+1,0,0,Wt.width,Wt.height,ut,ht,Wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt+1,Ft,Wt.width,Wt.height,0,ut,ht,Wt.data)}}else{Ut?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,ut,ht,bt[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,Ft,ut,ht,bt[Xe]);for(let lt=0;lt<Ue.length;lt++){const ft=Ue[lt];Ut?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt+1,0,0,ut,ht,ft.image[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,lt+1,Ft,ut,ht,ft.image[Xe])}}}T(G)&&M(n.TEXTURE_CUBE_MAP),ke.__version=Ze.version,G.onUpdate&&G.onUpdate(G)}J.__version=G.version}function Pe(J,G,Se,Be,Ze,ke){const Tt=r.convert(Se.format,Se.colorSpace),ct=r.convert(Se.type),vt=O(Se.internalFormat,Tt,ct,Se.colorSpace),fn=i.get(G),it=i.get(Se);if(it.__renderTarget=G,!fn.__hasExternalTextures){const bt=Math.max(1,G.width>>ke),Et=Math.max(1,G.height>>ke);Ze===n.TEXTURE_3D||Ze===n.TEXTURE_2D_ARRAY?t.texImage3D(Ze,ke,vt,bt,Et,G.depth,0,Tt,ct,null):t.texImage2D(Ze,ke,vt,bt,Et,0,Tt,ct,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),dt(G)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Be,Ze,it.__webglTexture,0,et(G)):(Ze===n.TEXTURE_2D||Ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Be,Ze,it.__webglTexture,ke),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ve(J,G,Se){if(n.bindRenderbuffer(n.RENDERBUFFER,J),G.depthBuffer){const Be=G.depthTexture,Ze=Be&&Be.isDepthTexture?Be.type:null,ke=D(G.stencilBuffer,Ze),Tt=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ct=et(G);dt(G)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ct,ke,G.width,G.height):Se?n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,ke,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,ke,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Tt,n.RENDERBUFFER,J)}else{const Be=G.textures;for(let Ze=0;Ze<Be.length;Ze++){const ke=Be[Ze],Tt=r.convert(ke.format,ke.colorSpace),ct=r.convert(ke.type),vt=O(ke.internalFormat,Tt,ct,ke.colorSpace),fn=et(G);Se&&dt(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,fn,vt,G.width,G.height):dt(G)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,fn,vt,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,vt,G.width,G.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function rt(J,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Be=i.get(G.depthTexture);Be.__renderTarget=G,(!Be.__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),xe(G.depthTexture,0);const Ze=Be.__webglTexture,ke=et(G);if(G.depthTexture.format===Jh)dt(G)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ze,0,ke):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ze,0);else if(G.depthTexture.format===nf)dt(G)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ze,0,ke):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ze,0);else throw new Error("Unknown depthTexture format")}function Pt(J){const G=i.get(J),Se=J.isWebGLCubeRenderTarget===!0;if(G.__boundDepthTexture!==J.depthTexture){const Be=J.depthTexture;if(G.__depthDisposeCallback&&G.__depthDisposeCallback(),Be){const Ze=()=>{delete G.__boundDepthTexture,delete G.__depthDisposeCallback,Be.removeEventListener("dispose",Ze)};Be.addEventListener("dispose",Ze),G.__depthDisposeCallback=Ze}G.__boundDepthTexture=Be}if(J.depthTexture&&!G.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");rt(G.__webglFramebuffer,J)}else if(Se){G.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)if(t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer[Be]),G.__webglDepthbuffer[Be]===void 0)G.__webglDepthbuffer[Be]=n.createRenderbuffer(),Ve(G.__webglDepthbuffer[Be],J,!1);else{const Ze=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ke=G.__webglDepthbuffer[Be];n.bindRenderbuffer(n.RENDERBUFFER,ke),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,ke)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer===void 0)G.__webglDepthbuffer=n.createRenderbuffer(),Ve(G.__webglDepthbuffer,J,!1);else{const Be=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=G.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ze),n.framebufferRenderbuffer(n.FRAMEBUFFER,Be,n.RENDERBUFFER,Ze)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function wt(J,G,Se){const Be=i.get(J);G!==void 0&&Pe(Be.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Se!==void 0&&Pt(J)}function on(J){const G=J.texture,Se=i.get(J),Be=i.get(G);J.addEventListener("dispose",V);const Ze=J.textures,ke=J.isWebGLCubeRenderTarget===!0,Tt=Ze.length>1;if(Tt||(Be.__webglTexture===void 0&&(Be.__webglTexture=n.createTexture()),Be.__version=G.version,l.memory.textures++),ke){Se.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)if(G.mipmaps&&G.mipmaps.length>0){Se.__webglFramebuffer[ct]=[];for(let vt=0;vt<G.mipmaps.length;vt++)Se.__webglFramebuffer[ct][vt]=n.createFramebuffer()}else Se.__webglFramebuffer[ct]=n.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){Se.__webglFramebuffer=[];for(let ct=0;ct<G.mipmaps.length;ct++)Se.__webglFramebuffer[ct]=n.createFramebuffer()}else Se.__webglFramebuffer=n.createFramebuffer();if(Tt)for(let ct=0,vt=Ze.length;ct<vt;ct++){const fn=i.get(Ze[ct]);fn.__webglTexture===void 0&&(fn.__webglTexture=n.createTexture(),l.memory.textures++)}if(J.samples>0&&dt(J)===!1){Se.__webglMultisampledFramebuffer=n.createFramebuffer(),Se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer);for(let ct=0;ct<Ze.length;ct++){const vt=Ze[ct];Se.__webglColorRenderbuffer[ct]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Se.__webglColorRenderbuffer[ct]);const fn=r.convert(vt.format,vt.colorSpace),it=r.convert(vt.type),bt=O(vt.internalFormat,fn,it,vt.colorSpace,J.isXRRenderTarget===!0),Et=et(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,bt,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ct])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(Se.__webglDepthRenderbuffer=n.createRenderbuffer(),Ve(Se.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ke){t.bindTexture(n.TEXTURE_CUBE_MAP,Be.__webglTexture),oe(n.TEXTURE_CUBE_MAP,G);for(let ct=0;ct<6;ct++)if(G.mipmaps&&G.mipmaps.length>0)for(let vt=0;vt<G.mipmaps.length;vt++)Pe(Se.__webglFramebuffer[ct][vt],J,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,vt);else Pe(Se.__webglFramebuffer[ct],J,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0);T(G)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Tt){for(let ct=0,vt=Ze.length;ct<vt;ct++){const fn=Ze[ct],it=i.get(fn);t.bindTexture(n.TEXTURE_2D,it.__webglTexture),oe(n.TEXTURE_2D,fn),Pe(Se.__webglFramebuffer,J,fn,n.COLOR_ATTACHMENT0+ct,n.TEXTURE_2D,0),T(fn)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let ct=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(ct=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ct,Be.__webglTexture),oe(ct,G),G.mipmaps&&G.mipmaps.length>0)for(let vt=0;vt<G.mipmaps.length;vt++)Pe(Se.__webglFramebuffer[vt],J,G,n.COLOR_ATTACHMENT0,ct,vt);else Pe(Se.__webglFramebuffer,J,G,n.COLOR_ATTACHMENT0,ct,0);T(G)&&M(ct),t.unbindTexture()}J.depthBuffer&&Pt(J)}function Qe(J){const G=J.textures;for(let Se=0,Be=G.length;Se<Be;Se++){const Ze=G[Se];if(T(Ze)){const ke=R(J),Tt=i.get(Ze).__webglTexture;t.bindTexture(ke,Tt),M(ke),t.unbindTexture()}}}const Ke=[],$=[];function Mt(J){if(J.samples>0){if(dt(J)===!1){const G=J.textures,Se=J.width,Be=J.height;let Ze=n.COLOR_BUFFER_BIT;const ke=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Tt=i.get(J),ct=G.length>1;if(ct)for(let vt=0;vt<G.length;vt++)t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer);for(let vt=0;vt<G.length;vt++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Ze|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Ze|=n.STENCIL_BUFFER_BIT)),ct){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[vt]);const fn=i.get(G[vt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,fn,0)}n.blitFramebuffer(0,0,Se,Be,0,0,Se,Be,Ze,n.NEAREST),d===!0&&(Ke.length=0,$.length=0,Ke.push(n.COLOR_ATTACHMENT0+vt),J.depthBuffer&&J.resolveDepthBuffer===!1&&(Ke.push(ke),$.push(ke),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,$)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ke))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ct)for(let vt=0;vt<G.length;vt++){t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[vt]);const fn=i.get(G[vt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.TEXTURE_2D,fn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&d){const G=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[G])}}}function et(J){return Math.min(s.maxSamples,J.samples)}function dt(J){const G=i.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function st(J){const G=l.render.frame;g.get(J)!==G&&(g.set(J,G),J.update())}function zt(J,G){const Se=J.colorSpace,Be=J.format,Ze=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||Se!==Oo&&Se!==ac&&(Pn.getTransfer(Se)===ei?(Be!==Ki||Ze!==er)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Se)),G}function ot(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(p.width=J.naturalWidth||J.width,p.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(p.width=J.displayWidth,p.height=J.displayHeight):(p.width=J.width,p.height=J.height),p}this.allocateTextureUnit=se,this.resetTextureUnits=de,this.setTexture2D=xe,this.setTexture2DArray=k,this.setTexture3D=te,this.setTextureCube=Y,this.rebindTextures=wt,this.setupRenderTarget=on,this.updateRenderTargetMipmap=Qe,this.updateMultisampleRenderTarget=Mt,this.setupDepthRenderbuffer=Pt,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=dt}function xN(n,e){function t(i,s=ac){let r;const l=Pn.getTransfer(s);if(i===er)return n.UNSIGNED_BYTE;if(i===Vx)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Hx)return n.UNSIGNED_SHORT_5_5_5_1;if(i===SM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===zx)return n.BYTE;if(i===Fx)return n.SHORT;if(i===fp)return n.UNSIGNED_SHORT;if(i===R0)return n.INT;if(i===xl)return n.UNSIGNED_INT;if(i===Ii)return n.FLOAT;if(i===Ds)return n.HALF_FLOAT;if(i===EM)return n.ALPHA;if(i===MM)return n.RGB;if(i===Ki)return n.RGBA;if(i===TM)return n.LUMINANCE;if(i===wM)return n.LUMINANCE_ALPHA;if(i===Jh)return n.DEPTH_COMPONENT;if(i===nf)return n.DEPTH_STENCIL;if(i===O0)return n.RED;if(i===D0)return n.RED_INTEGER;if(i===AM)return n.RG;if(i===kx)return n.RG_INTEGER;if(i===Gx)return n.RGBA_INTEGER;if(i===Dg||i===Ng||i===Ug||i===Lg)if(l===ei)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===Dg)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ng)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ug)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Lg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===Dg)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ng)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ug)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Lg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===X_||i===W_||i===Y_||i===K_)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===X_)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===W_)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Y_)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===K_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Z_||i===J_||i===Q_)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Z_||i===J_)return l===ei?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Q_)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===$_||i===ex||i===tx||i===nx||i===ix||i===sx||i===ax||i===rx||i===ox||i===lx||i===cx||i===ux||i===hx||i===fx)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===$_)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===ex)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===tx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===nx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ix)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===sx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ax)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===rx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ox)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===lx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===cx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===ux)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===hx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===fx)return l===ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Ig||i===dx||i===px)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===Ig)return l===ei?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===dx)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===px)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===CM||i===mx||i===gx||i===vx)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===Ig)return r.COMPRESSED_RED_RGTC1_EXT;if(i===mx)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===gx)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===vx)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===tf?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const YG=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,KG=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ZG{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new oi,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ba({vertexShader:YG,fragmentShader:KG,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pi(new bu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class JG extends bl{constructor(e,t){super();const i=this;let s=null,r=1,l=null,c="local-floor",d=1,p=null,g=null,y=null,_=null,x=null,E=null;const A=new ZG,T=t.getContextAttributes();let M=null,R=null;const O=[],D=[],H=new Je;let I=null;const V=new Os;V.viewport=new Hn;const F=new Os;F.viewport=new Hn;const L=[V,F],P=new cN;let Z=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let Oe=O[le];return Oe===void 0&&(Oe=new A_,O[le]=Oe),Oe.getTargetRaySpace()},this.getControllerGrip=function(le){let Oe=O[le];return Oe===void 0&&(Oe=new A_,O[le]=Oe),Oe.getGripSpace()},this.getHand=function(le){let Oe=O[le];return Oe===void 0&&(Oe=new A_,O[le]=Oe),Oe.getHandSpace()};function se(le){const Oe=D.indexOf(le.inputSource);if(Oe===-1)return;const Pe=O[Oe];Pe!==void 0&&(Pe.update(le.inputSource,le.frame,p||l),Pe.dispatchEvent({type:le.type,data:le.inputSource}))}function he(){s.removeEventListener("select",se),s.removeEventListener("selectstart",se),s.removeEventListener("selectend",se),s.removeEventListener("squeeze",se),s.removeEventListener("squeezestart",se),s.removeEventListener("squeezeend",se),s.removeEventListener("end",he),s.removeEventListener("inputsourceschange",xe);for(let le=0;le<O.length;le++){const Oe=D[le];Oe!==null&&(D[le]=null,O[le].disconnect(Oe))}Z=null,de=null,A.reset(),e.setRenderTarget(M),x=null,_=null,y=null,s=null,R=null,Re.stop(),i.isPresenting=!1,e.setPixelRatio(I),e.setSize(H.width,H.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){r=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){c=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(le){p=le},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return y},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=async function(le){if(s=le,s!==null){if(M=e.getRenderTarget(),s.addEventListener("select",se),s.addEventListener("selectstart",se),s.addEventListener("selectend",se),s.addEventListener("squeeze",se),s.addEventListener("squeezestart",se),s.addEventListener("squeezeend",se),s.addEventListener("end",he),s.addEventListener("inputsourceschange",xe),T.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(H),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Pe=null,Ve=null,rt=null;T.depth&&(rt=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Pe=T.stencil?nf:Jh,Ve=T.stencil?tf:xl);const Pt={colorFormat:t.RGBA8,depthFormat:rt,scaleFactor:r};y=new XRWebGLBinding(s,t),_=y.createProjectionLayer(Pt),s.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),R=new Xr(_.textureWidth,_.textureHeight,{format:Ki,type:er,depthTexture:new zM(_.textureWidth,_.textureHeight,Ve,void 0,void 0,void 0,void 0,void 0,void 0,Pe),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1})}else{const Pe={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:r};x=new XRWebGLLayer(s,t,Pe),s.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),R=new Xr(x.framebufferWidth,x.framebufferHeight,{format:Ki,type:er,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil})}R.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await s.requestReferenceSpace(c),Re.setContext(s),Re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function xe(le){for(let Oe=0;Oe<le.removed.length;Oe++){const Pe=le.removed[Oe],Ve=D.indexOf(Pe);Ve>=0&&(D[Ve]=null,O[Ve].disconnect(Pe))}for(let Oe=0;Oe<le.added.length;Oe++){const Pe=le.added[Oe];let Ve=D.indexOf(Pe);if(Ve===-1){for(let Pt=0;Pt<O.length;Pt++)if(Pt>=D.length){D.push(Pe),Ve=Pt;break}else if(D[Pt]===null){D[Pt]=Pe,Ve=Pt;break}if(Ve===-1)break}const rt=O[Ve];rt&&rt.connect(Pe)}}const k=new ee,te=new ee;function Y(le,Oe,Pe){k.setFromMatrixPosition(Oe.matrixWorld),te.setFromMatrixPosition(Pe.matrixWorld);const Ve=k.distanceTo(te),rt=Oe.projectionMatrix.elements,Pt=Pe.projectionMatrix.elements,wt=rt[14]/(rt[10]-1),on=rt[14]/(rt[10]+1),Qe=(rt[9]+1)/rt[5],Ke=(rt[9]-1)/rt[5],$=(rt[8]-1)/rt[0],Mt=(Pt[8]+1)/Pt[0],et=wt*$,dt=wt*Mt,st=Ve/(-$+Mt),zt=st*-$;if(Oe.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(zt),le.translateZ(st),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),rt[10]===-1)le.projectionMatrix.copy(Oe.projectionMatrix),le.projectionMatrixInverse.copy(Oe.projectionMatrixInverse);else{const ot=wt+st,J=on+st,G=et-zt,Se=dt+(Ve-zt),Be=Qe*on/J*ot,Ze=Ke*on/J*ot;le.projectionMatrix.makePerspective(G,Se,Be,Ze,ot,J),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function fe(le,Oe){Oe===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(Oe.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(s===null)return;let Oe=le.near,Pe=le.far;A.texture!==null&&(A.depthNear>0&&(Oe=A.depthNear),A.depthFar>0&&(Pe=A.depthFar)),P.near=F.near=V.near=Oe,P.far=F.far=V.far=Pe,(Z!==P.near||de!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),Z=P.near,de=P.far),V.layers.mask=le.layers.mask|2,F.layers.mask=le.layers.mask|4,P.layers.mask=V.layers.mask|F.layers.mask;const Ve=le.parent,rt=P.cameras;fe(P,Ve);for(let Pt=0;Pt<rt.length;Pt++)fe(rt[Pt],Ve);rt.length===2?Y(P,V,F):P.projectionMatrix.copy(V.projectionMatrix),ve(le,P,Ve)};function ve(le,Oe,Pe){Pe===null?le.matrix.copy(Oe.matrixWorld):(le.matrix.copy(Pe.matrixWorld),le.matrix.invert(),le.matrix.multiply(Oe.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(Oe.projectionMatrix),le.projectionMatrixInverse.copy(Oe.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=dp*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(_===null&&x===null))return d},this.setFoveation=function(le){d=le,_!==null&&(_.fixedFoveation=le),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=le)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(P)};let X=null;function oe(le,Oe){if(g=Oe.getViewerPose(p||l),E=Oe,g!==null){const Pe=g.views;x!==null&&(e.setRenderTargetFramebuffer(R,x.framebuffer),e.setRenderTarget(R));let Ve=!1;Pe.length!==P.cameras.length&&(P.cameras.length=0,Ve=!0);for(let wt=0;wt<Pe.length;wt++){const on=Pe[wt];let Qe=null;if(x!==null)Qe=x.getViewport(on);else{const $=y.getViewSubImage(_,on);Qe=$.viewport,wt===0&&(e.setRenderTargetTextures(R,$.colorTexture,_.ignoreDepthValues?void 0:$.depthStencilTexture),e.setRenderTarget(R))}let Ke=L[wt];Ke===void 0&&(Ke=new Os,Ke.layers.enable(wt),Ke.viewport=new Hn,L[wt]=Ke),Ke.matrix.fromArray(on.transform.matrix),Ke.matrix.decompose(Ke.position,Ke.quaternion,Ke.scale),Ke.projectionMatrix.fromArray(on.projectionMatrix),Ke.projectionMatrixInverse.copy(Ke.projectionMatrix).invert(),Ke.viewport.set(Qe.x,Qe.y,Qe.width,Qe.height),wt===0&&(P.matrix.copy(Ke.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ve===!0&&P.cameras.push(Ke)}const rt=s.enabledFeatures;if(rt&&rt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&y){const wt=y.getDepthInformation(Pe[0]);wt&&wt.isValid&&wt.texture&&A.init(e,wt,s.renderState)}}for(let Pe=0;Pe<O.length;Pe++){const Ve=D[Pe],rt=O[Pe];Ve!==null&&rt!==void 0&&rt.update(Ve,Oe,p||l)}X&&X(le,Oe),Oe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Oe}),E=null}const Re=new mN;Re.setAnimationLoop(oe),this.setAnimationLoop=function(le){X=le},this.dispose=function(){}}}const Ch=new xr,QG=new nn;function $G(n,e){function t(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function i(T,M){M.color.getRGB(T.fogColor.value,mD(n)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function s(T,M,R,O,D){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(T,M):M.isMeshToonMaterial?(r(T,M),y(T,M)):M.isMeshPhongMaterial?(r(T,M),g(T,M)):M.isMeshStandardMaterial?(r(T,M),_(T,M),M.isMeshPhysicalMaterial&&x(T,M,D)):M.isMeshMatcapMaterial?(r(T,M),E(T,M)):M.isMeshDepthMaterial?r(T,M):M.isMeshDistanceMaterial?(r(T,M),A(T,M)):M.isMeshNormalMaterial?r(T,M):M.isLineBasicMaterial?(l(T,M),M.isLineDashedMaterial&&c(T,M)):M.isPointsMaterial?d(T,M,R,O):M.isSpriteMaterial?p(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,t(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===Ia&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,t(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===Ia&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,t(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,t(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const R=e.get(M),O=R.envMap,D=R.envMapRotation;O&&(T.envMap.value=O,Ch.copy(D),Ch.x*=-1,Ch.y*=-1,Ch.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(Ch.y*=-1,Ch.z*=-1),T.envMapRotation.value.setFromMatrix4(QG.makeRotationFromEuler(Ch)),T.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,T.aoMapTransform))}function l(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform))}function c(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function d(T,M,R,O){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*R,T.scale.value=O*.5,M.map&&(T.map.value=M.map,t(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function p(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function g(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function y(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function _(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function x(T,M,R){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Ia&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=R.texture,T.transmissionSamplerSize.value.set(R.width,R.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,T.specularIntensityMapTransform))}function E(T,M){M.matcap&&(T.matcap.value=M.matcap)}function A(T,M){const R=e.get(M).light;T.referencePosition.value.setFromMatrixPosition(R.matrixWorld),T.nearDistance.value=R.shadow.camera.near,T.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function ej(n,e,t,i){let s={},r={},l=[];const c=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(R,O){const D=O.program;i.uniformBlockBinding(R,D)}function p(R,O){let D=s[R.id];D===void 0&&(E(R),D=g(R),s[R.id]=D,R.addEventListener("dispose",T));const H=O.program;i.updateUBOMapping(R,H);const I=e.render.frame;r[R.id]!==I&&(_(R),r[R.id]=I)}function g(R){const O=y();R.__bindingPointIndex=O;const D=n.createBuffer(),H=R.__size,I=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,H,I),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,O,D),D}function y(){for(let R=0;R<c;R++)if(l.indexOf(R)===-1)return l.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(R){const O=s[R.id],D=R.uniforms,H=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,O);for(let I=0,V=D.length;I<V;I++){const F=Array.isArray(D[I])?D[I]:[D[I]];for(let L=0,P=F.length;L<P;L++){const Z=F[L];if(x(Z,I,L,H)===!0){const de=Z.__offset,se=Array.isArray(Z.value)?Z.value:[Z.value];let he=0;for(let xe=0;xe<se.length;xe++){const k=se[xe],te=A(k);typeof k=="number"||typeof k=="boolean"?(Z.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,de+he,Z.__data)):k.isMatrix3?(Z.__data[0]=k.elements[0],Z.__data[1]=k.elements[1],Z.__data[2]=k.elements[2],Z.__data[3]=0,Z.__data[4]=k.elements[3],Z.__data[5]=k.elements[4],Z.__data[6]=k.elements[5],Z.__data[7]=0,Z.__data[8]=k.elements[6],Z.__data[9]=k.elements[7],Z.__data[10]=k.elements[8],Z.__data[11]=0):(k.toArray(Z.__data,he),he+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,de,Z.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(R,O,D,H){const I=R.value,V=O+"_"+D;if(H[V]===void 0)return typeof I=="number"||typeof I=="boolean"?H[V]=I:H[V]=I.clone(),!0;{const F=H[V];if(typeof I=="number"||typeof I=="boolean"){if(F!==I)return H[V]=I,!0}else if(F.equals(I)===!1)return F.copy(I),!0}return!1}function E(R){const O=R.uniforms;let D=0;const H=16;for(let V=0,F=O.length;V<F;V++){const L=Array.isArray(O[V])?O[V]:[O[V]];for(let P=0,Z=L.length;P<Z;P++){const de=L[P],se=Array.isArray(de.value)?de.value:[de.value];for(let he=0,xe=se.length;he<xe;he++){const k=se[he],te=A(k),Y=D%H,fe=Y%te.boundary,ve=Y+fe;D+=fe,ve!==0&&H-ve<te.storage&&(D+=H-ve),de.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),de.__offset=D,D+=te.storage}}}const I=D%H;return I>0&&(D+=H-I),R.__size=D,R.__cache={},this}function A(R){const O={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(O.boundary=4,O.storage=4):R.isVector2?(O.boundary=8,O.storage=8):R.isVector3||R.isColor?(O.boundary=16,O.storage=12):R.isVector4?(O.boundary=16,O.storage=16):R.isMatrix3?(O.boundary=48,O.storage=48):R.isMatrix4?(O.boundary=64,O.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),O}function T(R){const O=R.target;O.removeEventListener("dispose",T);const D=l.indexOf(O.__bindingPointIndex);l.splice(D,1),n.deleteBuffer(s[O.id]),delete s[O.id],delete r[O.id]}function M(){for(const R in s)n.deleteBuffer(s[R]);l=[],s={},r={}}return{bind:d,update:p,dispose:M}}class oT{constructor(e={}){const{canvas:t=fD(),context:i=null,depth:s=!0,stencil:r=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reverseDepthBuffer:_=!1}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=l;const E=new Uint32Array(4),A=new Int32Array(4);let T=null,M=null;const R=[],O=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Gs,this.toneMapping=vl,this.toneMappingExposure=1;const D=this;let H=!1,I=0,V=0,F=null,L=-1,P=null;const Z=new Hn,de=new Hn;let se=null;const he=new St(0);let xe=0,k=t.width,te=t.height,Y=1,fe=null,ve=null;const X=new Hn(0,0,k,te),oe=new Hn(0,0,k,te);let Re=!1;const le=new I0;let Oe=!1,Pe=!1;this.transmissionResolutionScale=1;const Ve=new nn,rt=new nn,Pt=new ee,wt=new Hn,on={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Qe=!1;function Ke(){return F===null?Y:1}let $=i;function Mt(z,Q){return t.getContext(z,Q)}try{const z={alpha:!0,depth:s,stencil:r,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Mp}`),t.addEventListener("webglcontextlost",Xe,!1),t.addEventListener("webglcontextrestored",lt,!1),t.addEventListener("webglcontextcreationerror",ft,!1),$===null){const Q="webgl2";if($=Mt(Q,z),$===null)throw Mt(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let et,dt,st,zt,ot,J,G,Se,Be,Ze,ke,Tt,ct,vt,fn,it,bt,Et,ut,ht,Ft,Ut,Yt,ge;function De(){et=new fk($),et.init(),Ut=new xN($,et),dt=new rk($,et,e,Ut),st=new XG($,et),dt.reverseDepthBuffer&&_&&st.buffers.depth.setReversed(!0),zt=new mk($),ot=new UG,J=new WG($,et,st,ot,dt,Ut,zt),G=new lk(D),Se=new hk(D),Be=new SH($),Yt=new sk($,Be),Ze=new dk($,Be,zt,Yt),ke=new vk($,Ze,Be,zt),ut=new gk($,dt,J),it=new ok(ot),Tt=new NG(D,G,Se,et,dt,Yt,it),ct=new $G(D,ot),vt=new IG,fn=new HG(et),Et=new ik(D,G,Se,st,ke,x,d),bt=new jG(D,ke,dt),ge=new ej($,zt,dt,st),ht=new ak($,et,zt),Ft=new pk($,et,zt),zt.programs=Tt.programs,D.capabilities=dt,D.extensions=et,D.properties=ot,D.renderLists=vt,D.shadowMap=bt,D.state=st,D.info=zt}De();const Ue=new JG(D,$);this.xr=Ue,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const z=et.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=et.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(z){z!==void 0&&(Y=z,this.setSize(k,te,!1))},this.getSize=function(z){return z.set(k,te)},this.setSize=function(z,Q,ne=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=z,te=Q,t.width=Math.floor(z*Y),t.height=Math.floor(Q*Y),ne===!0&&(t.style.width=z+"px",t.style.height=Q+"px"),this.setViewport(0,0,z,Q)},this.getDrawingBufferSize=function(z){return z.set(k*Y,te*Y).floor()},this.setDrawingBufferSize=function(z,Q,ne){k=z,te=Q,Y=ne,t.width=Math.floor(z*ne),t.height=Math.floor(Q*ne),this.setViewport(0,0,z,Q)},this.getCurrentViewport=function(z){return z.copy(Z)},this.getViewport=function(z){return z.copy(X)},this.setViewport=function(z,Q,ne,ie){z.isVector4?X.set(z.x,z.y,z.z,z.w):X.set(z,Q,ne,ie),st.viewport(Z.copy(X).multiplyScalar(Y).round())},this.getScissor=function(z){return z.copy(oe)},this.setScissor=function(z,Q,ne,ie){z.isVector4?oe.set(z.x,z.y,z.z,z.w):oe.set(z,Q,ne,ie),st.scissor(de.copy(oe).multiplyScalar(Y).round())},this.getScissorTest=function(){return Re},this.setScissorTest=function(z){st.setScissorTest(Re=z)},this.setOpaqueSort=function(z){fe=z},this.setTransparentSort=function(z){ve=z},this.getClearColor=function(z){return z.copy(Et.getClearColor())},this.setClearColor=function(){Et.setClearColor.apply(Et,arguments)},this.getClearAlpha=function(){return Et.getClearAlpha()},this.setClearAlpha=function(){Et.setClearAlpha.apply(Et,arguments)},this.clear=function(z=!0,Q=!0,ne=!0){let ie=0;if(z){let ce=!1;if(F!==null){const Ee=F.texture.format;ce=Ee===Gx||Ee===kx||Ee===D0}if(ce){const Ee=F.texture.type,Fe=Ee===er||Ee===xl||Ee===fp||Ee===tf||Ee===Vx||Ee===Hx,je=Et.getClearColor(),Ye=Et.getClearAlpha(),pt=je.r,gt=je.g,mt=je.b;Fe?(E[0]=pt,E[1]=gt,E[2]=mt,E[3]=Ye,$.clearBufferuiv($.COLOR,0,E)):(A[0]=pt,A[1]=gt,A[2]=mt,A[3]=Ye,$.clearBufferiv($.COLOR,0,A))}else ie|=$.COLOR_BUFFER_BIT}Q&&(ie|=$.DEPTH_BUFFER_BIT),ne&&(ie|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xe,!1),t.removeEventListener("webglcontextrestored",lt,!1),t.removeEventListener("webglcontextcreationerror",ft,!1),Et.dispose(),vt.dispose(),fn.dispose(),ot.dispose(),G.dispose(),Se.dispose(),ke.dispose(),Yt.dispose(),ge.dispose(),Tt.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",Uo),Ue.removeEventListener("sessionend",Wr),os.stop()};function Xe(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),H=!0}function lt(){console.log("THREE.WebGLRenderer: Context Restored."),H=!1;const z=zt.autoReset,Q=bt.enabled,ne=bt.autoUpdate,ie=bt.needsUpdate,ce=bt.type;De(),zt.autoReset=z,bt.enabled=Q,bt.autoUpdate=ne,bt.needsUpdate=ie,bt.type=ce}function ft(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function Wt(z){const Q=z.target;Q.removeEventListener("dispose",Wt),Kn(Q)}function Kn(z){ci(z),ot.remove(z)}function ci(z){const Q=ot.get(z).programs;Q!==void 0&&(Q.forEach(function(ne){Tt.releaseProgram(ne)}),z.isShaderMaterial&&Tt.releaseShaderCache(z))}this.renderBufferDirect=function(z,Q,ne,ie,ce,Ee){Q===null&&(Q=on);const Fe=ce.isMesh&&ce.matrixWorld.determinant()<0,je=ue(z,Q,ne,ie,ce);st.setMaterial(ie,Fe);let Ye=ne.index,pt=1;if(ie.wireframe===!0){if(Ye=Ze.getWireframeAttribute(ne),Ye===void 0)return;pt=2}const gt=ne.drawRange,mt=ne.attributes.position;let jt=gt.start*pt,Rt=(gt.start+gt.count)*pt;Ee!==null&&(jt=Math.max(jt,Ee.start*pt),Rt=Math.min(Rt,(Ee.start+Ee.count)*pt)),Ye!==null?(jt=Math.max(jt,0),Rt=Math.min(Rt,Ye.count)):mt!=null&&(jt=Math.max(jt,0),Rt=Math.min(Rt,mt.count));const Mn=Rt-jt;if(Mn<0||Mn===1/0)return;Yt.setup(ce,ie,je,ne,Ye);let Nt,At=ht;if(Ye!==null&&(Nt=Be.get(Ye),At=Ft,At.setIndex(Nt)),ce.isMesh)ie.wireframe===!0?(st.setLineWidth(ie.wireframeLinewidth*Ke()),At.setMode($.LINES)):At.setMode($.TRIANGLES);else if(ce.isLine){let Ct=ie.linewidth;Ct===void 0&&(Ct=1),st.setLineWidth(Ct*Ke()),ce.isLineSegments?At.setMode($.LINES):ce.isLineLoop?At.setMode($.LINE_LOOP):At.setMode($.LINE_STRIP)}else ce.isPoints?At.setMode($.POINTS):ce.isSprite&&At.setMode($.TRIANGLES);if(ce.isBatchedMesh)if(ce._multiDrawInstances!==null)At.renderMultiDrawInstances(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount,ce._multiDrawInstances);else if(et.get("WEBGL_multi_draw"))At.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else{const Ct=ce._multiDrawStarts,ni=ce._multiDrawCounts,Jt=ce._multiDrawCount,ln=Ye?Be.get(Ye).bytesPerElement:1,Gn=ot.get(ie).currentProgram.getUniforms();for(let dn=0;dn<Jt;dn++)Gn.setValue($,"_gl_DrawID",dn),At.render(Ct[dn]/ln,ni[dn])}else if(ce.isInstancedMesh)At.renderInstances(jt,Mn,ce.count);else if(ne.isInstancedBufferGeometry){const Ct=ne._maxInstanceCount!==void 0?ne._maxInstanceCount:1/0,ni=Math.min(ne.instanceCount,Ct);At.renderInstances(jt,Mn,ni)}else At.render(jt,Mn)};function Sn(z,Q,ne){z.transparent===!0&&z.side===Ao&&z.forceSinglePass===!1?(z.side=Ia,z.needsUpdate=!0,an(z,Q,ne),z.side=hc,z.needsUpdate=!0,an(z,Q,ne),z.side=Ao):an(z,Q,ne)}this.compile=function(z,Q,ne=null){ne===null&&(ne=z),M=fn.get(ne),M.init(Q),O.push(M),ne.traverseVisible(function(ce){ce.isLight&&ce.layers.test(Q.layers)&&(M.pushLight(ce),ce.castShadow&&M.pushShadow(ce))}),z!==ne&&z.traverseVisible(function(ce){ce.isLight&&ce.layers.test(Q.layers)&&(M.pushLight(ce),ce.castShadow&&M.pushShadow(ce))}),M.setupLights();const ie=new Set;return z.traverse(function(ce){if(!(ce.isMesh||ce.isPoints||ce.isLine||ce.isSprite))return;const Ee=ce.material;if(Ee)if(Array.isArray(Ee))for(let Fe=0;Fe<Ee.length;Fe++){const je=Ee[Fe];Sn(je,ne,ce),ie.add(je)}else Sn(Ee,ne,ce),ie.add(Ee)}),O.pop(),M=null,ie},this.compileAsync=function(z,Q,ne=null){const ie=this.compile(z,Q,ne);return new Promise(ce=>{function Ee(){if(ie.forEach(function(Fe){ot.get(Fe).currentProgram.isReady()&&ie.delete(Fe)}),ie.size===0){ce(z);return}setTimeout(Ee,10)}et.get("KHR_parallel_shader_compile")!==null?Ee():setTimeout(Ee,10)})};let Bi=null;function qs(z){Bi&&Bi(z)}function Uo(){os.stop()}function Wr(){os.start()}const os=new mN;os.setAnimationLoop(qs),typeof self<"u"&&os.setContext(self),this.setAnimationLoop=function(z){Bi=z,Ue.setAnimationLoop(z),z===null?os.stop():os.start()},Ue.addEventListener("sessionstart",Uo),Ue.addEventListener("sessionend",Wr),this.render=function(z,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(Q),Q=Ue.getCamera()),z.isScene===!0&&z.onBeforeRender(D,z,Q,F),M=fn.get(z,O.length),M.init(Q),O.push(M),rt.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),le.setFromProjectionMatrix(rt),Pe=this.localClippingEnabled,Oe=it.init(this.clippingPlanes,Pe),T=vt.get(z,R.length),T.init(),R.push(T),Ue.enabled===!0&&Ue.isPresenting===!0){const Ee=D.xr.getDepthSensingMesh();Ee!==null&&_s(Ee,Q,-1/0,D.sortObjects)}_s(z,Q,0,D.sortObjects),T.finish(),D.sortObjects===!0&&T.sort(fe,ve),Qe=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,Qe&&Et.addToRenderList(T,z),this.info.render.frame++,Oe===!0&&it.beginShadows();const ne=M.state.shadowsArray;bt.render(ne,z,Q),Oe===!0&&it.endShadows(),this.info.autoReset===!0&&this.info.reset();const ie=T.opaque,ce=T.transmissive;if(M.setupLights(),Q.isArrayCamera){const Ee=Q.cameras;if(ce.length>0)for(let Fe=0,je=Ee.length;Fe<je;Fe++){const Ye=Ee[Fe];Zi(ie,ce,z,Ye)}Qe&&Et.render(z);for(let Fe=0,je=Ee.length;Fe<je;Fe++){const Ye=Ee[Fe];fa(T,z,Ye,Ye.viewport)}}else ce.length>0&&Zi(ie,ce,z,Q),Qe&&Et.render(z),fa(T,z,Q);F!==null&&V===0&&(J.updateMultisampleRenderTarget(F),J.updateRenderTargetMipmap(F)),z.isScene===!0&&z.onAfterRender(D,z,Q),Yt.resetDefaultState(),L=-1,P=null,O.pop(),O.length>0?(M=O[O.length-1],Oe===!0&&it.setGlobalState(D.clippingPlanes,M.state.camera)):M=null,R.pop(),R.length>0?T=R[R.length-1]:T=null};function _s(z,Q,ne,ie){if(z.visible===!1)return;if(z.layers.test(Q.layers)){if(z.isGroup)ne=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(Q);else if(z.isLight)M.pushLight(z),z.castShadow&&M.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||le.intersectsSprite(z)){ie&&wt.setFromMatrixPosition(z.matrixWorld).applyMatrix4(rt);const Fe=ke.update(z),je=z.material;je.visible&&T.push(z,Fe,je,ne,wt.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||le.intersectsObject(z))){const Fe=ke.update(z),je=z.material;if(ie&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),wt.copy(z.boundingSphere.center)):(Fe.boundingSphere===null&&Fe.computeBoundingSphere(),wt.copy(Fe.boundingSphere.center)),wt.applyMatrix4(z.matrixWorld).applyMatrix4(rt)),Array.isArray(je)){const Ye=Fe.groups;for(let pt=0,gt=Ye.length;pt<gt;pt++){const mt=Ye[pt],jt=je[mt.materialIndex];jt&&jt.visible&&T.push(z,Fe,jt,ne,wt.z,mt)}}else je.visible&&T.push(z,Fe,je,ne,wt.z,null)}}const Ee=z.children;for(let Fe=0,je=Ee.length;Fe<je;Fe++)_s(Ee[Fe],Q,ne,ie)}function fa(z,Q,ne,ie){const ce=z.opaque,Ee=z.transmissive,Fe=z.transparent;M.setupLightsView(ne),Oe===!0&&it.setGlobalState(D.clippingPlanes,ne),ie&&st.viewport(Z.copy(ie)),ce.length>0&&qt(ce,Q,ne),Ee.length>0&&qt(Ee,Q,ne),Fe.length>0&&qt(Fe,Q,ne),st.buffers.depth.setTest(!0),st.buffers.depth.setMask(!0),st.buffers.color.setMask(!0),st.setPolygonOffset(!1)}function Zi(z,Q,ne,ie){if((ne.isScene===!0?ne.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[ie.id]===void 0&&(M.state.transmissionRenderTarget[ie.id]=new Xr(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")||et.has("EXT_color_buffer_float")?Ds:er,minFilter:dl,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Pn.workingColorSpace}));const Ee=M.state.transmissionRenderTarget[ie.id],Fe=ie.viewport||Z;Ee.setSize(Fe.z*D.transmissionResolutionScale,Fe.w*D.transmissionResolutionScale);const je=D.getRenderTarget();D.setRenderTarget(Ee),D.getClearColor(he),xe=D.getClearAlpha(),xe<1&&D.setClearColor(16777215,.5),D.clear(),Qe&&Et.render(ne);const Ye=D.toneMapping;D.toneMapping=vl;const pt=ie.viewport;if(ie.viewport!==void 0&&(ie.viewport=void 0),M.setupLightsView(ie),Oe===!0&&it.setGlobalState(D.clippingPlanes,ie),qt(z,ne,ie),J.updateMultisampleRenderTarget(Ee),J.updateRenderTargetMipmap(Ee),et.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let mt=0,jt=Q.length;mt<jt;mt++){const Rt=Q[mt],Mn=Rt.object,Nt=Rt.geometry,At=Rt.material,Ct=Rt.group;if(At.side===Ao&&Mn.layers.test(ie.layers)){const ni=At.side;At.side=Ia,At.needsUpdate=!0,ls(Mn,ne,ie,Nt,At,Ct),At.side=ni,At.needsUpdate=!0,gt=!0}}gt===!0&&(J.updateMultisampleRenderTarget(Ee),J.updateRenderTargetMipmap(Ee))}D.setRenderTarget(je),D.setClearColor(he,xe),pt!==void 0&&(ie.viewport=pt),D.toneMapping=Ye}function qt(z,Q,ne){const ie=Q.isScene===!0?Q.overrideMaterial:null;for(let ce=0,Ee=z.length;ce<Ee;ce++){const Fe=z[ce],je=Fe.object,Ye=Fe.geometry,pt=ie===null?Fe.material:ie,gt=Fe.group;je.layers.test(ne.layers)&&ls(je,Q,ne,Ye,pt,gt)}}function ls(z,Q,ne,ie,ce,Ee){z.onBeforeRender(D,Q,ne,ie,ce,Ee),z.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),ce.onBeforeRender(D,Q,ne,ie,z,Ee),ce.transparent===!0&&ce.side===Ao&&ce.forceSinglePass===!1?(ce.side=Ia,ce.needsUpdate=!0,D.renderBufferDirect(ne,Q,ie,ce,z,Ee),ce.side=hc,ce.needsUpdate=!0,D.renderBufferDirect(ne,Q,ie,ce,z,Ee),ce.side=Ao):D.renderBufferDirect(ne,Q,ie,ce,z,Ee),z.onAfterRender(D,Q,ne,ie,ce,Ee)}function an(z,Q,ne){Q.isScene!==!0&&(Q=on);const ie=ot.get(z),ce=M.state.lights,Ee=M.state.shadowsArray,Fe=ce.state.version,je=Tt.getParameters(z,ce.state,Ee,Q,ne),Ye=Tt.getProgramCacheKey(je);let pt=ie.programs;ie.environment=z.isMeshStandardMaterial?Q.environment:null,ie.fog=Q.fog,ie.envMap=(z.isMeshStandardMaterial?Se:G).get(z.envMap||ie.environment),ie.envMapRotation=ie.environment!==null&&z.envMap===null?Q.environmentRotation:z.envMapRotation,pt===void 0&&(z.addEventListener("dispose",Wt),pt=new Map,ie.programs=pt);let gt=pt.get(Ye);if(gt!==void 0){if(ie.currentProgram===gt&&ie.lightsStateVersion===Fe)return K(z,je),gt}else je.uniforms=Tt.getUniforms(z),z.onBeforeCompile(je,D),gt=Tt.acquireProgram(je,Ye),pt.set(Ye,gt),ie.uniforms=je.uniforms;const mt=ie.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(mt.clippingPlanes=it.uniform),K(z,je),ie.needsLights=ze(z),ie.lightsStateVersion=Fe,ie.needsLights&&(mt.ambientLightColor.value=ce.state.ambient,mt.lightProbe.value=ce.state.probe,mt.directionalLights.value=ce.state.directional,mt.directionalLightShadows.value=ce.state.directionalShadow,mt.spotLights.value=ce.state.spot,mt.spotLightShadows.value=ce.state.spotShadow,mt.rectAreaLights.value=ce.state.rectArea,mt.ltc_1.value=ce.state.rectAreaLTC1,mt.ltc_2.value=ce.state.rectAreaLTC2,mt.pointLights.value=ce.state.point,mt.pointLightShadows.value=ce.state.pointShadow,mt.hemisphereLights.value=ce.state.hemi,mt.directionalShadowMap.value=ce.state.directionalShadowMap,mt.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,mt.spotShadowMap.value=ce.state.spotShadowMap,mt.spotLightMatrix.value=ce.state.spotLightMatrix,mt.spotLightMap.value=ce.state.spotLightMap,mt.pointShadowMap.value=ce.state.pointShadowMap,mt.pointShadowMatrix.value=ce.state.pointShadowMatrix),ie.currentProgram=gt,ie.uniformsList=null,gt}function B(z){if(z.uniformsList===null){const Q=z.currentProgram.getUniforms();z.uniformsList=C_.seqWithValue(Q.seq,z.uniforms)}return z.uniformsList}function K(z,Q){const ne=ot.get(z);ne.outputColorSpace=Q.outputColorSpace,ne.batching=Q.batching,ne.batchingColor=Q.batchingColor,ne.instancing=Q.instancing,ne.instancingColor=Q.instancingColor,ne.instancingMorph=Q.instancingMorph,ne.skinning=Q.skinning,ne.morphTargets=Q.morphTargets,ne.morphNormals=Q.morphNormals,ne.morphColors=Q.morphColors,ne.morphTargetsCount=Q.morphTargetsCount,ne.numClippingPlanes=Q.numClippingPlanes,ne.numIntersection=Q.numClipIntersection,ne.vertexAlphas=Q.vertexAlphas,ne.vertexTangents=Q.vertexTangents,ne.toneMapping=Q.toneMapping}function ue(z,Q,ne,ie,ce){Q.isScene!==!0&&(Q=on),J.resetTextureUnits();const Ee=Q.fog,Fe=ie.isMeshStandardMaterial?Q.environment:null,je=F===null?D.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Oo,Ye=(ie.isMeshStandardMaterial?Se:G).get(ie.envMap||Fe),pt=ie.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,gt=!!ne.attributes.tangent&&(!!ie.normalMap||ie.anisotropy>0),mt=!!ne.morphAttributes.position,jt=!!ne.morphAttributes.normal,Rt=!!ne.morphAttributes.color;let Mn=vl;ie.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Mn=D.toneMapping);const Nt=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,At=Nt!==void 0?Nt.length:0,Ct=ot.get(ie),ni=M.state.lights;if(Oe===!0&&(Pe===!0||z!==P)){const zn=z===P&&ie.id===L;it.setState(ie,z,zn)}let Jt=!1;ie.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==ni.state.version||Ct.outputColorSpace!==je||ce.isBatchedMesh&&Ct.batching===!1||!ce.isBatchedMesh&&Ct.batching===!0||ce.isBatchedMesh&&Ct.batchingColor===!0&&ce.colorTexture===null||ce.isBatchedMesh&&Ct.batchingColor===!1&&ce.colorTexture!==null||ce.isInstancedMesh&&Ct.instancing===!1||!ce.isInstancedMesh&&Ct.instancing===!0||ce.isSkinnedMesh&&Ct.skinning===!1||!ce.isSkinnedMesh&&Ct.skinning===!0||ce.isInstancedMesh&&Ct.instancingColor===!0&&ce.instanceColor===null||ce.isInstancedMesh&&Ct.instancingColor===!1&&ce.instanceColor!==null||ce.isInstancedMesh&&Ct.instancingMorph===!0&&ce.morphTexture===null||ce.isInstancedMesh&&Ct.instancingMorph===!1&&ce.morphTexture!==null||Ct.envMap!==Ye||ie.fog===!0&&Ct.fog!==Ee||Ct.numClippingPlanes!==void 0&&(Ct.numClippingPlanes!==it.numPlanes||Ct.numIntersection!==it.numIntersection)||Ct.vertexAlphas!==pt||Ct.vertexTangents!==gt||Ct.morphTargets!==mt||Ct.morphNormals!==jt||Ct.morphColors!==Rt||Ct.toneMapping!==Mn||Ct.morphTargetsCount!==At)&&(Jt=!0):(Jt=!0,Ct.__version=ie.version);let ln=Ct.currentProgram;Jt===!0&&(ln=an(ie,Q,ce));let Gn=!1,dn=!1,Kt=!1;const cn=ln.getUniforms(),pi=Ct.uniforms;if(st.useProgram(ln.program)&&(Gn=!0,dn=!0,Kt=!0),ie.id!==L&&(L=ie.id,dn=!0),Gn||P!==z){st.buffers.depth.getReversed()?(Ve.copy(z.projectionMatrix),Y5(Ve),K5(Ve),cn.setValue($,"projectionMatrix",Ve)):cn.setValue($,"projectionMatrix",z.projectionMatrix),cn.setValue($,"viewMatrix",z.matrixWorldInverse);const Ji=cn.map.cameraPosition;Ji!==void 0&&Ji.setValue($,Pt.setFromMatrixPosition(z.matrixWorld)),dt.logarithmicDepthBuffer&&cn.setValue($,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&cn.setValue($,"isOrthographic",z.isOrthographicCamera===!0),P!==z&&(P=z,dn=!0,Kt=!0)}if(ce.isSkinnedMesh){cn.setOptional($,ce,"bindMatrix"),cn.setOptional($,ce,"bindMatrixInverse");const zn=ce.skeleton;zn&&(zn.boneTexture===null&&zn.computeBoneTexture(),cn.setValue($,"boneTexture",zn.boneTexture,J))}ce.isBatchedMesh&&(cn.setOptional($,ce,"batchingTexture"),cn.setValue($,"batchingTexture",ce._matricesTexture,J),cn.setOptional($,ce,"batchingIdTexture"),cn.setValue($,"batchingIdTexture",ce._indirectTexture,J),cn.setOptional($,ce,"batchingColorTexture"),ce._colorsTexture!==null&&cn.setValue($,"batchingColorTexture",ce._colorsTexture,J));const Bn=ne.morphAttributes;if((Bn.position!==void 0||Bn.normal!==void 0||Bn.color!==void 0)&&ut.update(ce,ne,ln),(dn||Ct.receiveShadow!==ce.receiveShadow)&&(Ct.receiveShadow=ce.receiveShadow,cn.setValue($,"receiveShadow",ce.receiveShadow)),ie.isMeshGouraudMaterial&&ie.envMap!==null&&(pi.envMap.value=Ye,pi.flipEnvMap.value=Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1?-1:1),ie.isMeshStandardMaterial&&ie.envMap===null&&Q.environment!==null&&(pi.envMapIntensity.value=Q.environmentIntensity),dn&&(cn.setValue($,"toneMappingExposure",D.toneMappingExposure),Ct.needsLights&&Ae(pi,Kt),Ee&&ie.fog===!0&&ct.refreshFogUniforms(pi,Ee),ct.refreshMaterialUniforms(pi,ie,Y,te,M.state.transmissionRenderTarget[z.id]),C_.upload($,B(Ct),pi,J)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(C_.upload($,B(Ct),pi,J),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&cn.setValue($,"center",ce.center),cn.setValue($,"modelViewMatrix",ce.modelViewMatrix),cn.setValue($,"normalMatrix",ce.normalMatrix),cn.setValue($,"modelMatrix",ce.matrixWorld),ie.isShaderMaterial||ie.isRawShaderMaterial){const zn=ie.uniformsGroups;for(let Ji=0,tr=zn.length;Ji<tr;Ji++){const Ns=zn[Ji];ge.update(Ns,ln),ge.bind(Ns,ln)}}return ln}function Ae(z,Q){z.ambientLightColor.needsUpdate=Q,z.lightProbe.needsUpdate=Q,z.directionalLights.needsUpdate=Q,z.directionalLightShadows.needsUpdate=Q,z.pointLights.needsUpdate=Q,z.pointLightShadows.needsUpdate=Q,z.spotLights.needsUpdate=Q,z.spotLightShadows.needsUpdate=Q,z.rectAreaLights.needsUpdate=Q,z.hemisphereLights.needsUpdate=Q}function ze(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(z,Q,ne){ot.get(z.texture).__webglTexture=Q,ot.get(z.depthTexture).__webglTexture=ne;const ie=ot.get(z);ie.__hasExternalTextures=!0,ie.__autoAllocateDepthBuffer=ne===void 0,ie.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(z,Q){const ne=ot.get(z);ne.__webglFramebuffer=Q,ne.__useDefaultFramebuffer=Q===void 0};const Ie=$.createFramebuffer();this.setRenderTarget=function(z,Q=0,ne=0){F=z,I=Q,V=ne;let ie=!0,ce=null,Ee=!1,Fe=!1;if(z){const Ye=ot.get(z);if(Ye.__useDefaultFramebuffer!==void 0)st.bindFramebuffer($.FRAMEBUFFER,null),ie=!1;else if(Ye.__webglFramebuffer===void 0)J.setupRenderTarget(z);else if(Ye.__hasExternalTextures)J.rebindTextures(z,ot.get(z.texture).__webglTexture,ot.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){const mt=z.depthTexture;if(Ye.__boundDepthTexture!==mt){if(mt!==null&&ot.has(mt)&&(z.width!==mt.image.width||z.height!==mt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(z)}}const pt=z.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(Fe=!0);const gt=ot.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(gt[Q])?ce=gt[Q][ne]:ce=gt[Q],Ee=!0):z.samples>0&&J.useMultisampledRTT(z)===!1?ce=ot.get(z).__webglMultisampledFramebuffer:Array.isArray(gt)?ce=gt[ne]:ce=gt,Z.copy(z.viewport),de.copy(z.scissor),se=z.scissorTest}else Z.copy(X).multiplyScalar(Y).floor(),de.copy(oe).multiplyScalar(Y).floor(),se=Re;if(ne!==0&&(ce=Ie),st.bindFramebuffer($.FRAMEBUFFER,ce)&&ie&&st.drawBuffers(z,ce),st.viewport(Z),st.scissor(de),st.setScissorTest(se),Ee){const Ye=ot.get(z.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Ye.__webglTexture,ne)}else if(Fe){const Ye=ot.get(z.texture),pt=Q;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,Ye.__webglTexture,ne,pt)}else if(z!==null&&ne!==0){const Ye=ot.get(z.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,Ye.__webglTexture,ne)}L=-1},this.readRenderTargetPixels=function(z,Q,ne,ie,ce,Ee,Fe){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=ot.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Fe!==void 0&&(je=je[Fe]),je){st.bindFramebuffer($.FRAMEBUFFER,je);try{const Ye=z.texture,pt=Ye.format,gt=Ye.type;if(!dt.textureFormatReadable(pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!dt.textureTypeReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=z.width-ie&&ne>=0&&ne<=z.height-ce&&$.readPixels(Q,ne,ie,ce,Ut.convert(pt),Ut.convert(gt),Ee)}finally{const Ye=F!==null?ot.get(F).__webglFramebuffer:null;st.bindFramebuffer($.FRAMEBUFFER,Ye)}}},this.readRenderTargetPixelsAsync=async function(z,Q,ne,ie,ce,Ee,Fe){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let je=ot.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Fe!==void 0&&(je=je[Fe]),je){const Ye=z.texture,pt=Ye.format,gt=Ye.type;if(!dt.textureFormatReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!dt.textureTypeReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Q>=0&&Q<=z.width-ie&&ne>=0&&ne<=z.height-ce){st.bindFramebuffer($.FRAMEBUFFER,je);const mt=$.createBuffer();$.bindBuffer($.PIXEL_PACK_BUFFER,mt),$.bufferData($.PIXEL_PACK_BUFFER,Ee.byteLength,$.STREAM_READ),$.readPixels(Q,ne,ie,ce,Ut.convert(pt),Ut.convert(gt),0);const jt=F!==null?ot.get(F).__webglFramebuffer:null;st.bindFramebuffer($.FRAMEBUFFER,jt);const Rt=$.fenceSync($.SYNC_GPU_COMMANDS_COMPLETE,0);return $.flush(),await W5($,Rt,4),$.bindBuffer($.PIXEL_PACK_BUFFER,mt),$.getBufferSubData($.PIXEL_PACK_BUFFER,0,Ee),$.deleteBuffer(mt),$.deleteSync(Rt),Ee}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(z,Q=null,ne=0){z.isTexture!==!0&&(Xd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Q=arguments[0]||null,z=arguments[1]);const ie=Math.pow(2,-ne),ce=Math.floor(z.image.width*ie),Ee=Math.floor(z.image.height*ie),Fe=Q!==null?Q.x:0,je=Q!==null?Q.y:0;J.setTexture2D(z,0),$.copyTexSubImage2D($.TEXTURE_2D,ne,0,0,Fe,je,ce,Ee),st.unbindTexture()};const tt=$.createFramebuffer(),$e=$.createFramebuffer();this.copyTextureToTexture=function(z,Q,ne=null,ie=null,ce=0,Ee=null){z.isTexture!==!0&&(Xd("WebGLRenderer: copyTextureToTexture function signature has changed."),ie=arguments[0]||null,z=arguments[1],Q=arguments[2],Ee=arguments[3]||0,ne=null),Ee===null&&(ce!==0?(Xd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ee=ce,ce=0):Ee=0);let Fe,je,Ye,pt,gt,mt,jt,Rt,Mn;const Nt=z.isCompressedTexture?z.mipmaps[Ee]:z.image;if(ne!==null)Fe=ne.max.x-ne.min.x,je=ne.max.y-ne.min.y,Ye=ne.isBox3?ne.max.z-ne.min.z:1,pt=ne.min.x,gt=ne.min.y,mt=ne.isBox3?ne.min.z:0;else{const Bn=Math.pow(2,-ce);Fe=Math.floor(Nt.width*Bn),je=Math.floor(Nt.height*Bn),z.isDataArrayTexture?Ye=Nt.depth:z.isData3DTexture?Ye=Math.floor(Nt.depth*Bn):Ye=1,pt=0,gt=0,mt=0}ie!==null?(jt=ie.x,Rt=ie.y,Mn=ie.z):(jt=0,Rt=0,Mn=0);const At=Ut.convert(Q.format),Ct=Ut.convert(Q.type);let ni;Q.isData3DTexture?(J.setTexture3D(Q,0),ni=$.TEXTURE_3D):Q.isDataArrayTexture||Q.isCompressedArrayTexture?(J.setTexture2DArray(Q,0),ni=$.TEXTURE_2D_ARRAY):(J.setTexture2D(Q,0),ni=$.TEXTURE_2D),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Q.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Q.unpackAlignment);const Jt=$.getParameter($.UNPACK_ROW_LENGTH),ln=$.getParameter($.UNPACK_IMAGE_HEIGHT),Gn=$.getParameter($.UNPACK_SKIP_PIXELS),dn=$.getParameter($.UNPACK_SKIP_ROWS),Kt=$.getParameter($.UNPACK_SKIP_IMAGES);$.pixelStorei($.UNPACK_ROW_LENGTH,Nt.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Nt.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,pt),$.pixelStorei($.UNPACK_SKIP_ROWS,gt),$.pixelStorei($.UNPACK_SKIP_IMAGES,mt);const cn=z.isDataArrayTexture||z.isData3DTexture,pi=Q.isDataArrayTexture||Q.isData3DTexture;if(z.isDepthTexture){const Bn=ot.get(z),zn=ot.get(Q),Ji=ot.get(Bn.__renderTarget),tr=ot.get(zn.__renderTarget);st.bindFramebuffer($.READ_FRAMEBUFFER,Ji.__webglFramebuffer),st.bindFramebuffer($.DRAW_FRAMEBUFFER,tr.__webglFramebuffer);for(let Ns=0;Ns<Ye;Ns++)cn&&($.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,ot.get(z).__webglTexture,ce,mt+Ns),$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,ot.get(Q).__webglTexture,Ee,Mn+Ns)),$.blitFramebuffer(pt,gt,Fe,je,jt,Rt,Fe,je,$.DEPTH_BUFFER_BIT,$.NEAREST);st.bindFramebuffer($.READ_FRAMEBUFFER,null),st.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else if(ce!==0||z.isRenderTargetTexture||ot.has(z)){const Bn=ot.get(z),zn=ot.get(Q);st.bindFramebuffer($.READ_FRAMEBUFFER,tt),st.bindFramebuffer($.DRAW_FRAMEBUFFER,$e);for(let Ji=0;Ji<Ye;Ji++)cn?$.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Bn.__webglTexture,ce,mt+Ji):$.framebufferTexture2D($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,Bn.__webglTexture,ce),pi?$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,zn.__webglTexture,Ee,Mn+Ji):$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,zn.__webglTexture,Ee),ce!==0?$.blitFramebuffer(pt,gt,Fe,je,jt,Rt,Fe,je,$.COLOR_BUFFER_BIT,$.NEAREST):pi?$.copyTexSubImage3D(ni,Ee,jt,Rt,Mn+Ji,pt,gt,Fe,je):$.copyTexSubImage2D(ni,Ee,jt,Rt,pt,gt,Fe,je);st.bindFramebuffer($.READ_FRAMEBUFFER,null),st.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else pi?z.isDataTexture||z.isData3DTexture?$.texSubImage3D(ni,Ee,jt,Rt,Mn,Fe,je,Ye,At,Ct,Nt.data):Q.isCompressedArrayTexture?$.compressedTexSubImage3D(ni,Ee,jt,Rt,Mn,Fe,je,Ye,At,Nt.data):$.texSubImage3D(ni,Ee,jt,Rt,Mn,Fe,je,Ye,At,Ct,Nt):z.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Ee,jt,Rt,Fe,je,At,Ct,Nt.data):z.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Ee,jt,Rt,Nt.width,Nt.height,At,Nt.data):$.texSubImage2D($.TEXTURE_2D,Ee,jt,Rt,Fe,je,At,Ct,Nt);$.pixelStorei($.UNPACK_ROW_LENGTH,Jt),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,ln),$.pixelStorei($.UNPACK_SKIP_PIXELS,Gn),$.pixelStorei($.UNPACK_SKIP_ROWS,dn),$.pixelStorei($.UNPACK_SKIP_IMAGES,Kt),Ee===0&&Q.generateMipmaps&&$.generateMipmap(ni),st.unbindTexture()},this.copyTextureToTexture3D=function(z,Q,ne=null,ie=null,ce=0){return z.isTexture!==!0&&(Xd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ne=arguments[0]||null,ie=arguments[1]||null,z=arguments[2],Q=arguments[3],ce=arguments[4]||0),Xd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(z,Q,ne,ie,ce)},this.initRenderTarget=function(z){ot.get(z).__webglFramebuffer===void 0&&J.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?J.setTextureCube(z,0):z.isData3DTexture?J.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?J.setTexture2DArray(z,0):J.setTexture2D(z,0),st.unbindTexture()},this.resetState=function(){I=0,V=0,F=null,st.reset(),Yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Co}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Pn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Pn._getUnpackColorSpace()}}const tj=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:xM,AddEquation:cu,AddOperation:G3,AdditiveAnimationBlendMode:RM,AdditiveBlending:P_,AgXToneMapping:Y3,AlphaFormat:EM,AlwaysCompare:cD,AlwaysDepth:V_,AlwaysStencilFunc:c1,AmbientLight:iN,AnimationAction:fN,AnimationClip:f0,AnimationLoader:yV,AnimationMixer:qV,AnimationObjectGroup:GV,AnimationUtils:pV,ArcCurve:AD,ArrayCamera:cN,ArrowHelper:dH,AttachedBindMode:o1,Audio:uN,AudioAnalyser:UV,AudioContext:$M,AudioListener:OV,AudioLoader:AV,AxesHelper:pH,BackSide:Ia,BasicDepthPacking:eD,BasicShadowMap:E3,BatchedMesh:ED,Bone:PM,BooleanKeyframeTrack:cf,Box2:$V,Box3:Pa,Box3Helper:hH,BoxGeometry:lf,BoxHelper:uH,BufferAttribute:li,BufferGeometry:bn,BufferGeometryLoader:lN,ByteType:zx,Cache:oc,Camera:Wx,CameraHelper:cH,CanvasTexture:zF,CapsuleGeometry:eb,CatmullRomCurve3:CD,CineonToneMapping:X3,CircleGeometry:tb,ClampToEdgeWrapping:rs,Clock:eT,Color:St,ColorKeyframeTrack:ZM,ColorManagement:Pn,CompressedArrayTexture:PF,CompressedCubeTexture:BF,CompressedTexture:Qx,CompressedTextureLoader:_V,ConeGeometry:nb,ConstantAlphaFactor:V3,ConstantColorFactor:z3,Controls:gH,CubeCamera:vD,CubeReflectionMapping:_l,CubeRefractionMapping:gu,CubeTexture:U0,CubeTextureLoader:QD,CubeUVReflectionMapping:Tp,CubicBezierCurve:VM,CubicBezierCurve3:RD,CubicInterpolant:YD,CullFaceBack:s1,CullFaceFront:S3,CullFaceFrontBack:Z4,CullFaceNone:b3,Curve:Do,CurvePath:DD,CustomBlending:M3,CustomToneMapping:W3,CylinderGeometry:Ap,Cylindrical:QV,Data3DTexture:Xx,DataArrayTexture:N0,DataTexture:Ro,DataTextureLoader:JM,DataUtils:jh,DecrementStencilOp:c5,DecrementWrapStencilOp:h5,DefaultLoadingManager:JD,DepthFormat:Jh,DepthStencilFormat:nf,DepthTexture:zM,DetachedBindMode:Z3,DirectionalLight:nN,DirectionalLightHelper:lH,DiscreteInterpolant:KD,DodecahedronGeometry:ib,DoubleSide:Ao,DstAlphaFactor:U3,DstColorFactor:I3,DynamicCopyUsage:w5,DynamicDrawUsage:x5,DynamicReadUsage:E5,EdgesGeometry:ND,EllipseCurve:$x,EqualCompare:aD,EqualDepth:k_,EqualStencilFunc:m5,EquirectangularReflectionMapping:hp,EquirectangularRefractionMapping:Jg,Euler:xr,EventDispatcher:bl,ExtrudeGeometry:ab,FileLoader:_r,Float16BufferAttribute:gF,Float32BufferAttribute:It,FloatType:Ii,Fog:Kx,FogExp2:Yx,FramebufferTexture:IF,FrontSide:hc,Frustum:I0,GLBufferAttribute:JV,GLSL1:C5,GLSL3:u1,GreaterCompare:rD,GreaterDepth:j_,GreaterEqualCompare:lD,GreaterEqualDepth:G_,GreaterEqualStencilFunc:_5,GreaterStencilFunc:v5,GridHelper:rH,Group:np,HalfFloatType:Ds,HemisphereLight:$D,HemisphereLightHelper:aH,IcosahedronGeometry:B0,ImageBitmapLoader:wV,ImageLoader:d0,ImageUtils:dD,IncrementStencilOp:l5,IncrementWrapStencilOp:u5,InstancedBufferAttribute:gp,InstancedBufferGeometry:oN,InstancedInterleavedBuffer:ZV,InstancedMesh:SD,Int16BufferAttribute:pF,Int32BufferAttribute:mF,Int8BufferAttribute:hF,IntType:R0,InterleavedBuffer:Zx,InterleavedBufferAttribute:sf,Interpolant:V0,InterpolateDiscrete:e0,InterpolateLinear:yx,InterpolateSmooth:w_,InvertStencilOp:f5,KeepStencilOp:Nh,KeyframeTrack:No,LOD:xD,LatheGeometry:P0,Layers:pp,LessCompare:sD,LessDepth:H_,LessEqualCompare:OM,LessEqualDepth:ef,LessEqualStencilFunc:g5,LessStencilFunc:p5,Light:Su,LightProbe:rN,Line:vu,Line3:eH,LineBasicMaterial:za,LineCurve:HM,LineCurve3:OD,LineDashedMaterial:qD,LineLoop:MD,LineSegments:Sl,LinearFilter:ti,LinearInterpolant:KM,LinearMipMapLinearFilter:l1,LinearMipMapNearestFilter:$4,LinearMipmapLinearFilter:dl,LinearMipmapNearestFilter:Og,LinearSRGBColorSpace:Oo,LinearToneMapping:j3,LinearTransfer:n0,Loader:Fa,LoaderUtils:m1,LoadingManager:fb,LoopOnce:J3,LoopPingPong:$3,LoopRepeat:Q3,LuminanceAlphaFormat:wM,LuminanceFormat:TM,MOUSE:Y4,Material:ha,MaterialLoader:db,MathUtils:uD,Matrix2:aT,Matrix3:gn,Matrix4:nn,MaxEquation:C3,Mesh:Pi,MeshBasicMaterial:fc,MeshDepthMaterial:XM,MeshDistanceMaterial:WM,MeshLambertMaterial:GD,MeshMatcapMaterial:jD,MeshNormalMaterial:kD,MeshPhongMaterial:VD,MeshPhysicalMaterial:FD,MeshStandardMaterial:qM,MeshToonMaterial:HD,MinEquation:A3,MirroredRepeatWrapping:$g,MixOperation:k3,MultiplyBlending:r1,MultiplyOperation:C0,NearestFilter:js,NearestMipMapLinearFilter:Q4,NearestMipMapNearestFilter:J4,NearestMipmapLinearFilter:ep,NearestMipmapNearestFilter:bM,NeutralToneMapping:K3,NeverCompare:iD,NeverDepth:F_,NeverStencilFunc:d5,NoBlending:gl,NoColorSpace:ac,NoToneMapping:vl,NormalAnimationBlendMode:jx,NormalBlending:Zh,NotEqualCompare:oD,NotEqualDepth:q_,NotEqualStencilFunc:y5,NumberKeyframeTrack:u0,Object3D:kn,ObjectLoader:MV,ObjectSpaceNormalMap:nD,OctahedronGeometry:z0,OneFactor:O3,OneMinusConstantAlphaFactor:H3,OneMinusConstantColorFactor:F3,OneMinusDstAlphaFactor:L3,OneMinusDstColorFactor:P3,OneMinusSrcAlphaFactor:z_,OneMinusSrcColorFactor:N3,OrthographicCamera:Cp,PCFShadowMap:Bx,PCFSoftShadowMap:Rg,PMREMGenerator:y1,Path:r0,PerspectiveCamera:Os,Plane:ou,PlaneGeometry:bu,PlaneHelper:fH,PointLight:tN,PointLightHelper:iH,Points:TD,PointsMaterial:BM,PolarGridHelper:oH,PolyhedronGeometry:xu,PositionalAudio:NV,PropertyBinding:Vn,PropertyMixer:hN,QuadraticBezierCurve:kM,QuadraticBezierCurve3:GM,Quaternion:$a,QuaternionKeyframeTrack:H0,QuaternionLinearInterpolant:ZD,RED_GREEN_RGTC2_Format:gx,RED_RGTC1_Format:CM,REVISION:Mp,RGBADepthPacking:tD,RGBAFormat:Ki,RGBAIntegerFormat:Gx,RGBA_ASTC_10x10_Format:ux,RGBA_ASTC_10x5_Format:ox,RGBA_ASTC_10x6_Format:lx,RGBA_ASTC_10x8_Format:cx,RGBA_ASTC_12x10_Format:hx,RGBA_ASTC_12x12_Format:fx,RGBA_ASTC_4x4_Format:$_,RGBA_ASTC_5x4_Format:ex,RGBA_ASTC_5x5_Format:tx,RGBA_ASTC_6x5_Format:nx,RGBA_ASTC_6x6_Format:ix,RGBA_ASTC_8x5_Format:sx,RGBA_ASTC_8x6_Format:ax,RGBA_ASTC_8x8_Format:rx,RGBA_BPTC_Format:Ig,RGBA_ETC2_EAC_Format:Q_,RGBA_PVRTC_2BPPV1_Format:K_,RGBA_PVRTC_4BPPV1_Format:Y_,RGBA_S3TC_DXT1_Format:Ng,RGBA_S3TC_DXT3_Format:Ug,RGBA_S3TC_DXT5_Format:Lg,RGBDepthPacking:s5,RGBFormat:MM,RGBIntegerFormat:e5,RGB_BPTC_SIGNED_Format:dx,RGB_BPTC_UNSIGNED_Format:px,RGB_ETC1_Format:Z_,RGB_ETC2_Format:J_,RGB_PVRTC_2BPPV1_Format:W_,RGB_PVRTC_4BPPV1_Format:X_,RGB_S3TC_DXT1_Format:Dg,RGDepthPacking:a5,RGFormat:AM,RGIntegerFormat:kx,RawShaderMaterial:zD,Ray:wp,Raycaster:sT,RectAreaLight:sN,RedFormat:O0,RedIntegerFormat:D0,ReinhardToneMapping:q3,RenderTarget:qx,RenderTarget3D:XV,RenderTargetArray:WV,RepeatWrapping:Qg,ReplaceStencilOp:o5,ReverseSubtractEquation:w3,RingGeometry:rb,SIGNED_RED_GREEN_RGTC2_Format:vx,SIGNED_RED_RGTC1_Format:mx,SRGBColorSpace:Gs,SRGBTransfer:ei,Scene:L0,ShaderChunk:xn,ShaderLib:wo,ShaderMaterial:Ba,ShadowMaterial:BD,Shape:$h,ShapeGeometry:ob,ShapePath:mH,ShapeUtils:yl,ShortType:Fx,Skeleton:Jx,SkeletonHelper:nH,SkinnedMesh:bD,Source:Gh,Sphere:ua,SphereGeometry:F0,Spherical:dN,SphericalHarmonics3:aN,SplineCurve:jM,SpotLight:eN,SpotLightHelper:tH,Sprite:_D,SpriteMaterial:IM,SrcAlphaFactor:B_,SrcAlphaSaturateFactor:B3,SrcColorFactor:D3,StaticCopyUsage:T5,StaticDrawUsage:i0,StaticReadUsage:S5,StereoCamera:CV,StreamCopyUsage:A5,StreamDrawUsage:b5,StreamReadUsage:M5,StringKeyframeTrack:uf,SubtractEquation:T3,SubtractiveBlending:a1,TOUCH:K4,TangentSpaceNormalMap:_u,TetrahedronGeometry:lb,Texture:oi,TextureLoader:xV,TextureUtils:bH,TimestampQuery:R5,TorusGeometry:cb,TorusKnotGeometry:ub,Triangle:Ja,TriangleFanDrawMode:i5,TriangleStripDrawMode:n5,TrianglesDrawMode:t5,TubeGeometry:hb,UVMapping:mu,Uint16BufferAttribute:NM,Uint32BufferAttribute:UM,Uint8BufferAttribute:fF,Uint8ClampedBufferAttribute:dF,Uniform:iT,UniformsGroup:KV,UniformsLib:_t,UniformsUtils:gD,UnsignedByteType:er,UnsignedInt248Type:tf,UnsignedInt5999Type:SM,UnsignedIntType:xl,UnsignedShort4444Type:Vx,UnsignedShort5551Type:Hx,UnsignedShortType:fp,VSMShadowMap:Eo,Vector2:Je,Vector3:ee,Vector4:Hn,VectorKeyframeTrack:h0,VideoFrameTexture:LF,VideoTexture:wD,WebGL3DRenderTarget:eF,WebGLArrayRenderTarget:$5,WebGLCoordinateSystem:Co,WebGLCubeRenderTarget:LM,WebGLRenderTarget:Xr,WebGLRenderer:oT,WebGLUtils:xN,WebGPUCoordinateSystem:s0,WebXRController:A_,WireframeGeometry:PD,WrapAroundEnding:t0,ZeroCurvatureEnding:Hh,ZeroFactor:R3,ZeroSlopeEnding:kh,ZeroStencilOp:r5,createCanvasElement:fD},Symbol.toStringTag,{value:"Module"}));var uE={exports:{}},hE={},fE={exports:{}},dE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR;function nj(){if(wR)return dE;wR=1;var n=xp();function e(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,r=n.useLayoutEffect,l=n.useDebugValue;function c(y,_){var x=_(),E=i({inst:{value:x,getSnapshot:_}}),A=E[0].inst,T=E[1];return r(function(){A.value=x,A.getSnapshot=_,d(A)&&T({inst:A})},[y,x,_]),s(function(){return d(A)&&T({inst:A}),y(function(){d(A)&&T({inst:A})})},[y]),l(x),x}function d(y){var _=y.getSnapshot;y=y.value;try{var x=_();return!t(y,x)}catch{return!0}}function p(y,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return dE.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,dE}var AR;function ij(){return AR||(AR=1,fE.exports=nj()),fE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function sj(){if(CR)return hE;CR=1;var n=xp(),e=ij();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return hE.useSyncExternalStoreWithSelector=function(p,g,y,_,x){var E=r(null);if(E.current===null){var A={hasValue:!1,value:null};E.current=A}else A=E.current;E=c(function(){function M(I){if(!R){if(R=!0,O=I,I=_(I),x!==void 0&&A.hasValue){var V=A.value;if(x(V,I))return D=V}return D=I}if(V=D,i(O,I))return V;var F=_(I);return x!==void 0&&x(V,F)?(O=I,V):(O=I,D=F)}var R=!1,O,D,H=y===void 0?null:y;return[function(){return M(g())},H===null?void 0:function(){return M(H())}]},[g,y,_,x]);var T=s(p,E[0],E[1]);return l(function(){A.hasValue=!0,A.value=T},[T]),d(T),T},hE}var RR;function aj(){return RR||(RR=1,uE.exports=sj()),uE.exports}var rj=aj();const oj=E0(rj),OR=n=>{let e;const t=new Set,i=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const _=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(x=>x(e,_))}},s=()=>e,c={setState:i,getState:s,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=n(i,s,c);return c},lj=(n=>n?OR(n):OR),{useSyncExternalStoreWithSelector:cj}=oj,uj=n=>n;function hj(n,e=uj,t){const i=cj(n.subscribe,n.getState,n.getInitialState,e,t);return k2.useDebugValue(i),i}const DR=(n,e)=>{const t=lj(n),i=(s,r=e)=>hj(t,s,r);return Object.assign(i,t),i},bN=((n,e)=>n?DR(n,e):DR),fj=n=>typeof n=="object"&&typeof n.then=="function",Xh=[];function SN(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function EN(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const r of Xh)if(SN(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:i.equal,remove:()=>{const r=Xh.indexOf(s);r!==-1&&Xh.splice(r,1)},promise:(fj(n)?n:n(...e)).then(r=>{s.response=r,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(r=>s.error=r)};if(Xh.push(s),!t)throw s.promise}const dj=(n,e,t)=>EN(n,e,!1,t),pj=(n,e,t)=>void EN(n,e,!0,t),mj=n=>{if(n===void 0||n.length===0)Xh.splice(0,Xh.length);else{const e=Xh.find(t=>SN(n,t.keys,t.equal));e&&e.remove()}};var pE={exports:{}},mE={exports:{}},gE={exports:{}},vE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function gj(){return NR||(NR=1,(function(n){function e(k,te){var Y=k.length;k.push(te);e:for(;0<Y;){var fe=Y-1>>>1,ve=k[fe];if(0<s(ve,te))k[fe]=te,k[Y]=ve,Y=fe;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var te=k[0],Y=k.pop();if(Y!==te){k[0]=Y;e:for(var fe=0,ve=k.length,X=ve>>>1;fe<X;){var oe=2*(fe+1)-1,Re=k[oe],le=oe+1,Oe=k[le];if(0>s(Re,Y))le<ve&&0>s(Oe,Re)?(k[fe]=Oe,k[le]=Y,fe=le):(k[fe]=Re,k[oe]=Y,fe=oe);else if(le<ve&&0>s(Oe,Y))k[fe]=Oe,k[le]=Y,fe=le;else break e}}return te}function s(k,te){var Y=k.sortIndex-te.sortIndex;return Y!==0?Y:k.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,y=null,_=3,x=!1,E=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=k)i(p),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(p)}}function D(k){if(A=!1,O(k),!E)if(t(d)!==null)E=!0,he();else{var te=t(p);te!==null&&xe(D,te.startTime-k)}}var H=!1,I=-1,V=5,F=-1;function L(){return!(n.unstable_now()-F<V)}function P(){if(H){var k=n.unstable_now();F=k;var te=!0;try{e:{E=!1,A&&(A=!1,M(I),I=-1),x=!0;var Y=_;try{t:{for(O(k),y=t(d);y!==null&&!(y.expirationTime>k&&L());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,_=y.priorityLevel;var ve=fe(y.expirationTime<=k);if(k=n.unstable_now(),typeof ve=="function"){y.callback=ve,O(k),te=!0;break t}y===t(d)&&i(d),O(k)}else i(d);y=t(d)}if(y!==null)te=!0;else{var X=t(p);X!==null&&xe(D,X.startTime-k),te=!1}}break e}finally{y=null,_=Y,x=!1}te=void 0}}finally{te?Z():H=!1}}}var Z;if(typeof R=="function")Z=function(){R(P)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,se=de.port2;de.port1.onmessage=P,Z=function(){se.postMessage(null)}}else Z=function(){T(P,0)};function he(){H||(H=!0,Z())}function xe(k,te){I=T(function(){k(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){E||x||(E=!0,he())},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(k){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var Y=_;_=te;try{return k()}finally{_=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,te){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Y=_;_=k;try{return te()}finally{_=Y}},n.unstable_scheduleCallback=function(k,te,Y){var fe=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?fe+Y:fe):Y=fe,k){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Y+ve,k={id:g++,callback:te,priorityLevel:k,startTime:Y,expirationTime:ve,sortIndex:-1},Y>fe?(k.sortIndex=Y,e(p,k),t(d)===null&&k===t(p)&&(A?(M(I),I=-1):A=!0,xe(D,Y-fe))):(k.sortIndex=ve,e(d,k),E||x||(E=!0,he())),k},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(k){var te=_;return function(){var Y=_;_=te;try{return k.apply(this,arguments)}finally{_=Y}}}})(vE)),vE}var UR;function MN(){return UR||(UR=1,gE.exports=gj()),gE.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function vj(){return LR||(LR=1,(function(n){n.exports=function(e){function t(u,h,v,S){return new sm(u,h,v,S)}function i(){}function s(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return u===null||typeof u!="object"?null:(u=hm&&u[hm]||u["@@iterator"],typeof u=="function"?u:null)}function l(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Pl?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Cc:return"Fragment";case ar:return"Portal";case um:return"Profiler";case cm:return"StrictMode";case Bf:return"Suspense";case Qo:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Cr:return(u.displayName||"Context")+".Provider";case Jo:return(u._context.displayName||"Context")+".Consumer";case Rc:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case qu:return h=u.displayName||null,h!==null?h:l(u.type)||"Memo";case rr:h=u._payload,u=u._init;try{return l(u(h))}catch{}}return null}function c(u){if(zf===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);zf=h&&h[1]||"",fm=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zf+u+fm}function d(u,h){if(!u||$o)return"";$o=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(sn){var xt=sn}Reflect.construct(u,[],yt)}else{try{yt.call()}catch(sn){xt=sn}u.call(yt.prototype)}}else{try{throw Error()}catch(sn){xt=sn}(yt=u())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(sn){if(sn&&xt&&typeof sn.stack=="string")return[sn.stack,xt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=S.DetermineComponentFrameRoot(),W=N[0],ae=N[1];if(W&&ae){var be=W.split(`
`),Ge=ae.split(`
`);for(C=S=0;S<be.length&&!be[S].includes("DetermineComponentFrameRoot");)S++;for(;C<Ge.length&&!Ge[C].includes("DetermineComponentFrameRoot");)C++;if(S===be.length||C===Ge.length)for(S=be.length-1,C=Ge.length-1;1<=S&&0<=C&&be[S]!==Ge[C];)C--;for(;1<=S&&0<=C;S--,C--)if(be[S]!==Ge[C]){if(S!==1||C!==1)do if(S--,C--,0>C||be[S]!==Ge[C]){var at=`
`+be[S].replace(" at new "," at ");return u.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",u.displayName)),at}while(1<=S&&0<=C);break}}}finally{$o=!1,Error.prepareStackTrace=v}return(v=u?u.displayName||u.name:"")?c(v):""}function p(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=d(u.type,!1),u;case 11:return u=d(u.type.render,!1),u;case 1:return u=d(u.type,!0),u;default:return""}}function g(u){try{var h="";do h+=p(u),u=u.return;while(u);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function y(u){var h=u,v=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(v=h.return),u=h.return;while(u)}return h.tag===3?v:null}function _(u){if(y(u)!==u)throw Error(s(188))}function x(u){var h=u.alternate;if(!h){if(h=y(u),h===null)throw Error(s(188));return h!==u?null:u}for(var v=u,S=h;;){var C=v.return;if(C===null)break;var N=C.alternate;if(N===null){if(S=C.return,S!==null){v=S;continue}break}if(C.child===N.child){for(N=C.child;N;){if(N===v)return _(C),u;if(N===S)return _(C),h;N=N.sibling}throw Error(s(188))}if(v.return!==S.return)v=C,S=N;else{for(var W=!1,ae=C.child;ae;){if(ae===v){W=!0,v=C,S=N;break}if(ae===S){W=!0,S=C,v=N;break}ae=ae.sibling}if(!W){for(ae=N.child;ae;){if(ae===v){W=!0,v=N,S=C;break}if(ae===S){W=!0,S=N,v=C;break}ae=ae.sibling}if(!W)throw Error(s(189))}}if(v.alternate!==S)throw Error(s(190))}if(v.tag!==3)throw Error(s(188));return v.stateNode.current===v?u:h}function E(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=E(u),h!==null)return h;u=u.sibling}return null}function A(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=A(u),h!==null))return h;u=u.sibling}return null}function T(u){return{current:u}}function M(u){0>oo||(u.current=eh[oo],eh[oo]=null,oo--)}function R(u,h){oo++,eh[oo]=u.current,u.current=h}function O(u){return u>>>=0,u===0?32:31-(th(u)/Vv|0)|0}function D(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function H(u,h){var v=u.pendingLanes;if(v===0)return 0;var S=0,C=u.suspendedLanes,N=u.pingedLanes,W=u.warmLanes;u=u.finishedLanes!==0;var ae=v&134217727;return ae!==0?(v=ae&~C,v!==0?S=D(v):(N&=ae,N!==0?S=D(N):u||(W=ae&~W,W!==0&&(S=D(W))))):(ae=v&~C,ae!==0?S=D(ae):N!==0?S=D(N):u||(W=v&~W,W!==0&&(S=D(W)))),S===0?0:h!==0&&h!==S&&(h&C)===0&&(C=S&-S,W=h&-h,C>=W||C===32&&(W&4194176)!==0)?h:S}function I(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function V(u,h){switch(u){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var u=Uc;return Uc<<=1,(Uc&4194176)===0&&(Uc=128),u}function L(){var u=nh;return nh<<=1,(nh&62914560)===0&&(nh=4194304),u}function P(u){for(var h=[],v=0;31>v;v++)h.push(u);return h}function Z(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function de(u,h,v,S,C,N){var W=u.pendingLanes;u.pendingLanes=v,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=v,u.entangledLanes&=v,u.errorRecoveryDisabledLanes&=v,u.shellSuspendCounter=0;var ae=u.entanglements,be=u.expirationTimes,Ge=u.hiddenUpdates;for(v=W&~v;0<v;){var at=31-Zs(v),yt=1<<at;ae[at]=0,be[at]=-1;var xt=Ge[at];if(xt!==null)for(Ge[at]=null,at=0;at<xt.length;at++){var sn=xt[at];sn!==null&&(sn.lane&=-536870913)}v&=~yt}S!==0&&se(u,S,0),N!==0&&C===0&&u.tag!==0&&(u.suspendedLanes|=N&~(W&~h))}function se(u,h,v){u.pendingLanes|=h,u.suspendedLanes&=~h;var S=31-Zs(h);u.entangledLanes|=h,u.entanglements[S]=u.entanglements[S]|1073741824|v&4194218}function he(u,h){var v=u.entangledLanes|=h;for(u=u.entanglements;v;){var S=31-Zs(v),C=1<<S;C&h|u[S]&h&&(u[S]|=h),v&=~C}}function xe(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function k(u){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(Ic,u,void 0,(u.current.flags&128)===128)}catch{}}function te(u){if(typeof jv=="function"&&Gm(u),Js&&typeof Js.setStrictMode=="function")try{Js.setStrictMode(Ic,u)}catch{}}function Y(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function fe(u,h){if(typeof u=="object"&&u!==null){var v=td.get(u);return v!==void 0?v:(h={value:u,source:h,stack:g(h)},td.set(u,h),h)}return{value:u,source:h,stack:g(h)}}function ve(u,h){fi[bi++]=ah,fi[bi++]=sh,sh=u,ah=h}function X(u,h,v){xa[ba++]=Ur,xa[ba++]=Ga,xa[ba++]=or,or=u;var S=Ur;u=Ga;var C=32-Zs(S)-1;S&=~(1<<C),v+=1;var N=32-Zs(h)+C;if(30<N){var W=C-C%5;N=(S&(1<<W)-1).toString(32),S>>=W,C-=W,Ur=1<<32-Zs(h)+C|v<<C|S,Ga=N+u}else Ur=1<<N|v<<C|S,Ga=u}function oe(u){u.return!==null&&(ve(u,1),X(u,1,0))}function Re(u){for(;u===sh;)sh=fi[--bi],fi[bi]=null,ah=fi[--bi],fi[bi]=null;for(;u===or;)or=xa[--ba],xa[ba]=null,Ga=xa[--ba],xa[ba]=null,Ur=xa[--ba],xa[ba]=null}function le(u,h){R(lr,h),R(rh,u),R(ns,null),u=Bl(h),M(ns),R(ns,u)}function Oe(){M(ns),M(rh),M(lr)}function Pe(u){u.memoizedState!==null&&R(Pc,u);var h=ns.current,v=_v(h,u.type);h!==v&&(R(rh,u),R(ns,v))}function Ve(u){rh.current===u&&(M(ns),M(rh)),Pc.current===u&&(M(Pc),Or?Qt._currentValue=Ks:Qt._currentValue2=Ks)}function rt(u){var h=Error(s(418,""));throw Ke(fe(h,u)),oh}function Pt(u,h){if(!Ps)throw Error(s(175));Mb(u.stateNode,u.type,u.memoizedProps,h,u)||rt(u)}function wt(u){for(Ts=u.return;Ts;)switch(Ts.tag){case 3:case 27:ja=!0;return;case 5:case 13:ja=!1;return;default:Ts=Ts.return}}function on(u){if(!Ps||u!==Ts)return!1;if(!Nn)return wt(u),Nn=!0,!1;var h=!1;if(ds?u.tag!==3&&u.tag!==27&&(u.tag!==5||Iv(u.type)&&!nl(u.type,u.memoizedProps))&&(h=!0):u.tag!==3&&(u.tag!==5||Iv(u.type)&&!nl(u.type,u.memoizedProps))&&(h=!0),h&&ms&&rt(u),wt(u),u.tag===13){if(!Ps)throw Error(s(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));ms=Uv(u)}else ms=Ts?Om(u.stateNode):null;return!0}function Qe(){Ps&&(ms=Ts=null,Nn=!1)}function Ke(u){Sa===null?Sa=[u]:Sa.push(u)}function $(){for(var u=sl,h=Bc=sl=0;h<u;){var v=Ea[h];Ea[h++]=null;var S=Ea[h];Ea[h++]=null;var C=Ea[h];Ea[h++]=null;var N=Ea[h];if(Ea[h++]=null,S!==null&&C!==null){var W=S.pending;W===null?C.next=C:(C.next=W.next,W.next=C),S.pending=C}N!==0&&st(v,C,N)}}function Mt(u,h,v,S){Ea[sl++]=u,Ea[sl++]=h,Ea[sl++]=v,Ea[sl++]=S,Bc|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function et(u,h,v,S){return Mt(u,h,v,S),zt(u)}function dt(u,h){return Mt(u,null,null,h),zt(u)}function st(u,h,v){u.lanes|=v;var S=u.alternate;S!==null&&(S.lanes|=v);for(var C=!1,N=u.return;N!==null;)N.childLanes|=v,S=N.alternate,S!==null&&(S.childLanes|=v),N.tag===22&&(u=N.stateNode,u===null||u._visibility&1||(C=!0)),u=N,N=N.return;C&&h!==null&&u.tag===3&&(N=u.stateNode,C=31-Zs(v),N=N.hiddenUpdates,u=N[C],u===null?N[C]=[h]:u.push(h),h.lane=v|536870912)}function zt(u){if(50<Yl)throw Yl=0,Fs=null,Error(s(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function ot(u){u!==Hl&&u.next===null&&(Hl===null?zc=Hl=u:Hl=Hl.next=u),ch=!0,lh||(lh=!0,ke(G))}function J(u,h){if(!cr&&ch){cr=!0;do for(var v=!1,S=zc;S!==null;){if(u!==0){var C=S.pendingLanes;if(C===0)var N=0;else{var W=S.suspendedLanes,ae=S.pingedLanes;N=(1<<31-Zs(42|u)+1)-1,N&=C&~(W&~ae),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(v=!0,Ze(S,N))}else N=yn,N=H(S,S===En?N:0),(N&3)===0||I(S,N)||(v=!0,Ze(S,N));S=S.next}while(v);cr=!1}}function G(){ch=lh=!1;var u=0;al!==0&&(il()&&(u=al),al=0);for(var h=ps(),v=null,S=zc;S!==null;){var C=S.next,N=Se(S,h);N===0?(S.next=null,v===null?zc=C:v.next=C,C===null&&(Hl=v)):(v=S,(u!==0||(N&3)!==0)&&(ch=!0)),S=C}J(u)}function Se(u,h){for(var v=u.suspendedLanes,S=u.pingedLanes,C=u.expirationTimes,N=u.pendingLanes&-62914561;0<N;){var W=31-Zs(N),ae=1<<W,be=C[W];be===-1?((ae&v)===0||(ae&S)!==0)&&(C[W]=V(ae,h)):be<=h&&(u.expiredLanes|=ae),N&=~ae}if(h=En,v=yn,v=H(u,u===h?v:0),S=u.callbackNode,v===0||u===h&&Qn===2||u.cancelPendingCommit!==null)return S!==null&&S!==null&&ih(S),u.callbackNode=null,u.callbackPriority=0;if((v&3)===0||I(u,v)){if(h=v&-v,h===u.callbackPriority)return h;switch(S!==null&&ih(S),xe(v)){case 2:case 8:v=Gv;break;case 32:v=$f;break;case 268435456:v=ed;break;default:v=$f}return S=Be.bind(null,u),v=Lc(v,S),u.callbackPriority=h,u.callbackNode=v,h}return S!==null&&S!==null&&ih(S),u.callbackPriority=2,u.callbackNode=null,2}function Be(u,h){var v=u.callbackNode;if(es()&&u.callbackNode!==v)return null;var S=yn;return S=H(u,u===En?S:0),S===0?null:(Vu(u,S,h),Se(u,ps()),u.callbackNode!=null&&u.callbackNode===v?Be.bind(null,u):null)}function Ze(u,h){if(es())return null;Vu(u,h,!0)}function ke(u){zi?kf(function(){(Ht&6)!==0?Lc(km,u):u()}):Lc(km,u)}function Tt(){return al===0&&(al=F()),al}function ct(u,h){if(uh===null){var v=uh=[];nd=0,Qs=Tt(),rl={status:"pending",value:void 0,then:function(S){v.push(S)}}}return nd++,h.then(vt,vt),h}function vt(){if(--nd===0&&uh!==null){rl!==null&&(rl.status="fulfilled");var u=uh;uh=null,Qs=0,rl=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function fn(u,h){var v=[],S={status:"pending",value:null,reason:null,then:function(C){v.push(C)}};return u.then(function(){S.status="fulfilled",S.value=h;for(var C=0;C<v.length;C++)(0,v[C])(h)},function(C){for(S.status="rejected",S.reason=C,C=0;C<v.length;C++)(0,v[C])(void 0)}),S}function it(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bt(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Et(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function ut(u,h,v){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,(Ht&2)!==0){var C=S.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),S.pending=h,h=zt(u),st(u,null,v),h}return Mt(u,S,h,v),zt(u)}function ht(u,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194176)!==0)){var S=h.lanes;S&=u.pendingLanes,v|=S,h.lanes=v,he(u,v)}}function Ft(u,h){var v=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var C=null,N=null;if(v=v.firstBaseUpdate,v!==null){do{var W={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};N===null?C=N=W:N=N.next=W,v=v.next}while(v!==null);N===null?C=N=h:N=N.next=h}else C=N=h;v={baseState:S.baseState,firstBaseUpdate:C,lastBaseUpdate:N,shared:S.shared,callbacks:S.callbacks},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=h:u.next=h,v.lastBaseUpdate=h}function Ut(){if(Fc){var u=rl;if(u!==null)throw u}}function Yt(u,h,v,S){Fc=!1;var C=u.updateQueue;lo=!1;var N=C.firstBaseUpdate,W=C.lastBaseUpdate,ae=C.shared.pending;if(ae!==null){C.shared.pending=null;var be=ae,Ge=be.next;be.next=null,W===null?N=Ge:W.next=Ge,W=be;var at=u.alternate;at!==null&&(at=at.updateQueue,ae=at.lastBaseUpdate,ae!==W&&(ae===null?at.firstBaseUpdate=Ge:ae.next=Ge,at.lastBaseUpdate=be))}if(N!==null){var yt=C.baseState;W=0,at=Ge=be=null,ae=N;do{var xt=ae.lane&-536870913,sn=xt!==ae.lane;if(sn?(yn&xt)===xt:(S&xt)===xt){xt!==0&&xt===Qs&&(Fc=!0),at!==null&&(at=at.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var na=u,ph=ae;xt=h;var Kl=v;switch(ph.tag){case 1:if(na=ph.payload,typeof na=="function"){yt=na.call(Kl,yt,xt);break e}yt=na;break e;case 3:na.flags=na.flags&-65537|128;case 0:if(na=ph.payload,xt=typeof na=="function"?na.call(Kl,yt,xt):na,xt==null)break e;yt=Il({},yt,xt);break e;case 2:lo=!0}}xt=ae.callback,xt!==null&&(u.flags|=64,sn&&(u.flags|=8192),sn=C.callbacks,sn===null?C.callbacks=[xt]:sn.push(xt))}else sn={lane:xt,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},at===null?(Ge=at=sn,be=yt):at=at.next=sn,W|=xt;if(ae=ae.next,ae===null){if(ae=C.shared.pending,ae===null)break;sn=ae,ae=sn.next,sn.next=null,C.lastBaseUpdate=sn,C.shared.pending=null}}while(!0);at===null&&(be=yt),C.baseState=be,C.firstBaseUpdate=Ge,C.lastBaseUpdate=at,N===null&&(C.shared.lanes=0),Aa|=W,u.lanes=W,u.memoizedState=yt}}function ge(u,h){if(typeof u!="function")throw Error(s(191,u));u.call(h)}function De(u,h){var v=u.callbacks;if(v!==null)for(u.callbacks=null,u=0;u<v.length;u++)ge(v[u],h)}function Ue(u,h){if(_a(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var v=Object.keys(u),S=Object.keys(h);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var C=v[S];if(!hh.call(h,C)||!_a(u[C],h[C]))return!1}return!0}function Xe(u){return u=u.status,u==="fulfilled"||u==="rejected"}function lt(){}function ft(u,h,v){switch(v=u[v],v===void 0?u.push(h):v!==h&&(h.then(lt,lt),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===Zn?Error(s(483)):u;default:if(typeof h.status=="string")h.then(lt,lt);else{if(u=En,u!==null&&100<u.shellSuspendCounter)throw Error(s(482));u=h,u.status="pending",u.then(function(S){if(h.status==="pending"){var C=h;C.status="fulfilled",C.value=S}},function(S){if(h.status==="pending"){var C=h;C.status="rejected",C.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===Zn?Error(s(483)):u}throw kl=h,Zn}}function Wt(){if(kl===null)throw Error(s(459));var u=kl;return kl=null,u}function Kn(u){var h=qa;return qa+=1,Lr===null&&(Lr=[]),ft(Lr,u,h)}function ci(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function Sn(u,h){throw h.$$typeof===lm?Error(s(525)):(u=Object.prototype.toString.call(h),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function Bi(u){var h=u._init;return h(u._payload)}function qs(u){function h(we,ye){if(u){var Ne=we.deletions;Ne===null?(we.deletions=[ye],we.flags|=16):Ne.push(ye)}}function v(we,ye){if(!u)return null;for(;ye!==null;)h(we,ye),ye=ye.sibling;return null}function S(we){for(var ye=new Map;we!==null;)we.key!==null?ye.set(we.key,we):ye.set(we.index,we),we=we.sibling;return ye}function C(we,ye){return we=Es(we,ye),we.index=0,we.sibling=null,we}function N(we,ye,Ne){return we.index=Ne,u?(Ne=we.alternate,Ne!==null?(Ne=Ne.index,Ne<ye?(we.flags|=33554434,ye):Ne):(we.flags|=33554434,ye)):(we.flags|=1048576,ye)}function W(we){return u&&we.alternate===null&&(we.flags|=33554434),we}function ae(we,ye,Ne,nt){return ye===null||ye.tag!==6?(ye=Zo(Ne,we.mode,nt),ye.return=we,ye):(ye=C(ye,Ne),ye.return=we,ye)}function be(we,ye,Ne,nt){var Bt=Ne.type;return Bt===Cc?at(we,ye,Ne.props.children,nt,Ne.key):ye!==null&&(ye.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===rr&&Bi(Bt)===ye.type)?(ye=C(ye,Ne.props),ci(ye,Ne),ye.return=we,ye):(ye=Ha(Ne.type,Ne.key,Ne.props,null,we.mode,nt),ci(ye,Ne),ye.return=we,ye)}function Ge(we,ye,Ne,nt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ne.containerInfo||ye.stateNode.implementation!==Ne.implementation?(ye=Ac(Ne,we.mode,nt),ye.return=we,ye):(ye=C(ye,Ne.children||[]),ye.return=we,ye)}function at(we,ye,Ne,nt,Bt){return ye===null||ye.tag!==7?(ye=no(Ne,we.mode,nt,Bt),ye.return=we,ye):(ye=C(ye,Ne),ye.return=we,ye)}function yt(we,ye,Ne){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Zo(""+ye,we.mode,Ne),ye.return=we,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case io:return Ne=Ha(ye.type,ye.key,ye.props,null,we.mode,Ne),ci(Ne,ye),Ne.return=we,Ne;case ar:return ye=Ac(ye,we.mode,Ne),ye.return=we,ye;case rr:var nt=ye._init;return ye=nt(ye._payload),yt(we,ye,Ne)}if(el(ye)||r(ye))return ye=no(ye,we.mode,Ne,null),ye.return=we,ye;if(typeof ye.then=="function")return yt(we,Kn(ye),Ne);if(ye.$$typeof===Cr)return yt(we,Iu(we,ye),Ne);Sn(we,ye)}return null}function xt(we,ye,Ne,nt){var Bt=ye!==null?ye.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Bt!==null?null:ae(we,ye,""+Ne,nt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case io:return Ne.key===Bt?be(we,ye,Ne,nt):null;case ar:return Ne.key===Bt?Ge(we,ye,Ne,nt):null;case rr:return Bt=Ne._init,Ne=Bt(Ne._payload),xt(we,ye,Ne,nt)}if(el(Ne)||r(Ne))return Bt!==null?null:at(we,ye,Ne,nt,null);if(typeof Ne.then=="function")return xt(we,ye,Kn(Ne),nt);if(Ne.$$typeof===Cr)return xt(we,ye,Iu(we,Ne),nt);Sn(we,Ne)}return null}function sn(we,ye,Ne,nt,Bt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return we=we.get(Ne)||null,ae(ye,we,""+nt,Bt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case io:return we=we.get(nt.key===null?Ne:nt.key)||null,be(ye,we,nt,Bt);case ar:return we=we.get(nt.key===null?Ne:nt.key)||null,Ge(ye,we,nt,Bt);case rr:var si=nt._init;return nt=si(nt._payload),sn(we,ye,Ne,nt,Bt)}if(el(nt)||r(nt))return we=we.get(Ne)||null,at(ye,we,nt,Bt,null);if(typeof nt.then=="function")return sn(we,ye,Ne,Kn(nt),Bt);if(nt.$$typeof===Cr)return sn(we,ye,Ne,Iu(ye,nt),Bt);Sn(ye,nt)}return null}function na(we,ye,Ne,nt){for(var Bt=null,si=null,$t=ye,Ln=ye=0,Xi=null;$t!==null&&Ln<Ne.length;Ln++){$t.index>Ln?(Xi=$t,$t=null):Xi=$t.sibling;var In=xt(we,$t,Ne[Ln],nt);if(In===null){$t===null&&($t=Xi);break}u&&$t&&In.alternate===null&&h(we,$t),ye=N(In,ye,Ln),si===null?Bt=In:si.sibling=In,si=In,$t=Xi}if(Ln===Ne.length)return v(we,$t),Nn&&ve(we,Ln),Bt;if($t===null){for(;Ln<Ne.length;Ln++)$t=yt(we,Ne[Ln],nt),$t!==null&&(ye=N($t,ye,Ln),si===null?Bt=$t:si.sibling=$t,si=$t);return Nn&&ve(we,Ln),Bt}for($t=S($t);Ln<Ne.length;Ln++)Xi=sn($t,we,Ln,Ne[Ln],nt),Xi!==null&&(u&&Xi.alternate!==null&&$t.delete(Xi.key===null?Ln:Xi.key),ye=N(Xi,ye,Ln),si===null?Bt=Xi:si.sibling=Xi,si=Xi);return u&&$t.forEach(function(go){return h(we,go)}),Nn&&ve(we,Ln),Bt}function ph(we,ye,Ne,nt){if(Ne==null)throw Error(s(151));for(var Bt=null,si=null,$t=ye,Ln=ye=0,Xi=null,In=Ne.next();$t!==null&&!In.done;Ln++,In=Ne.next()){$t.index>Ln?(Xi=$t,$t=null):Xi=$t.sibling;var go=xt(we,$t,In.value,nt);if(go===null){$t===null&&($t=Xi);break}u&&$t&&go.alternate===null&&h(we,$t),ye=N(go,ye,Ln),si===null?Bt=go:si.sibling=go,si=go,$t=Xi}if(In.done)return v(we,$t),Nn&&ve(we,Ln),Bt;if($t===null){for(;!In.done;Ln++,In=Ne.next())In=yt(we,In.value,nt),In!==null&&(ye=N(In,ye,Ln),si===null?Bt=In:si.sibling=In,si=In);return Nn&&ve(we,Ln),Bt}for($t=S($t);!In.done;Ln++,In=Ne.next())In=sn($t,we,Ln,In.value,nt),In!==null&&(u&&In.alternate!==null&&$t.delete(In.key===null?Ln:In.key),ye=N(In,ye,Ln),si===null?Bt=In:si.sibling=In,si=In);return u&&$t.forEach(function(hd){return h(we,hd)}),Nn&&ve(we,Ln),Bt}function Kl(we,ye,Ne,nt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===Cc&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case io:e:{for(var Bt=Ne.key;ye!==null;){if(ye.key===Bt){if(Bt=Ne.type,Bt===Cc){if(ye.tag===7){v(we,ye.sibling),nt=C(ye,Ne.props.children),nt.return=we,we=nt;break e}}else if(ye.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===rr&&Bi(Bt)===ye.type){v(we,ye.sibling),nt=C(ye,Ne.props),ci(nt,Ne),nt.return=we,we=nt;break e}v(we,ye);break}else h(we,ye);ye=ye.sibling}Ne.type===Cc?(nt=no(Ne.props.children,we.mode,nt,Ne.key),nt.return=we,we=nt):(nt=Ha(Ne.type,Ne.key,Ne.props,null,we.mode,nt),ci(nt,Ne),nt.return=we,we=nt)}return W(we);case ar:e:{for(Bt=Ne.key;ye!==null;){if(ye.key===Bt)if(ye.tag===4&&ye.stateNode.containerInfo===Ne.containerInfo&&ye.stateNode.implementation===Ne.implementation){v(we,ye.sibling),nt=C(ye,Ne.children||[]),nt.return=we,we=nt;break e}else{v(we,ye);break}else h(we,ye);ye=ye.sibling}nt=Ac(Ne,we.mode,nt),nt.return=we,we=nt}return W(we);case rr:return Bt=Ne._init,Ne=Bt(Ne._payload),Kl(we,ye,Ne,nt)}if(el(Ne))return na(we,ye,Ne,nt);if(r(Ne)){if(Bt=r(Ne),typeof Bt!="function")throw Error(s(150));return Ne=Bt.call(Ne),ph(we,ye,Ne,nt)}if(typeof Ne.then=="function")return Kl(we,ye,Kn(Ne),nt);if(Ne.$$typeof===Cr)return Kl(we,ye,Iu(we,Ne),nt);Sn(we,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,ye!==null&&ye.tag===6?(v(we,ye.sibling),nt=C(ye,Ne),nt.return=we,we=nt):(v(we,ye),nt=Zo(Ne,we.mode,nt),nt.return=we,we=nt),W(we)):v(we,ye)}return function(we,ye,Ne,nt){try{qa=0;var Bt=Kl(we,ye,Ne,nt);return Lr=null,Bt}catch($t){if($t===Zn)throw $t;var si=t(29,$t,null,we.mode);return si.lanes=nt,si.return=we,si}finally{}}}function Uo(u,h){u=ur,R(Ma,u),R(Ir,h),ur=u|h.baseLanes}function Wr(){R(Ma,ur),R(Ir,Ir.current)}function os(){ur=Ma.current,M(Ir),M(Ma)}function _s(u){var h=u.alternate;R(Fi,Fi.current&1),R(Ta,u),Xa===null&&(h===null||Ir.current!==null||h.memoizedState!==null)&&(Xa=u)}function fa(u){if(u.tag===22){if(R(Fi,Fi.current),R(Ta,u),Xa===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Xa=u)}}else Zi()}function Zi(){R(Fi,Fi.current),R(Ta,Ta.current)}function qt(u){M(Ta),Xa===u&&(Xa=null),M(Fi)}function ls(u){for(var h=u;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Wf(v)||$u(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function an(){throw Error(s(321))}function B(u,h){if(h===null)return!1;for(var v=0;v<h.length&&v<u.length;v++)if(!_a(u[v],h[v]))return!1;return!0}function K(u,h,v,S,C,N){return Pr=N,pn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Xt.H=u===null||u.memoizedState===null?Vi:ws,co=!1,N=v(S,C),co=!1,di&&(N=Ae(h,v,S,C)),ue(u),N}function ue(u){Xt.H=Un;var h=Fn!==null&&Fn.next!==null;if(Pr=0,Ci=Fn=pn=null,Wa=!1,Si=0,Vc=null,h)throw Error(s(300));u===null||Ri||(u=u.dependencies,u!==null&&Fo(u)&&(Ri=!0))}function Ae(u,h,v,S){pn=u;var C=0;do{if(di&&(Vc=null),Si=0,di=!1,25<=C)throw Error(s(301));if(C+=1,Ci=Fn=null,u.updateQueue!=null){var N=u.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Xt.H=ll,N=h(v,S)}while(di);return N}function ze(){var u=Xt.H,h=u.useState()[0];return h=typeof h.then=="function"?ne(h):h,u=u.useState()[0],(Fn!==null?Fn.memoizedState:null)!==u&&(pn.flags|=1024),h}function Ie(){var u=fh!==0;return fh=0,u}function tt(u,h,v){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~v}function $e(u){if(Wa){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Wa=!1}Pr=0,Ci=Fn=pn=null,di=!1,Si=fh=0,Vc=null}function z(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?pn.memoizedState=Ci=u:Ci=Ci.next=u,Ci}function Q(){if(Fn===null){var u=pn.alternate;u=u!==null?u.memoizedState:null}else u=Fn.next;var h=Ci===null?pn.memoizedState:Ci.next;if(h!==null)Ci=h,Fn=u;else{if(u===null)throw pn.alternate===null?Error(s(467)):Error(s(310));Fn=u,u={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Ci===null?pn.memoizedState=Ci=u:Ci=Ci.next=u}return Ci}function ne(u){var h=Si;return Si+=1,Vc===null&&(Vc=[]),u=ft(Vc,u,h),h=pn,(Ci===null?h.memoizedState:Ci.next)===null&&(h=h.alternate,Xt.H=h===null||h.memoizedState===null?Vi:ws),u}function ie(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ne(u);if(u.$$typeof===Cr)return us(u)}throw Error(s(438,String(u)))}function ce(u){var h=null,v=pn.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var S=pn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(C){return C.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=sd(),pn.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(u),S=0;S<u;S++)v[S]=yv;return h.index++,v}function Ee(u,h){return typeof h=="function"?h(u):h}function Fe(u){var h=Q();return je(h,Fn,u)}function je(u,h,v){var S=u.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=v;var C=u.baseQueue,N=S.pending;if(N!==null){if(C!==null){var W=C.next;C.next=N.next,N.next=W}h.baseQueue=C=N,S.pending=null}if(N=u.baseState,C===null)u.memoizedState=N;else{h=C.next;var ae=W=null,be=null,Ge=h,at=!1;do{var yt=Ge.lane&-536870913;if(yt!==Ge.lane?(yn&yt)===yt:(Pr&yt)===yt){var xt=Ge.revertLane;if(xt===0)be!==null&&(be=be.next={lane:0,revertLane:0,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),yt===Qs&&(at=!0);else if((Pr&xt)===xt){Ge=Ge.next,xt===Qs&&(at=!0);continue}else yt={lane:0,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},be===null?(ae=be=yt,W=N):be=be.next=yt,pn.lanes|=xt,Aa|=xt;yt=Ge.action,co&&v(N,yt),N=Ge.hasEagerState?Ge.eagerState:v(N,yt)}else xt={lane:yt,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},be===null?(ae=be=xt,W=N):be=be.next=xt,pn.lanes|=yt,Aa|=yt;Ge=Ge.next}while(Ge!==null&&Ge!==h);if(be===null?W=N:be.next=ae,!_a(N,u.memoizedState)&&(Ri=!0,at&&(v=rl,v!==null)))throw v;u.memoizedState=N,u.baseState=W,u.baseQueue=be,S.lastRenderedState=N}return C===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function Ye(u){var h=Q(),v=h.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=u;var S=v.dispatch,C=v.pending,N=h.memoizedState;if(C!==null){v.pending=null;var W=C=C.next;do N=u(N,W.action),W=W.next;while(W!==C);_a(N,h.memoizedState)||(Ri=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),v.lastRenderedState=N}return[N,S]}function pt(u,h,v){var S=pn,C=Q(),N=Nn;if(N){if(v===void 0)throw Error(s(407));v=v()}else v=h();var W=!_a((Fn||C).memoizedState,v);if(W&&(C.memoizedState=v,Ri=!0),C=C.queue,Tu(jt.bind(null,S,C,u),[u]),C.getSnapshot!==h||W||Ci!==null&&Ci.memoizedState.tag&1){if(S.flags|=2048,tr(9,mt.bind(null,S,C,v,h),{destroy:void 0},null),En===null)throw Error(s(349));N||(Pr&60)!==0||gt(S,h,v)}return v}function gt(u,h,v){u.flags|=16384,u={getSnapshot:h,value:v},h=pn.updateQueue,h===null?(h=sd(),pn.updateQueue=h,h.stores=[u]):(v=h.stores,v===null?h.stores=[u]:v.push(u))}function mt(u,h,v,S){h.value=v,h.getSnapshot=S,Rt(h)&&Mn(u)}function jt(u,h,v){return v(function(){Rt(h)&&Mn(u)})}function Rt(u){var h=u.getSnapshot;u=u.value;try{var v=h();return!_a(u,v)}catch{return!0}}function Mn(u){var h=dt(u,2);h!==null&&Ss(h,u,2)}function Nt(u){var h=z();if(typeof u=="function"){var v=u;if(u=v(),co){te(!0);try{v()}finally{te(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ee,lastRenderedState:u},h}function At(u,h,v,S){return u.baseState=v,je(u,Fn,typeof S=="function"?S:Ee)}function Ct(u,h,v,S,C){if(Tl(u))throw Error(s(485));if(u=h.action,u!==null){var N={payload:C,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){N.listeners.push(W)}};Xt.T!==null?v(!0):N.isTransition=!1,S(N),v=h.pending,v===null?(N.next=h.pending=N,ni(h,N)):(N.next=v.next,h.pending=v.next=N)}}function ni(u,h){var v=h.action,S=h.payload,C=u.state;if(h.isTransition){var N=Xt.T,W={};Xt.T=W;try{var ae=v(C,S),be=Xt.S;be!==null&&be(W,ae),Jt(u,h,ae)}catch(Ge){Gn(u,h,Ge)}finally{Xt.T=N}}else try{N=v(C,S),Jt(u,h,N)}catch(Ge){Gn(u,h,Ge)}}function Jt(u,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(S){ln(u,h,S)},function(S){return Gn(u,h,S)}):ln(u,h,v)}function ln(u,h,v){h.status="fulfilled",h.value=v,dn(h),u.state=v,h=u.pending,h!==null&&(v=h.next,v===h?u.pending=null:(v=v.next,h.next=v,ni(u,v)))}function Gn(u,h,v){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=v,dn(h),h=h.next;while(h!==S)}u.action=null}function dn(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function Kt(u,h){return h}function cn(u,h){if(Nn){var v=En.formState;if(v!==null){e:{var S=pn;if(Nn){if(ms){var C=Tv(ms,ja);if(C){ms=Om(C),S=wv(C);break e}}rt(S)}S=!1}S&&(h=v[0])}}v=z(),v.memoizedState=v.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kt,lastRenderedState:h},v.queue=S,v=mf.bind(null,pn,S),S.dispatch=v,S=Nt(!1);var N=gf.bind(null,pn,!1,S.queue);return S=z(),C={state:h,dispatch:null,action:u,pending:null},S.queue=C,v=Ct.bind(null,pn,C,N,v),C.dispatch=v,S.memoizedState=u,[h,v,!1]}function pi(u){var h=Q();return Bn(h,Fn,u)}function Bn(u,h,v){h=je(u,h,Kt)[0],u=Fe(Ee)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?ne(h):h;var S=Q(),C=S.queue,N=C.dispatch;return v!==S.memoizedState&&(pn.flags|=2048,tr(9,zn.bind(null,C,v),{destroy:void 0},null)),[h,N,u]}function zn(u,h){u.action=h}function Ji(u){var h=Q(),v=Fn;if(v!==null)return Bn(h,v,u);Q(),h=h.memoizedState,v=Q();var S=v.queue.dispatch;return v.memoizedState=u,[h,S,!1]}function tr(u,h,v,S){return u={tag:u,create:h,inst:v,deps:S,next:null},h=pn.updateQueue,h===null&&(h=sd(),pn.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=u.next=u:(S=v.next,v.next=u,u.next=S,h.lastEffect=u),u}function Ns(){return Q().memoizedState}function hf(u,h,v,S){var C=z();pn.flags|=u,C.memoizedState=tr(1|h,v,{destroy:void 0},S===void 0?null:S)}function Mu(u,h,v,S){var C=Q();S=S===void 0?null:S;var N=C.memoizedState.inst;Fn!==null&&S!==null&&B(S,Fn.memoizedState.deps)?C.memoizedState=tr(h,v,N,S):(pn.flags|=u,C.memoizedState=tr(1|h,v,N,S))}function Up(u,h){hf(8390656,8,u,h)}function Tu(u,h){Mu(2048,8,u,h)}function W0(u,h){return Mu(4,2,u,h)}function Y0(u,h){return Mu(4,4,u,h)}function wu(u,h){if(typeof h=="function"){u=u();var v=h(u);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function br(u,h,v){v=v!=null?v.concat([u]):null,Mu(4,4,wu.bind(null,h,u),v)}function Au(){}function ff(u,h){var v=Q();h=h===void 0?null:h;var S=v.memoizedState;return h!==null&&B(h,S[1])?S[0]:(v.memoizedState=[u,h],u)}function El(u,h){var v=Q();h=h===void 0?null:h;var S=v.memoizedState;if(h!==null&&B(h,S[1]))return S[0];if(S=u(),co){te(!0);try{u()}finally{te(!1)}}return v.memoizedState=[S,h],S}function Lo(u,h,v){return v===void 0||(Pr&1073741824)!==0?u.memoizedState=h:(u.memoizedState=v,u=Mr(),pn.lanes|=u,Aa|=u,v)}function Lp(u,h,v,S){return _a(v,h)?v:Ir.current!==null?(u=Lo(u,v,S),_a(u,h)||(Ri=!0),u):(Pr&42)===0?(Ri=!0,u.memoizedState=v):(u=Mr(),pn.lanes|=u,Aa|=u,h)}function df(u,h,v,S,C){var N=ji();Ms(N!==0&&8>N?N:8);var W=Xt.T,ae={};Xt.T=ae,gf(u,!1,h,v);try{var be=C(),Ge=Xt.S;if(Ge!==null&&Ge(ae,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var at=fn(be,S);Po(u,h,at,Is(u))}else Po(u,h,S,Is(u))}catch(yt){Po(u,h,{then:function(){},status:"rejected",reason:yt},Is())}finally{Ms(N),Xt.T=W}}function Ip(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:Ks,baseState:Ks,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ee,lastRenderedState:Ks},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ee,lastRenderedState:v},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Ml(){return us(Qt)}function Sr(){return Q().memoizedState}function pf(){return Q().memoizedState}function Cu(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var v=Is();u=Et(v);var S=ut(h,u,v);S!==null&&(Ss(S,h,v),ht(S,h,v)),h={cache:bf()},u.payload=h;return}h=h.return}}function Io(u,h,v){var S=Is();v={lane:S,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Tl(u)?Ru(h,v):(v=et(u,h,v,S),v!==null&&(Ss(v,u,S),Pp(v,h,S)))}function mf(u,h,v){var S=Is();Po(u,h,v,S)}function Po(u,h,v,S){var C={lane:S,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Tl(u))Ru(h,C);else{var N=u.alternate;if(u.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var W=h.lastRenderedState,ae=N(W,v);if(C.hasEagerState=!0,C.eagerState=ae,_a(ae,W))return Mt(u,h,C,0),En===null&&$(),!1}catch{}finally{}if(v=et(u,h,C,S),v!==null)return Ss(v,u,S),Pp(v,h,S),!0}return!1}function gf(u,h,v,S){if(S={lane:2,revertLane:Tt(),action:S,hasEagerState:!1,eagerState:null,next:null},Tl(u)){if(h)throw Error(s(479))}else h=et(u,v,S,2),h!==null&&Ss(h,u,2)}function Tl(u){var h=u.alternate;return u===pn||h!==null&&h===pn}function Ru(u,h){di=Wa=!0;var v=u.pending;v===null?h.next=h:(h.next=v.next,v.next=h),u.pending=h}function Pp(u,h,v){if((v&4194176)!==0){var S=h.lanes;S&=u.pendingLanes,v|=S,h.lanes=v,he(u,v)}}function xs(u,h,v,S){h=u.memoizedState,v=v(S,h),v=v==null?h:Il({},h,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}function Bo(u,h,v,S,C,N,W){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,N,W):h.prototype&&h.prototype.isPureReactComponent?!Ue(v,S)||!Ue(C,N):!0}function Ou(u,h,v,S){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,S),h.state!==u&&ad.enqueueReplaceState(h,h.state,null)}function nr(u,h){var v=h;if("ref"in h){v={};for(var S in h)S!=="ref"&&(v[S]=h[S])}if(u=u.defaultProps){v===h&&(v=Il({},v));for(var C in u)v[C]===void 0&&(v[C]=u[C])}return v}function vf(u,h){try{var v=u.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function yf(u,h,v){try{var S=u.onCaughtError;S(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Du(u,h,v){return v=Et(v),v.tag=3,v.payload={element:null},v.callback=function(){vf(u,h)},v}function dc(u){return u=Et(u),u.tag=3,u}function Nu(u,h,v,S){var C=v.type.getDerivedStateFromError;if(typeof C=="function"){var N=S.value;u.payload=function(){return C(N)},u.callback=function(){yf(h,v,S)}}var W=v.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(u.callback=function(){yf(h,v,S),typeof C!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var ae=S.stack;this.componentDidCatch(S.value,{componentStack:ae!==null?ae:""})})}function K0(u,h,v,S,C){if(v.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=v.alternate,h!==null&&wl(h,v,C,!0),v=Ta.current,v!==null){switch(v.tag){case 13:return Xa===null?Ys():v.alternate===null&&On===0&&(On=3),v.flags&=-257,v.flags|=65536,v.lanes=C,S===id?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([S]):h.add(S),If(u,S,C)),!1;case 22:return v.flags|=65536,S===id?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([S]):v.add(S)),If(u,S,C)),!1}throw Error(s(435,v.tag))}return If(u,S,C),Ys(),!1}if(Nn)return h=Ta.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=C,S!==oh&&(u=Error(s(422),{cause:S}),Ke(fe(u,v)))):(S!==oh&&(h=Error(s(423),{cause:S}),Ke(fe(h,v))),u=u.current.alternate,u.flags|=65536,C&=-C,u.lanes|=C,S=fe(S,v),C=Du(u.stateNode,S,C),Ft(u,C),On!==4&&(On=2)),!1;var N=Error(s(520),{cause:S});if(N=fe(N,v),kc===null?kc=[N]:kc.push(N),On!==4&&(On=2),h===null)return!0;S=fe(S,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,u=C&-C,v.lanes|=u,u=Du(v.stateNode,S,u),Ft(v,u),!1;case 1:if(h=v.type,N=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ra===null||!Ra.has(N))))return v.flags|=65536,C&=-C,v.lanes|=C,C=dc(C),Nu(C,u,v,S),Ft(v,C),!1}v=v.return}while(v!==null);return!1}function cs(u,h,v,S){h.child=u===null?qm(h,null,v,S):ol(h,u.child,v,S)}function Z0(u,h,v,S,C){v=v.render;var N=h.ref;if("ref"in S){var W={};for(var ae in S)ae!=="ref"&&(W[ae]=S[ae])}else W=S;return Al(h),S=K(u,h,v,W,N,C),ae=Ie(),u!==null&&!Ri?(tt(u,h,C),Yr(u,h,C)):(Nn&&ae&&oe(h),h.flags|=1,cs(u,h,S,C),h.child)}function J0(u,h,v,S,C){if(u===null){var N=v.type;return typeof N=="function"&&!eo(N)&&N.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=N,_f(u,h,N,S,C)):(u=Ha(v.type,null,S,h,h.mode,C),u.ref=h.ref,u.return=h,h.child=u)}if(N=u.child,!Gp(u,C)){var W=N.memoizedProps;if(v=v.compare,v=v!==null?v:Ue,v(W,S)&&u.ref===h.ref)return Yr(u,h,C)}return h.flags|=1,u=Es(N,S),u.ref=h.ref,u.return=h,h.child=u}function _f(u,h,v,S,C){if(u!==null){var N=u.memoizedProps;if(Ue(N,S)&&u.ref===h.ref)if(Ri=!1,h.pendingProps=S=N,Gp(u,C))(u.flags&131072)!==0&&(Ri=!0);else return h.lanes=u.lanes,Yr(u,h,C)}return Bp(u,h,v,S,C)}function Q0(u,h,v){var S=h.pendingProps,C=S.children,N=(h.stateNode._pendingVisibility&2)!==0,W=u!==null?u.memoizedState:null;if(Uu(u,h),S.mode==="hidden"||N){if((h.flags&128)!==0){if(S=W!==null?W.baseLanes|v:v,u!==null){for(C=h.child=u.child,N=0;C!==null;)N=N|C.lanes|C.childLanes,C=C.sibling;h.childLanes=N&~S}else h.childLanes=0,h.child=null;return $0(u,h,S,v)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&Sf(h,W!==null?W.cachePool:null),W!==null?Uo(h,W):Wr(),fa(h);else return h.lanes=h.childLanes=536870912,$0(u,h,W!==null?W.baseLanes|v:v,v)}else W!==null?(Sf(h,W.cachePool),Uo(h,W),Zi(),h.memoizedState=null):(u!==null&&Sf(h,null),Wr(),Zi());return cs(u,h,C,v),h.child}function $0(u,h,v,S){var C=Vo();return C=C===null?null:{parent:Or?jn._currentValue:jn._currentValue2,pool:C},h.memoizedState={baseLanes:v,cachePool:C},u!==null&&Sf(h,null),Wr(),fa(h),u!==null&&wl(u,h,S,!0),null}function Uu(u,h){var v=h.ref;if(v===null)u!==null&&u.ref!==null&&(h.flags|=2097664);else{if(typeof v!="function"&&typeof v!="object")throw Error(s(284));(u===null||u.ref!==v)&&(h.flags|=2097664)}}function Bp(u,h,v,S,C){return Al(h),v=K(u,h,v,S,void 0,C),S=Ie(),u!==null&&!Ri?(tt(u,h,C),Yr(u,h,C)):(Nn&&S&&oe(h),h.flags|=1,cs(u,h,v,C),h.child)}function ev(u,h,v,S,C,N){return Al(h),h.updateQueue=null,v=Ae(h,S,v,C),ue(u),S=Ie(),u!==null&&!Ri?(tt(u,h,N),Yr(u,h,N)):(Nn&&S&&oe(h),h.flags|=1,cs(u,h,v,N),h.child)}function zp(u,h,v,S,C){if(Al(h),h.stateNode===null){var N=Vl,W=v.contextType;typeof W=="object"&&W!==null&&(N=us(W)),N=new v(S,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=ad,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=S,N.state=h.memoizedState,N.refs={},it(h),W=v.contextType,N.context=typeof W=="object"&&W!==null?us(W):Vl,N.state=h.memoizedState,W=v.getDerivedStateFromProps,typeof W=="function"&&(xs(h,v,W,S),N.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(W=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),W!==N.state&&ad.enqueueReplaceState(N,N.state,null),Yt(h,S,N,C),Ut(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(u===null){N=h.stateNode;var ae=h.memoizedProps,be=nr(v,ae);N.props=be;var Ge=N.context,at=v.contextType;W=Vl,typeof at=="object"&&at!==null&&(W=us(at));var yt=v.getDerivedStateFromProps;at=typeof yt=="function"||typeof N.getSnapshotBeforeUpdate=="function",ae=h.pendingProps!==ae,at||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ae||Ge!==W)&&Ou(h,N,S,W),lo=!1;var xt=h.memoizedState;N.state=xt,Yt(h,S,N,C),Ut(),Ge=h.memoizedState,ae||xt!==Ge||lo?(typeof yt=="function"&&(xs(h,v,yt,S),Ge=h.memoizedState),(be=lo||Bo(h,v,be,S,xt,Ge,W))?(at||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Ge),N.props=S,N.state=Ge,N.context=W,S=be):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{N=h.stateNode,bt(u,h),W=h.memoizedProps,at=nr(v,W),N.props=at,yt=h.pendingProps,xt=N.context,Ge=v.contextType,be=Vl,typeof Ge=="object"&&Ge!==null&&(be=us(Ge)),ae=v.getDerivedStateFromProps,(Ge=typeof ae=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==yt||xt!==be)&&Ou(h,N,S,be),lo=!1,xt=h.memoizedState,N.state=xt,Yt(h,S,N,C),Ut();var sn=h.memoizedState;W!==yt||xt!==sn||lo||u!==null&&u.dependencies!==null&&Fo(u.dependencies)?(typeof ae=="function"&&(xs(h,v,ae,S),sn=h.memoizedState),(at=lo||Bo(h,v,at,S,xt,sn,be)||u!==null&&u.dependencies!==null&&Fo(u.dependencies))?(Ge||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,sn,be),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,sn,be)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||W===u.memoizedProps&&xt===u.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===u.memoizedProps&&xt===u.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=sn),N.props=S,N.state=sn,N.context=be,S=at):(typeof N.componentDidUpdate!="function"||W===u.memoizedProps&&xt===u.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===u.memoizedProps&&xt===u.memoizedState||(h.flags|=1024),S=!1)}return N=S,Uu(u,h),S=(h.flags&128)!==0,N||S?(N=h.stateNode,v=S&&typeof v.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,u!==null&&S?(h.child=ol(h,u.child,null,C),h.child=ol(h,null,v,C)):cs(u,h,v,C),h.memoizedState=N.state,u=h.child):u=Yr(u,h,C),u}function tv(u,h,v,S){return Qe(),h.flags|=256,cs(u,h,v,S),h.child}function Fp(u){return{baseLanes:u,cachePool:rv()}}function Vp(u,h,v){return u=u!==null?u.childLanes&~v:0,h&&(u|=ta),u}function nv(u,h,v){var S=h.pendingProps,C=!1,N=(h.flags&128)!==0,W;if((W=N)||(W=u!==null&&u.memoizedState===null?!1:(Fi.current&2)!==0),W&&(C=!0,h.flags&=-129),W=(h.flags&32)!==0,h.flags&=-33,u===null){if(Nn){if(C?_s(h):Zi(),Nn){var ae=ms,be;(be=ae)&&(ae=Dv(ae,ja),ae!==null?(h.memoizedState={dehydrated:ae,treeContext:or!==null?{id:Ur,overflow:Ga}:null,retryLane:536870912},be=t(18,null,null,0),be.stateNode=ae,be.return=h,h.child=be,Ts=h,ms=null,be=!0):be=!1),be||rt(h)}if(ae=h.memoizedState,ae!==null&&(ae=ae.dehydrated,ae!==null))return $u(ae)?h.lanes=16:h.lanes=536870912,null;qt(h)}return ae=S.children,S=S.fallback,C?(Zi(),C=h.mode,ae=Hp({mode:"hidden",children:ae},C),S=no(S,C,v,null),ae.return=h,S.return=h,ae.sibling=S,h.child=ae,C=h.child,C.memoizedState=Fp(v),C.childLanes=Vp(u,W,v),h.memoizedState=As,S):(_s(h),Lu(h,ae))}if(be=u.memoizedState,be!==null&&(ae=be.dehydrated,ae!==null)){if(N)h.flags&256?(_s(h),h.flags&=-257,h=kp(u,h,v)):h.memoizedState!==null?(Zi(),h.child=u.child,h.flags|=128,h=null):(Zi(),C=S.fallback,ae=h.mode,S=Hp({mode:"visible",children:S.children},ae),C=no(C,ae,v,null),C.flags|=2,S.return=h,C.return=h,S.sibling=C,h.child=S,ol(h,u.child,null,v),S=h.child,S.memoizedState=Fp(v),S.childLanes=Vp(u,W,v),h.memoizedState=As,h=C);else if(_s(h),$u(ae))W=Mv(ae).digest,S=Error(s(419)),S.stack="",S.digest=W,Ke({value:S,source:null,stack:null}),h=kp(u,h,v);else if(Ri||wl(u,h,v,!1),W=(v&u.childLanes)!==0,Ri||W){if(W=En,W!==null){if(S=v&-v,(S&42)!==0)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=(S&(W.suspendedLanes|v))!==0?0:S,S!==0&&S!==be.retryLane)throw be.retryLane=S,dt(u,S),Ss(W,u,S),Xv}Wf(ae)||Ys(),h=kp(u,h,v)}else Wf(ae)?(h.flags|=128,h.child=u.child,h=Ul.bind(null,u),Eb(ae,h),h=null):(u=be.treeContext,Ps&&(ms=Cv(ae),Ts=h,Nn=!0,Sa=null,ja=!1,u!==null&&(xa[ba++]=Ur,xa[ba++]=Ga,xa[ba++]=or,Ur=u.id,Ga=u.overflow,or=h)),h=Lu(h,S.children),h.flags|=4096);return h}return C?(Zi(),C=S.fallback,ae=h.mode,be=u.child,N=be.sibling,S=Es(be,{mode:"hidden",children:S.children}),S.subtreeFlags=be.subtreeFlags&31457280,N!==null?C=Es(N,C):(C=no(C,ae,v,null),C.flags|=2),C.return=h,S.return=h,S.sibling=C,h.child=S,S=C,C=h.child,ae=u.child.memoizedState,ae===null?ae=Fp(v):(be=ae.cachePool,be!==null?(N=Or?jn._currentValue:jn._currentValue2,be=be.parent!==N?{parent:N,pool:N}:be):be=rv(),ae={baseLanes:ae.baseLanes|v,cachePool:be}),C.memoizedState=ae,C.childLanes=Vp(u,W,v),h.memoizedState=As,S):(_s(h),v=u.child,u=v.sibling,v=Es(v,{mode:"visible",children:S.children}),v.return=h,v.sibling=null,u!==null&&(W=h.deletions,W===null?(h.deletions=[u],h.flags|=16):W.push(u)),h.child=v,h.memoizedState=null,v)}function Lu(u,h){return h=Hp({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function Hp(u,h){return Pf(u,h,0,null)}function kp(u,h,v){return ol(h,u.child,null,v),u=Lu(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function iv(u,h,v){u.lanes|=h;var S=u.alternate;S!==null&&(S.lanes|=h),jp(u.return,h,v)}function xf(u,h,v,S,C){var N=u.memoizedState;N===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:C}:(N.isBackwards=h,N.rendering=null,N.renderingStartTime=0,N.last=S,N.tail=v,N.tailMode=C)}function sv(u,h,v){var S=h.pendingProps,C=S.revealOrder,N=S.tail;if(cs(u,h,S.children,v),S=Fi.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&iv(u,v,h);else if(u.tag===19)iv(u,v,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}switch(R(Fi,S),C){case"forwards":for(v=h.child,C=null;v!==null;)u=v.alternate,u!==null&&ls(u)===null&&(C=v),v=v.sibling;v=C,v===null?(C=h.child,h.child=null):(C=v.sibling,v.sibling=null),xf(h,!1,C,v,N);break;case"backwards":for(v=null,C=h.child,h.child=null;C!==null;){if(u=C.alternate,u!==null&&ls(u)===null){h.child=C;break}u=C.sibling,C.sibling=v,v=C,C=u}xf(h,!0,v,null,N);break;case"together":xf(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Yr(u,h,v){if(u!==null&&(h.dependencies=u.dependencies),Aa|=h.lanes,(v&h.childLanes)===0)if(u!==null){if(wl(u,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(s(153));if(h.child!==null){for(u=h.child,v=Es(u,u.pendingProps),h.child=v,v.return=h;u.sibling!==null;)u=u.sibling,v=v.sibling=Es(u,u.pendingProps),v.return=h;v.sibling=null}return h.child}function Gp(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&Fo(u)))}function xb(u,h,v){switch(h.tag){case 3:le(h,h.stateNode.containerInfo),zo(h,jn,u.memoizedState.cache),Qe();break;case 27:case 5:Pe(h);break;case 4:le(h,h.stateNode.containerInfo);break;case 10:zo(h,h.type,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(_s(h),h.flags|=128,null):(v&h.child.childLanes)!==0?nv(u,h,v):(_s(h),u=Yr(u,h,v),u!==null?u.sibling:null);_s(h);break;case 19:var C=(u.flags&128)!==0;if(S=(v&h.childLanes)!==0,S||(wl(u,h,v,!1),S=(v&h.childLanes)!==0),C){if(S)return sv(u,h,v);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),R(Fi,Fi.current),S)break;return null;case 22:case 23:return h.lanes=0,Q0(u,h,v);case 24:zo(h,jn,u.memoizedState.cache)}return Yr(u,h,v)}function av(u,h,v){if(u!==null)if(u.memoizedProps!==h.pendingProps)Ri=!0;else{if(!Gp(u,v)&&(h.flags&128)===0)return Ri=!1,xb(u,h,v);Ri=(u.flags&131072)!==0}else Ri=!1,Nn&&(h.flags&1048576)!==0&&X(h,ah,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var S=h.elementType,C=S._init;if(S=C(S._payload),h.type=S,typeof S=="function")eo(S)?(u=nr(S,u),h.tag=1,h=zp(null,h,S,u,v)):(h.tag=0,h=Bp(null,h,S,u,v));else{if(S!=null){if(C=S.$$typeof,C===Rc){h.tag=11,h=Z0(null,h,S,u,v);break e}else if(C===qu){h.tag=14,h=J0(null,h,S,u,v);break e}}throw h=l(S)||S,Error(s(306,h,""))}}return h;case 0:return Bp(u,h,h.type,h.pendingProps,v);case 1:return S=h.type,C=nr(S,h.pendingProps),zp(u,h,S,C,v);case 3:e:{if(le(h,h.stateNode.containerInfo),u===null)throw Error(s(387));var N=h.pendingProps;C=h.memoizedState,S=C.element,bt(u,h),Yt(h,N,null,v);var W=h.memoizedState;if(N=W.cache,zo(h,jn,N),N!==C.cache&&qp(h,[jn],v,!0),Ut(),N=W.element,Ps&&C.isDehydrated)if(C={element:N,isDehydrated:!1,cache:W.cache},h.updateQueue.baseState=C,h.memoizedState=C,h.flags&256){h=tv(u,h,N,v);break e}else if(N!==S){S=fe(Error(s(424)),h),Ke(S),h=tv(u,h,N,v);break e}else for(Ps&&(ms=Av(h.stateNode.containerInfo),Ts=h,Nn=!0,Sa=null,ja=!0),v=qm(h,null,N,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Qe(),N===S){h=Yr(u,h,v);break e}cs(u,h,N,v)}h=h.child}return h;case 26:if(ya)return Uu(u,h),u===null?(v=Qf(h.type,null,h.pendingProps,null))?h.memoizedState=v:Nn||(h.stateNode=Tb(h.type,h.pendingProps,lr.current,h)):h.memoizedState=Qf(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if(ds)return Pe(h),u===null&&ds&&Nn&&(S=h.stateNode=Hm(h.type,h.pendingProps,lr.current,ns.current,!1),Ts=h,ja=!0,ms=Yf(S)),S=h.pendingProps.children,u!==null||Nn?cs(u,h,S,v):h.child=ol(h,null,S,v),Uu(u,h),h.child;case 5:return u===null&&Nn&&(Pv(h.type,h.pendingProps,ns.current),(C=S=ms)&&(S=Rv(S,h.type,h.pendingProps,ja),S!==null?(h.stateNode=S,Ts=h,ms=Yf(S),ja=!1,C=!0):C=!1),C||rt(h)),Pe(h),C=h.type,N=h.pendingProps,W=u!==null?u.memoizedProps:null,S=N.children,nl(C,N)?S=null:W!==null&&nl(C,W)&&(h.flags|=32),h.memoizedState!==null&&(C=K(u,h,ze,null,null,v),Or?Qt._currentValue=C:Qt._currentValue2=C),Uu(u,h),cs(u,h,S,v),h.child;case 6:return u===null&&Nn&&(Bv(h.pendingProps,ns.current),(u=v=ms)&&(v=Ov(v,h.pendingProps,ja),v!==null?(h.stateNode=v,Ts=h,ms=null,u=!0):u=!1),u||rt(h)),null;case 13:return nv(u,h,v);case 4:return le(h,h.stateNode.containerInfo),S=h.pendingProps,u===null?h.child=ol(h,null,S,v):cs(u,h,S,v),h.child;case 11:return Z0(u,h,h.type,h.pendingProps,v);case 7:return cs(u,h,h.pendingProps,v),h.child;case 8:return cs(u,h,h.pendingProps.children,v),h.child;case 12:return cs(u,h,h.pendingProps.children,v),h.child;case 10:return S=h.pendingProps,zo(h,h.type,S.value),cs(u,h,S.children,v),h.child;case 9:return C=h.type._context,S=h.pendingProps.children,Al(h),C=us(C),S=S(C),h.flags|=1,cs(u,h,S,v),h.child;case 14:return J0(u,h,h.type,h.pendingProps,v);case 15:return _f(u,h,h.type,h.pendingProps,v);case 19:return sv(u,h,v);case 22:return Q0(u,h,v);case 24:return Al(h),S=us(jn),u===null?(C=Vo(),C===null&&(C=En,N=bf(),C.pooledCache=N,N.refCount++,N!==null&&(C.pooledCacheLanes|=v),C=N),h.memoizedState={parent:S,cache:C},it(h),zo(h,jn,C)):((u.lanes&v)!==0&&(bt(u,h),Yt(h,null,null,v),Ut()),C=u.memoizedState,N=h.memoizedState,C.parent!==S?(C={parent:S,cache:S},h.memoizedState=C,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=C),zo(h,jn,S)):(S=N.cache,zo(h,jn,S),S!==C.cache&&qp(h,[jn],v,!0))),cs(u,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(s(156,h.tag))}function zo(u,h,v){Or?(R($s,h._currentValue),h._currentValue=v):(R($s,h._currentValue2),h._currentValue2=v)}function Kr(u){var h=$s.current;Or?u._currentValue=h:u._currentValue2=h,M($s)}function jp(u,h,v){for(;u!==null;){var S=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),u===v)break;u=u.return}}function qp(u,h,v,S){var C=u.child;for(C!==null&&(C.return=u);C!==null;){var N=C.dependencies;if(N!==null){var W=C.child;N=N.firstContext;e:for(;N!==null;){var ae=N;N=C;for(var be=0;be<h.length;be++)if(ae.context===h[be]){N.lanes|=v,ae=N.alternate,ae!==null&&(ae.lanes|=v),jp(N.return,v,u),S||(W=null);break e}N=ae.next}}else if(C.tag===18){if(W=C.return,W===null)throw Error(s(341));W.lanes|=v,N=W.alternate,N!==null&&(N.lanes|=v),jp(W,v,u),W=null}else W=C.child;if(W!==null)W.return=C;else for(W=C;W!==null;){if(W===u){W=null;break}if(C=W.sibling,C!==null){C.return=W.return,W=C;break}W=W.return}C=W}}function wl(u,h,v,S){u=null;for(var C=h,N=!1;C!==null;){if(!N){if((C.flags&524288)!==0)N=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var W=C.alternate;if(W===null)throw Error(s(387));if(W=W.memoizedProps,W!==null){var ae=C.type;_a(C.pendingProps.value,W.value)||(u!==null?u.push(ae):u=[ae])}}else if(C===Pc.current){if(W=C.alternate,W===null)throw Error(s(387));W.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(u!==null?u.push(Qt):u=[Qt])}C=C.return}u!==null&&qp(h,u,v,S),h.flags|=262144}function Fo(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!_a(Or?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function Al(u){cl=u,Ei=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function us(u){return Xp(cl,u)}function Iu(u,h){return cl===null&&Al(u),Xp(u,h)}function Xp(u,h){var v=Or?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:v,next:null},Ei===null){if(u===null)throw Error(s(308));Ei=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else Ei=Ei.next=h;return v}function bf(){return{controller:new Wv,data:new Map,refCount:0}}function pc(u){u.refCount--,u.refCount===0&&uo(Gl,function(){u.controller.abort()})}function Vo(){var u=ho.current;return u!==null?u:En.pooledCache}function Sf(u,h){h===null?R(ho,ho.current):R(ho,h.pool)}function rv(){var u=Vo();return u===null?null:{parent:Or?jn._currentValue:jn._currentValue2,pool:u}}function da(u){u.flags|=4}function Wp(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Ef(u,h,v,S){if(fs)for(v=h.child;v!==null;){if(v.tag===5||v.tag===6)Rr(u,v.stateNode);else if(!(v.tag===4||ds&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(ga)for(var C=h.child;C!==null;){if(C.tag===5){var N=C.stateNode;v&&S&&(N=Cm(N,C.type,C.memoizedProps)),Rr(u,N)}else if(C.tag===6)N=C.stateNode,v&&S&&(N=Rm(N,C.memoizedProps)),Rr(u,N);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)N=C.child,N!==null&&(N.return=C),Ef(u,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function mc(u,h,v,S){if(ga)for(var C=h.child;C!==null;){if(C.tag===5){var N=C.stateNode;v&&S&&(N=Cm(N,C.type,C.memoizedProps)),wm(u,N)}else if(C.tag===6)N=C.stateNode,v&&S&&(N=Rm(N,C.memoizedProps)),wm(u,N);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)N=C.child,N!==null&&(N.return=C),mc(u,C,!(C.memoizedProps!==null&&C.memoizedProps.mode==="manual"),!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function gc(u,h){if(ga&&Wp(u,h)){u=h.stateNode;var v=u.containerInfo,S=Xf();mc(S,h,!1,!1),u.pendingChildren=S,da(h),Ev(v,S)}}function Yp(u,h,v,S){if(fs)u.memoizedProps!==S&&da(h);else if(ga){var C=u.stateNode,N=u.memoizedProps;if((u=Wp(u,h))||N!==S){var W=ns.current;N=Tm(C,v,N,S,!u,null),N===C?h.stateNode=C:(so(N,v,S,W)&&da(h),h.stateNode=N,u?Ef(N,h,!1,!1):da(h))}else h.stateNode=C}}function vc(u,h,v){if(xv(h,v)){if(u.flags|=16777216,!ao(h,v))if(Hu())u.flags|=8192;else throw kl=id,jm}else u.flags&=-16777217}function Kp(u,h){if(zv(h)){if(u.flags|=16777216,!Fm(h))if(Hu())u.flags|=8192;else throw kl=id,jm}else u.flags&=-16777217}function Pu(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?L():536870912,u.lanes|=h,po|=h)}function Cl(u,h){if(!Nn)switch(u.tailMode){case"hidden":h=u.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function ui(u){var h=u.alternate!==null&&u.alternate.child===u.child,v=0,S=0;if(h)for(var C=u.child;C!==null;)v|=C.lanes|C.childLanes,S|=C.subtreeFlags&31457280,S|=C.flags&31457280,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)v|=C.lanes|C.childLanes,S|=C.subtreeFlags,S|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=S,u.childLanes=v,h}function ov(u,h,v){var S=h.pendingProps;switch(Re(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(h),null;case 1:return ui(h),null;case 3:return v=h.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),Kr(jn),Oe(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(u===null||u.child===null)&&(on(h)?da(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Sa!==null&&(Jr(Sa),Sa=null))),gc(u,h),ui(h),null;case 26:if(ya){v=h.type;var C=h.memoizedState;return u===null?(da(h),C!==null?(ui(h),Kp(h,C)):(ui(h),vc(h,v,S))):C?C!==u.memoizedState?(da(h),ui(h),Kp(h,C)):(ui(h),h.flags&=-16777217):(fs?u.memoizedProps!==S&&da(h):Yp(u,h,v,S),ui(h),vc(h,v,S)),null}case 27:if(ds){if(Ve(h),v=lr.current,C=h.type,u!==null&&h.stateNode!=null)fs?u.memoizedProps!==S&&da(h):Yp(u,h,C,S);else{if(!S){if(h.stateNode===null)throw Error(s(166));return ui(h),null}u=ns.current,on(h)?Pt(h,u):(u=Hm(C,S,v,u,!0),h.stateNode=u,da(h))}return ui(h),null}case 5:if(Ve(h),v=h.type,u!==null&&h.stateNode!=null)Yp(u,h,v,S);else{if(!S){if(h.stateNode===null)throw Error(s(166));return ui(h),null}u=ns.current,on(h)?Pt(h,u):(C=pm(v,S,lr.current,u,h),Ef(C,h,!1,!1),h.stateNode=C,so(C,v,S,u)&&da(h))}return ui(h),vc(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)v=u.memoizedProps,fs?v!==S&&da(h):ga&&(v!==S?(h.stateNode=Vf(S,lr.current,ns.current,h),da(h)):h.stateNode=u.stateNode);else{if(typeof S!="string"&&h.stateNode===null)throw Error(s(166));if(u=lr.current,v=ns.current,on(h)){if(!Ps)throw Error(s(176));if(u=h.stateNode,v=h.memoizedProps,S=null,C=Ts,C!==null)switch(C.tag){case 27:case 5:S=C.memoizedProps}Nv(u,v,h,S)||rt(h)}else h.stateNode=Vf(S,u,v,h)}return ui(h),null;case 13:if(S=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(C=on(h),S!==null&&S.dehydrated!==null){if(u===null){if(!C)throw Error(s(318));if(!Ps)throw Error(s(344));if(C=h.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));Dc(C,h)}else Qe(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ui(h),C=!1}else Sa!==null&&(Jr(Sa),Sa=null),C=!0;if(!C)return h.flags&256?(qt(h),h):(qt(h),null)}if(qt(h),(h.flags&128)!==0)return h.lanes=v,h;if(v=S!==null,u=u!==null&&u.memoizedState!==null,v){S=h.child,C=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(C=S.alternate.memoizedState.cachePool.pool);var N=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(N=S.memoizedState.cachePool.pool),N!==C&&(S.flags|=2048)}return v!==u&&v&&(h.child.flags|=8192),Pu(h,h.updateQueue),ui(h),null;case 4:return Oe(),gc(u,h),u===null&&vm(h.stateNode.containerInfo),ui(h),null;case 10:return Kr(h.type),ui(h),null;case 19:if(M(Fi),C=h.memoizedState,C===null)return ui(h),null;if(S=(h.flags&128)!==0,N=C.rendering,N===null)if(S)Cl(C,!1);else{if(On!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(N=ls(u),N!==null){for(h.flags|=128,Cl(C,!1),u=N.updateQueue,h.updateQueue=u,Pu(h,u),h.subtreeFlags=0,u=v,v=h.child;v!==null;)to(v,u),v=v.sibling;return R(Fi,Fi.current&1|2),h.child}u=u.sibling}C.tail!==null&&ps()>vi&&(h.flags|=128,S=!0,Cl(C,!1),h.lanes=4194304)}else{if(!S)if(u=ls(N),u!==null){if(h.flags|=128,S=!0,u=u.updateQueue,h.updateQueue=u,Pu(h,u),Cl(C,!0),C.tail===null&&C.tailMode==="hidden"&&!N.alternate&&!Nn)return ui(h),null}else 2*ps()-C.renderingStartTime>vi&&v!==536870912&&(h.flags|=128,S=!0,Cl(C,!1),h.lanes=4194304);C.isBackwards?(N.sibling=h.child,h.child=N):(u=C.last,u!==null?u.sibling=N:h.child=N,C.last=N)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=ps(),h.sibling=null,u=Fi.current,R(Fi,S?u&1|2:u&1),h):(ui(h),null);case 22:case 23:return qt(h),os(),S=h.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(v&536870912)!==0&&(h.flags&128)===0&&(ui(h),h.subtreeFlags&6&&(h.flags|=8192)):ui(h),v=h.updateQueue,v!==null&&Pu(h,v.retryQueue),v=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==v&&(h.flags|=2048),u!==null&&M(ho),null;case 24:return v=null,u!==null&&(v=u.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Kr(jn),ui(h),null;case 25:return null}throw Error(s(156,h.tag))}function lv(u,h){switch(Re(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Kr(jn),Oe(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Ve(h),null;case 13:if(qt(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(s(340));Qe()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return M(Fi),null;case 4:return Oe(),null;case 10:return Kr(h.type),null;case 22:case 23:return qt(h),os(),u!==null&&M(ho),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Kr(jn),null;case 25:return null;default:return null}}function Zp(u,h){switch(Re(h),h.tag){case 3:Kr(jn),Oe();break;case 26:case 27:case 5:Ve(h);break;case 4:Oe();break;case 13:qt(h);break;case 19:M(Fi);break;case 10:Kr(h.type);break;case 22:case 23:qt(h),os(),u!==null&&M(ho);break;case 24:Kr(jn)}}function Bu(u,h){try{var v=h.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var C=S.next;v=C;do{if((v.tag&u)===u){S=void 0;var N=v.create,W=v.inst;S=N(),W.destroy=S}v=v.next}while(v!==C)}}catch(ae){Tn(h,h.return,ae)}}function Ho(u,h,v){try{var S=h.updateQueue,C=S!==null?S.lastEffect:null;if(C!==null){var N=C.next;S=N;do{if((S.tag&u)===u){var W=S.inst,ae=W.destroy;if(ae!==void 0){W.destroy=void 0,C=h;var be=v;try{ae()}catch(Ge){Tn(C,be,Ge)}}}S=S.next}while(S!==N)}}catch(Ge){Tn(h,h.return,Ge)}}function cv(u){var h=u.updateQueue;if(h!==null){var v=u.stateNode;try{De(h,v)}catch(S){Tn(u,u.return,S)}}}function uv(u,h,v){v.props=nr(u.type,u.memoizedProps),v.state=u.memoizedState;try{v.componentWillUnmount()}catch(S){Tn(u,h,S)}}function Rl(u,h){try{var v=u.ref;if(v!==null){var S=u.stateNode;switch(u.tag){case 26:case 27:case 5:var C=Oc(S);break;default:C=S}typeof v=="function"?u.refCleanup=v(C):v.current=C}}catch(N){Tn(u,h,N)}}function hi(u,h){var v=u.ref,S=u.refCleanup;if(v!==null)if(typeof S=="function")try{S()}catch(C){Tn(u,h,C)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(C){Tn(u,h,C)}else v.current=null}function yc(u){var h=u.type,v=u.memoizedProps,S=u.stateNode;try{Sb(S,h,v,u)}catch(C){Tn(u,u.return,C)}}function Jp(u,h,v){try{bm(u.stateNode,u.type,v,h,u)}catch(S){Tn(u,u.return,S)}}function Qp(u){return u.tag===5||u.tag===3||(ya?u.tag===26:!1)||(ds?u.tag===27:!1)||u.tag===4}function Mf(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Qp(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!ds||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Tf(u,h,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?Em(v,u,h):bv(v,u);else if(!(S===4||ds&&S===27)&&(u=u.child,u!==null))for(Tf(u,h,v),u=u.sibling;u!==null;)Tf(u,h,v),u=u.sibling}function _c(u,h,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?Sm(v,u,h):xm(v,u);else if(!(S===4||ds&&S===27)&&(u=u.child,u!==null))for(_c(u,h,v),u=u.sibling;u!==null;)_c(u,h,v),u=u.sibling}function hv(u,h,v){u=u.containerInfo;try{Am(u,v)}catch(S){Tn(h,h.return,S)}}function xc(u,h){for(tl(u.containerInfo),Mi=h;Mi!==null;)if(u=Mi,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Mi=h;else for(;Mi!==null;){u=Mi;var v=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&v!==null){h=void 0;var S=u,C=v.memoizedProps;v=v.memoizedState;var N=S.stateNode;try{var W=nr(S.type,C,S.elementType===S.type);h=N.getSnapshotBeforeUpdate(W,v),N.__reactInternalSnapshotBeforeUpdate=h}catch(ae){Tn(S,S.return,ae)}}break;case 3:(h&1024)!==0&&fs&&qf(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(s(163))}if(h=u.sibling,h!==null){h.return=u.return,Mi=h;break}Mi=u.return}return W=jl,jl=!1,W}function wf(u,h,v){var S=v.flags;switch(v.tag){case 0:case 11:case 15:Er(u,v),S&4&&Bu(5,v);break;case 1:if(Er(u,v),S&4)if(u=v.stateNode,h===null)try{u.componentDidMount()}catch(ae){Tn(v,v.return,ae)}else{var C=nr(v.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(C,h,u.__reactInternalSnapshotBeforeUpdate)}catch(ae){Tn(v,v.return,ae)}}S&64&&cv(v),S&512&&Rl(v,v.return);break;case 3:if(Er(u,v),S&64&&(S=v.updateQueue,S!==null)){if(u=null,v.child!==null)switch(v.child.tag){case 27:case 5:u=Oc(v.child.stateNode);break;case 1:u=v.child.stateNode}try{De(S,u)}catch(ae){Tn(v,v.return,ae)}}break;case 26:if(ya){Er(u,v),S&512&&Rl(v,v.return);break}case 27:case 5:Er(u,v),h===null&&S&4&&yc(v),S&512&&Rl(v,v.return);break;case 12:Er(u,v);break;case 13:Er(u,v),S&4&&ko(u,v);break;case 22:if(C=v.memoizedState!==null||qi,!C){h=h!==null&&h.memoizedState!==null||gi;var N=qi,W=gi;qi=C,(gi=h)&&!W?jo(u,v,(v.subtreeFlags&8772)!==0):Er(u,v),qi=N,gi=W}S&512&&(v.memoizedProps.mode==="manual"?Rl(v,v.return):hi(v,v.return));break;default:Er(u,v)}}function bc(u){var h=u.alternate;h!==null&&(u.alternate=null,bc(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&ym(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function pa(u,h,v){for(v=v.child;v!==null;)Af(u,h,v),v=v.sibling}function Af(u,h,v){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(Ic,v)}catch{}switch(v.tag){case 26:if(ya){gi||hi(v,h),pa(u,h,v),v.memoizedState?Lm(v.memoizedState):v.stateNode&&Bm(v.stateNode);break}case 27:if(ds){gi||hi(v,h);var S=Oi,C=ea;Oi=v.stateNode,pa(u,h,v),Fv(v.stateNode),Oi=S,ea=C;break}case 5:gi||hi(v,h);case 6:if(fs){if(S=Oi,C=ea,Oi=null,pa(u,h,v),Oi=S,ea=C,Oi!==null)if(ea)try{Ai(Oi,v.stateNode)}catch(N){Tn(v,h,N)}else try{Bs(Oi,v.stateNode)}catch(N){Tn(v,h,N)}}else pa(u,h,v);break;case 18:fs&&Oi!==null&&(ea?Dm(Oi,v.stateNode):Lv(Oi,v.stateNode));break;case 4:fs?(S=Oi,C=ea,Oi=v.stateNode.containerInfo,ea=!0,pa(u,h,v),Oi=S,ea=C):(ga&&hv(v.stateNode,v,Xf()),pa(u,h,v));break;case 0:case 11:case 14:case 15:gi||Ho(2,v,h),gi||Ho(4,v,h),pa(u,h,v);break;case 1:gi||(hi(v,h),S=v.stateNode,typeof S.componentWillUnmount=="function"&&uv(v,h,S)),pa(u,h,v);break;case 21:pa(u,h,v);break;case 22:gi||hi(v,h),gi=(S=gi)||v.memoizedState!==null,pa(u,h,v),gi=S;break;default:pa(u,h,v)}}function ko(u,h){if(Ps&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Zf(u)}catch(v){Tn(h,h.return,v)}}function Sc(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new Hc),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new Hc),h;default:throw Error(s(435,u.tag))}}function zu(u,h){var v=Sc(u);h.forEach(function(S){var C=im.bind(null,u,S);v.has(S)||(v.add(S),S.then(C,C))})}function Us(u,h){var v=h.deletions;if(v!==null)for(var S=0;S<v.length;S++){var C=v[S],N=u,W=h;if(fs){var ae=W;e:for(;ae!==null;){switch(ae.tag){case 27:case 5:Oi=ae.stateNode,ea=!1;break e;case 3:Oi=ae.stateNode.containerInfo,ea=!0;break e;case 4:Oi=ae.stateNode.containerInfo,ea=!0;break e}ae=ae.return}if(Oi===null)throw Error(s(160));Af(N,W,C),Oi=null,ea=!1}else Af(N,W,C);N=C.alternate,N!==null&&(N.return=null),C.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Go(h,u),h=h.sibling}function Go(u,h){var v=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Us(h,u),Xs(u),S&4&&(Ho(3,u,u.return),Bu(3,u),Ho(5,u,u.return));break;case 1:Us(h,u),Xs(u),S&512&&(gi||v===null||hi(v,v.return)),S&64&&qi&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(v=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=v===null?S:v.concat(S))));break;case 26:if(ya){var C=zs;Us(h,u),Xs(u),S&512&&(gi||v===null||hi(v,v.return)),S&4&&(S=v!==null?v.memoizedState:null,h=u.memoizedState,v===null?h===null?u.stateNode===null?u.stateNode=Im(C,u.type,u.memoizedProps,u):Pm(C,u.type,u.stateNode):u.stateNode=Um(C,h,u.memoizedProps):S!==h?(S===null?v.stateNode!==null&&Bm(v.stateNode):Lm(S),h===null?Pm(C,u.type,u.stateNode):Um(C,h,u.memoizedProps)):h===null&&u.stateNode!==null&&Jp(u,u.memoizedProps,v.memoizedProps));break}case 27:if(ds&&S&4&&u.alternate===null){C=u.stateNode;var N=u.memoizedProps;try{wb(C),Ab(u.type,N,C,u)}catch(at){Tn(u,u.return,at)}}case 5:if(Us(h,u),Xs(u),S&512&&(gi||v===null||hi(v,v.return)),fs){if(u.flags&32){h=u.stateNode;try{Ju(h)}catch(at){Tn(u,u.return,at)}}S&4&&u.stateNode!=null&&(h=u.memoizedProps,Jp(u,h,v!==null?v.memoizedProps:h)),S&1024&&(ul=!0)}break;case 6:if(Us(h,u),Xs(u),S&4&&fs){if(u.stateNode===null)throw Error(s(162));S=u.memoizedProps,v=v!==null?v.memoizedProps:S,h=u.stateNode;try{Sv(h,v,S)}catch(at){Tn(u,u.return,at)}}break;case 3:if(ya?(zm(),C=zs,zs=Jf(h.containerInfo),Us(h,u),zs=C):Us(h,u),Xs(u),S&4){if(fs&&Ps&&v!==null&&v.memoizedState.isDehydrated)try{Kf(h.containerInfo)}catch(at){Tn(u,u.return,at)}if(ga){S=h.containerInfo,v=h.pendingChildren;try{Am(S,v)}catch(at){Tn(u,u.return,at)}}}ul&&(ul=!1,$p(u));break;case 4:ya?(v=zs,zs=Jf(u.stateNode.containerInfo),Us(h,u),Xs(u),zs=v):(Us(h,u),Xs(u)),S&4&&ga&&hv(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Us(h,u),Xs(u);break;case 13:Us(h,u),Xs(u),u.child.flags&8192&&u.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Br=ps()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,zu(u,S)));break;case 22:S&512&&(gi||v===null||hi(v,v.return)),C=u.memoizedState!==null;var W=v!==null&&v.memoizedState!==null,ae=qi,be=gi;if(qi=ae||C,gi=be||W,Us(h,u),gi=be,qi=ae,Xs(u),h=u.stateNode,h._current=u,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,S&8192&&(h._visibility=C?h._visibility&-2:h._visibility|1,C&&(h=qi||gi,v===null||W||h||Ec(u)),fs&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(v=null,fs)for(h=u;;){if(h.tag===5||ya&&h.tag===26||ds&&h.tag===27){if(v===null){W=v=h;try{N=W.stateNode,C?Qu(N):Mm(W.stateNode,W.memoizedProps)}catch(at){Tn(W,W.return,at)}}}else if(h.tag===6){if(v===null){W=h;try{var Ge=W.stateNode;C?jf(Ge):ro(Ge,W.memoizedProps)}catch(at){Tn(W,W.return,at)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}}S&4&&(S=u.updateQueue,S!==null&&(v=S.retryQueue,v!==null&&(S.retryQueue=null,zu(u,v))));break;case 19:Us(h,u),Xs(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,zu(u,S)));break;case 21:break;default:Us(h,u),Xs(u)}}function Xs(u){var h=u.flags;if(h&2){try{if(fs&&(!ds||u.tag!==27)){e:{for(var v=u.return;v!==null;){if(Qp(v)){var S=v;break e}v=v.return}throw Error(s(160))}switch(S.tag){case 27:if(ds){var C=S.stateNode,N=Mf(u);_c(u,N,C);break}case 5:var W=S.stateNode;S.flags&32&&(Ju(W),S.flags&=-33);var ae=Mf(u);_c(u,ae,W);break;case 3:case 4:var be=S.stateNode.containerInfo,Ge=Mf(u);Tf(u,Ge,be);break;default:throw Error(s(161))}}}catch(at){Tn(u,u.return,at)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function $p(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;$p(h),h.tag===5&&h.flags&1024&&Jn(h.stateNode),u=u.sibling}}function Er(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)wf(u,h.alternate,h),h=h.sibling}function Ec(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:Ho(4,h,h.return),Ec(h);break;case 1:hi(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&uv(h,h.return,v),Ec(h);break;case 26:case 27:case 5:hi(h,h.return),Ec(h);break;case 22:hi(h,h.return),h.memoizedState===null&&Ec(h);break;default:Ec(h)}u=u.sibling}}function jo(u,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,C=u,N=h,W=N.flags;switch(N.tag){case 0:case 11:case 15:jo(C,N,v),Bu(4,N);break;case 1:if(jo(C,N,v),S=N,C=S.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ge){Tn(S,S.return,Ge)}if(S=N,C=S.updateQueue,C!==null){var ae=S.stateNode;try{var be=C.shared.hiddenCallbacks;if(be!==null)for(C.shared.hiddenCallbacks=null,C=0;C<be.length;C++)ge(be[C],ae)}catch(Ge){Tn(S,S.return,Ge)}}v&&W&64&&cv(N),Rl(N,N.return);break;case 26:case 27:case 5:jo(C,N,v),v&&S===null&&W&4&&yc(N),Rl(N,N.return);break;case 12:jo(C,N,v);break;case 13:jo(C,N,v),v&&W&4&&ko(C,N);break;case 22:N.memoizedState===null&&jo(C,N,v),Rl(N,N.return);break;default:jo(C,N,v)}h=h.sibling}}function em(u,h){var v=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==v&&(u!=null&&u.refCount++,v!=null&&pc(v))}function Cf(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&pc(u))}function Zr(u,h,v,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Rf(u,h,v,S),h=h.sibling}function Rf(u,h,v,S){var C=h.flags;switch(h.tag){case 0:case 11:case 15:Zr(u,h,v,S),C&2048&&Bu(9,h);break;case 3:Zr(u,h,v,S),C&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&pc(u)));break;case 12:if(C&2048){Zr(u,h,v,S),u=h.stateNode;try{var N=h.memoizedProps,W=N.id,ae=N.onPostCommit;typeof ae=="function"&&ae(W,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(be){Tn(h,h.return,be)}}else Zr(u,h,v,S);break;case 23:break;case 22:N=h.stateNode,h.memoizedState!==null?N._visibility&4?Zr(u,h,v,S):qo(u,h):N._visibility&4?Zr(u,h,v,S):(N._visibility|=4,bs(u,h,v,S,(h.subtreeFlags&10256)!==0)),C&2048&&em(h.alternate,h);break;case 24:Zr(u,h,v,S),C&2048&&Cf(h.alternate,h);break;default:Zr(u,h,v,S)}}function bs(u,h,v,S,C){for(C=C&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var N=u,W=h,ae=v,be=S,Ge=W.flags;switch(W.tag){case 0:case 11:case 15:bs(N,W,ae,be,C),Bu(8,W);break;case 23:break;case 22:var at=W.stateNode;W.memoizedState!==null?at._visibility&4?bs(N,W,ae,be,C):qo(N,W):(at._visibility|=4,bs(N,W,ae,be,C)),C&&Ge&2048&&em(W.alternate,W);break;case 24:bs(N,W,ae,be,C),C&&Ge&2048&&Cf(W.alternate,W);break;default:bs(N,W,ae,be,C)}h=h.sibling}}function qo(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=u,S=h,C=S.flags;switch(S.tag){case 22:qo(v,S),C&2048&&em(S.alternate,S);break;case 24:qo(v,S),C&2048&&Cf(S.alternate,S);break;default:qo(v,S)}h=h.sibling}}function Qi(u){if(u.subtreeFlags&ql)for(u=u.child;u!==null;)Ol(u),u=u.sibling}function Ol(u){switch(u.tag){case 26:Qi(u),u.flags&ql&&(u.memoizedState!==null?Vm(zs,u.memoizedState,u.memoizedProps):_i(u.type,u.memoizedProps));break;case 5:Qi(u),u.flags&ql&&_i(u.type,u.memoizedProps);break;case 3:case 4:if(ya){var h=zs;zs=Jf(u.stateNode.containerInfo),Qi(u),zs=h}else Qi(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=ql,ql=16777216,Qi(u),ql=h):Qi(u));break;default:Qi(u)}}function Of(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Xo(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var S=h[v];Mi=S,Wo(S,u)}Of(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Fu(u),u=u.sibling}function Fu(u){switch(u.tag){case 0:case 11:case 15:Xo(u),u.flags&2048&&Ho(9,u,u.return);break;case 3:Xo(u);break;case 12:Xo(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&4&&(u.return===null||u.return.tag!==13)?(h._visibility&=-5,Mc(u)):Xo(u);break;default:Xo(u)}}function Mc(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var S=h[v];Mi=S,Wo(S,u)}Of(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:Ho(8,h,h.return),Mc(h);break;case 22:v=h.stateNode,v._visibility&4&&(v._visibility&=-5,Mc(h));break;default:Mc(h)}u=u.sibling}}function Wo(u,h){for(;Mi!==null;){var v=Mi;switch(v.tag){case 0:case 11:case 15:Ho(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var S=v.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:pc(v.memoizedState.cache)}if(S=v.child,S!==null)S.return=v,Mi=S;else e:for(v=u;Mi!==null;){S=Mi;var C=S.sibling,N=S.return;if(bc(S),S===v){Mi=null;break e}if(C!==null){C.return=N,Mi=C;break e}Mi=N}}}function Df(u){var h=gm(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(u=Fl(u),u===null)throw Error(s(362));return u.stateNode.current}function Tc(u,h){var v=u.tag;switch(h.$$typeof){case dh:if(u.type===h.value)return!0;break;case ld:e:{for(h=h.value,u=[u,0],v=0;v<u.length;){var S=u[v++],C=S.tag,N=u[v++],W=h[N];if(C!==5&&C!==26&&C!==27||!Nr(S)){for(;W!=null&&Tc(S,W);)N++,W=h[N];if(N===h.length){h=!0;break e}else for(S=S.child;S!==null;)u.push(S,N),S=S.sibling}}h=!1}return h;case cd:if((v===5||v===26||v===27)&&bb(u.stateNode,h.value))return!0;break;case qn:if((v===5||v===6||v===26||v===27)&&(u=Zu(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Rn:if((v===5||v===26||v===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Yo(u){switch(u.$$typeof){case dh:return"<"+(l(u.value)||"Unknown")+">";case ld:return":has("+(Yo(u)||"")+")";case cd:return'[role="'+u.value+'"]';case qn:return'"'+u.value+'"';case Rn:return'[data-testname="'+u.value+'"]';default:throw Error(s(365))}}function fv(u,h){var v=[];u=[u,0];for(var S=0;S<u.length;){var C=u[S++],N=C.tag,W=u[S++],ae=h[W];if(N!==5&&N!==26&&N!==27||!Nr(C)){for(;ae!=null&&Tc(C,ae);)W++,ae=h[W];if(W===h.length)v.push(C);else for(C=C.child;C!==null;)u.push(C,W),C=C.sibling}}return v}function Ls(u,h){if(!Dr)throw Error(s(363));u=Df(u),u=fv(u,h),h=[],u=Array.from(u);for(var v=0;v<u.length;){var S=u[v++],C=S.tag;if(C===5||C===26||C===27)Nr(S)||h.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return h}function Is(){if((Ht&2)!==0&&yn!==0)return yn&-yn;if(Xt.T!==null){var u=Qs;return u!==0?u:Tt()}return ka()}function Mr(){ta===0&&(ta=(yn&536870912)===0||Nn?F():536870912);var u=Ta.current;return u!==null&&(u.flags|=32),ta}function Ss(u,h,v){(u===En&&Qn===2||u.cancelPendingCommit!==null)&&(sr(u,0),ir(u,yn,ta,!1)),Z(u,v),((Ht&2)===0||u!==En)&&(u===En&&((Ht&2)===0&&(hr|=v),On===4&&ir(u,yn,ta,!1)),ot(u))}function Vu(u,h,v){if((Ht&6)!==0)throw Error(s(327));var S=!v&&(h&60)===0&&(h&u.expiredLanes)===0||I(u,h),C=S?Ar(u,h):Tr(u,h,!0),N=S;do{if(C===0){wa&&!S&&ir(u,h,0,!1);break}else if(C===6)ir(u,h,0,!Xn);else{if(v=u.current.alternate,N&&!dv(v)){C=Tr(u,h,!1),N=!1;continue}if(C===2){if(N=h,u.errorRecoveryDisabledLanes&N)var W=0;else W=u.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){h=W;e:{var ae=u;C=kc;var be=Ps&&ae.current.memoizedState.isDehydrated;if(be&&(sr(ae,W).flags|=256),W=Tr(ae,W,!1),W!==2){if(fo&&!be){ae.errorRecoveryDisabledLanes|=N,hr|=N,C=4;break e}N=Ca,Ca=C,N!==null&&Jr(N)}C=W}if(N=!1,C!==2)continue}}if(C===1){sr(u,0),ir(u,h,0,!0);break}e:{switch(S=u,C){case 0:case 1:throw Error(s(345));case 4:if((h&4194176)===h){ir(S,h,ta,!Xn);break e}break;case 2:Ca=null;break;case 3:case 5:break;default:throw Error(s(329))}if(S.finishedWork=v,S.finishedLanes=h,(h&62914560)===h&&(N=Br+300-ps(),10<N)){if(ir(S,h,ta,!Xn),H(S,0)!==0)break e;S.timeoutHandle=mm(Nf.bind(null,S,v,Ca,fr,Gc,h,ta,hr,po,Xn,2,-0,0),N);break e}Nf(S,v,Ca,fr,Gc,h,ta,hr,po,Xn,0,-0,0)}}break}while(!0);ot(u)}function Jr(u){Ca===null?Ca=u:Ca.push.apply(Ca,u)}function Nf(u,h,v,S,C,N,W,ae,be,Ge,at,yt,xt){var sn=h.subtreeFlags;if((sn&8192||(sn&16785408)===16785408)&&(va(),Ol(h),h=Hf(),h!==null)){u.cancelPendingCommit=h(ii.bind(null,u,v,S,C,W,ae,be,1,yt,xt)),ir(u,N,W,!Ge);return}ii(u,v,S,C,W,ae,be,at,yt,xt)}function dv(u){for(var h=u;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var S=0;S<v.length;S++){var C=v[S],N=C.getSnapshot;C=C.value;try{if(!_a(N(),C))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ir(u,h,v,S){h&=~Cs,h&=~hr,u.suspendedLanes|=h,u.pingedLanes&=~h,S&&(u.warmLanes|=h),S=u.expirationTimes;for(var C=h;0<C;){var N=31-Zs(C),W=1<<N;S[N]=-1,C&=~W}v!==0&&se(u,v,h)}function tm(){return(Ht&6)===0?(J(0),!1):!0}function Ws(){if(rn!==null){if(Qn===0)var u=rn.return;else u=rn,Ei=cl=null,$e(u),Lr=null,qa=0,u=rn;for(;u!==null;)Zp(u.alternate,u),u=u.return;rn=null}}function sr(u,h){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;v!==zl&&(u.timeoutHandle=zl,Ku(v)),v=u.cancelPendingCommit,v!==null&&(u.cancelPendingCommit=null,v()),Ws(),En=u,rn=v=Es(u.current,null),yn=h,Qn=0,Di=null,Xn=!1,wa=I(u,h),fo=!1,po=ta=Cs=hr=Aa=On=0,Ca=kc=null,Gc=!1,(h&8)!==0&&(h|=h&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=h;0<S;){var C=31-Zs(S),N=1<<C;h|=u[C],S&=~N}return ur=h,$(),v}function Dl(u,h){pn=null,Xt.H=Un,h===Zn?(h=Wt(),Qn=3):h===jm?(h=Wt(),Qn=4):Qn=h===Xv?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Di=h,rn===null&&(On=1,vf(u,fe(h,u.current)))}function Hu(){var u=Ta.current;return u===null?!0:(yn&4194176)===yn?Xa===null:(yn&62914560)===yn||(yn&536870912)!==0?u===Xa:!1}function wc(){var u=Xt.H;return Xt.H=Un,u===null?Un:u}function ma(){var u=Xt.A;return Xt.A=od,u}function Ys(){On=4,Xn||(yn&4194176)!==yn&&Ta.current!==null||(wa=!0),(Aa&134217727)===0&&(hr&134217727)===0||En===null||ir(En,yn,ta,!1)}function Tr(u,h,v){var S=Ht;Ht|=2;var C=wc(),N=ma();(En!==u||yn!==h)&&(fr=null,sr(u,h)),h=!1;var W=On;e:do try{if(Qn!==0&&rn!==null){var ae=rn,be=Di;switch(Qn){case 8:Ws(),W=6;break e;case 3:case 2:case 6:Ta.current===null&&(h=!0);var Ge=Qn;if(Qn=0,Di=null,Ko(u,ae,be,Ge),v&&wa){W=0;break e}break;default:Ge=Qn,Qn=0,Di=null,Ko(u,ae,be,Ge)}}wr(),W=On;break}catch(at){Dl(u,at)}while(!0);return h&&u.shellSuspendCounter++,Ei=cl=null,Ht=S,Xt.H=C,Xt.A=N,rn===null&&(En=null,yn=0,$()),W}function wr(){for(;rn!==null;)nm(rn)}function Ar(u,h){var v=Ht;Ht|=2;var S=wc(),C=ma();En!==u||yn!==h?(fr=null,vi=ps()+500,sr(u,h)):wa=I(u,h);e:do try{if(Qn!==0&&rn!==null){h=rn;var N=Di;t:switch(Qn){case 1:Qn=0,Di=null,Ko(u,h,N,1);break;case 2:if(Xe(N)){Qn=0,Di=null,Uf(h);break}h=function(){Qn===2&&En===u&&(Qn=7),ot(u)},N.then(h,h);break e;case 3:Qn=7;break e;case 4:Qn=5;break e;case 7:Xe(N)?(Qn=0,Di=null,Uf(h)):(Qn=0,Di=null,Ko(u,h,N,7));break;case 5:var W=null;switch(rn.tag){case 26:W=rn.memoizedState;case 5:case 27:var ae=rn,be=ae.type,Ge=ae.pendingProps;if(W?Fm(W):ao(be,Ge)){Qn=0,Di=null;var at=ae.sibling;if(at!==null)rn=at;else{var yt=ae.return;yt!==null?(rn=yt,ku(yt)):rn=null}break t}}Qn=0,Di=null,Ko(u,h,N,5);break;case 6:Qn=0,Di=null,Ko(u,h,N,6);break;case 8:Ws(),On=6;break e;default:throw Error(s(462))}}Qr();break}catch(xt){Dl(u,xt)}while(!0);return Ei=cl=null,Xt.H=S,Xt.A=C,Ht=v,rn!==null?0:(En=null,yn=0,$(),On)}function Qr(){for(;rn!==null&&!Hv();)nm(rn)}function nm(u){var h=av(u.alternate,u,ur);u.memoizedProps=u.pendingProps,h===null?ku(u):rn=h}function Uf(u){var h=u,v=h.alternate;switch(h.tag){case 15:case 0:h=ev(v,h,h.pendingProps,h.type,void 0,yn);break;case 11:h=ev(v,h,h.pendingProps,h.type.render,h.ref,yn);break;case 5:$e(h);default:Zp(v,h),h=rn=to(h,ur),h=av(v,h,ur)}u.memoizedProps=u.pendingProps,h===null?ku(u):rn=h}function Ko(u,h,v,S){Ei=cl=null,$e(h),Lr=null,qa=0;var C=h.return;try{if(K0(u,C,h,v,yn)){On=1,vf(u,fe(v,u.current)),rn=null;return}}catch(N){if(C!==null)throw rn=C,N;On=1,vf(u,fe(v,u.current)),rn=null;return}h.flags&32768?(Nn||S===1?u=!0:wa||(yn&536870912)!==0?u=!1:(Xn=u=!0,(S===2||S===3||S===6)&&(S=Ta.current,S!==null&&S.tag===13&&(S.flags|=16384))),$i(h,u)):ku(h)}function ku(u){var h=u;do{if((h.flags&32768)!==0){$i(h,Xn);return}u=h.return;var v=ov(h.alternate,h,ur);if(v!==null){rn=v;return}if(h=h.sibling,h!==null){rn=h;return}rn=h=u}while(h!==null);On===0&&(On=5)}function $i(u,h){do{var v=lv(u.alternate,u);if(v!==null){v.flags&=32767,rn=v;return}if(v=u.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(u=u.sibling,u!==null)){rn=u;return}rn=u=v}while(u!==null);On=6,rn=null}function ii(u,h,v,S,C,N,W,ae,be,Ge){var at=Xt.T,yt=ji();try{Ms(2),Xt.T=null,An(u,h,v,S,yt,C,N,W,ae,be,Ge)}finally{Xt.T=at,Ms(yt)}}function An(u,h,v,S,C,N,W,ae){do es();while(mo!==null);if((Ht&6)!==0)throw Error(s(327));var be=u.finishedWork;if(S=u.finishedLanes,be===null)return null;if(u.finishedWork=null,u.finishedLanes=0,be===u.current)throw Error(s(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var Ge=be.lanes|be.childLanes;if(Ge|=Bc,de(u,S,Ge,N,W,ae),u===En&&(rn=En=null,yn=0),(be.subtreeFlags&10256)===0&&(be.flags&10256)===0||Ya||(Ya=!0,ud=Ge,Wl=v,Gu($f,function(){return es(),null})),v=(be.flags&15990)!==0,(be.subtreeFlags&15990)!==0||v?(v=Xt.T,Xt.T=null,N=ji(),Ms(2),W=Ht,Ht|=4,xc(u,be),Go(be,u),dm(u.containerInfo),u.current=be,wf(u,be.alternate,be),kv(),Ht=W,Ms(N),Xt.T=v):u.current=be,Ya?(Ya=!1,mo=u,Xl=S):$r(u,Ge),Ge=u.pendingLanes,Ge===0&&(Ra=null),k(be.stateNode),ot(u),h!==null)for(C=u.onRecoverableError,be=0;be<h.length;be++)Ge=h[be],C(Ge.value,{componentStack:Ge.stack});return(Xl&3)!==0&&es(),Ge=u.pendingLanes,(S&4194218)!==0&&(Ge&42)!==0?u===Fs?Yl++:(Yl=0,Fs=u):Yl=0,J(0),null}function $r(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,pc(h)))}function es(){if(mo!==null){var u=mo,h=ud;ud=0;var v=xe(Xl),S=32>v?32:v;v=Xt.T;var C=ji();try{if(Ms(S),Xt.T=null,mo===null)var N=!1;else{S=Wl,Wl=null;var W=mo,ae=Xl;if(mo=null,Xl=0,(Ht&6)!==0)throw Error(s(331));var be=Ht;if(Ht|=4,Fu(W.current),Rf(W,W.current,ae,S),Ht=be,J(0,!1),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(Ic,W)}catch{}N=!0}return N}finally{Ms(C),Xt.T=v,$r(u,h)}}return!1}function Lf(u,h,v){h=fe(v,h),h=Du(u.stateNode,h,2),u=ut(u,h,2),u!==null&&(Z(u,2),ot(u))}function Tn(u,h,v){if(u.tag===3)Lf(u,u,v);else for(;h!==null;){if(h.tag===3){Lf(h,u,v);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Ra===null||!Ra.has(S))){u=fe(v,u),v=dc(2),S=ut(h,v,2),S!==null&&(Nu(v,S,h,u),Z(S,2),ot(S));break}}h=h.return}}function If(u,h,v){var S=u.pingCache;if(S===null){S=u.pingCache=new wn;var C=new Set;S.set(h,C)}else C=S.get(h),C===void 0&&(C=new Set,S.set(h,C));C.has(v)||(fo=!0,C.add(v),u=pv.bind(null,u,h,v),h.then(u,u))}function pv(u,h,v){var S=u.pingCache;S!==null&&S.delete(h),u.pingedLanes|=u.suspendedLanes&v,u.warmLanes&=~v,En===u&&(yn&v)===v&&(On===4||On===3&&(yn&62914560)===yn&&300>ps()-Br?(Ht&2)===0&&sr(u,0):Cs|=v,po===yn&&(po=0)),ot(u)}function Nl(u,h){h===0&&(h=L()),u=dt(u,h),u!==null&&(Z(u,h),ot(u))}function Ul(u){var h=u.memoizedState,v=0;h!==null&&(v=h.retryLane),Nl(u,v)}function im(u,h){var v=0;switch(u.tag){case 13:var S=u.stateNode,C=u.memoizedState;C!==null&&(v=C.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(h),Nl(u,v)}function Gu(u,h){return Lc(u,h)}function sm(u,h,v,S){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eo(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Es(u,h){var v=u.alternate;return v===null?(v=t(u.tag,h,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=h,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&31457280,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,h=u.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v.refCleanup=u.refCleanup,v}function to(u,h){u.flags&=31457282;var v=u.alternate;return v===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=v.childLanes,u.lanes=v.lanes,u.child=v.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=v.memoizedProps,u.memoizedState=v.memoizedState,u.updateQueue=v.updateQueue,u.type=v.type,h=v.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function Ha(u,h,v,S,C,N){var W=0;if(S=u,typeof u=="function")eo(u)&&(W=1);else if(typeof u=="string")W=ya&&ds?Nm(u,v,ns.current)?26:Nc(u)?27:5:ya?Nm(u,v,ns.current)?26:5:ds&&Nc(u)?27:5;else e:switch(u){case Cc:return no(v.children,C,N,h);case cm:W=8,C|=24;break;case um:return u=t(12,v,h,C|2),u.elementType=um,u.lanes=N,u;case Bf:return u=t(13,v,h,C),u.elementType=Bf,u.lanes=N,u;case Qo:return u=t(19,v,h,C),u.elementType=Qo,u.lanes=N,u;case Xu:return Pf(v,C,N,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case vv:case Cr:W=10;break e;case Jo:W=9;break e;case Rc:W=11;break e;case qu:W=14;break e;case rr:W=16,S=null;break e}W=29,v=Error(s(130,u===null?"null":typeof u,"")),S=null}return h=t(W,v,h,C),h.elementType=u,h.type=S,h.lanes=N,h}function no(u,h,v,S){return u=t(7,u,S,h),u.lanes=v,u}function Pf(u,h,v,S){u=t(22,u,S,h),u.elementType=Xu,u.lanes=v;var C={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=C._current;if(N===null)throw Error(s(456));if((C._pendingVisibility&2)===0){var W=dt(N,2);W!==null&&(C._pendingVisibility|=2,Ss(W,N,2))}},attach:function(){var N=C._current;if(N===null)throw Error(s(456));if((C._pendingVisibility&2)!==0){var W=dt(N,2);W!==null&&(C._pendingVisibility&=-3,Ss(W,N,2))}}};return u.stateNode=C,u}function Zo(u,h,v){return u=t(6,u,null,h),u.lanes=v,u}function Ac(u,h,v){return h=t(4,u.children!==null?u.children:[],u.key,h),h.lanes=v,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function Ll(u,h,v,S,C,N,W,ae){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=zl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=S,this.onUncaughtError=C,this.onCaughtError=N,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function ts(u,h,v,S,C,N,W,ae,be,Ge,at,yt){return u=new Ll(u,h,v,W,ae,be,Ge,yt),h=1,N===!0&&(h|=24),N=t(3,null,null,h),u.current=N,N.stateNode=u,h=bf(),h.refCount++,u.pooledCache=h,h.refCount++,N.memoizedState={element:S,isDehydrated:v,cache:h},it(N),u}function ju(u){return u?(u=Vl,u):Vl}function am(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=x(h),u=u!==null?E(u):null,u===null?null:Oc(u.stateNode)}function mv(u,h,v,S,C,N){C=ju(C),S.context===null?S.context=C:S.pendingContext=C,S=Et(h),S.payload={element:v},N=N===void 0?null:N,N!==null&&(S.callback=N),v=ut(u,S,h),v!==null&&(Ss(v,u,h),ht(v,u,h))}function gv(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<h?v:h}}function rm(u,h){gv(u,h),(u=u.alternate)&&gv(u,h)}var Vt={},om=xp(),hs=MN(),Il=Object.assign,lm=Symbol.for("react.element"),io=Symbol.for("react.transitional.element"),ar=Symbol.for("react.portal"),Cc=Symbol.for("react.fragment"),cm=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),vv=Symbol.for("react.provider"),Jo=Symbol.for("react.consumer"),Cr=Symbol.for("react.context"),Rc=Symbol.for("react.forward_ref"),Bf=Symbol.for("react.suspense"),Qo=Symbol.for("react.suspense_list"),qu=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),Xu=Symbol.for("react.offscreen"),yv=Symbol.for("react.memo_cache_sentinel"),hm=Symbol.iterator,Pl=Symbol.for("react.client.reference"),Xt=om.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zf,fm,$o=!1,el=Array.isArray,Ff=e.rendererVersion,Wu=e.rendererPackageName,Yu=e.extraDevToolsConfig,Oc=e.getPublicInstance,Bl=e.getRootHostContext,_v=e.getChildHostContext,tl=e.prepareForCommit,dm=e.resetAfterCommit,pm=e.createInstance,Rr=e.appendInitialChild,so=e.finalizeInitialChildren,nl=e.shouldSetTextContent,Vf=e.createTextInstance,mm=e.scheduleTimeout,Ku=e.cancelTimeout,zl=e.noTimeout,Or=e.isPrimaryRenderer;e.warnsIfNotActing;var fs=e.supportsMutation,ga=e.supportsPersistence,Ps=e.supportsHydration,gm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var vm=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ms=e.setCurrentUpdatePriority,ji=e.getCurrentUpdatePriority,ka=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var il=e.shouldAttemptEagerTransition,ym=e.detachDeletedInstance;e.requestPostPaintCallback;var xv=e.maySuspendCommit,ao=e.preloadInstance,va=e.startSuspendingCommit,_i=e.suspendInstance,Hf=e.waitForCommitToBeReady,Ks=e.NotPendingTransition,Qt=e.HostTransitionContext,Jn=e.resetFormInstance;e.bindToConsole;var zi=e.supportsMicrotasks,kf=e.scheduleMicrotask,Dr=e.supportsTestSelectors,Fl=e.findFiberRoot,Gf=e.getBoundingRect,Zu=e.getTextContent,Nr=e.isHiddenSubtree,bb=e.matchAccessibilityRole,xi=e.setFocusIfFocusable,_m=e.setupIntersectionObserver,xm=e.appendChild,bv=e.appendChildToContainer,Sv=e.commitTextUpdate,Sb=e.commitMount,bm=e.commitUpdate,Sm=e.insertBefore,Em=e.insertInContainerBefore,Bs=e.removeChild,Ai=e.removeChildFromContainer,Ju=e.resetTextContent,Qu=e.hideInstance,jf=e.hideTextInstance,Mm=e.unhideInstance,ro=e.unhideTextInstance,qf=e.clearContainer,Tm=e.cloneInstance,Xf=e.createContainerChildSet,wm=e.appendChildToContainerChildSet,Ev=e.finalizeContainerChildren,Am=e.replaceContainerChildren,Cm=e.cloneHiddenInstance,Rm=e.cloneHiddenTextInstance,Wf=e.isSuspenseInstancePending,$u=e.isSuspenseInstanceFallback,Mv=e.getSuspenseInstanceFallbackErrorDetails,Eb=e.registerSuspenseInstanceRetry,Tv=e.canHydrateFormStateMarker,wv=e.isFormStateMarkerMatching,Om=e.getNextHydratableSibling,Yf=e.getFirstHydratableChild,Av=e.getFirstHydratableChildWithinContainer,Cv=e.getFirstHydratableChildWithinSuspenseInstance,Rv=e.canHydrateInstance,Ov=e.canHydrateTextInstance,Dv=e.canHydrateSuspenseInstance,Mb=e.hydrateInstance,Nv=e.hydrateTextInstance,Dc=e.hydrateSuspenseInstance,Uv=e.getNextHydratableInstanceAfterSuspenseInstance,Kf=e.commitHydratedContainer,Zf=e.commitHydratedSuspenseInstance,Lv=e.clearSuspenseBoundary,Dm=e.clearSuspenseBoundaryFromContainer,Iv=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Pv=e.validateHydratableInstance,Bv=e.validateHydratableTextInstance,ya=e.supportsResources,Nm=e.isHostHoistableType,Jf=e.getHoistableRoot,Qf=e.getResource,Um=e.acquireResource,Lm=e.releaseResource,Im=e.hydrateHoistable,Pm=e.mountHoistable,Bm=e.unmountHoistable,Tb=e.createHoistableInstance,zm=e.prepareToCommitHoistables,zv=e.mayResourceSuspendCommit,Fm=e.preloadResource,Vm=e.suspendResource,ds=e.supportsSingletons,Hm=e.resolveSingletonInstance,wb=e.clearSingleton,Ab=e.acquireSingletonInstance,Fv=e.releaseSingletonInstance,Nc=e.isHostSingletonType,eh=[],oo=-1,Vl={},Zs=Math.clz32?Math.clz32:O,th=Math.log,Vv=Math.LN2,Uc=128,nh=4194304,Lc=hs.unstable_scheduleCallback,ih=hs.unstable_cancelCallback,Hv=hs.unstable_shouldYield,kv=hs.unstable_requestPaint,ps=hs.unstable_now,km=hs.unstable_ImmediatePriority,Gv=hs.unstable_UserBlockingPriority,$f=hs.unstable_NormalPriority,ed=hs.unstable_IdlePriority,jv=hs.log,Gm=hs.unstable_setDisableYieldValue,Ic=null,Js=null,_a=typeof Object.is=="function"?Object.is:Y,td=new WeakMap,fi=[],bi=0,sh=null,ah=0,xa=[],ba=0,or=null,Ur=1,Ga="",ns=T(null),rh=T(null),lr=T(null),Pc=T(null),Ts=null,ms=null,Nn=!1,Sa=null,ja=!1,oh=Error(s(519)),Ea=[],sl=0,Bc=0,zc=null,Hl=null,lh=!1,ch=!1,cr=!1,al=0,uh=null,nd=0,Qs=0,rl=null,lo=!1,Fc=!1,hh=Object.prototype.hasOwnProperty,Zn=Error(s(460)),jm=Error(s(474)),id={then:function(){}},kl=null,Lr=null,qa=0,ol=qs(!0),qm=qs(!1),Ir=T(null),Ma=T(0),Ta=T(null),Xa=null,Fi=T(0),Pr=0,pn=null,Fn=null,Ci=null,Wa=!1,di=!1,co=!1,fh=0,Si=0,Vc=null,qv=0,sd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Un={readContext:us,use:ie,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an};Un.useCacheRefresh=an,Un.useMemoCache=an,Un.useHostTransitionStatus=an,Un.useFormState=an,Un.useActionState=an,Un.useOptimistic=an;var Vi={readContext:us,use:ie,useCallback:function(u,h){return z().memoizedState=[u,h===void 0?null:h],u},useContext:us,useEffect:Up,useImperativeHandle:function(u,h,v){v=v!=null?v.concat([u]):null,hf(4194308,4,wu.bind(null,h,u),v)},useLayoutEffect:function(u,h){return hf(4194308,4,u,h)},useInsertionEffect:function(u,h){hf(4,2,u,h)},useMemo:function(u,h){var v=z();h=h===void 0?null:h;var S=u();if(co){te(!0);try{u()}finally{te(!1)}}return v.memoizedState=[S,h],S},useReducer:function(u,h,v){var S=z();if(v!==void 0){var C=v(h);if(co){te(!0);try{v(h)}finally{te(!1)}}}else C=h;return S.memoizedState=S.baseState=C,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:C},S.queue=u,u=u.dispatch=Io.bind(null,pn,u),[S.memoizedState,u]},useRef:function(u){var h=z();return u={current:u},h.memoizedState=u},useState:function(u){u=Nt(u);var h=u.queue,v=mf.bind(null,pn,h);return h.dispatch=v,[u.memoizedState,v]},useDebugValue:Au,useDeferredValue:function(u,h){var v=z();return Lo(v,u,h)},useTransition:function(){var u=Nt(!1);return u=df.bind(null,pn,u.queue,!0,!1),z().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,v){var S=pn,C=z();if(Nn){if(v===void 0)throw Error(s(407));v=v()}else{if(v=h(),En===null)throw Error(s(349));(yn&60)!==0||gt(S,h,v)}C.memoizedState=v;var N={value:v,getSnapshot:h};return C.queue=N,Up(jt.bind(null,S,N,u),[u]),S.flags|=2048,tr(9,mt.bind(null,S,N,v,h),{destroy:void 0},null),v},useId:function(){var u=z(),h=En.identifierPrefix;if(Nn){var v=Ga,S=Ur;v=(S&~(1<<32-Zs(S)-1)).toString(32)+v,h=":"+h+"R"+v,v=fh++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=qv++,h=":"+h+"r"+v.toString(32)+":";return u.memoizedState=h},useCacheRefresh:function(){return z().memoizedState=Cu.bind(null,pn)}};Vi.useMemoCache=ce,Vi.useHostTransitionStatus=Ml,Vi.useFormState=cn,Vi.useActionState=cn,Vi.useOptimistic=function(u){var h=z();h.memoizedState=h.baseState=u;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=gf.bind(null,pn,!0,v),v.dispatch=h,[u,h]};var ws={readContext:us,use:ie,useCallback:ff,useContext:us,useEffect:Tu,useImperativeHandle:br,useInsertionEffect:W0,useLayoutEffect:Y0,useMemo:El,useReducer:Fe,useRef:Ns,useState:function(){return Fe(Ee)},useDebugValue:Au,useDeferredValue:function(u,h){var v=Q();return Lp(v,Fn.memoizedState,u,h)},useTransition:function(){var u=Fe(Ee)[0],h=Q().memoizedState;return[typeof u=="boolean"?u:ne(u),h]},useSyncExternalStore:pt,useId:Sr};ws.useCacheRefresh=pf,ws.useMemoCache=ce,ws.useHostTransitionStatus=Ml,ws.useFormState=pi,ws.useActionState=pi,ws.useOptimistic=function(u,h){var v=Q();return At(v,Fn,u,h)};var ll={readContext:us,use:ie,useCallback:ff,useContext:us,useEffect:Tu,useImperativeHandle:br,useInsertionEffect:W0,useLayoutEffect:Y0,useMemo:El,useReducer:Ye,useRef:Ns,useState:function(){return Ye(Ee)},useDebugValue:Au,useDeferredValue:function(u,h){var v=Q();return Fn===null?Lo(v,u,h):Lp(v,Fn.memoizedState,u,h)},useTransition:function(){var u=Ye(Ee)[0],h=Q().memoizedState;return[typeof u=="boolean"?u:ne(u),h]},useSyncExternalStore:pt,useId:Sr};ll.useCacheRefresh=pf,ll.useMemoCache=ce,ll.useHostTransitionStatus=Ml,ll.useFormState=Ji,ll.useActionState=Ji,ll.useOptimistic=function(u,h){var v=Q();return Fn!==null?At(v,Fn,u,h):(v.baseState=u,[u,v.queue.dispatch])};var ad={isMounted:function(u){return(u=u._reactInternals)?y(u)===u:!1},enqueueSetState:function(u,h,v){u=u._reactInternals;var S=Is(),C=Et(S);C.payload=h,v!=null&&(C.callback=v),h=ut(u,C,S),h!==null&&(Ss(h,u,S),ht(h,u,S))},enqueueReplaceState:function(u,h,v){u=u._reactInternals;var S=Is(),C=Et(S);C.tag=1,C.payload=h,v!=null&&(C.callback=v),h=ut(u,C,S),h!==null&&(Ss(h,u,S),ht(h,u,S))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var v=Is(),S=Et(v);S.tag=2,h!=null&&(S.callback=h),h=ut(u,S,v),h!==null&&(Ss(h,u,v),ht(h,u,v))}},Xm=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Xv=Error(s(461)),Ri=!1,As={dehydrated:null,treeContext:null,retryLane:0},$s=T(null),cl=null,Ei=null,Wv=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(v,S){u.push(S)}};this.abort=function(){h.aborted=!0,u.forEach(function(v){return v()})}},uo=hs.unstable_scheduleCallback,Gl=hs.unstable_NormalPriority,jn={$$typeof:Cr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},rd=Xt.S;Xt.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&ct(u,h),rd!==null&&rd(u,h)};var ho=T(null),qi=!1,gi=!1,ul=!1,Hc=typeof WeakSet=="function"?WeakSet:Set,Mi=null,jl=!1,Oi=null,ea=!1,zs=null,ql=8192,od={getCacheForType:function(u){var h=us(jn),v=h.data.get(u);return v===void 0&&(v=u(),h.data.set(u,v)),v}},dh=0,ld=1,cd=2,Rn=3,qn=4;if(typeof Symbol=="function"&&Symbol.for){var mn=Symbol.for;dh=mn("selector.component"),ld=mn("selector.has_pseudo_class"),cd=mn("selector.role"),Rn=mn("selector.test_id"),qn=mn("selector.text")}var wn=typeof WeakMap=="function"?WeakMap:Map,Ht=0,En=null,rn=null,yn=0,Qn=0,Di=null,Xn=!1,wa=!1,fo=!1,ur=0,On=0,Aa=0,hr=0,Cs=0,ta=0,po=0,kc=null,Ca=null,Gc=!1,Br=0,vi=1/0,fr=null,Ra=null,Ya=!1,mo=null,Xl=0,ud=0,Wl=null,Yl=0,Fs=null;return Vt.attemptContinuousHydration=function(u){if(u.tag===13){var h=dt(u,67108864);h!==null&&Ss(h,u,67108864),rm(u,67108864)}},Vt.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Is(),v=dt(u,h);v!==null&&Ss(v,u,h),rm(u,h)}},Vt.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=D(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var v=1<<31-Zs(h);u.entanglements[1]|=v,h&=~v}ot(u),(Ht&6)===0&&(vi=ps()+500,J(0))}}break;case 13:h=dt(u,2),h!==null&&Ss(h,u,2),tm(),rm(u,2)}},Vt.batchedUpdates=function(u,h){return u(h)},Vt.createComponentSelector=function(u){return{$$typeof:dh,value:u}},Vt.createContainer=function(u,h,v,S,C,N,W,ae,be,Ge){return ts(u,h,!1,null,v,S,N,W,ae,be,Ge,null)},Vt.createHasPseudoClassSelector=function(u){return{$$typeof:ld,value:u}},Vt.createHydrationContainer=function(u,h,v,S,C,N,W,ae,be,Ge,at,yt,xt){return u=ts(v,S,!0,u,C,N,ae,be,Ge,at,yt,xt),u.context=ju(null),v=u.current,S=Is(),C=Et(S),C.callback=h??null,ut(v,C,S),u.current.lanes=S,Z(u,S),ot(u),u},Vt.createPortal=function(u,h,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:S==null?null:""+S,children:u,containerInfo:h,implementation:v}},Vt.createRoleSelector=function(u){return{$$typeof:cd,value:u}},Vt.createTestNameSelector=function(u){return{$$typeof:Rn,value:u}},Vt.createTextSelector=function(u){return{$$typeof:qn,value:u}},Vt.defaultOnCaughtError=function(u){console.error(u)},Vt.defaultOnRecoverableError=function(u){Xm(u)},Vt.defaultOnUncaughtError=function(u){Xm(u)},Vt.deferredUpdates=function(u){var h=Xt.T,v=ji();try{return Ms(32),Xt.T=null,u()}finally{Ms(v),Xt.T=h}},Vt.discreteUpdates=function(u,h,v,S,C){var N=Xt.T,W=ji();try{return Ms(2),Xt.T=null,u(h,v,S,C)}finally{Ms(W),Xt.T=N,Ht===0&&(vi=ps()+500)}},Vt.findAllNodes=Ls,Vt.findBoundingRects=function(u,h){if(!Dr)throw Error(s(363));h=Ls(u,h),u=[];for(var v=0;v<h.length;v++)u.push(Gf(h[v]));for(h=u.length-1;0<h;h--){v=u[h];for(var S=v.x,C=S+v.width,N=v.y,W=N+v.height,ae=h-1;0<=ae;ae--)if(h!==ae){var be=u[ae],Ge=be.x,at=Ge+be.width,yt=be.y,xt=yt+be.height;if(S>=Ge&&N>=yt&&C<=at&&W<=xt){u.splice(h,1);break}else if(S!==Ge||v.width!==be.width||xt<N||yt>W){if(!(N!==yt||v.height!==be.height||at<S||Ge>C)){Ge>S&&(be.width+=Ge-S,be.x=S),at<C&&(be.width=C-Ge),u.splice(h,1);break}}else{yt>N&&(be.height+=yt-N,be.y=N),xt<W&&(be.height=W-yt),u.splice(h,1);break}}}return u},Vt.findHostInstance=am,Vt.findHostInstanceWithNoPortals=function(u){return u=x(u),u=u!==null?A(u):null,u===null?null:Oc(u.stateNode)},Vt.findHostInstanceWithWarning=function(u){return am(u)},Vt.flushPassiveEffects=es,Vt.flushSyncFromReconciler=function(u){var h=Ht;Ht|=1;var v=Xt.T,S=ji();try{if(Ms(2),Xt.T=null,u)return u()}finally{Ms(S),Xt.T=v,Ht=h,(Ht&6)===0&&J(0)}},Vt.flushSyncWork=tm,Vt.focusWithin=function(u,h){if(!Dr)throw Error(s(363));for(u=Df(u),h=fv(u,h),h=Array.from(h),u=0;u<h.length;){var v=h[u++],S=v.tag;if(!Nr(v)){if((S===5||S===26||S===27)&&xi(v.stateNode))return!0;for(v=v.child;v!==null;)h.push(v),v=v.sibling}}return!1},Vt.getFindAllNodesFailureDescription=function(u,h){if(!Dr)throw Error(s(363));var v=0,S=[];u=[Df(u),0];for(var C=0;C<u.length;){var N=u[C++],W=N.tag,ae=u[C++],be=h[ae];if((W!==5&&W!==26&&W!==27||!Nr(N))&&(Tc(N,be)&&(S.push(Yo(be)),ae++,ae>v&&(v=ae)),ae<h.length))for(N=N.child;N!==null;)u.push(N,ae),N=N.sibling}if(v<h.length){for(u=[];v<h.length;v++)u.push(Yo(h[v]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},Vt.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Oc(u.child.stateNode);default:return u.child.stateNode}},Vt.injectIntoDevTools=function(){var u={bundleType:0,version:Ff,rendererPackageName:Wu,currentDispatcherRef:Xt,findFiberByHostInstance:gm,reconcilerVersion:"19.0.0"};if(Yu!==null&&(u.rendererConfig=Yu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Ic=h.inject(u),Js=h}catch{}u=!!h.checkDCE}}return u},Vt.isAlreadyRendering=function(){return!1},Vt.observeVisibleRects=function(u,h,v,S){if(!Dr)throw Error(s(363));u=Ls(u,h);var C=_m(u,v,S).disconnect;return{disconnect:function(){C()}}},Vt.shouldError=function(){return null},Vt.shouldSuspend=function(){return!1},Vt.startHostTransition=function(u,h,v,S){if(u.tag!==5)throw Error(s(476));var C=Ip(u).queue;df(u,C,h,Ks,v===null?i:function(){var N=Ip(u).next.queue;return Po(u,N,{},Is()),v(S)})},Vt.updateContainer=function(u,h,v,S){var C=h.current,N=Is();return mv(C,N,u,h,v,S),N},Vt.updateContainerSync=function(u,h,v,S){return h.tag===0&&es(),mv(h.current,2,u,h,v,S),2},Vt},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(mE)),mE.exports}var IR;function yj(){return IR||(IR=1,pE.exports=vj()),pE.exports}var _j=yj();const xj=E0(_j);var PR=MN();function lT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=lT(i,e,t);if(s)return s;i=e?null:i.sibling}}function TN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const cT=TN(me.createContext(null));class wN extends me.Component{render(){return me.createElement(cT.Provider,{value:this._reactInternals},this.props.children)}}function AN(){const n=me.useContext(cT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=me.useId();return me.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=lT(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(i)return i}},[n,e])}const bj=Symbol.for("react.context"),Sj=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===bj;function Ej(){const n=AN(),[e]=me.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Sj(i)&&i!==cT&&!e.has(i)&&e.set(i,me.use(TN(i))),t=t.return}return e}function Mj(){const n=Ej();return me.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>me.createElement(e,null,me.createElement(t.Provider,{...i,value:n.get(t)})),e=>me.createElement(wN,{...e})),[n])}function CN(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const RN=n=>n&&n.isOrthographicCamera,Tj=n=>n&&n.hasOwnProperty("current"),wj=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),k0=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?me.useLayoutEffect:me.useEffect;function uT(n){const e=me.useRef(n);return k0(()=>void(e.current=n),[n]),e}function Aj(){const n=AN(),e=Mj();return me.useMemo(()=>({children:t})=>{const s=!!lT(n,!0,r=>r.type===me.StrictMode)?me.StrictMode:me.Fragment;return q.jsx(s,{children:q.jsx(e,{children:t})})},[n,e])}function Cj({set:n}){return k0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const Rj=(n=>(n=class extends me.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function ON(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Id(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ti={obj:n=>n===Object(n)&&!Ti.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ti.str(n)||Ti.num(n)||Ti.boo(n))return n===e;const r=Ti.obj(n);if(r&&i==="reference")return n===e;const l=Ti.arr(n);if(l&&t==="reference")return n===e;if((l||r)&&n===e)return!0;let c;for(c in n)if(!(c in e))return!1;if(r&&t==="shallow"&&i==="shallow"){for(c in s?e:n)if(!Ti.equ(n[c],e[c],{strict:s,objects:"reference"}))return!1}else for(c in s?e:n)if(n[c]!==e[c])return!1;if(Ti.und(c)){if(l&&n.length===0&&e.length===0||r&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Oj(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Dj(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const DN=["children","key","ref"];function Nj(n){const e={};for(const t in n)DN.includes(t)||(e[t]=n[t]);return e}function Sx(n,e,t,i){const s=n;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:Nj(i),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function p0(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const s of i){if(typeof t!="object"||t===null){if(t!==void 0){const r=i.slice(i.indexOf(s)).join("-");return{root:t,key:r,target:void 0}}return{root:n,key:e,target:void 0}}e=s,n=t,t=t[e]}return{root:n,key:e,target:t}}const BR=/-\d+$/;function Ex(n,e){if(Ti.str(e.props.attach)){if(BR.test(e.props.attach)){const s=e.props.attach.replace(BR,""),{root:r,key:l}=p0(n.object,s);Array.isArray(r[l])||(r[l]=[])}const{root:t,key:i}=p0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Ti.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function Mx(n,e){if(Ti.str(e.props.attach)){const{root:t,key:i}=p0(n.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[i]:t[i]=s}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const x1=[...DN,"args","dispose","attach","object","onUpdate","dispose"],zR=new Map;function Uj(n){let e=zR.get(n.constructor);try{e||(e=new n.constructor,zR.set(n.constructor,e))}catch{}return e}function Lj(n,e){const t={};for(const i in e)if(!x1.includes(i)&&!Ti.equ(e[i],n.props[i])){t[i]=e[i];for(const s in e)s.startsWith(`${i}-`)&&(t[s]=e[s])}for(const i in n.props){if(x1.includes(i)||e.hasOwnProperty(i))continue;const{root:s,key:r}=p0(n.object,i);if(s.constructor&&s.constructor.length===0){const l=Uj(s);Ti.und(l)||(t[r]=l[r])}else t[r]=0}return t}const Ij=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Pj=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function fl(n,e){var t;const i=n.__r3f,s=i&&CN(i).getState(),r=i==null?void 0:i.eventCount;for(const c in e){let d=e[c];if(x1.includes(c))continue;if(i&&Pj.test(c)){typeof d=="function"?i.handlers[c]=d:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:y}=p0(n,c);if(y===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${c}". Ensure it is an object before setting "${g}".`);if(y instanceof pp&&d instanceof pp)y.mask=d.mask;else if(y instanceof St&&wj(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var l;p[g]=d,s&&!s.linear&&Ij.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===Ki&&p[g].type===er&&(p[g].colorSpace=Gs)}}if(i!=null&&i.parent&&s!=null&&s.internal&&(t=i.object)!=null&&t.isObject3D&&r!==i.eventCount){const c=i.object,d=s.internal.interaction.indexOf(c);d>-1&&s.internal.interaction.splice(d,1),i.eventCount&&c.raycast!==null&&s.internal.interaction.push(c)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Op(i),n}function Op(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function NN(n,e){n.manual||(RN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Na=n=>n==null?void 0:n.isObject3D;function o_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function UN(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function Bj(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{UN(t.capturedMap,e,i,s)})}function zj(n){function e(d){const{internal:p}=n.getState(),g=d.offsetX-p.initialClick[0],y=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=p.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function i(d,p){const g=n.getState(),y=new Set,_=[],x=p?p(g.internal.interaction):g.internal.interaction;for(let M=0;M<x.length;M++){const R=Id(x[M]);R&&(R.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function E(M){const R=Id(M);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var O;R.events.compute==null||R.events.compute(d,R,(O=R.previousRoot)==null?void 0:O.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(M,!0):[]}let A=x.flatMap(E).sort((M,R)=>{const O=Id(M.object),D=Id(R.object);return!O||!D?M.distance-R.distance:D.events.priority-O.events.priority||M.distance-R.distance}).filter(M=>{const R=o_(M);return y.has(R)?!1:(y.add(R),!0)});g.events.filter&&(A=g.events.filter(A,g));for(const M of A){let R=M.object;for(;R;){var T;(T=R.__r3f)!=null&&T.eventCount&&_.push({...M,eventObject:R}),R=R.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let M of g.internal.capturedMap.get(d.pointerId).values())y.has(o_(M.intersection))||_.push(M.intersection);return _}function s(d,p,g,y){if(d.length){const _={stopped:!1};for(const x of d){let E=Id(x.object);if(E||x.object.traverseAncestors(A=>{const T=Id(A);if(T)return E=T,!1}),E){const{raycaster:A,pointer:T,camera:M,internal:R}=E,O=new ee(T.x,T.y,0).unproject(M),D=L=>{var P,Z;return(P=(Z=R.capturedMap.get(L))==null?void 0:Z.has(x.eventObject))!=null?P:!1},H=L=>{const P={intersection:x,target:p.target};R.capturedMap.has(L)?R.capturedMap.get(L).set(x.eventObject,P):R.capturedMap.set(L,new Map([[x.eventObject,P]])),p.target.setPointerCapture(L)},I=L=>{const P=R.capturedMap.get(L);P&&UN(R.capturedMap,x.eventObject,P,L)};let V={};for(let L in p){let P=p[L];typeof P!="function"&&(V[L]=P)}let F={...x,...V,pointer:T,intersections:d,stopped:_.stopped,delta:g,unprojectedPoint:O,ray:A.ray,camera:M,stopPropagation(){const L="pointerId"in p&&R.capturedMap.get(p.pointerId);if((!L||L.has(x.eventObject))&&(F.stopped=_.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(P=>P.eventObject===x.eventObject))){const P=d.slice(0,d.indexOf(x));r([...P,x])}},target:{hasPointerCapture:D,setPointerCapture:H,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:H,releasePointerCapture:I},nativeEvent:p};if(y(F),_.stopped===!0)break}}}return d}function r(d){const{internal:p}=n.getState();for(const g of p.hovered.values())if(!d.length||!d.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const _=g.eventObject.__r3f;if(p.hovered.delete(o_(g)),_!=null&&_.eventCount){const x=_.handlers,E={...g,intersections:d};x.onPointerOut==null||x.onPointerOut(E),x.onPointerLeave==null||x.onPointerLeave(E)}}}function l(d,p){for(let g=0;g<p.length;g++){const y=p[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function c(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:g}=n.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),r([]))})}}return function(g){const{onPointerMissed:y,internal:_}=n.getState();_.lastEvent.current=g;const x=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",T=i(g,x?t:void 0),M=E?e(g):0;d==="onPointerDown"&&(_.initialClick=[g.offsetX,g.offsetY],_.initialHits=T.map(O=>O.eventObject)),E&&!T.length&&M<=2&&(l(g,_.interaction),y&&y(g)),x&&r(T);function R(O){const D=O.eventObject,H=D.__r3f;if(!(H!=null&&H.eventCount))return;const I=H.handlers;if(x){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const V=o_(O),F=_.hovered.get(V);F?F.stopped&&O.stopPropagation():(_.hovered.set(V,O),I.onPointerOver==null||I.onPointerOver(O),I.onPointerEnter==null||I.onPointerEnter(O))}I.onPointerMove==null||I.onPointerMove(O)}else{const V=I[d];V?(!E||_.initialHits.includes(D))&&(l(g,_.interaction.filter(F=>!_.initialHits.includes(F))),V(O)):E&&_.initialHits.includes(D)&&l(g,_.interaction.filter(F=>!_.initialHits.includes(F)))}}s(T,g,M,R)}}return{handlePointer:c}}const FR=n=>!!(n!=null&&n.render),hT=me.createContext(null),Fj=(n,e)=>{const t=bN((c,d)=>{const p=new ee,g=new ee,y=new ee;function _(M=d().camera,R=g,O=d().size){const{width:D,height:H,top:I,left:V}=O,F=D/H;R.isVector3?y.copy(R):y.set(...R);const L=M.getWorldPosition(p).distanceTo(y);if(RN(M))return{width:D/M.zoom,height:H/M.zoom,top:I,left:V,factor:1,distance:L,aspect:F};{const P=M.fov*Math.PI/180,Z=2*Math.tan(P/2)*L,de=Z*(D/H);return{width:de,height:Z,top:I,left:V,factor:D/de,distance:L,aspect:F}}}let x;const E=M=>c(R=>({performance:{...R.performance,current:M}})),A=new Je;return{set:c,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(d(),M),advance:(M,R)=>e(M,R,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new eT,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();x&&clearTimeout(x),M.performance.current!==M.performance.min&&E(M.performance.min),x=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>c(R=>({...R,events:{...R.events,...M}})),setSize:(M,R,O=0,D=0)=>{const H=d().camera,I={width:M,height:R,top:O,left:D};c(V=>({size:I,viewport:{...V.viewport,..._(H,g,I)}}))},setDpr:M=>c(R=>{const O=ON(M);return{viewport:{...R.viewport,dpr:O,initialDpr:R.viewport.initialDpr||O}}}),setFrameloop:(M="always")=>{const R=d().clock;R.stop(),R.elapsedTime=0,M!=="never"&&(R.start(),R.elapsedTime=0),c(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:me.createRef(),active:!1,frames:0,priority:0,subscribe:(M,R,O)=>{const D=d().internal;return D.priority=D.priority+(R>0?1:0),D.subscribers.push({ref:M,priority:R,store:O}),D.subscribers=D.subscribers.sort((H,I)=>H.priority-I.priority),()=>{const H=d().internal;H!=null&&H.subscribers&&(H.priority=H.priority-(R>0?1:0),H.subscribers=H.subscribers.filter(I=>I.ref!==M))}}}}}),i=t.getState();let s=i.size,r=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:c,size:d,viewport:p,gl:g,set:y}=t.getState();if(d.width!==s.width||d.height!==s.height||p.dpr!==r){s=d,r=p.dpr,NN(c,d),p.dpr>0&&g.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,_)}c!==l&&(l=c,y(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>n(c)),t};function fT(){const n=me.useContext(hT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function m0(n=t=>t,e){return fT()(n,e)}function G0(n,e=0){const t=fT(),i=t.getState().internal.subscribe,s=uT(n);return k0(()=>i(s,e,t),[e,i,t]),null}const VR=new WeakMap,Vj=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function LN(n,e){return function(t,...i){let s;return Vj(t)?(s=VR.get(t),s||(s=new t,VR.set(t,s))):s=t,n&&n(s),Promise.all(i.map(r=>new Promise((l,c)=>s.load(r,d=>{Na(d==null?void 0:d.scene)&&Object.assign(d,Oj(d.scene)),l(d)},e,d=>c(new Error(`Could not load ${r}: ${d==null?void 0:d.message}`))))))}}function vp(n,e,t,i){const s=Array.isArray(e)?e:[e],r=dj(LN(t,i),[n,...s],{equal:Ti.equ});return Array.isArray(e)?r:r[0]}vp.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return pj(LN(t),[n,...i])};vp.clear=function(n,e){const t=Array.isArray(e)?e:[e];return mj([n,...t])};function Hj(n){const e=xj(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:me.version}),e}const IN=0,yp={},kj=/^three(?=[A-Z])/,mb=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let Gj=0;const jj=n=>typeof n=="function";function PN(n){if(jj(n)){const e=`${Gj++}`;return yp[e]=n,e}else Object.assign(yp,n)}function BN(n,e){const t=mb(n),i=yp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function qj(n,e,t){var i;return n=mb(n)in yp?n:n.replace(kj,""),BN(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,Sx(e.object,t,n,e)}function Xj(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?Mx(n.parent,n):Na(n.object)&&(n.object.visible=!1),n.isHidden=!0,Op(n)}}function zN(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?Ex(n.parent,n):Na(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Op(n)}}function dT(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var s,r;const l=yp[mb(e.type)];e.object=(s=e.props.object)!=null?s:new l(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(fl(e.object,e.props),e.props.attach)Ex(n,e);else if(Na(e.object)&&Na(n.object)){const l=n.object.children.indexOf(t==null?void 0:t.object);if(t&&l!==-1){const c=n.object.children.indexOf(e.object);if(c!==-1){n.object.children.splice(c,1);const d=c<l?l-1:l;n.object.children.splice(d,0,e.object)}else e.object.parent=n.object,n.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const l of e.children)dT(e,l);Op(e)}}function yE(n,e){e&&(e.parent=n,n.children.push(e),dT(n,e))}function HR(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),dT(n,e,t)}function FN(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():PR.unstable_scheduleCallback(PR.unstable_IdlePriority,e)}}function b1(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?Mx(n,e):Na(e.object)&&Na(n.object)&&(n.object.remove(e.object),Bj(CN(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const l=e.children[r];b1(e,l,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&FN(e.object),t===void 0&&Op(e)}function Wj(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const R_=[];function Yj(){for(const[t]of R_){const i=t.parent;if(i){t.props.attach?Mx(i,t):Na(t.object)&&Na(i.object)&&i.object.remove(t.object);for(const s of t.children)s.props.attach?Mx(t,s):Na(s.object)&&Na(t.object)&&t.object.remove(s.object)}t.isHidden&&zN(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&FN(t.object)}for(const[t,i,s]of R_){t.props=i;const r=t.parent;if(r){var n,e;const l=yp[mb(t.type)];t.object=(n=t.props.object)!=null?n:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Wj(s,t.object),fl(t.object,t.props),t.props.attach?Ex(r,t):Na(t.object)&&Na(r.object)&&r.object.add(t.object);for(const c of t.children)c.props.attach?Ex(t,c):Na(c.object)&&Na(t.object)&&t.object.add(c.object);Op(t)}}R_.length=0}const _E=()=>{},kR={};let l_=IN;const Kj=0,Zj=4,Tx=Hj({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:qj,removeChild:b1,appendChild:yE,appendInitialChild:yE,insertBefore:HR,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||yE(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||b1(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||HR(i,e,t)},getRootHostContext:()=>kR,getChildHostContext:()=>kR,commitUpdate(n,e,t,i,s){var r,l,c;BN(e,i);let d=!1;if((n.type==="primitive"&&t.object!==i.object||((r=i.args)==null?void 0:r.length)!==((l=t.args)==null?void 0:l.length)||(c=i.args)!=null&&c.some((g,y)=>{var _;return g!==((_=t.args)==null?void 0:_[y])}))&&(d=!0),d)R_.push([n,{...i},s]);else{const g=Lj(n,i);Object.keys(g).length&&(Object.assign(n.props,g),fl(n.object,g))}(s.sibling===null||(s.flags&Zj)===Kj)&&Yj()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>Sx(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Xj,unhideInstance:zN,createTextInstance:_E,hideTextInstance:_E,unhideTextInstance:_E,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:me.createContext(null),setCurrentUpdatePriority(n){l_=n},getCurrentUpdatePriority(){return l_},resolveUpdatePriority(){var n;if(l_!==IN)return l_;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return T_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return T_.ContinuousEventPriority;default:return T_.DefaultEventPriority}},resetFormInstance(){}}),rf=new Map,Pd={objects:"shallow",strict:!1};function Jj(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:r}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Qj(n){const e=rf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=i||Fj(M1,jR),l=t||Tx.createContainer(r,T_.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||rf.set(n,{fiber:l,store:r});let c,d,p=!1,g=null;return{async configure(y={}){let _;g=new Promise(X=>_=X);let{gl:x,size:E,scene:A,events:T,onCreated:M,shadows:R=!1,linear:O=!1,flat:D=!1,legacy:H=!1,orthographic:I=!1,frameloop:V="always",dpr:F=[1,2],performance:L,raycaster:P,camera:Z,onPointerMissed:de}=y,se=r.getState(),he=se.gl;if(!se.gl){const X={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},oe=typeof x=="function"?await x(X):x;FR(oe)?he=oe:he=new oT({...X,...x}),se.set({gl:he})}let xe=se.raycaster;xe||se.set({raycaster:xe=new sT});const{params:k,...te}=P||{};if(Ti.equ(te,xe,Pd)||fl(xe,{...te}),Ti.equ(k,xe.params,Pd)||fl(xe,{params:{...xe.params,...k}}),!se.camera||se.camera===d&&!Ti.equ(d,Z,Pd)){d=Z;const X=Z==null?void 0:Z.isCamera,oe=X?Z:I?new Cp(0,0,0,0,.1,1e3):new Os(75,0,.1,1e3);X||(oe.position.z=5,Z&&(fl(oe,Z),oe.manual||("aspect"in Z||"left"in Z||"right"in Z||"bottom"in Z||"top"in Z)&&(oe.manual=!0,oe.updateProjectionMatrix())),!se.camera&&!(Z!=null&&Z.rotation)&&oe.lookAt(0,0,0)),se.set({camera:oe}),xe.camera=oe}if(!se.scene){let X;A!=null&&A.isScene?(X=A,Sx(X,r,"",{})):(X=new L0,Sx(X,r,"",{}),A&&fl(X,A)),se.set({scene:X})}T&&!se.events.handlers&&se.set({events:T(r)});const Y=Jj(n,E);if(Ti.equ(Y,se.size,Pd)||se.setSize(Y.width,Y.height,Y.top,Y.left),F&&se.viewport.dpr!==ON(F)&&se.setDpr(F),se.frameloop!==V&&se.setFrameloop(V),se.onPointerMissed||se.set({onPointerMissed:de}),L&&!Ti.equ(L,se.performance,Pd)&&se.set(X=>({performance:{...X.performance,...L}})),!se.xr){var fe;const X=(le,Oe)=>{const Pe=r.getState();Pe.frameloop!=="never"&&jR(le,!0,Pe,Oe)},oe=()=>{const le=r.getState();le.gl.xr.enabled=le.gl.xr.isPresenting,le.gl.xr.setAnimationLoop(le.gl.xr.isPresenting?X:null),le.gl.xr.isPresenting||M1(le)},Re={connect(){const le=r.getState().gl;le.xr.addEventListener("sessionstart",oe),le.xr.addEventListener("sessionend",oe)},disconnect(){const le=r.getState().gl;le.xr.removeEventListener("sessionstart",oe),le.xr.removeEventListener("sessionend",oe)}};typeof((fe=he.xr)==null?void 0:fe.addEventListener)=="function"&&Re.connect(),se.set({xr:Re})}if(he.shadowMap){const X=he.shadowMap.enabled,oe=he.shadowMap.type;if(he.shadowMap.enabled=!!R,Ti.boo(R))he.shadowMap.type=Rg;else if(Ti.str(R)){var ve;const Re={basic:E3,percentage:Bx,soft:Rg,variance:Eo};he.shadowMap.type=(ve=Re[R])!=null?ve:Rg}else Ti.obj(R)&&Object.assign(he.shadowMap,R);(X!==he.shadowMap.enabled||oe!==he.shadowMap.type)&&(he.shadowMap.needsUpdate=!0)}return Pn.enabled=!H,p||(he.outputColorSpace=O?Oo:Gs,he.toneMapping=D?vl:xM),se.legacy!==H&&se.set(()=>({legacy:H})),se.linear!==O&&se.set(()=>({linear:O})),se.flat!==D&&se.set(()=>({flat:D})),x&&!Ti.fun(x)&&!FR(x)&&!Ti.equ(x,he,Pd)&&fl(he,x),c=M,p=!0,_(),this},render(y){return!p&&!g&&this.configure(),g.then(()=>{Tx.updateContainer(q.jsx($j,{store:r,children:y,onCreated:c,rootElement:n}),l,null,()=>{})}),r},unmount(){VN(n)}}}function $j({store:n,children:e,onCreated:t,rootElement:i}){return k0(()=>{const s=n.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),q.jsx(hT.Provider,{value:n,children:e})}function VN(n,e){const t=rf.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),Tx.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var r,l,c,d;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(l=r.renderLists)==null||l.dispose==null||l.dispose(),(c=s.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),Dj(s.scene),rf.delete(n)}catch{}},500)})}}function e9(n,e,t){return q.jsx(t9,{children:n,container:e,state:t})}function t9({state:n={},children:e,container:t}){const{events:i,size:s,...r}=n,l=fT(),[c]=me.useState(()=>new sT),[d]=me.useState(()=>new Je),p=uT((y,_)=>{let x;if(_.camera&&s){const E=_.camera;x=y.viewport.getCurrentViewport(E,new ee,s),E!==y.camera&&NN(E,s)}return{...y,..._,scene:t,raycaster:c,pointer:d,mouse:d,previousRoot:l,events:{...y.events,..._.events,...i},size:{...y.size,...s},viewport:{...y.viewport,...x},setEvents:E=>_.set(A=>({...A,events:{...A.events,...E}}))}}),g=me.useMemo(()=>{const y=bN((x,E)=>({...r,set:x,get:E})),_=x=>y.setState(E=>p.current(x,E));return _(l.getState()),l.subscribe(_),y},[l,t]);return q.jsx(q.Fragment,{children:Tx.createPortal(q.jsx(hT.Provider,{value:g,children:e}),g,null)})}const n9=new Set,i9=new Set,s9=new Set;function xE(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Fg(n,e){switch(n){case"before":return xE(n9,e);case"after":return xE(i9,e);case"tail":return xE(s9,e)}}let bE,SE;function S1(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),bE=e.internal.subscribers;for(let s=0;s<bE.length;s++)SE=bE[s],SE.ref.current(SE.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let wx=!1,E1=!1,EE,GR,Bd;function HN(n){GR=requestAnimationFrame(HN),wx=!0,EE=0,Fg("before",n),E1=!0;for(const t of rf.values()){var e;Bd=t.store.getState(),Bd.internal.active&&(Bd.frameloop==="always"||Bd.internal.frames>0)&&!((e=Bd.gl.xr)!=null&&e.isPresenting)&&(EE+=S1(n,Bd))}if(E1=!1,Fg("after",n),EE===0)return Fg("tail",n),wx=!1,cancelAnimationFrame(GR)}function M1(n,e=1){var t;if(!n)return rf.forEach(i=>M1(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):E1?n.internal.frames=2:n.internal.frames=1,wx||(wx=!0,requestAnimationFrame(HN)))}function jR(n,e=!0,t,i){if(e&&Fg("before",n),t)S1(n,t,i);else for(const s of rf.values())S1(n,s.store.getState());e&&Fg("after",n)}const ME={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function a9(n){const{handlePointer:e}=zj(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(ME).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:i,events:s}=n.getState();if(s.disconnect==null||s.disconnect(),i(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const l=s.handlers[r],[c,d]=ME[r];t.addEventListener(c,l,{passive:d})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const s in i.handlers){const r=i.handlers[s],[l]=ME[s];i.connected.removeEventListener(l,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function qR(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function r9({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,l]=me.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=me.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,g=me.useRef(!1);me.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[y,_,x]=me.useMemo(()=>{const M=()=>{if(!c.current.element)return;const{left:R,top:O,width:D,height:H,bottom:I,right:V,x:F,y:L}=c.current.element.getBoundingClientRect(),P={left:R,top:O,width:D,height:H,bottom:I,right:V,x:F,y:L};c.current.element instanceof HTMLElement&&i&&(P.height=c.current.element.offsetHeight,P.width=c.current.element.offsetWidth),Object.freeze(P),g.current&&!u9(c.current.lastBounds,P)&&l(c.current.lastBounds=P)};return[M,p?qR(M,p):M,d?qR(M,d):M]},[l,i,d,p]);function E(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function A(){c.current.element&&(c.current.resizeObserver=new s(x),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(M=>M.addEventListener("scroll",x,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const T=M=>{!M||M===c.current.element||(E(),c.current.element=M,c.current.scrollContainers=kN(M),A())};return l9(x,!!e),o9(_),me.useEffect(()=>{E(),A()},[e,x,_]),me.useEffect(()=>E,[]),[T,r,y]}function o9(n){me.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function l9(n,e){me.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function kN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(r=>r==="auto"||r==="scroll")&&e.push(n),[...e,...kN(n.parentElement)]}const c9=["x","y","top","bottom","left","right","width","height"],u9=(n,e)=>c9.every(t=>n[t]===e[t]);function h9({ref:n,children:e,fallback:t,resize:i,style:s,gl:r,events:l=a9,eventSource:c,eventPrefix:d,shadows:p,linear:g,flat:y,legacy:_,orthographic:x,frameloop:E,dpr:A,performance:T,raycaster:M,camera:R,scene:O,onPointerMissed:D,onCreated:H,...I}){me.useMemo(()=>PN(tj),[]);const V=Aj(),[F,L]=r9({scroll:!0,debounce:{scroll:50,resize:0},...i}),P=me.useRef(null),Z=me.useRef(null);me.useImperativeHandle(n,()=>P.current);const de=uT(D),[se,he]=me.useState(!1),[xe,k]=me.useState(!1);if(se)throw se;if(xe)throw xe;const te=me.useRef(null);k0(()=>{const fe=P.current;if(L.width>0&&L.height>0&&fe){te.current||(te.current=Qj(fe));async function ve(){await te.current.configure({gl:r,scene:O,events:l,shadows:p,linear:g,flat:y,legacy:_,orthographic:x,frameloop:E,dpr:A,performance:T,raycaster:M,camera:R,size:L,onPointerMissed:(...X)=>de.current==null?void 0:de.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(c?Tj(c)?c.current:c:Z.current),d&&X.setEvents({compute:(oe,Re)=>{const le=oe[d+"X"],Oe=oe[d+"Y"];Re.pointer.set(le/Re.size.width*2-1,-(Oe/Re.size.height)*2+1),Re.raycaster.setFromCamera(Re.pointer,Re.camera)}}),H==null||H(X)}}),te.current.render(q.jsx(V,{children:q.jsx(Rj,{set:k,children:q.jsx(me.Suspense,{fallback:q.jsx(Cj,{set:he}),children:e??null})})}))}ve()}}),me.useEffect(()=>{const fe=P.current;if(fe)return()=>VN(fe)},[]);const Y=c?"none":"auto";return q.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...s},...I,children:q.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:q.jsx("canvas",{ref:P,style:{display:"block"},children:t})})})}function f9(n){return q.jsx(wN,{children:q.jsx(h9,{...n})})}function Ax(){return Ax=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ax.apply(null,arguments)}const GN=parseInt(Mp.replace(/\D+/g,""));var Gr=Uint8Array,hu=Uint16Array,T1=Uint32Array,jN=new Gr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qN=new Gr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d9=new Gr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XN=function(n,e){for(var t=new hu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new T1(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return[t,s]},WN=XN(jN,2),YN=WN[0],p9=WN[1];YN[28]=258,p9[258]=28;var m9=XN(qN,0),g9=m9[0],w1=new hu(32768);for(var yi=0;yi<32768;++yi){var su=(yi&43690)>>>1|(yi&21845)<<1;su=(su&52428)>>>2|(su&13107)<<2,su=(su&61680)>>>4|(su&3855)<<4,w1[yi]=((su&65280)>>>8|(su&255)<<8)>>>1}var Vg=(function(n,e,t){for(var i=n.length,s=0,r=new hu(e);s<i;++s)++r[n[s]-1];var l=new hu(e);for(s=0;s<e;++s)l[s]=l[s-1]+r[s-1]<<1;var c;if(t){c=new hu(1<<e);var d=15-e;for(s=0;s<i;++s)if(n[s])for(var p=s<<4|n[s],g=e-n[s],y=l[n[s]-1]++<<g,_=y|(1<<g)-1;y<=_;++y)c[w1[y]>>>d]=p}else for(c=new hu(i),s=0;s<i;++s)n[s]&&(c[s]=w1[l[n[s]-1]++]>>>15-n[s]);return c}),j0=new Gr(288);for(var yi=0;yi<144;++yi)j0[yi]=8;for(var yi=144;yi<256;++yi)j0[yi]=9;for(var yi=256;yi<280;++yi)j0[yi]=7;for(var yi=280;yi<288;++yi)j0[yi]=8;var KN=new Gr(32);for(var yi=0;yi<32;++yi)KN[yi]=5;var v9=Vg(j0,9,1),y9=Vg(KN,5,1),TE=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},xo=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},wE=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},_9=function(n){return(n/8|0)+(n&7&&1)},x9=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof hu?hu:n instanceof T1?T1:Gr)(t-e);return i.set(n.subarray(e,t)),i},b9=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Gr(0);var s=!e||t,r=!t||t.i;t||(t={}),e||(e=new Gr(i*3));var l=function(Pe){var Ve=e.length;if(Pe>Ve){var rt=new Gr(Math.max(Ve*2,Pe));rt.set(e),e=rt}},c=t.f||0,d=t.p||0,p=t.b||0,g=t.l,y=t.d,_=t.m,x=t.n,E=i*8;do{if(!g){t.f=c=xo(n,d,1);var A=xo(n,d+1,3);if(d+=3,A)if(A==1)g=v9,y=y9,_=9,x=5;else if(A==2){var O=xo(n,d,31)+257,D=xo(n,d+10,15)+4,H=O+xo(n,d+5,31)+1;d+=14;for(var I=new Gr(H),V=new Gr(19),F=0;F<D;++F)V[d9[F]]=xo(n,d+F*3,7);d+=D*3;for(var L=TE(V),P=(1<<L)-1,Z=Vg(V,L,1),F=0;F<H;){var de=Z[xo(n,d,P)];d+=de&15;var T=de>>>4;if(T<16)I[F++]=T;else{var se=0,he=0;for(T==16?(he=3+xo(n,d,3),d+=2,se=I[F-1]):T==17?(he=3+xo(n,d,7),d+=3):T==18&&(he=11+xo(n,d,127),d+=7);he--;)I[F++]=se}}var xe=I.subarray(0,O),k=I.subarray(O);_=TE(xe),x=TE(k),g=Vg(xe,_,1),y=Vg(k,x,1)}else throw"invalid block type";else{var T=_9(d)+4,M=n[T-4]|n[T-3]<<8,R=T+M;if(R>i){if(r)throw"unexpected EOF";break}s&&l(p+M),e.set(n.subarray(T,R),p),t.b=p+=M,t.p=d=R*8;continue}if(d>E){if(r)throw"unexpected EOF";break}}s&&l(p+131072);for(var te=(1<<_)-1,Y=(1<<x)-1,fe=d;;fe=d){var se=g[wE(n,d)&te],ve=se>>>4;if(d+=se&15,d>E){if(r)throw"unexpected EOF";break}if(!se)throw"invalid length/literal";if(ve<256)e[p++]=ve;else if(ve==256){fe=d,g=null;break}else{var X=ve-254;if(ve>264){var F=ve-257,oe=jN[F];X=xo(n,d,(1<<oe)-1)+YN[F],d+=oe}var Re=y[wE(n,d)&Y],le=Re>>>4;if(!Re)throw"invalid distance";d+=Re&15;var k=g9[le];if(le>3){var oe=qN[le];k+=wE(n,d)&(1<<oe)-1,d+=oe}if(d>E){if(r)throw"unexpected EOF";break}s&&l(p+131072);for(var Oe=p+X;p<Oe;p+=4)e[p]=e[p-k],e[p+1]=e[p+1-k],e[p+2]=e[p+2-k],e[p+3]=e[p+3-k];p=Oe}}t.l=g,t.p=fe,t.b=p,g&&(c=1,t.m=_,t.d=y,t.n=x)}while(!c);return p==e.length?e:x9(e,0,p)},S9=new Gr(0),E9=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function c_(n,e){return b9((E9(n),n.subarray(2,-4)),e)}var M9=typeof TextDecoder<"u"&&new TextDecoder,T9=0;try{M9.decode(S9,{stream:!0}),T9=1}catch{}const w9=n=>n&&n.isCubeTexture;class A9 extends Pi{constructor(e,t){var i,s;const r=w9(e),c=((s=r?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?s:1024)/4,d=Math.floor(Math.log2(c)),p=Math.pow(2,d),g=3*Math.max(p,112),y=4*p,_=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/y}`,`#define CUBEUV_MAX_MIP ${d}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,E=_.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${GN>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},T=new B0(1,16),M=new Ba({uniforms:A,fragmentShader:E,vertexShader:x,side:Ao});super(T,M)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class C9 extends JM{constructor(e){super(e),this.type=Ds}parse(e){const l=function(F,L){switch(F){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},y=function(F,L,P){L=L||1024;let de=F.pos,se=-1,he=0,xe="",k=String.fromCharCode.apply(null,new Uint16Array(F.subarray(de,de+128)));for(;0>(se=k.indexOf(`
`))&&he<L&&de<F.byteLength;)xe+=k,he+=k.length,de+=128,k+=String.fromCharCode.apply(null,new Uint16Array(F.subarray(de,de+128)));return-1<se?(F.pos+=he+se+1,xe+k.slice(0,se)):!1},_=function(F){const L=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,de=/^\s*FORMAT=(\S+)\s*$/,se=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,he={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,k;for((F.pos>=F.byteLength||!(xe=y(F)))&&l(1,"no header found"),(k=xe.match(L))||l(3,"bad initial token"),he.valid|=1,he.programtype=k[1],he.string+=xe+`
`;xe=y(F),xe!==!1;){if(he.string+=xe+`
`,xe.charAt(0)==="#"){he.comments+=xe+`
`;continue}if((k=xe.match(P))&&(he.gamma=parseFloat(k[1])),(k=xe.match(Z))&&(he.exposure=parseFloat(k[1])),(k=xe.match(de))&&(he.valid|=2,he.format=k[1]),(k=xe.match(se))&&(he.valid|=4,he.height=parseInt(k[1],10),he.width=parseInt(k[2],10)),he.valid&2&&he.valid&4)break}return he.valid&2||l(3,"missing format specifier"),he.valid&4||l(3,"missing image size specifier"),he},x=function(F,L,P){const Z=L;if(Z<8||Z>32767||F[0]!==2||F[1]!==2||F[2]&128)return new Uint8Array(F);Z!==(F[2]<<8|F[3])&&l(3,"wrong scanline width");const de=new Uint8Array(4*L*P);de.length||l(4,"unable to allocate buffer space");let se=0,he=0;const xe=4*Z,k=new Uint8Array(4),te=new Uint8Array(xe);let Y=P;for(;Y>0&&he<F.byteLength;){he+4>F.byteLength&&l(1),k[0]=F[he++],k[1]=F[he++],k[2]=F[he++],k[3]=F[he++],(k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=Z)&&l(3,"bad rgbe scanline format");let fe=0,ve;for(;fe<xe&&he<F.byteLength;){ve=F[he++];const oe=ve>128;if(oe&&(ve-=128),(ve===0||fe+ve>xe)&&l(3,"bad scanline data"),oe){const Re=F[he++];for(let le=0;le<ve;le++)te[fe++]=Re}else te.set(F.subarray(he,he+ve),fe),fe+=ve,he+=ve}const X=Z;for(let oe=0;oe<X;oe++){let Re=0;de[se]=te[oe+Re],Re+=Z,de[se+1]=te[oe+Re],Re+=Z,de[se+2]=te[oe+Re],Re+=Z,de[se+3]=te[oe+Re],se+=4}Y--}return de},E=function(F,L,P,Z){const de=F[L+3],se=Math.pow(2,de-128)/255;P[Z+0]=F[L+0]*se,P[Z+1]=F[L+1]*se,P[Z+2]=F[L+2]*se,P[Z+3]=1},A=function(F,L,P,Z){const de=F[L+3],se=Math.pow(2,de-128)/255;P[Z+0]=jh.toHalfFloat(Math.min(F[L+0]*se,65504)),P[Z+1]=jh.toHalfFloat(Math.min(F[L+1]*se,65504)),P[Z+2]=jh.toHalfFloat(Math.min(F[L+2]*se,65504)),P[Z+3]=jh.toHalfFloat(1)},T=new Uint8Array(e);T.pos=0;const M=_(T),R=M.width,O=M.height,D=x(T.subarray(T.pos),R,O);let H,I,V;switch(this.type){case Ii:V=D.length/4;const F=new Float32Array(V*4);for(let P=0;P<V;P++)E(D,P*4,F,P*4);H=F,I=Ii;break;case Ds:V=D.length/4;const L=new Uint16Array(V*4);for(let P=0;P<V;P++)A(D,P*4,L,P*4);H=L,I=Ds;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:O,data:H,header:M.string,gamma:M.gamma,exposure:M.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(l,c){switch(l.type){case Ii:case Ds:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=ti,l.magFilter=ti,l.generateMipmaps=!1,l.flipY=!0;break}t&&t(l,c)}return super.load(e,r,i,s)}}const yg=GN>=152;class R9 extends JM{constructor(e){super(e),this.type=Ds}parse(e){const L=Math.pow(2.7182818,2.2);function P(B,K){for(var ue=0,Ae=0;Ae<65536;++Ae)(Ae==0||B[Ae>>3]&1<<(Ae&7))&&(K[ue++]=Ae);for(var ze=ue-1;ue<65536;)K[ue++]=0;return ze}function Z(B){for(var K=0;K<16384;K++)B[K]={},B[K].len=0,B[K].lit=0,B[K].p=null}const de={l:0,c:0,lc:0};function se(B,K,ue,Ae,ze){for(;ue<B;)K=K<<8|ht(Ae,ze),ue+=8;ue-=B,de.l=K>>ue&(1<<B)-1,de.c=K,de.lc=ue}const he=new Array(59);function xe(B){for(var K=0;K<=58;++K)he[K]=0;for(var K=0;K<65537;++K)he[B[K]]+=1;for(var ue=0,K=58;K>0;--K){var Ae=ue+he[K]>>1;he[K]=ue,ue=Ae}for(var K=0;K<65537;++K){var ze=B[K];ze>0&&(B[K]=ze|he[ze]++<<6)}}function k(B,K,ue,Ae,ze,Ie,tt){for(var $e=ue,z=0,Q=0;ze<=Ie;ze++){if($e.value-ue.value>Ae)return!1;se(6,z,Q,B,$e);var ne=de.l;if(z=de.c,Q=de.lc,tt[ze]=ne,ne==63){if($e.value-ue.value>Ae)throw"Something wrong with hufUnpackEncTable";se(8,z,Q,B,$e);var ie=de.l+6;if(z=de.c,Q=de.lc,ze+ie>Ie+1)throw"Something wrong with hufUnpackEncTable";for(;ie--;)tt[ze++]=0;ze--}else if(ne>=59){var ie=ne-59+2;if(ze+ie>Ie+1)throw"Something wrong with hufUnpackEncTable";for(;ie--;)tt[ze++]=0;ze--}}xe(tt)}function te(B){return B&63}function Y(B){return B>>6}function fe(B,K,ue,Ae){for(;K<=ue;K++){var ze=Y(B[K]),Ie=te(B[K]);if(ze>>Ie)throw"Invalid table entry";if(Ie>14){var tt=Ae[ze>>Ie-14];if(tt.len)throw"Invalid table entry";if(tt.lit++,tt.p){var $e=tt.p;tt.p=new Array(tt.lit);for(var z=0;z<tt.lit-1;++z)tt.p[z]=$e[z]}else tt.p=new Array(1);tt.p[tt.lit-1]=K}else if(Ie)for(var Q=0,z=1<<14-Ie;z>0;z--){var tt=Ae[(ze<<14-Ie)+Q];if(tt.len||tt.p)throw"Invalid table entry";tt.len=Ie,tt.lit=K,Q++}}return!0}const ve={c:0,lc:0};function X(B,K,ue,Ae){B=B<<8|ht(ue,Ae),K+=8,ve.c=B,ve.lc=K}const oe={c:0,lc:0};function Re(B,K,ue,Ae,ze,Ie,tt,$e,z,Q){if(B==K){Ae<8&&(X(ue,Ae,ze,tt),ue=ve.c,Ae=ve.lc),Ae-=8;var ne=ue>>Ae,ne=new Uint8Array([ne])[0];if(z.value+ne>Q)return!1;for(var ie=$e[z.value-1];ne-- >0;)$e[z.value++]=ie}else if(z.value<Q)$e[z.value++]=B;else return!1;oe.c=ue,oe.lc=Ae}function le(B){return B&65535}function Oe(B){var K=le(B);return K>32767?K-65536:K}const Pe={a:0,b:0};function Ve(B,K){var ue=Oe(B),Ae=Oe(K),ze=Ae,Ie=ue+(ze&1)+(ze>>1),tt=Ie,$e=Ie-ze;Pe.a=tt,Pe.b=$e}function rt(B,K){var ue=le(B),Ae=le(K),ze=ue-(Ae>>1)&65535,Ie=Ae+ze-32768&65535;Pe.a=Ie,Pe.b=ze}function Pt(B,K,ue,Ae,ze,Ie,tt){for(var $e=tt<16384,z=ue>ze?ze:ue,Q=1,ne;Q<=z;)Q<<=1;for(Q>>=1,ne=Q,Q>>=1;Q>=1;){for(var ie=0,ce=ie+Ie*(ze-ne),Ee=Ie*Q,Fe=Ie*ne,je=Ae*Q,Ye=Ae*ne,pt,gt,mt,jt;ie<=ce;ie+=Fe){for(var Rt=ie,Mn=ie+Ae*(ue-ne);Rt<=Mn;Rt+=Ye){var Nt=Rt+je,At=Rt+Ee,Ct=At+je;$e?(Ve(B[Rt+K],B[At+K]),pt=Pe.a,mt=Pe.b,Ve(B[Nt+K],B[Ct+K]),gt=Pe.a,jt=Pe.b,Ve(pt,gt),B[Rt+K]=Pe.a,B[Nt+K]=Pe.b,Ve(mt,jt),B[At+K]=Pe.a,B[Ct+K]=Pe.b):(rt(B[Rt+K],B[At+K]),pt=Pe.a,mt=Pe.b,rt(B[Nt+K],B[Ct+K]),gt=Pe.a,jt=Pe.b,rt(pt,gt),B[Rt+K]=Pe.a,B[Nt+K]=Pe.b,rt(mt,jt),B[At+K]=Pe.a,B[Ct+K]=Pe.b)}if(ue&Q){var At=Rt+Ee;$e?Ve(B[Rt+K],B[At+K]):rt(B[Rt+K],B[At+K]),pt=Pe.a,B[At+K]=Pe.b,B[Rt+K]=pt}}if(ze&Q)for(var Rt=ie,Mn=ie+Ae*(ue-ne);Rt<=Mn;Rt+=Ye){var Nt=Rt+je;$e?Ve(B[Rt+K],B[Nt+K]):rt(B[Rt+K],B[Nt+K]),pt=Pe.a,B[Nt+K]=Pe.b,B[Rt+K]=pt}ne=Q,Q>>=1}return ie}function wt(B,K,ue,Ae,ze,Ie,tt,$e,z,Q){for(var ne=0,ie=0,ce=$e,Ee=Math.trunc(ze.value+(Ie+7)/8);ze.value<Ee;)for(X(ne,ie,ue,ze),ne=ve.c,ie=ve.lc;ie>=14;){var Fe=ne>>ie-14&16383,je=K[Fe];if(je.len)ie-=je.len,Re(je.lit,tt,ne,ie,ue,Ae,ze,z,Q,ce),ne=oe.c,ie=oe.lc;else{if(!je.p)throw"hufDecode issues";var Ye;for(Ye=0;Ye<je.lit;Ye++){for(var pt=te(B[je.p[Ye]]);ie<pt&&ze.value<Ee;)X(ne,ie,ue,ze),ne=ve.c,ie=ve.lc;if(ie>=pt&&Y(B[je.p[Ye]])==(ne>>ie-pt&(1<<pt)-1)){ie-=pt,Re(je.p[Ye],tt,ne,ie,ue,Ae,ze,z,Q,ce),ne=oe.c,ie=oe.lc;break}}if(Ye==je.lit)throw"hufDecode issues"}}var gt=8-Ie&7;for(ne>>=gt,ie-=gt;ie>0;){var je=K[ne<<14-ie&16383];if(je.len)ie-=je.len,Re(je.lit,tt,ne,ie,ue,Ae,ze,z,Q,ce),ne=oe.c,ie=oe.lc;else throw"hufDecode issues"}return!0}function on(B,K,ue,Ae,ze,Ie){var tt={value:0},$e=ue.value,z=ut(K,ue),Q=ut(K,ue);ue.value+=4;var ne=ut(K,ue);if(ue.value+=4,z<0||z>=65537||Q<0||Q>=65537)throw"Something wrong with HUF_ENCSIZE";var ie=new Array(65537),ce=new Array(16384);Z(ce);var Ee=Ae-(ue.value-$e);if(k(B,K,ue,Ee,z,Q,ie),ne>8*(Ae-(ue.value-$e)))throw"Something wrong with hufUncompress";fe(ie,z,Q,ce),wt(ie,ce,B,K,ue,ne,Q,Ie,ze,tt)}function Qe(B,K,ue){for(var Ae=0;Ae<ue;++Ae)K[Ae]=B[K[Ae]]}function Ke(B){for(var K=1;K<B.length;K++){var ue=B[K-1]+B[K]-128;B[K]=ue}}function $(B,K){for(var ue=0,Ae=Math.floor((B.length+1)/2),ze=0,Ie=B.length-1;!(ze>Ie||(K[ze++]=B[ue++],ze>Ie));)K[ze++]=B[Ae++]}function Mt(B){for(var K=B.byteLength,ue=new Array,Ae=0,ze=new DataView(B);K>0;){var Ie=ze.getInt8(Ae++);if(Ie<0){var tt=-Ie;K-=tt+1;for(var $e=0;$e<tt;$e++)ue.push(ze.getUint8(Ae++))}else{var tt=Ie;K-=2;for(var z=ze.getUint8(Ae++),$e=0;$e<tt+1;$e++)ue.push(z)}}return ue}function et(B,K,ue,Ae,ze,Ie){var Nt=new DataView(Ie.buffer),tt=ue[B.idx[0]].width,$e=ue[B.idx[0]].height,z=3,Q=Math.floor(tt/8),ne=Math.ceil(tt/8),ie=Math.ceil($e/8),ce=tt-(ne-1)*8,Ee=$e-(ie-1)*8,Fe={value:0},je=new Array(z),Ye=new Array(z),pt=new Array(z),gt=new Array(z),mt=new Array(z);for(let ln=0;ln<z;++ln)mt[ln]=K[B.idx[ln]],je[ln]=ln<1?0:je[ln-1]+ne*ie,Ye[ln]=new Float32Array(64),pt[ln]=new Uint16Array(64),gt[ln]=new Uint16Array(ne*64);for(let ln=0;ln<ie;++ln){var jt=8;ln==ie-1&&(jt=Ee);var Rt=8;for(let dn=0;dn<ne;++dn){dn==ne-1&&(Rt=ce);for(let Kt=0;Kt<z;++Kt)pt[Kt].fill(0),pt[Kt][0]=ze[je[Kt]++],dt(Fe,Ae,pt[Kt]),st(pt[Kt],Ye[Kt]),zt(Ye[Kt]);ot(Ye);for(let Kt=0;Kt<z;++Kt)J(Ye[Kt],gt[Kt],dn*64)}let Gn=0;for(let dn=0;dn<z;++dn){const Kt=ue[B.idx[dn]].type;for(let cn=8*ln;cn<8*ln+jt;++cn){Gn=mt[dn][cn];for(let pi=0;pi<Q;++pi){const Bn=pi*64+(cn&7)*8;Nt.setUint16(Gn+0*Kt,gt[dn][Bn+0],!0),Nt.setUint16(Gn+2*Kt,gt[dn][Bn+1],!0),Nt.setUint16(Gn+4*Kt,gt[dn][Bn+2],!0),Nt.setUint16(Gn+6*Kt,gt[dn][Bn+3],!0),Nt.setUint16(Gn+8*Kt,gt[dn][Bn+4],!0),Nt.setUint16(Gn+10*Kt,gt[dn][Bn+5],!0),Nt.setUint16(Gn+12*Kt,gt[dn][Bn+6],!0),Nt.setUint16(Gn+14*Kt,gt[dn][Bn+7],!0),Gn+=16*Kt}}if(Q!=ne)for(let cn=8*ln;cn<8*ln+jt;++cn){const pi=mt[dn][cn]+8*Q*2*Kt,Bn=Q*64+(cn&7)*8;for(let zn=0;zn<Rt;++zn)Nt.setUint16(pi+zn*2*Kt,gt[dn][Bn+zn],!0)}}}for(var Mn=new Uint16Array(tt),Nt=new DataView(Ie.buffer),At=0;At<z;++At){ue[B.idx[At]].decoded=!0;var Ct=ue[B.idx[At]].type;if(ue[At].type==2)for(var ni=0;ni<$e;++ni){const ln=mt[At][ni];for(var Jt=0;Jt<tt;++Jt)Mn[Jt]=Nt.getUint16(ln+Jt*2*Ct,!0);for(var Jt=0;Jt<tt;++Jt)Nt.setFloat32(ln+Jt*2*Ct,De(Mn[Jt]),!0)}}}function dt(B,K,ue){for(var Ae,ze=1;ze<64;)Ae=K[B.value],Ae==65280?ze=64:Ae>>8==255?ze+=Ae&255:(ue[ze]=Ae,ze++),B.value++}function st(B,K){K[0]=De(B[0]),K[1]=De(B[1]),K[2]=De(B[5]),K[3]=De(B[6]),K[4]=De(B[14]),K[5]=De(B[15]),K[6]=De(B[27]),K[7]=De(B[28]),K[8]=De(B[2]),K[9]=De(B[4]),K[10]=De(B[7]),K[11]=De(B[13]),K[12]=De(B[16]),K[13]=De(B[26]),K[14]=De(B[29]),K[15]=De(B[42]),K[16]=De(B[3]),K[17]=De(B[8]),K[18]=De(B[12]),K[19]=De(B[17]),K[20]=De(B[25]),K[21]=De(B[30]),K[22]=De(B[41]),K[23]=De(B[43]),K[24]=De(B[9]),K[25]=De(B[11]),K[26]=De(B[18]),K[27]=De(B[24]),K[28]=De(B[31]),K[29]=De(B[40]),K[30]=De(B[44]),K[31]=De(B[53]),K[32]=De(B[10]),K[33]=De(B[19]),K[34]=De(B[23]),K[35]=De(B[32]),K[36]=De(B[39]),K[37]=De(B[45]),K[38]=De(B[52]),K[39]=De(B[54]),K[40]=De(B[20]),K[41]=De(B[22]),K[42]=De(B[33]),K[43]=De(B[38]),K[44]=De(B[46]),K[45]=De(B[51]),K[46]=De(B[55]),K[47]=De(B[60]),K[48]=De(B[21]),K[49]=De(B[34]),K[50]=De(B[37]),K[51]=De(B[47]),K[52]=De(B[50]),K[53]=De(B[56]),K[54]=De(B[59]),K[55]=De(B[61]),K[56]=De(B[35]),K[57]=De(B[36]),K[58]=De(B[48]),K[59]=De(B[49]),K[60]=De(B[57]),K[61]=De(B[58]),K[62]=De(B[62]),K[63]=De(B[63])}function zt(B){const K=.5*Math.cos(.7853975),ue=.5*Math.cos(3.14159/16),Ae=.5*Math.cos(3.14159/8),ze=.5*Math.cos(3*3.14159/16),Ie=.5*Math.cos(5*3.14159/16),tt=.5*Math.cos(3*3.14159/8),$e=.5*Math.cos(7*3.14159/16);for(var z=new Array(4),Q=new Array(4),ne=new Array(4),ie=new Array(4),ce=0;ce<8;++ce){var Ee=ce*8;z[0]=Ae*B[Ee+2],z[1]=tt*B[Ee+2],z[2]=Ae*B[Ee+6],z[3]=tt*B[Ee+6],Q[0]=ue*B[Ee+1]+ze*B[Ee+3]+Ie*B[Ee+5]+$e*B[Ee+7],Q[1]=ze*B[Ee+1]-$e*B[Ee+3]-ue*B[Ee+5]-Ie*B[Ee+7],Q[2]=Ie*B[Ee+1]-ue*B[Ee+3]+$e*B[Ee+5]+ze*B[Ee+7],Q[3]=$e*B[Ee+1]-Ie*B[Ee+3]+ze*B[Ee+5]-ue*B[Ee+7],ne[0]=K*(B[Ee+0]+B[Ee+4]),ne[3]=K*(B[Ee+0]-B[Ee+4]),ne[1]=z[0]+z[3],ne[2]=z[1]-z[2],ie[0]=ne[0]+ne[1],ie[1]=ne[3]+ne[2],ie[2]=ne[3]-ne[2],ie[3]=ne[0]-ne[1],B[Ee+0]=ie[0]+Q[0],B[Ee+1]=ie[1]+Q[1],B[Ee+2]=ie[2]+Q[2],B[Ee+3]=ie[3]+Q[3],B[Ee+4]=ie[3]-Q[3],B[Ee+5]=ie[2]-Q[2],B[Ee+6]=ie[1]-Q[1],B[Ee+7]=ie[0]-Q[0]}for(var Fe=0;Fe<8;++Fe)z[0]=Ae*B[16+Fe],z[1]=tt*B[16+Fe],z[2]=Ae*B[48+Fe],z[3]=tt*B[48+Fe],Q[0]=ue*B[8+Fe]+ze*B[24+Fe]+Ie*B[40+Fe]+$e*B[56+Fe],Q[1]=ze*B[8+Fe]-$e*B[24+Fe]-ue*B[40+Fe]-Ie*B[56+Fe],Q[2]=Ie*B[8+Fe]-ue*B[24+Fe]+$e*B[40+Fe]+ze*B[56+Fe],Q[3]=$e*B[8+Fe]-Ie*B[24+Fe]+ze*B[40+Fe]-ue*B[56+Fe],ne[0]=K*(B[Fe]+B[32+Fe]),ne[3]=K*(B[Fe]-B[32+Fe]),ne[1]=z[0]+z[3],ne[2]=z[1]-z[2],ie[0]=ne[0]+ne[1],ie[1]=ne[3]+ne[2],ie[2]=ne[3]-ne[2],ie[3]=ne[0]-ne[1],B[0+Fe]=ie[0]+Q[0],B[8+Fe]=ie[1]+Q[1],B[16+Fe]=ie[2]+Q[2],B[24+Fe]=ie[3]+Q[3],B[32+Fe]=ie[3]-Q[3],B[40+Fe]=ie[2]-Q[2],B[48+Fe]=ie[1]-Q[1],B[56+Fe]=ie[0]-Q[0]}function ot(B){for(var K=0;K<64;++K){var ue=B[0][K],Ae=B[1][K],ze=B[2][K];B[0][K]=ue+1.5747*ze,B[1][K]=ue-.1873*Ae-.4682*ze,B[2][K]=ue+1.8556*Ae}}function J(B,K,ue){for(var Ae=0;Ae<64;++Ae)K[ue+Ae]=jh.toHalfFloat(G(B[Ae]))}function G(B){return B<=1?Math.sign(B)*Math.pow(Math.abs(B),2.2):Math.sign(B)*Math.pow(L,Math.abs(B)-1)}function Se(B){return new DataView(B.array.buffer,B.offset.value,B.size)}function Be(B){var K=B.viewer.buffer.slice(B.offset.value,B.offset.value+B.size),ue=new Uint8Array(Mt(K)),Ae=new Uint8Array(ue.length);return Ke(ue),$(ue,Ae),new DataView(Ae.buffer)}function Ze(B){var K=B.array.slice(B.offset.value,B.offset.value+B.size),ue=c_(K),Ae=new Uint8Array(ue.length);return Ke(ue),$(ue,Ae),new DataView(Ae.buffer)}function ke(B){for(var K=B.viewer,ue={value:B.offset.value},Ae=new Uint16Array(B.width*B.scanlineBlockSize*(B.channels*B.type)),ze=new Uint8Array(8192),Ie=0,tt=new Array(B.channels),$e=0;$e<B.channels;$e++)tt[$e]={},tt[$e].start=Ie,tt[$e].end=tt[$e].start,tt[$e].nx=B.width,tt[$e].ny=B.lines,tt[$e].size=B.type,Ie+=tt[$e].nx*tt[$e].ny*tt[$e].size;var z=Ue(K,ue),Q=Ue(K,ue);if(Q>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(z<=Q)for(var $e=0;$e<Q-z+1;$e++)ze[$e+z]=Ft(K,ue);var ne=new Uint16Array(65536),ie=P(ze,ne),ce=ut(K,ue);on(B.array,K,ue,ce,Ae,Ie);for(var $e=0;$e<B.channels;++$e)for(var Ee=tt[$e],Fe=0;Fe<tt[$e].size;++Fe)Pt(Ae,Ee.start+Fe,Ee.nx,Ee.size,Ee.ny,Ee.nx*Ee.size,ie);Qe(ne,Ae,Ie);for(var je=0,Ye=new Uint8Array(Ae.buffer.byteLength),pt=0;pt<B.lines;pt++)for(var gt=0;gt<B.channels;gt++){var Ee=tt[gt],mt=Ee.nx*Ee.size,jt=new Uint8Array(Ae.buffer,Ee.end*2,mt*2);Ye.set(jt,je),je+=mt*2,Ee.end+=mt}return new DataView(Ye.buffer)}function Tt(B){var K=B.array.slice(B.offset.value,B.offset.value+B.size),ue=c_(K);const Ae=B.lines*B.channels*B.width,ze=B.type==1?new Uint16Array(Ae):new Uint32Array(Ae);let Ie=0,tt=0;const $e=new Array(4);for(let z=0;z<B.lines;z++)for(let Q=0;Q<B.channels;Q++){let ne=0;switch(B.type){case 1:$e[0]=Ie,$e[1]=$e[0]+B.width,Ie=$e[1]+B.width;for(let ie=0;ie<B.width;++ie){const ce=ue[$e[0]++]<<8|ue[$e[1]++];ne+=ce,ze[tt]=ne,tt++}break;case 2:$e[0]=Ie,$e[1]=$e[0]+B.width,$e[2]=$e[1]+B.width,Ie=$e[2]+B.width;for(let ie=0;ie<B.width;++ie){const ce=ue[$e[0]++]<<24|ue[$e[1]++]<<16|ue[$e[2]++]<<8;ne+=ce,ze[tt]=ne,tt++}break}}return new DataView(ze.buffer)}function ct(B){var K=B.viewer,ue={value:B.offset.value},Ae=new Uint8Array(B.width*B.lines*(B.channels*B.type*2)),ze={version:Ut(K,ue),unknownUncompressedSize:Ut(K,ue),unknownCompressedSize:Ut(K,ue),acCompressedSize:Ut(K,ue),dcCompressedSize:Ut(K,ue),rleCompressedSize:Ut(K,ue),rleUncompressedSize:Ut(K,ue),rleRawSize:Ut(K,ue),totalAcUncompressedCount:Ut(K,ue),totalDcUncompressedCount:Ut(K,ue),acCompression:Ut(K,ue)};if(ze.version<2)throw"EXRLoader.parse: "+Zi.compression+" version "+ze.version+" is unsupported";for(var Ie=new Array,tt=Ue(K,ue)-2;tt>0;){var $e=vt(K.buffer,ue),z=Ft(K,ue),Q=z>>2&3,ne=(z>>4)-1,ie=new Int8Array([ne])[0],ce=Ft(K,ue);Ie.push({name:$e,index:ie,type:ce,compression:Q}),tt-=$e.length+3}for(var Ee=Zi.channels,Fe=new Array(B.channels),je=0;je<B.channels;++je){var Ye=Fe[je]={},pt=Ee[je];Ye.name=pt.name,Ye.compression=0,Ye.decoded=!1,Ye.type=pt.pixelType,Ye.pLinear=pt.pLinear,Ye.width=B.width,Ye.height=B.lines}for(var gt={idx:new Array(3)},mt=0;mt<B.channels;++mt)for(var Ye=Fe[mt],je=0;je<Ie.length;++je){var jt=Ie[je];Ye.name==jt.name&&(Ye.compression=jt.compression,jt.index>=0&&(gt.idx[jt.index]=mt),Ye.offset=mt)}if(ze.acCompressedSize>0)switch(ze.acCompression){case 0:var Nt=new Uint16Array(ze.totalAcUncompressedCount);on(B.array,K,ue,ze.acCompressedSize,Nt,ze.totalAcUncompressedCount);break;case 1:var Rt=B.array.slice(ue.value,ue.value+ze.totalAcUncompressedCount),Mn=c_(Rt),Nt=new Uint16Array(Mn.buffer);ue.value+=ze.totalAcUncompressedCount;break}if(ze.dcCompressedSize>0){var At={array:B.array,offset:ue,size:ze.dcCompressedSize},Ct=new Uint16Array(Ze(At).buffer);ue.value+=ze.dcCompressedSize}if(ze.rleRawSize>0){var Rt=B.array.slice(ue.value,ue.value+ze.rleCompressedSize),Mn=c_(Rt),ni=Mt(Mn.buffer);ue.value+=ze.rleCompressedSize}for(var Jt=0,ln=new Array(Fe.length),je=0;je<ln.length;++je)ln[je]=new Array;for(var Gn=0;Gn<B.lines;++Gn)for(var dn=0;dn<Fe.length;++dn)ln[dn].push(Jt),Jt+=Fe[dn].width*B.type*2;et(gt,ln,Fe,Nt,Ct,Ae);for(var je=0;je<Fe.length;++je){var Ye=Fe[je];if(!Ye.decoded)switch(Ye.compression){case 2:for(var Kt=0,cn=0,Gn=0;Gn<B.lines;++Gn){for(var pi=ln[je][Kt],Bn=0;Bn<Ye.width;++Bn){for(var zn=0;zn<2*Ye.type;++zn)Ae[pi++]=ni[cn+zn*Ye.width*Ye.height];cn++}Kt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ae.buffer)}function vt(B,K){for(var ue=new Uint8Array(B),Ae=0;ue[K.value+Ae]!=0;)Ae+=1;var ze=new TextDecoder().decode(ue.slice(K.value,K.value+Ae));return K.value=K.value+Ae+1,ze}function fn(B,K,ue){var Ae=new TextDecoder().decode(new Uint8Array(B).slice(K.value,K.value+ue));return K.value=K.value+ue,Ae}function it(B,K){var ue=Et(B,K),Ae=ut(B,K);return[ue,Ae]}function bt(B,K){var ue=ut(B,K),Ae=ut(B,K);return[ue,Ae]}function Et(B,K){var ue=B.getInt32(K.value,!0);return K.value=K.value+4,ue}function ut(B,K){var ue=B.getUint32(K.value,!0);return K.value=K.value+4,ue}function ht(B,K){var ue=B[K.value];return K.value=K.value+1,ue}function Ft(B,K){var ue=B.getUint8(K.value);return K.value=K.value+1,ue}const Ut=function(B,K){let ue;return"getBigInt64"in DataView.prototype?ue=Number(B.getBigInt64(K.value,!0)):ue=B.getUint32(K.value+4,!0)+Number(B.getUint32(K.value,!0)<<32),K.value+=8,ue};function Yt(B,K){var ue=B.getFloat32(K.value,!0);return K.value+=4,ue}function ge(B,K){return jh.toHalfFloat(Yt(B,K))}function De(B){var K=(B&31744)>>10,ue=B&1023;return(B>>15?-1:1)*(K?K===31?ue?NaN:1/0:Math.pow(2,K-15)*(1+ue/1024):6103515625e-14*(ue/1024))}function Ue(B,K){var ue=B.getUint16(K.value,!0);return K.value+=2,ue}function Xe(B,K){return De(Ue(B,K))}function lt(B,K,ue,Ae){for(var ze=ue.value,Ie=[];ue.value<ze+Ae-1;){var tt=vt(K,ue),$e=Et(B,ue),z=Ft(B,ue);ue.value+=3;var Q=Et(B,ue),ne=Et(B,ue);Ie.push({name:tt,pixelType:$e,pLinear:z,xSampling:Q,ySampling:ne})}return ue.value+=1,Ie}function ft(B,K){var ue=Yt(B,K),Ae=Yt(B,K),ze=Yt(B,K),Ie=Yt(B,K),tt=Yt(B,K),$e=Yt(B,K),z=Yt(B,K),Q=Yt(B,K);return{redX:ue,redY:Ae,greenX:ze,greenY:Ie,blueX:tt,blueY:$e,whiteX:z,whiteY:Q}}function Wt(B,K){var ue=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ae=Ft(B,K);return ue[Ae]}function Kn(B,K){var ue=ut(B,K),Ae=ut(B,K),ze=ut(B,K),Ie=ut(B,K);return{xMin:ue,yMin:Ae,xMax:ze,yMax:Ie}}function ci(B,K){var ue=["INCREASING_Y"],Ae=Ft(B,K);return ue[Ae]}function Sn(B,K){var ue=Yt(B,K),Ae=Yt(B,K);return[ue,Ae]}function Bi(B,K){var ue=Yt(B,K),Ae=Yt(B,K),ze=Yt(B,K);return[ue,Ae,ze]}function qs(B,K,ue,Ae,ze){if(Ae==="string"||Ae==="stringvector"||Ae==="iccProfile")return fn(K,ue,ze);if(Ae==="chlist")return lt(B,K,ue,ze);if(Ae==="chromaticities")return ft(B,ue);if(Ae==="compression")return Wt(B,ue);if(Ae==="box2i")return Kn(B,ue);if(Ae==="lineOrder")return ci(B,ue);if(Ae==="float")return Yt(B,ue);if(Ae==="v2f")return Sn(B,ue);if(Ae==="v3f")return Bi(B,ue);if(Ae==="int")return Et(B,ue);if(Ae==="rational")return it(B,ue);if(Ae==="timecode")return bt(B,ue);if(Ae==="preview")return ue.value+=ze,"skipped";ue.value+=ze}function Uo(B,K,ue){const Ae={};if(B.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ae.version=B.getUint8(4);const ze=B.getUint8(5);Ae.spec={singleTile:!!(ze&2),longName:!!(ze&4),deepFormat:!!(ze&8),multiPart:!!(ze&16)},ue.value=8;for(var Ie=!0;Ie;){var tt=vt(K,ue);if(tt==0)Ie=!1;else{var $e=vt(K,ue),z=ut(B,ue),Q=qs(B,K,ue,$e,z);Q===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${$e}'.`):Ae[tt]=Q}}if((ze&-5)!=0)throw console.error("EXRHeader:",Ae),"THREE.EXRLoader: provided file is currently unsupported.";return Ae}function Wr(B,K,ue,Ae,ze){const Ie={size:0,viewer:K,array:ue,offset:Ae,width:B.dataWindow.xMax-B.dataWindow.xMin+1,height:B.dataWindow.yMax-B.dataWindow.yMin+1,channels:B.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:B.channels[0].pixelType,uncompress:null,getter:null,format:null,[yg?"colorSpace":"encoding"]:null};switch(B.compression){case"NO_COMPRESSION":Ie.lines=1,Ie.uncompress=Se;break;case"RLE_COMPRESSION":Ie.lines=1,Ie.uncompress=Be;break;case"ZIPS_COMPRESSION":Ie.lines=1,Ie.uncompress=Ze;break;case"ZIP_COMPRESSION":Ie.lines=16,Ie.uncompress=Ze;break;case"PIZ_COMPRESSION":Ie.lines=32,Ie.uncompress=ke;break;case"PXR24_COMPRESSION":Ie.lines=16,Ie.uncompress=Tt;break;case"DWAA_COMPRESSION":Ie.lines=32,Ie.uncompress=ct;break;case"DWAB_COMPRESSION":Ie.lines=256,Ie.uncompress=ct;break;default:throw"EXRLoader.parse: "+B.compression+" is unsupported"}if(Ie.scanlineBlockSize=Ie.lines,Ie.type==1)switch(ze){case Ii:Ie.getter=Xe,Ie.inputSize=2;break;case Ds:Ie.getter=Ue,Ie.inputSize=2;break}else if(Ie.type==2)switch(ze){case Ii:Ie.getter=Yt,Ie.inputSize=4;break;case Ds:Ie.getter=ge,Ie.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ie.type+" for "+B.compression+".";Ie.blockCount=(B.dataWindow.yMax+1)/Ie.scanlineBlockSize;for(var tt=0;tt<Ie.blockCount;tt++)Ut(K,Ae);Ie.outputChannels=Ie.channels==3?4:Ie.channels;const $e=Ie.width*Ie.height*Ie.outputChannels;switch(ze){case Ii:Ie.byteArray=new Float32Array($e),Ie.channels<Ie.outputChannels&&Ie.byteArray.fill(1,0,$e);break;case Ds:Ie.byteArray=new Uint16Array($e),Ie.channels<Ie.outputChannels&&Ie.byteArray.fill(15360,0,$e);break;default:console.error("THREE.EXRLoader: unsupported type: ",ze);break}return Ie.bytesPerLine=Ie.width*Ie.inputSize*Ie.channels,Ie.outputChannels==4?Ie.format=Ki:Ie.format=O0,yg?Ie.colorSpace="srgb-linear":Ie.encoding=3e3,Ie}const os=new DataView(e),_s=new Uint8Array(e),fa={value:0},Zi=Uo(os,e,fa),qt=Wr(Zi,os,_s,fa,this.type),ls={value:0},an={R:0,G:1,B:2,A:3,Y:0};for(let B=0;B<qt.height/qt.scanlineBlockSize;B++){const K=ut(os,fa);qt.size=ut(os,fa),qt.lines=K+qt.scanlineBlockSize>qt.height?qt.height-K:qt.scanlineBlockSize;const Ae=qt.size<qt.lines*qt.bytesPerLine?qt.uncompress(qt):Se(qt);fa.value+=qt.size;for(let ze=0;ze<qt.scanlineBlockSize;ze++){const Ie=ze+B*qt.scanlineBlockSize;if(Ie>=qt.height)break;for(let tt=0;tt<qt.channels;tt++){const $e=an[Zi.channels[tt].name];for(let z=0;z<qt.width;z++){ls.value=(ze*(qt.channels*qt.width)+tt*qt.width+z)*qt.inputSize;const Q=(qt.height-1-Ie)*(qt.width*qt.outputChannels)+z*qt.outputChannels+$e;qt.byteArray[Q]=qt.getter(Ae,ls)}}}}return{header:Zi,width:qt.width,height:qt.height,data:qt.byteArray,format:qt.format,[yg?"colorSpace":"encoding"]:qt[yg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(l,c){yg?l.colorSpace=c.colorSpace:l.encoding=c.encoding,l.minFilter=ti,l.magFilter=ti,l.generateMipmaps=!1,l.flipY=!1,t&&t(l,c)}return super.load(e,r,i,s)}}const O9=()=>parseInt(Mp.replace(/\D+/g,"")),D9=O9();function ZN(n,e){const t=n+"Geometry";return me.forwardRef(({args:i,children:s,...r},l)=>{const c=me.useRef(null);return me.useImperativeHandle(l,()=>c.current),me.useLayoutEffect(()=>void(e==null?void 0:e(c.current))),me.createElement("mesh",Ax({ref:c},r),me.createElement(t,{attach:"geometry",args:i}),s)})}const N9=ZN("sphere"),U9=ZN("torus"),XR=me.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:s=1,floatingRange:r=[-.1,.1],autoInvalidate:l=!1,...c},d)=>{const p=me.useRef(null);me.useImperativeHandle(d,()=>p.current,[]);const g=me.useRef(Math.random()*1e4);return G0(y=>{var _,x;if(!e||t===0)return;l&&y.invalidate();const E=g.current+y.clock.elapsedTime;p.current.rotation.x=Math.cos(E/4*t)/8*i,p.current.rotation.y=Math.sin(E/4*t)/8*i,p.current.rotation.z=Math.sin(E/4*t)/20*i;let A=Math.sin(E/4*t)/10;A=uD.mapLinear(A,-.1,.1,(_=r==null?void 0:r[0])!==null&&_!==void 0?_:-.1,(x=r==null?void 0:r[1])!==null&&x!==void 0?x:.1),p.current.position.y=A*s,p.current.updateMatrix()}),me.createElement("group",c,me.createElement("group",{ref:p,matrixAutoUpdate:!1},n))}),JN=(n,e,t)=>{let i;switch(n){case er:i=new Uint8ClampedArray(e*t*4);break;case Ds:i=new Uint16Array(e*t*4);break;case xl:i=new Uint32Array(e*t*4);break;case zx:i=new Int8Array(e*t*4);break;case Fx:i=new Int16Array(e*t*4);break;case R0:i=new Int32Array(e*t*4);break;case Ii:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let u_;const L9=(n,e,t,i)=>{if(u_!==void 0)return u_;const s=new Xr(1,1,i);e.setRenderTarget(s);const r=new Pi(new bu,new fc({color:16777215}));e.render(r,t),e.setRenderTarget(null);const l=JN(n,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,l),s.dispose(),r.geometry.dispose(),r.material.dispose(),u_=l[0]!==0,u_};class pT{constructor(e){Hi(this,"_renderer");Hi(this,"_rendererIsDisposable",!1);Hi(this,"_material");Hi(this,"_scene");Hi(this,"_camera");Hi(this,"_quad");Hi(this,"_renderTarget");Hi(this,"_width");Hi(this,"_height");Hi(this,"_type");Hi(this,"_colorSpace");Hi(this,"_supportsReadPixels",!0);Hi(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var i,s,r,l,c,d,p,g,y,_,x,E,A,T,M,R;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Ki,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=e.renderTargetOptions)==null?void 0:i.anisotropy)!==void 0?(s=e.renderTargetOptions)==null?void 0:s.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)==null?void 0:r.generateMipmaps)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.generateMipmaps:!1,magFilter:((c=e.renderTargetOptions)==null?void 0:c.magFilter)!==void 0?(d=e.renderTargetOptions)==null?void 0:d.magFilter:ti,minFilter:((p=e.renderTargetOptions)==null?void 0:p.minFilter)!==void 0?(g=e.renderTargetOptions)==null?void 0:g.minFilter:ti,samples:((y=e.renderTargetOptions)==null?void 0:y.samples)!==void 0?(_=e.renderTargetOptions)==null?void 0:_.samples:void 0,wrapS:((x=e.renderTargetOptions)==null?void 0:x.wrapS)!==void 0?(E=e.renderTargetOptions)==null?void 0:E.wrapS:rs,wrapT:((A=e.renderTargetOptions)==null?void 0:A.wrapT)!==void 0?(T=e.renderTargetOptions)==null?void 0:T.wrapT:rs};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=pT.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new L0,this._camera=new Cp,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!L9(this._type,this._renderer,this._camera,t)){let O;switch(this._type){case Ds:O=this._renderer.extensions.has("EXT_color_buffer_float")?Ii:void 0;break}O!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ii}`),this._type=O):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Pi(new bu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Xr(this.width,this.height,t),this._renderTarget.texture.mapping=((M=e.renderTargetOptions)==null?void 0:M.mapping)!==void 0?(R=e.renderTargetOptions)==null?void 0:R.mapping:mu}static instantiateRenderer(){const e=new oT;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=JN(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Ro(this.toArray(),this.width,this.height,Ki,this._type,(e==null?void 0:e.mapping)||mu,(e==null?void 0:e.wrapS)||rs,(e==null?void 0:e.wrapT)||rs,(e==null?void 0:e.magFilter)||ti,(e==null?void 0:e.minFilter)||ti,(e==null?void 0:e.anisotropy)||1,Oo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ba&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof oi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof oi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class QN extends Error{}class $N extends Error{}const _g=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(l=>l.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},I9=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),s=e.slice(t,i+10);try{const r=_g(s,"hdrgm:GainMapMin","0"),l=_g(s,"hdrgm:GainMapMax"),c=_g(s,"hdrgm:Gamma","1"),d=_g(s,"hdrgm:OffsetSDR","0.015625"),p=_g(s,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),y=g?g[1]:"0",_=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!_)throw new Error("Incomplete gainmap metadata");const x=_[1];return{gainMapMin:Array.isArray(r)?r.map(E=>parseFloat(E)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(l)?l.map(E=>parseFloat(E)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(c)?c.map(E=>parseFloat(E)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(d)?d.map(E=>parseFloat(E)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(E=>parseFloat(E)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class P9{constructor(e){Hi(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const l=r.byteLength;let c=2,d=0,p;for(;c<l;){if(++d>250){i(new Error(`Found no marker after ${d} loops `));return}if(r.getUint8(c)!==255){i(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${r.getUint8(c).toString(16)}`));return}if(p=r.getUint8(c+1),s&&console.log(`Marker: ${p.toString(16)}`),p===226){s&&console.log("Found APP2 marker (0xffe2)");const g=c+4;if(r.getUint32(g)===1297106432){const y=g+4;let _;if(r.getUint16(y)===18761)_=!1;else if(r.getUint16(y)===19789)_=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(y+2,!_)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=r.getUint32(y+4,!_);if(x<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const E=y+x,A=r.getUint16(E,!_),T=E+2;let M=0;for(let H=T;H<T+12*A;H+=12)r.getUint16(H,!_)===45057&&(M=r.getUint32(H+8,!_));const O=E+2+A*12+4,D=[];for(let H=O;H<O+M*16;H+=16){const I={MPType:r.getUint32(H,!_),size:r.getUint32(H+4,!_),dataOffset:r.getUint32(H+8,!_),dependantImages:r.getUint32(H+12,!_),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=y+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,D.push(I)}if(this.options.extractNonFII&&D.length){const H=new Blob([r]),I=[];for(const V of D){if(V.isFII&&!this.options.extractFII)continue;const F=H.slice(V.start,V.end+1,"image/jpeg");I.push(F)}t(I)}}}c+=2+r.getUint16(c+2)}})}}const B9=async n=>{const e=I9(n);if(!e)throw new $N("Gain map XMP metadata not found");const i=await new P9({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new QN("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},WR=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=s=>{t(s)},i.src=URL.createObjectURL(n)});class z9 extends Fa{constructor(t,i){super(i);Hi(this,"_renderer");Hi(this,"_renderTargetOptions");Hi(this,"_internalLoadingManager");Hi(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new fb}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new oi,sdr:new oi});return this._config.createQuadRenderer({width:16,height:16,type:Ds,colorSpace:Oo,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,i,s){const r=i?new Blob([i],{type:"image/jpeg"}):void 0,l=new Blob([t],{type:"image/jpeg"});let c,d,p=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([r?WR(r):Promise.resolve(void 0),WR(l)]);d=g[0],c=g[1],p=s==="flipY"}else{const g=await Promise.all([r?createImageBitmap(r,{imageOrientation:s||"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:s||"flipY"})]);d=g[0],c=g[1]}return{sdrImage:c,gainMapImage:d,needsFlip:p}}createTextures(t,i,s){const r=new oi(i||new ImageData(2,2),mu,rs,rs,ti,l1,Ki,er,1,Oo);r.flipY=s,r.needsUpdate=!0;const l=new oi(t,mu,rs,rs,ti,l1,Ki,er,1,Gs);return l.flipY=s,l.needsUpdate=!0,{gainMap:r,sdr:l}}updateQuadRenderer(t,i,s,r,l){t.width=i.width,t.height=i.height,t.material.gainMap=s,t.material.sdr=r,t.material.gainMapMin=l.gainMapMin,t.material.gainMapMax=l.gainMapMax,t.material.offsetHdr=l.offsetHdr,t.material.offsetSdr=l.offsetSdr,t.material.gamma=l.gamma,t.material.hdrCapacityMin=l.hdrCapacityMin,t.material.hdrCapacityMax=l.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,l.hdrCapacityMax),t.material.needsUpdate=!0}}const F9=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,V9=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class H9 extends Ba{constructor({gamma:t,offsetHdr:i,offsetSdr:s,gainMapMin:r,gainMapMax:l,maxDisplayBoost:c,hdrCapacityMin:d,hdrCapacityMax:p,sdr:g,gainMap:y}){super({name:"GainMapDecoderMaterial",vertexShader:F9,fragmentShader:V9,uniforms:{sdr:{value:g},gainMap:{value:y},gamma:{value:new ee(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new ee().fromArray(i)},offsetSdr:{value:new ee().fromArray(s)},gainMapMin:{value:new ee().fromArray(r)},gainMapMax:{value:new ee().fromArray(l)},weightFactor:{value:(Math.log2(c)-d)/(p-d)}},blending:gl,depthTest:!1,depthWrite:!1});Hi(this,"_maxDisplayBoost");Hi(this,"_hdrCapacityMin");Hi(this,"_hdrCapacityMax");this._maxDisplayBoost=c,this._hdrCapacityMin=d,this._hdrCapacityMax=p,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const i=this.uniforms.gamma.value;i.x=1/t[0],i.y=1/t[1],i.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class eU extends z9{constructor(e,t){super({renderer:e,createMaterial:i=>new H9(i),createQuadRenderer:i=>new pT(i)},t)}async render(e,t,i,s){const{sdrImage:r,gainMapImage:l,needsFlip:c}=await this.processImages(i,s,"flipY"),{gainMap:d,sdr:p}=this.createTextures(r,l,c);this.updateQuadRenderer(e,r,d,p,t),e.render()}}class k9 extends eU{load([e,t,i],s,r,l){const c=this.prepareQuadRenderer();let d,p,g;const y=async()=>{if(d&&p&&g){try{await this.render(c,g,d,p)}catch(L){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof l=="function"&&l(L),c.disposeOnDemandRenderer();return}typeof s=="function"&&s(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),c.disposeOnDemandRenderer()}};let _=!0,x=0,E=0,A=!0,T=0,M=0,R=!0,O=0,D=0;const H=()=>{if(typeof r=="function"){const L=x+T+O,P=E+M+D,Z=_&&A&&R;r(new ProgressEvent("progress",{lengthComputable:Z,loaded:P,total:L}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const I=new _r(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");d=L,await y()},L=>{_=L.lengthComputable,E=L.loaded,x=L.total,H()},L=>{this.manager.itemError(e),typeof l=="function"&&l(L)});const V=new _r(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(t,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");p=L,await y()},L=>{A=L.lengthComputable,M=L.loaded,T=L.total,H()},L=>{this.manager.itemError(t),typeof l=="function"&&l(L)});const F=new _r(this._internalLoadingManager);return F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(i,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");g=JSON.parse(L),await y()},L=>{R=L.lengthComputable,D=L.loaded,O=L.total,H()},L=>{this.manager.itemError(i),typeof l=="function"&&l(L)}),c}}class G9 extends eU{load(e,t,i,s){const r=this.prepareQuadRenderer(),l=new _r(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(e),l.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(c);let p,g,y;try{const _=await B9(d);p=_.sdr,g=_.gainMap,y=_.metadata}catch(_){if(_ instanceof $N||_ instanceof QN)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=d;else throw _}try{await this.render(r,y,p.buffer,g==null?void 0:g.buffer)}catch(_){this.manager.itemError(e),typeof s=="function"&&s(_),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},i,c=>{this.manager.itemError(e),typeof s=="function"&&s(c)}),r}}const g0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},tU="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",op=n=>Array.isArray(n),mT=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function gb({files:n=mT,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:s}={}){t&&(gT(t),n=g0[t],e=tU);const r=op(n),{extension:l,isCubemap:c}=vT(n),d=yT(l);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=m0(x=>x.gl);me.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function x(){vp.clear(d,r?[n]:n)}p.domElement.addEventListener("webglcontextlost",x,{once:!0})},[n,p.domElement]);const g=vp(d,r?[n]:n,x=>{(l==="webp"||l==="jpg"||l==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(e),s&&s(x)});let y=r?g[0]:g;if(l==="jpg"||l==="jpeg"||l==="webp"){var _;y=(_=y.renderTarget)==null?void 0:_.texture}return y.mapping=c?_l:hp,y.colorSpace=i??(c?"srgb":"srgb-linear"),y}const j9={files:mT,path:"",preset:void 0,extensions:void 0};gb.preload=n=>{const e={...j9,...n};let{files:t,path:i=""}=e;const{preset:s,extensions:r}=e;s&&(gT(s),t=g0[s],i=tU);const{extension:l}=vT(t);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=yT(l);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+t);vp.preload(c,op(t)?[t]:t,d=>{d.setPath==null||d.setPath(i),r&&r(d)})};const q9={files:mT,preset:void 0};gb.clear=n=>{const e={...q9,...n};let{files:t}=e;const{preset:i}=e;i&&(gT(i),t=g0[i]);const{extension:s}=vT(t),r=yT(s);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+t);vp.clear(r,op(t)?[t]:t)};function gT(n){if(!(n in g0))throw new Error("Preset must be one of: "+Object.keys(g0).join(", "))}function vT(n){var e;const t=op(n)&&n.length===6,i=op(n)&&n.length===3&&n.some(l=>l.endsWith("json")),s=op(n)?n[0]:n;return{extension:t?"cube":i?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(e=s.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function yT(n){return n==="cube"?QD:n==="hdr"?C9:n==="exr"?R9:n==="jpg"||n==="jpeg"?G9:n==="webp"?k9:null}const X9=n=>n.current&&n.current.isScene,W9=n=>X9(n)?n.current:n;function _T(n,e,t,i,s={}){var r,l,c,d;s={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...s};const p=W9(e||t),g=p.background,y=p.environment,_={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(r=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(c=(d=p.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&c!==void 0?c:[0,0,0]};return n!=="only"&&(p.environment=i),n&&(p.background=i),fl(p,s),()=>{n!=="only"&&(p.environment=y),n&&(p.background=g),fl(p,_)}}function xT({scene:n,background:e=!1,map:t,...i}){const s=m0(r=>r.scene);return me.useLayoutEffect(()=>{if(t)return _T(e,n,s,t,i)}),null}function nU({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:l,environmentRotation:c,...d}){const p=gb(d),g=m0(y=>y.scene);return me.useLayoutEffect(()=>_T(n,e,g,p,{backgroundBlurriness:t??i,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:l,environmentRotation:c})),me.useEffect(()=>()=>{p.dispose()},[p]),null}function Y9({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:s=1,map:r,background:l=!1,blur:c,backgroundBlurriness:d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:_,scene:x,files:E,path:A,preset:T=void 0,extensions:M}){const R=m0(F=>F.gl),O=m0(F=>F.scene),D=me.useRef(null),[H]=me.useState(()=>new L0),I=me.useMemo(()=>{const F=new LM(i);return F.texture.type=Ds,F},[i]);me.useEffect(()=>()=>{I.dispose()},[I]),me.useLayoutEffect(()=>{if(s===1){const F=R.autoClear;R.autoClear=!0,D.current.update(R,H),R.autoClear=F}return _T(l,x,O,I.texture,{backgroundBlurriness:c??d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:_})},[n,H,I.texture,x,O,l,s,R]);let V=1;return G0(()=>{if(s===1/0||V<s){const F=R.autoClear;R.autoClear=!0,D.current.update(R,H),R.autoClear=F,V++}}),me.createElement(me.Fragment,null,e9(me.createElement(me.Fragment,null,n,me.createElement("cubeCamera",{ref:D,args:[e,t,I]}),E||T?me.createElement(nU,{background:!0,files:E,preset:T,path:A,extensions:M}):r?me.createElement(xT,{background:!0,map:r,extensions:M}):null),H))}function K9(n){var e,t,i,s;const r=gb(n),l=n.map||r;me.useMemo(()=>PN({GroundProjectedEnvImpl:A9}),[]),me.useEffect(()=>()=>{r.dispose()},[r]);const c=me.useMemo(()=>[l],[l]),d=(e=n.ground)==null?void 0:e.height,p=(t=n.ground)==null?void 0:t.radius,g=(i=(s=n.ground)==null?void 0:s.scale)!==null&&i!==void 0?i:1e3;return me.createElement(me.Fragment,null,me.createElement(xT,Ax({},n,{map:l})),me.createElement("groundProjectedEnvImpl",{args:c,scale:g,height:d,radius:p}))}function Z9(n){return n.ground?me.createElement(K9,n):n.map?me.createElement(xT,n):n.children?me.createElement(Y9,n):me.createElement(nU,n)}class J9 extends Ba{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${D9>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Q9=n=>new ee().setFromSpherical(new dN(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),$9=me.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:s=4,fade:r=!1,speed:l=1},c)=>{const d=me.useRef(null),[p,g,y]=me.useMemo(()=>{const x=[],E=[],A=Array.from({length:t},()=>(.5+.5*Math.random())*s),T=new St;let M=n+e;const R=e/t;for(let O=0;O<t;O++)M-=R*Math.random(),x.push(...Q9(M).toArray()),T.setHSL(O/t,i,.9),E.push(T.r,T.g,T.b);return[new Float32Array(x),new Float32Array(E),new Float32Array(A)]},[t,e,s,n,i]);G0(x=>d.current&&(d.current.uniforms.time.value=x.clock.elapsedTime*l));const[_]=me.useState(()=>new J9);return me.createElement("points",{ref:c},me.createElement("bufferGeometry",null,me.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),me.createElement("bufferAttribute",{attach:"attributes-color",args:[g,3]}),me.createElement("bufferAttribute",{attach:"attributes-size",args:[y,1]})),me.createElement("primitive",{ref:d,object:_,attach:"material",blending:P_,"uniforms-fade-value":r,depthWrite:!1,transparent:!0,vertexColors:!0}))}),AE=({position:n,color:e,scale:t=1})=>{const i=me.useRef(null);return G0(s=>{if(i.current){const r=s.clock.getElapsedTime();i.current.position.y=n[1]+Math.sin(r*2+n[0])*.2,i.current.rotation.x=r*.5,i.current.rotation.z=r*.3}}),q.jsx(N9,{ref:i,args:[1,32,32],position:n,scale:t,children:q.jsx("meshStandardMaterial",{color:e,roughness:.2,metalness:.8,envMapIntensity:1})})},e7=()=>{const n=me.useRef(null);return G0(e=>{if(n.current){const t=e.clock.getElapsedTime();n.current.rotation.x=Math.sin(t*.2)*.2,n.current.rotation.y=t*.1}}),q.jsx(U9,{ref:n,args:[3,.1,16,100],rotation:[Math.PI/2,0,0],children:q.jsx("meshStandardMaterial",{color:"#C5A059",emissive:"#C5A059",emissiveIntensity:.5,transparent:!0,opacity:.6,wireframe:!0})})},t7=()=>q.jsx("div",{className:"absolute inset-0 z-0 opacity-60 pointer-events-none",children:q.jsxs(f9,{camera:{position:[0,0,6],fov:45},children:[q.jsx("ambientLight",{intensity:.5}),q.jsx("pointLight",{position:[10,10,10],intensity:1}),q.jsxs(XR,{speed:1.5,rotationIntensity:.2,floatIntensity:.5,children:[q.jsx(AE,{position:[0,0,0],color:"#4F46E5",scale:1.2}),q.jsx(e7,{})]}),q.jsxs(XR,{speed:2,rotationIntensity:.5,floatIntensity:1,children:[q.jsx(AE,{position:[-3,1,-2],color:"#9333EA",scale:.5}),q.jsx(AE,{position:[3,-1,-3],color:"#C5A059",scale:.6})]}),q.jsx(Z9,{preset:"city"}),q.jsx($9,{radius:100,depth:50,count:1e3,factor:4,saturation:0,fade:!0,speed:1})]})});/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i7=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),YR=n=>{const e=i7(n);return e.charAt(0).toUpperCase()+e.slice(1)},iU=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),s7=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=me.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:l,...c},d)=>me.createElement("svg",{ref:d,...a7,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:iU("lucide",s),...!r&&!s7(c)&&{"aria-hidden":"true"},...c},[...l.map(([p,g])=>me.createElement(p,g)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=(n,e)=>{const t=me.forwardRef(({className:i,...s},r)=>me.createElement(r7,{ref:r,iconNode:e,className:iU(`lucide-${n7(YR(n))}`,`lucide-${n}`,i),...s}));return t.displayName=YR(n),t};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],sU=Va("book-open",o7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],c7=Va("chart-no-axes-column",l7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],h7=Va("circle-check",u7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],d7=Va("cloud-upload",f7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],m7=Va("database",p7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],v7=Va("ellipsis-vertical",g7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bT=Va("file-text",y7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],x7=Va("heart",_7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],S7=Va("layout-grid",b7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],M7=Va("quote",E7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],w7=Va("refresh-cw",T7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],C7=Va("school",A7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],O7=Va("search",R7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],N7=Va("users",D7);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ST=Va("x",U7),L7=()=>{const[n,e]=me.useState(2),t=[{id:0,year:"Antiguidade",label:"Excluso",desc:"Pessoas sacrificadas ou abandonadas."},{id:1,year:"1948",label:"Direitos Humanos",desc:"Declarao Universal da ONU."},{id:2,year:"2002",label:"Diretrizes Nacionais",desc:"Foco na adaptao e incluso."}];return q.jsxs("div",{className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-sm border border-stone-200 my-8",children:[q.jsx("h3",{className:"font-serif text-xl mb-4 text-stone-800",children:"Linha do Tempo"}),q.jsx("p",{className:"text-sm text-stone-500 mb-6 text-center max-w-md",children:"A evoluo do olhar da sociedade sobre a pessoa com deficincia."}),q.jsxs("div",{className:"relative w-full max-w-sm py-8",children:[q.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-stone-300"}),q.jsx("div",{className:"space-y-8",children:t.map(i=>q.jsxs("div",{className:`relative pl-20 cursor-pointer transition-all duration-300 ${n===i.id?"opacity-100":"opacity-50"}`,onClick:()=>e(i.id),children:[q.jsx("div",{className:`absolute left-[27px] w-4 h-4 rounded-full border-2 transition-all duration-300 z-10 ${n===i.id?"bg-nobel-gold border-stone-800 scale-125":"bg-white border-stone-400"}`}),q.jsxs("div",{className:"flex flex-col",children:[q.jsx("span",{className:"text-xs font-bold tracking-widest text-nobel-gold",children:i.year}),q.jsx("span",{className:"font-serif text-lg text-stone-900",children:i.label}),q.jsx("span",{className:"text-sm text-stone-600 mt-1",children:i.desc})]})]},i.id))})]})]})},I7=()=>{const[n,e]=me.useState(!1);return me.useEffect(()=>{const t=setInterval(()=>{e(i=>!i)},2e3);return()=>clearInterval(t)},[]),q.jsxs("div",{className:"flex flex-col items-center p-8 bg-[#F5F4F0] rounded-xl border border-stone-200 my-8",children:[q.jsx("h3",{className:"font-serif text-xl mb-4 text-stone-900",children:"A Trade da Incluso"}),q.jsx("p",{className:"text-sm text-stone-600 mb-6 text-center max-w-md",children:"O aluno se desenvolve plenamente quando h harmonia entre os pilares."}),q.jsxs("div",{className:"relative w-64 h-64 flex items-center justify-center",children:[q.jsxs("div",{className:"relative z-20 w-20 h-20 bg-stone-900 rounded-full flex items-center justify-center border-4 border-nobel-gold shadow-lg",children:[q.jsx(N7,{className:"text-white",size:32}),q.jsx("div",{className:"absolute -bottom-8 text-xs font-bold uppercase tracking-wider text-stone-600",children:"Aluno"})]}),q.jsx(Zg.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute w-full h-full",children:q.jsxs("div",{className:"absolute top-0 left-1/2 -ml-8 w-16 h-16 bg-white rounded-full border border-stone-300 flex items-center justify-center shadow-sm",children:[q.jsx(x7,{className:"text-stone-400",size:24}),q.jsx("div",{className:"absolute -top-6 text-xs font-bold text-stone-500",children:"Famlia"})]})}),q.jsx(Zg.div,{animate:{rotate:-360},transition:{duration:25,repeat:1/0,ease:"linear"},className:"absolute w-48 h-48",children:q.jsxs("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-white rounded-full border border-stone-300 flex items-center justify-center shadow-sm",children:[q.jsx(C7,{className:"text-stone-400",size:24}),q.jsx("div",{className:"absolute -bottom-6 text-xs font-bold text-stone-500",children:"Escola"})]})}),q.jsx("div",{className:"absolute inset-0 rounded-full border border-stone-300/50 scale-100"}),q.jsx("div",{className:"absolute inset-0 rounded-full border border-stone-300/50 scale-75"})]}),q.jsxs("div",{className:"mt-8 flex gap-4",children:[q.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-stone-500",children:[q.jsx("span",{className:"w-2 h-2 bg-nobel-gold rounded-full"})," Apoio"]}),q.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-stone-500",children:[q.jsx("span",{className:"w-2 h-2 bg-stone-900 rounded-full"})," Desenvolvimento"]})]})]})},P7=()=>{const[n,e]=me.useState("demand");return q.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center p-8 bg-stone-900 text-stone-100 rounded-xl my-8 border border-stone-800 shadow-lg",children:[q.jsxs("div",{className:"flex-1 min-w-[240px]",children:[q.jsx("h3",{className:"font-serif text-xl mb-2 text-nobel-gold",children:"O Desafio da Formao"}),q.jsx("p",{className:"text-stone-400 text-sm mb-4 leading-relaxed",children:"A legislao exige especializao, mas a realidade escolar ainda enfrenta a carncia de profissionais capacitados para a diversidade."}),q.jsxs("div",{className:"flex gap-2 mt-6",children:[q.jsx("button",{onClick:()=>e("demand"),className:`px-3 py-1.5 rounded text-sm font-medium transition-all duration-200 border ${n==="demand"?"bg-nobel-gold text-stone-900 border-nobel-gold":"bg-transparent text-stone-400 border-stone-700 hover:border-stone-500 hover:text-stone-200"}`,children:"Demanda"}),q.jsx("button",{onClick:()=>e("training"),className:`px-3 py-1.5 rounded text-sm font-medium transition-all duration-200 border ${n==="training"?"bg-nobel-gold text-stone-900 border-nobel-gold":"bg-transparent text-stone-400 border-stone-700 hover:border-stone-500 hover:text-stone-200"}`,children:"Capacitao"})]}),q.jsxs("div",{className:"mt-6 font-mono text-xs text-stone-500 flex items-center gap-2",children:[q.jsx(c7,{size:14,className:"text-nobel-gold"}),q.jsx("span",{children:"NVEL DE PREPARO (ESTIMATIVA)"})]})]}),q.jsxs("div",{className:"relative w-64 h-72 bg-stone-800/50 rounded-xl border border-stone-700/50 p-6 flex justify-around items-end",children:[q.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between pointer-events-none opacity-10",children:[q.jsx("div",{className:"w-full h-[1px] bg-stone-400"}),q.jsx("div",{className:"w-full h-[1px] bg-stone-400"}),q.jsx("div",{className:"w-full h-[1px] bg-stone-400"}),q.jsx("div",{className:"w-full h-[1px] bg-stone-400"})]}),q.jsxs("div",{className:"w-20 flex flex-col justify-end items-center h-full z-10",children:[q.jsxs("div",{className:"flex-1 w-full flex items-end justify-center relative mb-3",children:[q.jsx("div",{className:"absolute -top-5 w-full text-center text-sm font-mono text-stone-400 font-bold bg-stone-900/90 py-1 px-2 rounded backdrop-blur-sm border border-stone-700/50 shadow-sm",children:n==="demand"?"Alta":"Mdia"}),q.jsx(Zg.div,{className:"w-full bg-stone-600 rounded-t-md border-t border-x border-stone-500/30",initial:{height:"20%"},animate:{height:n==="demand"?"85%":"50%"},transition:{type:"spring",stiffness:80,damping:15}})]}),q.jsx("div",{className:"h-6 flex items-center text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Geral"})]}),q.jsxs("div",{className:"w-20 flex flex-col justify-end items-center h-full z-10",children:[q.jsxs("div",{className:"flex-1 w-full flex items-end justify-center relative mb-3",children:[q.jsx("div",{className:"absolute -top-5 w-full text-center text-sm font-mono text-nobel-gold font-bold bg-stone-900/90 py-1 px-2 rounded backdrop-blur-sm border border-nobel-gold/30 shadow-sm",children:n==="demand"?"Crtica":"Baixa"}),q.jsx(Zg.div,{className:"w-full bg-nobel-gold rounded-t-md shadow-[0_0_20px_rgba(197,160,89,0.25)] relative overflow-hidden",initial:{height:"20%"},animate:{height:n==="demand"?"95%":"30%"},transition:{type:"spring",stiffness:80,damping:15,delay:.1},children:q.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent to-white/20"})})]}),q.jsx("div",{className:"h-6 flex items-center text-xs font-bold text-nobel-gold uppercase tracking-wider",children:"Espec."})]})]})]})};var A1=function(n,e){return A1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},A1(n,e)};function aU(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A1(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Cx=function(){return Cx=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cx.apply(this,arguments)};function Dp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function rU(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(r=(s<3?l(r):s>3?l(e,t,r):l(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}function oU(n,e){return function(t,i){e(t,i,n)}}function lU(n,e,t,i,s,r){function l(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var c=i.kind,d=c==="getter"?"get":c==="setter"?"set":"value",p=!e&&n?i.static?n:n.prototype:null,g=e||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),y,_=!1,x=t.length-1;x>=0;x--){var E={};for(var A in i)E[A]=A==="access"?{}:i[A];for(var A in i.access)E.access[A]=i.access[A];E.addInitializer=function(M){if(_)throw new TypeError("Cannot add initializers after decoration has completed");r.push(l(M||null))};var T=(0,t[x])(c==="accessor"?{get:g.get,set:g.set}:g[d],E);if(c==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(y=l(T.get))&&(g.get=y),(y=l(T.set))&&(g.set=y),(y=l(T.init))&&s.unshift(y)}else(y=l(T))&&(c==="field"?s.unshift(y):g[d]=y)}p&&Object.defineProperty(p,i.name,g),_=!0}function cU(n,e,t){for(var i=arguments.length>2,s=0;s<e.length;s++)t=i?e[s].call(n,t):e[s].call(n);return i?t:void 0}function uU(n){return typeof n=="symbol"?n:"".concat(n)}function hU(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function fU(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Dt(n,e,t,i){function s(r){return r instanceof t?r:new t(function(l){l(r)})}return new(t||(t=Promise))(function(r,l){function c(g){try{p(i.next(g))}catch(y){l(y)}}function d(g){try{p(i.throw(g))}catch(y){l(y)}}function p(g){g.done?r(g.value):s(g.value).then(c,d)}p((i=i.apply(n,e||[])).next())})}function dU(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(p){return function(g){return d([p,g])}}function d(p){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(t=0)),t;)try{if(i=1,s&&(r=p[0]&2?s.return:p[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,p[1])).done)return r;switch(s=0,r&&(p=[p[0]&2,r.value]),p[0]){case 0:case 1:r=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,s=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!r||p[1]>r[0]&&p[1]<r[3])){t.label=p[1];break}if(p[0]===6&&t.label<r[1]){t.label=r[1],r=p;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(p);break}r[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(g){p=[6,g],s=0}finally{i=r=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var vb=Object.create?(function(n,e,t,i){i===void 0&&(i=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,s)}):(function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]});function pU(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vb(e,n,t)}function Rx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ET(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return r}function mU(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(ET(arguments[e]));return n}function gU(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),s=0,e=0;e<t;e++)for(var r=arguments[e],l=0,c=r.length;l<c;l++,s++)i[s]=r[l];return i}function vU(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}function _p(n){return this instanceof _p?(this.v=n,this):new _p(n)}function yU(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(x){return function(E){return Promise.resolve(E).then(x,y)}}function c(x,E){i[x]&&(s[x]=function(A){return new Promise(function(T,M){r.push([x,A,T,M])>1||d(x,A)})},E&&(s[x]=E(s[x])))}function d(x,E){try{p(i[x](E))}catch(A){_(r[0][3],A)}}function p(x){x.value instanceof _p?Promise.resolve(x.value.v).then(g,y):_(r[0][2],x)}function g(x){d("next",x)}function y(x){d("throw",x)}function _(x,E){x(E),r.shift(),r.length&&d(r[0][0],r[0][1])}}function _U(n){var e,t;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,r){e[s]=n[s]?function(l){return(t=!t)?{value:_p(n[s](l)),done:!1}:r?r(l):l}:r}}function xU(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Rx=="function"?Rx(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(l){return new Promise(function(c,d){l=n[r](l),s(c,d,l.done,l.value)})}}function s(r,l,c,d){Promise.resolve(d).then(function(p){r({value:p,done:c})},l)}}function bU(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var B7=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},C1=function(n){return C1=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},C1(n)};function SU(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=C1(n),i=0;i<t.length;i++)t[i]!=="default"&&vb(e,n,t[i]);return B7(e,n),e}function EU(n){return n&&n.__esModule?n:{default:n}}function MU(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}function TU(n,e,t,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}function wU(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function AU(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,s;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],t&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(r){return Promise.reject(r)}}),n.stack.push({value:e,dispose:i,async:t})}else t&&n.stack.push({async:!0});return e}var z7=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var i=new Error(t);return i.name="SuppressedError",i.error=n,i.suppressed=e,i};function CU(n){function e(r){n.error=n.hasError?new z7(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}var t,i=0;function s(){for(;t=n.stack.pop();)try{if(!t.async&&i===1)return i=0,n.stack.push(t),Promise.resolve().then(s);if(t.dispose){var r=t.dispose.call(t.value);if(t.async)return i|=2,Promise.resolve(r).then(s,function(l){return e(l),s()})}else i|=1}catch(l){e(l)}if(i===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return s()}function RU(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,i,s,r,l){return i?e?".jsx":".js":s&&(!r||!l)?t:s+r+"."+l.toLowerCase()+"js"}):n}const F7={__extends:aU,__assign:Cx,__rest:Dp,__decorate:rU,__param:oU,__esDecorate:lU,__runInitializers:cU,__propKey:uU,__setFunctionName:hU,__metadata:fU,__awaiter:Dt,__generator:dU,__createBinding:vb,__exportStar:pU,__values:Rx,__read:ET,__spread:mU,__spreadArrays:gU,__spreadArray:vU,__await:_p,__asyncGenerator:yU,__asyncDelegator:_U,__asyncValues:xU,__makeTemplateObject:bU,__importStar:SU,__importDefault:EU,__classPrivateFieldGet:MU,__classPrivateFieldSet:TU,__classPrivateFieldIn:wU,__addDisposableResource:AU,__disposeResources:CU,__rewriteRelativeImportExtension:RU},V7=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:AU,get __assign(){return Cx},__asyncDelegator:_U,__asyncGenerator:yU,__asyncValues:xU,__await:_p,__awaiter:Dt,__classPrivateFieldGet:MU,__classPrivateFieldIn:wU,__classPrivateFieldSet:TU,__createBinding:vb,__decorate:rU,__disposeResources:CU,__esDecorate:lU,__exportStar:pU,__extends:aU,__generator:dU,__importDefault:EU,__importStar:SU,__makeTemplateObject:bU,__metadata:fU,__param:oU,__propKey:uU,__read:ET,__rest:Dp,__rewriteRelativeImportExtension:RU,__runInitializers:cU,__setFunctionName:hU,__spread:mU,__spreadArray:vU,__spreadArrays:gU,__values:Rx,default:F7},Symbol.toStringTag,{value:"Module"})),H7=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class MT extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class k7 extends MT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class KR extends MT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ZR extends MT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var R1;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(R1||(R1={}));class G7{constructor(e,{headers:t={},customFetch:i,region:s=R1.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=H7(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Dt(this,arguments,void 0,function*(t,i={}){var s;let r,l;try{const{headers:c,method:d,body:p,signal:g,timeout:y}=i;let _={},{region:x}=i;x||(x=this.region);const E=new URL(`${this.url}/${t}`);x&&x!=="any"&&(_["x-region"]=x,E.searchParams.set("forceFunctionRegion",x));let A;p&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(_["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(_["Content-Type"]="application/json",A=JSON.stringify(p)):A=p;let T=g;y&&(l=new AbortController,r=setTimeout(()=>l.abort(),y),g?(T=l.signal,g.addEventListener("abort",()=>l.abort())):T=l.signal);const M=yield this.fetch(E.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),c),body:A,signal:T}).catch(H=>{throw new k7(H)}),R=M.headers.get("x-relay-error");if(R&&R==="true")throw new KR(M);if(!M.ok)throw new ZR(M);let O=((s=M.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),D;return O==="application/json"?D=yield M.json():O==="application/octet-stream"||O==="application/pdf"?D=yield M.blob():O==="text/event-stream"?D=M:O==="multipart/form-data"?D=yield M.formData():D=yield M.text(),{data:D,error:null,response:M}}catch(c){return{data:null,error:c,response:c instanceof ZR||c instanceof KR?c.context:void 0}}finally{r&&clearTimeout(r)}})}}var oa={};const Np=$L(V7);var h_={},f_={},d_={},p_={},m_={},g_={},JR;function OU(){if(JR)return g_;JR=1,Object.defineProperty(g_,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return g_.default=n,g_}var QR;function DU(){if(QR)return m_;QR=1,Object.defineProperty(m_,"__esModule",{value:!0});const e=Np.__importDefault(OU());class t{constructor(s){var r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,g,y,_;let x=null,E=null,A=null,T=d.status,M=d.statusText;if(d.ok){if(this.method!=="HEAD"){const H=await d.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?E=H:E=JSON.parse(H))}const O=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),D=(y=d.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&D&&D.length>1&&(A=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(x={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,A=null,T=406,M="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const O=await d.text();try{x=JSON.parse(O),Array.isArray(x)&&d.status===404&&(E=[],x=null,T=200,M="OK")}catch{d.status===404&&O===""?(T=204,M="No Content"):x={message:O}}if(x&&this.isMaybeSingle&&(!((_=x==null?void 0:x.details)===null||_===void 0)&&_.includes("0 rows"))&&(x=null,T=200,M="OK"),x&&this.shouldThrowOnError)throw new e.default(x)}return{error:x,data:E,count:A,status:T,statusText:M}});return this.shouldThrowOnError||(c=c.catch(d=>{var p,g,y,_,x,E;let A="";const T=d==null?void 0:d.cause;if(T){const M=(p=T==null?void 0:T.message)!==null&&p!==void 0?p:"",R=(g=T==null?void 0:T.code)!==null&&g!==void 0?g:"";A=`${(y=d==null?void 0:d.name)!==null&&y!==void 0?y:"FetchError"}: ${d==null?void 0:d.message}`,A+=`

Caused by: ${(_=T==null?void 0:T.name)!==null&&_!==void 0?_:"Error"}: ${M}`,R&&(A+=` (${R})`),T!=null&&T.stack&&(A+=`
${T.stack}`)}else A=(x=d==null?void 0:d.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(E=d==null?void 0:d.name)!==null&&E!==void 0?E:"FetchError"}: ${d==null?void 0:d.message}`,details:A,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,r)}returns(){return this}overrideTypes(){return this}}return m_.default=t,m_}var $R;function NU(){if($R)return p_;$R=1,Object.defineProperty(p_,"__esModule",{value:!0});const e=Np.__importDefault(DU());class t extends e.default{select(s){let r=!1;const l=(s??"*").split("").map(c=>/\s/.test(c)&&!r?"":(c==='"'&&(r=!r),c)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:r=!0,nullsFirst:l,foreignTable:c,referencedTable:d=c}={}){const p=d?`${d}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${s}.${r?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:r,referencedTable:l=r}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,r,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"offset":`${c}.offset`,p=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(p,`${r-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:r=!1,settings:l=!1,buffers:c=!1,wal:d=!1,format:p="text"}={}){var g;const y=[s?"analyze":null,r?"verbose":null,l?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return p_.default=t,p_}var e2;function TT(){if(e2)return d_;e2=1,Object.defineProperty(d_,"__esModule",{value:!0});const e=Np.__importDefault(NU()),t=new RegExp("[,()]");class i extends e.default{eq(r,l){return this.url.searchParams.append(r,`eq.${l}`),this}neq(r,l){return this.url.searchParams.append(r,`neq.${l}`),this}gt(r,l){return this.url.searchParams.append(r,`gt.${l}`),this}gte(r,l){return this.url.searchParams.append(r,`gte.${l}`),this}lt(r,l){return this.url.searchParams.append(r,`lt.${l}`),this}lte(r,l){return this.url.searchParams.append(r,`lte.${l}`),this}like(r,l){return this.url.searchParams.append(r,`like.${l}`),this}likeAllOf(r,l){return this.url.searchParams.append(r,`like(all).{${l.join(",")}}`),this}likeAnyOf(r,l){return this.url.searchParams.append(r,`like(any).{${l.join(",")}}`),this}ilike(r,l){return this.url.searchParams.append(r,`ilike.${l}`),this}ilikeAllOf(r,l){return this.url.searchParams.append(r,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(r,l){return this.url.searchParams.append(r,`ilike(any).{${l.join(",")}}`),this}regexMatch(r,l){return this.url.searchParams.append(r,`match.${l}`),this}regexIMatch(r,l){return this.url.searchParams.append(r,`imatch.${l}`),this}is(r,l){return this.url.searchParams.append(r,`is.${l}`),this}isDistinct(r,l){return this.url.searchParams.append(r,`isdistinct.${l}`),this}in(r,l){const c=Array.from(new Set(l)).map(d=>typeof d=="string"&&t.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(r,`in.(${c})`),this}contains(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cs.{${l.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(l)}`),this}containedBy(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cd.{${l.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(l)}`),this}rangeGt(r,l){return this.url.searchParams.append(r,`sr.${l}`),this}rangeGte(r,l){return this.url.searchParams.append(r,`nxl.${l}`),this}rangeLt(r,l){return this.url.searchParams.append(r,`sl.${l}`),this}rangeLte(r,l){return this.url.searchParams.append(r,`nxr.${l}`),this}rangeAdjacent(r,l){return this.url.searchParams.append(r,`adj.${l}`),this}overlaps(r,l){return typeof l=="string"?this.url.searchParams.append(r,`ov.${l}`):this.url.searchParams.append(r,`ov.{${l.join(",")}}`),this}textSearch(r,l,{config:c,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(r,`${p}fts${g}.${l}`),this}match(r){return Object.entries(r).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(r,l,c){return this.url.searchParams.append(r,`not.${l}.${c}`),this}or(r,{foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${r})`),this}filter(r,l,c){return this.url.searchParams.append(r,`${l}.${c}`),this}}return d_.default=i,d_}var t2;function UU(){if(t2)return f_;t2=1,Object.defineProperty(f_,"__esModule",{value:!0});const e=Np.__importDefault(TT());class t{constructor(s,{headers:r={},schema:l,fetch:c}){this.url=s,this.headers=new Headers(r),this.schema=l,this.fetch=c}select(s,r){const{head:l=!1,count:c}=r??{},d=l?"HEAD":"GET";let p=!1;const g=(s??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:r,defaultToNull:l=!0}={}){var c;const d="POST";if(r&&this.headers.append("Prefer",`count=${r}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(s,{onConflict:r,ignoreDuplicates:l=!1,count:c,defaultToNull:d=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((_,x)=>_.concat(Object.keys(x)),[]);if(y.length>0){const _=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(s,{count:r}={}){var l;const c="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var r;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}}return f_.default=t,f_}var n2;function j7(){if(n2)return h_;n2=1,Object.defineProperty(h_,"__esModule",{value:!0});const n=Np,e=n.__importDefault(UU()),t=n.__importDefault(TT());class i{constructor(r,{headers:l={},schema:c,fetch:d}={}){this.url=r,this.headers=new Headers(l),this.schemaName=c,this.fetch=d}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${r}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new i(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,l={},{head:c=!1,get:d=!1,count:p}={}){var g;let y;const _=new URL(`${this.url}/rpc/${r}`);let x;c||d?(y=c?"HEAD":"GET",Object.entries(l).filter(([A,T])=>T!==void 0).map(([A,T])=>[A,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([A,T])=>{_.searchParams.append(A,T)})):(y="POST",x=l);const E=new Headers(this.headers);return p&&E.set("Prefer",`count=${p}`),new t.default({method:y,url:_,headers:E,schema:this.schemaName,body:x,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return h_.default=i,h_}var i2;function q7(){if(i2)return oa;i2=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.PostgrestError=oa.PostgrestBuilder=oa.PostgrestTransformBuilder=oa.PostgrestFilterBuilder=oa.PostgrestQueryBuilder=oa.PostgrestClient=void 0;const n=Np,e=n.__importDefault(j7());oa.PostgrestClient=e.default;const t=n.__importDefault(UU());oa.PostgrestQueryBuilder=t.default;const i=n.__importDefault(TT());oa.PostgrestFilterBuilder=i.default;const s=n.__importDefault(NU());oa.PostgrestTransformBuilder=s.default;const r=n.__importDefault(DU());oa.PostgrestBuilder=r.default;const l=n.__importDefault(OU());return oa.PostgrestError=l.default,oa.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:r.default,PostgrestError:l.default},oa}var LU=q7();const IU=E0(LU),X7=QL({__proto__:null,default:IU},[LU]),{PostgrestClient:W7,PostgrestQueryBuilder:rY,PostgrestFilterBuilder:oY,PostgrestTransformBuilder:lY,PostgrestBuilder:cY,PostgrestError:uY}=IU||X7;class Y7{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const K7="2.86.0",Z7=`realtime-js/${K7}`,PU="1.0.0",J7="2.0.0",s2=PU,O1=1e4,Q7=1e3,$7=100;var Ph;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ph||(Ph={}));var gs;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(gs||(gs={}));var To;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(To||(To={}));var D1;(function(n){n.websocket="websocket"})(D1||(D1={}));var Bh;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Bh||(Bh={}));class eq{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const s=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,i;const s=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,i){var s,r;const l=e.topic,c=(s=e.ref)!==null&&s!==void 0?s:"",d=(r=e.join_ref)!==null&&r!==void 0?r:"",p=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+l.length+p.length+y.length,x=new ArrayBuffer(this.HEADER_LENGTH+_);let E=new DataView(x),A=0;E.setUint8(A++,this.KINDS.userBroadcastPush),E.setUint8(A++,d.length),E.setUint8(A++,c.length),E.setUint8(A++,l.length),E.setUint8(A++,p.length),E.setUint8(A++,y.length),E.setUint8(A++,t),Array.from(d,M=>E.setUint8(A++,M.charCodeAt(0))),Array.from(c,M=>E.setUint8(A++,M.charCodeAt(0))),Array.from(l,M=>E.setUint8(A++,M.charCodeAt(0))),Array.from(p,M=>E.setUint8(A++,M.charCodeAt(0))),Array.from(y,M=>E.setUint8(A++,M.charCodeAt(0)));var T=new Uint8Array(x.byteLength+i.byteLength);return T.set(new Uint8Array(x),0),T.set(new Uint8Array(i),x.byteLength),T.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[s,r,l,c,d]=i;return t({join_ref:s,ref:r,topic:l,event:c,payload:d})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),s=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,i){const s=t.getUint8(1),r=t.getUint8(2),l=t.getUint8(3),c=t.getUint8(4);let d=this.HEADER_LENGTH+4;const p=i.decode(e.slice(d,d+s));d=d+s;const g=i.decode(e.slice(d,d+r));d=d+r;const y=i.decode(e.slice(d,d+l));d=d+l;const _=e.slice(d,e.byteLength),x=c===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,E={type:this.BROADCAST_EVENT,event:g,payload:x};return l>0&&(E.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}class BU{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mi;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(mi||(mi={}));const a2=(n,e,t={})=>{var i;const s=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((r,l)=>(r[l]=tq(l,n,e,s),r),{}):{}},tq=(n,e,t,i)=>{const s=e.find(c=>c.name===n),r=s==null?void 0:s.type,l=t[n];return r&&!i.includes(r)?zU(r,l):N1(l)},zU=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return aq(e,t)}switch(n){case mi.bool:return nq(e);case mi.float4:case mi.float8:case mi.int2:case mi.int4:case mi.int8:case mi.numeric:case mi.oid:return iq(e);case mi.json:case mi.jsonb:return sq(e);case mi.timestamp:return rq(e);case mi.abstime:case mi.date:case mi.daterange:case mi.int4range:case mi.int8range:case mi.money:case mi.reltime:case mi.text:case mi.time:case mi.timestamptz:case mi.timetz:case mi.tsrange:case mi.tstzrange:return N1(e);default:return N1(e)}},N1=n=>n,nq=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},iq=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},sq=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},aq=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let r;const l=n.slice(1,t);try{r=JSON.parse("["+l+"]")}catch{r=l?l.split(","):[]}return r.map(c=>zU(e,c))}return n},rq=n=>typeof n=="string"?n.replace(" ","T"):n,FU=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class CE{constructor(e,t,i={},s=O1){this.channel=e,this.event=t,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var r2;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(r2||(r2={}));class Hg{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:r,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hg.syncState(this.state,s,r,l),this.pendingDiffs.forEach(d=>{this.state=Hg.syncDiff(this.state,d,r,l)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},s=>{const{onJoin:r,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hg.syncDiff(this.state,s,r,l),c())}),this.onJoin((s,r,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:r,newPresences:l})}),this.onLeave((s,r,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:r,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,s){const r=this.cloneDeep(e),l=this.transformState(t),c={},d={};return this.map(r,(p,g)=>{l[p]||(d[p]=g)}),this.map(l,(p,g)=>{const y=r[p];if(y){const _=g.map(T=>T.presence_ref),x=y.map(T=>T.presence_ref),E=g.filter(T=>x.indexOf(T.presence_ref)<0),A=y.filter(T=>_.indexOf(T.presence_ref)<0);E.length>0&&(c[p]=E),A.length>0&&(d[p]=A)}else c[p]=g}),this.syncDiff(r,{joins:c,leaves:d},i,s)}static syncDiff(e,t,i,s){const{joins:r,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(r,(c,d)=>{var p;const g=(p=e[c])!==null&&p!==void 0?p:[];if(e[c]=this.cloneDeep(d),g.length>0){const y=e[c].map(x=>x.presence_ref),_=g.filter(x=>y.indexOf(x.presence_ref)<0);e[c].unshift(..._)}i(c,g,d)}),this.map(l,(c,d)=>{let p=e[c];if(!p)return;const g=d.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),e[c]=p,s(c,p,d),p.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const s=e[i];return"metas"in s?t[i]=s.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[i]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var o2;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(o2||(o2={}));var kg;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(kg||(kg={}));var sc;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(sc||(sc={}));class wT{constructor(e,t={config:{}},i){var s,r;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=gs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new CE(this,To.join,this.params,this.timeout),this.rejoinTimer=new BU(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gs.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=gs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=gs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(To.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Hg(this),this.broadcastEndpointURL=FU(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==gs.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,p=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[kg.PRESENCE]&&this.bindings[kg.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,y={},_={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:g}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(sc.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(sc.CLOSED)),this.updateJoinPayload(Object.assign({config:_},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var E;if(this.socket.setAuth(),x===void 0){e==null||e(sc.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,T=(E=A==null?void 0:A.length)!==null&&E!==void 0?E:0,M=[];for(let R=0;R<T;R++){const O=A[R],{filter:{event:D,schema:H,table:I,filter:V}}=O,F=x&&x[R];if(F&&F.event===D&&F.schema===H&&F.table===I&&F.filter===V)M.push(Object.assign(Object.assign({},O),{id:F.id}));else{this.unsubscribe(),this.state=gs.errored,e==null||e(sc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(sc.SUBSCRIBED);return}}).receive("error",x=>{this.state=gs.errored,e==null||e(sc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(sc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===gs.joined&&e===kg.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var s;const r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const p=await c.json();d=p.error||p.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var l,c,d;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&r("ok"),p.receive("ok",()=>r("ok")),p.receive("error",()=>r("error")),p.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gs.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(To.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new CE(this,To.leave,{},e),i.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gs.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const s=new AbortController,r=setTimeout(()=>s.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),l}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new CE(this,e,t,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$7){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var s,r;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:p,join:g}=To;if(i&&[c,d,p,g].indexOf(l)>=0&&i!==this._joinRef())return;let _=this._onMessage(l,t,i);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var E,A,T;return((E=x.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(A=x.filter)===null||A===void 0?void 0:A.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(x=>x.callback(_,i)):(r=this.bindings[l])===null||r===void 0||r.filter(x=>{var E,A,T,M,R,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const D=x.id,H=(E=x.filter)===null||E===void 0?void 0:E.event;return D&&((A=t.ids)===null||A===void 0?void 0:A.includes(D))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const D=(R=(M=x==null?void 0:x.filter)===null||M===void 0?void 0:M.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return D==="*"||D===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof _=="object"&&"ids"in _){const E=_.data,{schema:A,table:T,commit_timestamp:M,type:R,errors:O}=E;_=Object.assign(Object.assign({},{schema:A,table:T,commit_timestamp:M,eventType:R,new:{},old:{},errors:O}),this._getPayloadRecords(E))}x.callback(_,i)})}_isClosed(){return this.state===gs.closed}_isJoined(){return this.state===gs.joined}_isJoining(){return this.state===gs.joining}_isLeaving(){return this.state===gs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:i};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var r;return!(((r=s.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===i&&wT.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(To.close,{},e)}_onError(e){this._on(To.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=a2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=a2(e.columns,e.old_record)),t}}const RE=()=>{},v_={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oq=[1e3,2e3,5e3,1e4],lq=1e4,cq=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uq{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=O1,this.transport=null,this.heartbeatIntervalMs=v_.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=RE,this.ref=0,this.reconnectTimer=null,this.vsn=s2,this.logger=RE,this.conn=null,this.sendBuffer=[],this.serializer=new eq,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${D1.websocket}`,this.httpEndpoint=FU(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y7.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ph.connecting:return Bh.Connecting;case Ph.open:return Bh.Open;case Ph.closing:return Bh.Closing;default:return Bh.Closed}}isConnected(){return this.connectionState()===Bh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(r=>r.topic===i);if(s)return s;{const r=new wT(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:i,payload:s,ref:r}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${i} (${r})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Q7,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},v_.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:s,payload:r,ref:l}=t,c=l?`(${l})`:"",d=r.status||"";this.log("receive",`${d} ${i} ${s} ${c}`.trim(),r),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(s,r,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ph.open||this.conn.readyState===Ph.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(To.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${i}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([cq],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const s={access_token:t,version:Z7};t&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(To.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new BU(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},v_.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,s,r,l,c,d,p,g,y,_,x;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:O1,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:v_.HEARTBEAT_INTERVAL,this.worker=(r=e==null?void 0:e.worker)!==null&&r!==void 0?r:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:RE,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:s2,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(E=>oq[E-1]||lq),this.vsn){case PU:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:((E,A)=>A(JSON.stringify(E))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:((E,A)=>A(JSON.parse(E)));break;case J7:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ni(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class hq extends yb{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class U1 extends yb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const AT=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),fq=()=>Response,L1=n=>{if(Array.isArray(n))return n.map(t=>L1(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const s=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[s]=L1(i)}),e},dq=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},pq=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),OE=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},mq=(n,e,t)=>Dt(void 0,void 0,void 0,function*(){const i=yield fq();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const r=n.status||500,l=(s==null?void 0:s.statusCode)||r+"";e(new hq(OE(s),r,l))}).catch(s=>{e(new U1(OE(s),s))}):e(new U1(OE(n),n))}),gq=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!i?s:(dq(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function q0(n,e,t,i,s,r){return Dt(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,gq(e,i,s,r)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>mq(d,c,i))})})}function v0(n,e,t,i){return Dt(this,void 0,void 0,function*(){return q0(n,"GET",e,t,i)})}function Mo(n,e,t,i,s){return Dt(this,void 0,void 0,function*(){return q0(n,"POST",e,i,s,t)})}function I1(n,e,t,i,s){return Dt(this,void 0,void 0,function*(){return q0(n,"PUT",e,i,s,t)})}function vq(n,e,t,i){return Dt(this,void 0,void 0,function*(){return q0(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function CT(n,e,t,i,s){return Dt(this,void 0,void 0,function*(){return q0(n,"DELETE",e,i,s,t)})}class yq{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Dt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ni(e))return{data:null,error:e};throw e}})}}var VU;class _q{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[VU]="BlobDownloadBuilder",this.promise=null}asStream(){return new yq(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Dt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ni(e))return{data:null,error:e};throw e}})}}VU=Symbol.toStringTag;const xq={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},l2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bq{constructor(e,t={},i,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=AT(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,s){return Dt(this,void 0,void 0,function*(){try{let r;const l=Object.assign(Object.assign({},l2),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&i instanceof Blob?(r=new FormData,r.append("cacheControl",l.cacheControl),d&&r.append("metadata",this.encodeMetadata(d)),r.append("",i)):typeof FormData<"u"&&i instanceof FormData?(r=i,r.has("cacheControl")||r.append("cacheControl",l.cacheControl),d&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(d))):(r=i,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!l.duplex&&(l.duplex="half")),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const p=this._removeEmptyFolders(t),g=this._getFinalPath(p),y=yield(e=="PUT"?I1:Mo)(this.fetch,`${this.url}/object/${g}`,r,Object.assign({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}upload(e,t,i){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,s){return Dt(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),l=this._getFinalPath(r),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let d;const p=Object.assign({upsert:l2.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",p.cacheControl)):(d=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield I1(this.fetch,c.toString(),d,{headers:g});return{data:{path:r,fullPath:y.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ni(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return Dt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const r=yield Mo(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),l=new URL(this.url+r.url),c=l.searchParams.get("token");if(!c)throw new yb("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ni(i))return{data:null,error:i};throw i}})}update(e,t,i){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Dt(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}copy(e,t,i){return Dt(this,void 0,void 0,function*(){try{return{data:{path:(yield Mo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,i){return Dt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield Mo(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${l}`)},{data:r,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,i){return Dt(this,void 0,void 0,function*(){try{const s=yield Mo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${r}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=r?`?${r}`:"",c=this._getFinalPath(e),d=()=>v0(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new _q(d,this.shouldThrowOnError)}info(e){return Dt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield v0(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:L1(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ni(i))return{data:null,error:i};throw i}})}exists(e){return Dt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield vq(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ni(i)&&i instanceof U1){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),s=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&s.push(r);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&s.push(d);let p=s.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${p}`)}}}remove(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield CT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}list(e,t,i){return Dt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xq),t),{prefix:e||""});return{data:yield Mo(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}listV2(e,t){return Dt(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Mo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ni(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const HU="2.86.0",kU={"X-Client-Info":`storage-js/${HU}`};class Sq{constructor(e,t={},i,s){this.shouldThrowOnError=!1;const r=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kU),t),this.fetch=AT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Dt(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield v0(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}getBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield v0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}createBucket(e){return Dt(this,arguments,void 0,function*(t,i={public:!1}){try{return{data:yield Mo(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Dt(this,void 0,void 0,function*(){try{return{data:yield I1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ni(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield CT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var y0=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Eq(n,e,t){const i=new URL(e,n);if(t)for(const[s,r]of Object.entries(t))r!==void 0&&i.searchParams.set(s,r);return i.toString()}async function Mq(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Tq(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:s,body:r,headers:l}){const c=Eq(n.baseUrl,i,s),d=await Mq(n.auth),p=await e(c,{method:t,headers:{...r?{"Content-Type":"application/json"}:{},...d,...l},body:r?JSON.stringify(r):void 0}),g=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),_=y&&g?JSON.parse(g):g;if(!p.ok){const x=y?_:void 0,E=x==null?void 0:x.error;throw new y0((E==null?void 0:E.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:x})}return{status:p.status,headers:p.headers,data:_}}}}function y_(n){return n.join("")}var wq=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:y_(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${y_(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${y_(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${y_(n.namespace)}`}),!0}catch(e){if(e instanceof y0&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof y0&&t.status===409)return;throw t}}};function zd(n){return n.join("")}var Aq=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof y0&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof y0&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},Cq=class{constructor(n){var i;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Tq({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(i=n.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new wq(this.client,e),this.tableOps=new Aq(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class Rq{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kU),t),this.fetch=AT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}listBuckets(e){return Dt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const i=t.toString(),s=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield v0(this.fetch,s,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield CT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}from(e){if(!pq(e))throw new yb("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Cq({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Dt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const RT={"X-Client-Info":`storage-js/${HU}`,"Content-Type":"application/json"};class GU extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function gr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class DE extends GU{constructor(e,t,i){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Oq extends GU{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var c2;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(c2||(c2={}));const OT=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Dq=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},u2=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Nq=(n,e,t)=>Dt(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n.status||500,r=n;if(typeof r.json=="function")r.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new DE(u2(l),s,c))}).catch(()=>{const l=s+"",c=r.statusText||`HTTP ${s} error`;e(new DE(c,s,l))});else{const l=s+"",c=r.statusText||`HTTP ${s} error`;e(new DE(c,s,l))}}else e(new Oq(u2(n),n))}),Uq=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return i?(Dq(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,Object.assign(Object.assign({},s),t)):s};function Lq(n,e,t,i,s,r){return Dt(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,Uq(e,i,s,r)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const p=d.headers.get("content-type");return!p||!p.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>Nq(d,c,i))})})}function vr(n,e,t,i,s){return Dt(this,void 0,void 0,function*(){return Lq(n,"POST",e,i,s,t)})}class Iq{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RT),t),this.fetch=OT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Dt(this,void 0,void 0,function*(){try{return{data:(yield vr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Dt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}listIndexes(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Dt(this,void 0,void 0,function*(){try{return{data:(yield vr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}}class Pq{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RT),t),this.fetch=OT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Dt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield vr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}getVectors(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}listVectors(e){return Dt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield vr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}queryVectors(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Dt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield vr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}}class Bq{constructor(e,t={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RT),t),this.fetch=OT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:(yield vr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}getBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}listBuckets(){return Dt(this,arguments,void 0,function*(e={}){try{return{data:yield vr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:(yield vr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}}class zq extends Bq{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Fq(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Dt(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Dt(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Dt(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Dt(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class Fq extends Iq{constructor(e,t,i,s){super(e,t,s),this.vectorBucketName=i}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Dt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Dt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Dt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Dt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Vq(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Vq extends Pq{constructor(e,t,i,s,r){super(e,t,r),this.vectorBucketName=i,this.indexName=s}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Dt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Dt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Dt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Dt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Dt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Hq extends Sq{constructor(e,t={},i,s){super(e,t,i,s)}from(e){return new bq(this.url,this.headers,e,this.fetch)}get vectors(){return new zq(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rq(this.url+"/iceberg",this.headers,this.fetch)}}const kq="2.86.0";let Eg="";typeof Deno<"u"?Eg="deno":typeof document<"u"?Eg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Eg="react-native":Eg="node";const Gq={"X-Client-Info":`supabase-js-${Eg}/${kq}`},jq={headers:Gq},qq={schema:"public"},Xq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wq={},Yq=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Kq=()=>Headers,Zq=(n,e,t)=>{const i=Yq(t),s=Kq();return async(r,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:n;let p=new s(l==null?void 0:l.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),i(r,Object.assign(Object.assign({},l),{headers:p}))}};function Jq(n){return n.endsWith("/")?n:n+"/"}function Qq(n,e){var t,i;const{db:s,auth:r,realtime:l,global:c}=n,{db:d,auth:p,realtime:g,global:y}=e,_={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},p),r),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},y),c),{headers:Object.assign(Object.assign({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(i=c==null?void 0:c.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?_.accessToken=n.accessToken:delete _.accessToken,_}function $q(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jq(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const jU="2.86.0",Wd=30*1e3,P1=3,NE=P1*Wd,eX="http://localhost:9999",tX="supabase.auth.token",nX={"X-Client-Info":`gotrue-js/${jU}`},B1="X-Supabase-Api-Version",qU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sX=600*1e3;class _0 extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function kt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class aX extends _0{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function rX(n){return kt(n)&&n.name==="AuthApiError"}class zh extends _0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Eu extends _0{constructor(e,t,i,s){super(e,i,s),this.name=t,this.status=i}}class mr extends Eu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oX(n){return kt(n)&&n.name==="AuthSessionMissingError"}class Fd extends Eu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class __ extends Eu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class x_ extends Eu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lX(n){return kt(n)&&n.name==="AuthImplicitGrantRedirectError"}class h2 extends Eu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class z1 extends Eu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function UE(n){return kt(n)&&n.name==="AuthRetryableFetchError"}class f2 extends Eu{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class F1 extends Eu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ox="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),d2=` 	
\r=`.split(""),cX=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<d2.length;e+=1)n[d2[e].charCodeAt(0)]=-2;for(let e=0;e<Ox.length;e+=1)n[Ox[e].charCodeAt(0)]=e;return n})();function p2(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Ox[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Ox[i]),e.queuedBits-=6}}function XU(n,e,t){const i=cX[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function m2(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},r=l=>{fX(l,i,t)};for(let l=0;l<n.length;l+=1)XU(n.charCodeAt(l),s,r);return e.join("")}function uX(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function hX(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}uX(i,e)}}function fX(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function lp(n){const e=[],t={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)XU(n.charCodeAt(s),t,i);return new Uint8Array(e)}function dX(n){const e=[];return hX(n,t=>e.push(t)),new Uint8Array(e)}function Wh(n){const e=[],t={queue:0,queuedBits:0},i=s=>{e.push(s)};return n.forEach(s=>p2(s,t,i)),p2(null,t,i),e.join("")}function pX(n){return Math.round(Date.now()/1e3)+n}function mX(){return Symbol("auth-callback")}const Hs=()=>typeof window<"u"&&typeof document<"u",Rh={tested:!1,writable:!1},WU=()=>{if(!Hs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rh.tested)return Rh.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Rh.tested=!0,Rh.writable=!0}catch{Rh.tested=!0,Rh.writable=!1}return Rh.writable};function gX(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,r)=>{e[r]=s})}catch{}return t.searchParams.forEach((i,s)=>{e[s]=i}),e}const YU=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),vX=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Yd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Oh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},au=async(n,e)=>{await n.removeItem(e)};class _b{constructor(){this.promise=new _b.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}_b.promiseConstructor=Promise;function LE(n){const e=n.split(".");if(e.length!==3)throw new F1("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!iX.test(e[i]))throw new F1("JWT not in base64url format");return{header:JSON.parse(m2(e[0])),payload:JSON.parse(m2(e[1])),signature:lp(e[2]),raw:{header:e[0],payload:e[1]}}}async function yX(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function _X(n,e){return new Promise((i,s)=>{(async()=>{for(let r=0;r<1/0;r++)try{const l=await n(r);if(!e(r,null,l)){i(l);return}}catch(l){if(!e(r,l)){s(l);return}}})()})}function xX(n){return("0"+n.toString(16)).substr(-2)}function bX(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let s="";for(let r=0;r<56;r++)s+=t.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,xX).join("")}async function SX(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(i);return Array.from(s).map(r=>String.fromCharCode(r)).join("")}async function EX(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await SX(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vd(n,e,t=!1){const i=bX();let s=i;t&&(s+="/PASSWORD_RECOVERY"),await Yd(n,`${e}-code-verifier`,s);const r=await EX(i);return[r,i===r?"plain":"s256"]}const MX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TX(n){const e=n.headers.get(B1);if(!e||!e.match(MX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function wX(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function AX(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hd(n){if(!CX.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function IE(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RX(n,e){return new Proxy(n,{get:(t,i,s)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,s)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,s)}})}function g2(n){return JSON.parse(JSON.stringify(n))}const Lh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),OX=[502,503,504];async function v2(n){var e;if(!vX(n))throw new z1(Lh(n),0);if(OX.includes(n.status))throw new z1(Lh(n),n.status);let t;try{t=await n.json()}catch(r){throw new zh(Lh(r),r)}let i;const s=TX(n);if(s&&s.getTime()>=qU["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new f2(Lh(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new mr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0))throw new f2(Lh(t),n.status,t.weak_password.reasons);throw new aX(Lh(t),n.status||500,i)}const DX=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),t))};async function en(n,e,t,i){var s;const r=Object.assign({},i==null?void 0:i.headers);r[B1]||(r[B1]=qU["2024-01-01"].name),i!=null&&i.jwt&&(r.Authorization=`Bearer ${i.jwt}`);const l=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await NX(n,e,t+c,{headers:r,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function NX(n,e,t,i,s,r){const l=DX(e,i,s,r);let c;try{c=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new z1(Lh(d),0)}if(c.ok||await v2(c),i!=null&&i.noResolveJson)return c;try{return await c.json()}catch(d){await v2(d)}}function bo(n){var e;let t=null;IX(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=pX(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function y2(n){const e=bo(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function uu(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function UX(n){return{data:n,error:null}}function LX(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:s,verification_type:r}=n,l=Dp(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:i,redirect_to:s,verification_type:r},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function _2(n){return n}function IX(n){return n.access_token&&n.refresh_token&&n.expires_in}const PE=["global","local","others"];class PX{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=YU(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=PE[0]){if(PE.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${PE.join(", ")}`);try{return await en(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(kt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await en(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:uu})}catch(i){if(kt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=Dp(e,["options"]),s=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await en(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:LX,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(kt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await en(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:uu})}catch(t){if(kt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,s,r,l,c,d;try{const p={nextPage:null,lastPage:0,total:0},g=await en(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(r=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:""},xform:_2});if(g.error)throw g.error;const y=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);p[`${T}Page`]=A}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(kt(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Hd(e);try{return await en(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:uu})}catch(t){if(kt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Hd(e);try{return await en(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:uu})}catch(i){if(kt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Hd(e);try{return await en(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:uu})}catch(i){if(kt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Hd(e.userId);try{const{data:t,error:i}=await en(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:i}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Hd(e.userId),Hd(e.id);try{return{data:await en(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,s,r,l,c,d;try{const p={nextPage:null,lastPage:0,total:0},g=await en(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(r=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:""},xform:_2});if(g.error)throw g.error;const y=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);p[`${T}Page`]=A}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(kt(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await en(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await en(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await en(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(kt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await en(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await en(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}}function x2(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const kd={debug:!!(globalThis&&WU()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KU extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class BX extends KU{}async function zX(n,e,t){kd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),kd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){kd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{kd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw kd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new BX(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(kd.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function FX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ZU(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function VX(n){return parseInt(n,16)}function HX(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function kX(n){var e;const{chainId:t,domain:i,expirationTime:s,issuedAt:r=new Date,nonce:l,notBefore:c,requestId:d,resources:p,scheme:g,uri:y,version:_}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const x=ZU(n.address),E=g?`${g}://${i}`:i,A=n.statement?`${n.statement}
`:"",T=`${E} wants you to sign in with your Ethereum account:
${x}

${A}`;let M=`URI: ${y}
Version: ${_}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${r.toISOString()}`;if(s&&(M+=`
Expiration Time: ${s.toISOString()}`),c&&(M+=`
Not Before: ${c.toISOString()}`),d&&(M+=`
Request ID: ${d}`),p){let R=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);R+=`
- ${O}`}M+=R}return`${T}
${M}`}class ss extends Error{constructor({message:e,code:t,cause:i,name:s}){var r;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(r=s??(i instanceof Error?i.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=t}}class Dx extends ss{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function GX({error:n,options:e}){var t,i,s;const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ss({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=r.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ss({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ss({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=r.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ss({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ss({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ss({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return r.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new ss({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ss({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(JU(l)){if(r.rp.id!==l)return new ss({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ss({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new ss({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ss({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ss({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function jX({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ss({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ss({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(JU(i)){if(t.rpId!==i)return new ss({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ss({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ss({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ss({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class qX{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const XX=new qX;function WX(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,s=Dp(n,["challenge","user","excludeCredentials"]),r=lp(e).buffer,l=Object.assign(Object.assign({},t),{id:lp(t.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:r,user:l});if(i&&i.length>0){c.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const p=i[d];c.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:lp(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function YX(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=Dp(n,["challenge","allowCredentials"]),s=lp(e).buffer,r=Object.assign(Object.assign({},i),{challenge:s});if(t&&t.length>0){r.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const c=t[l];r.allowCredentials[l]=Object.assign(Object.assign({},c),{id:lp(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return r}function KX(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Wh(new Uint8Array(n.response.attestationObject)),clientDataJSON:Wh(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ZX(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Wh(new Uint8Array(s.authenticatorData)),clientDataJSON:Wh(new Uint8Array(s.clientDataJSON)),signature:Wh(new Uint8Array(s.signature)),userHandle:s.userHandle?Wh(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function JU(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function b2(){var n,e;return!!(Hs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function JX(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dx("Browser returned unexpected credential type",e)}:{data:null,error:new Dx("Empty credential response",e)}}catch(e){return{data:null,error:GX({error:e,options:n})}}}async function QX(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dx("Browser returned unexpected credential type",e)}:{data:null,error:new Dx("Empty credential response",e)}}catch(e){return{data:null,error:jX({error:e,options:n})}}}const $X={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},eW={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nx(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of n)if(s)for(const r in s){const l=s[r];if(l!==void 0)if(Array.isArray(l))i[r]=l;else if(t(l))i[r]=l;else if(e(l)){const c=i[r];e(c)?i[r]=Nx(c,l):i[r]=Nx(l)}else i[r]=l}return i}function tW(n,e){return Nx($X,n,e||{})}function nW(n,e){return Nx(eW,n,e||{})}class iW{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:s},r){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:c};const d=s??XX.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=tW(l.webauthn.credential_options.publicKey,r==null?void 0:r.create),{data:g,error:y}=await JX({publicKey:p,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=nW(l.webauthn.credential_options.publicKey,r==null?void 0:r.request),{data:g,error:y}=await QX(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(l){return kt(l)?{data:null,error:l}:{data:null,error:new zh("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},r){if(!t)return{data:null,error:new _0("rpId is required for WebAuthn authentication")};try{if(!b2())return{data:null,error:new zh("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:s},{request:r});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:i,credential_response:d.credential_response}})}catch(l){return kt(l)?{data:null,error:l}:{data:null,error:new zh("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},r){if(!t)return{data:null,error:new _0("rpId is required for WebAuthn registration")};try{if(!b2())return{data:null,error:new zh("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:c};const{data:d,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:s},{create:r});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(l){return kt(l)?{data:null,error:l}:{data:null,error:new zh("Unexpected error in register",l)}}}}FX();const sW={url:eX,storageKey:tX,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function S2(n,e,t){return await t()}const Gd={};class x0{get jwks(){var e,t;return(t=(e=Gd[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Gd[this.storageKey]=Object.assign(Object.assign({},Gd[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Gd[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gd[this.storageKey]=Object.assign(Object.assign({},Gd[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},sW),e);if(this.storageKey=r.storageKey,this.instanceID=(t=x0.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,x0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&Hs()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new PX({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=YU(r.fetch),this.lock=r.lock||S2,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:Hs()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=zX:this.lock=S2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iW(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:WU()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=x2(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=x2(this.memoryStorage)),Hs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jU}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(Hs()&&(t=gX(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),Hs()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:r}=await this._getSessionFromURL(t,i);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),lX(r)){const d=(e=r.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return kt(t)?this._returnResult({error:t}):this._returnResult({error:new zh("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,s;try{const r=await en(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:bo}),{data:l,error:c}=r;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const d=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(e){var t,i,s;try{let r;if("email"in e){const{email:g,password:y,options:_}=e;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await Vd(this.storage,this.storageKey)),r=await en(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:y,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:x,code_challenge_method:E},xform:bo})}else if("phone"in e){const{phone:g,password:y,options:_}=e;r=await en(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:bo})}else throw new __("You must provide either an email or phone number and a password");const{data:l,error:c}=r;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const d=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:l,options:c}=e;t=await en(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:y2})}else if("phone"in e){const{phone:r,password:l,options:c}=e;t=await en(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:y2})}else throw new __("You must provide either an email or phone number and a password");const{data:i,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){const r=new Fd;return this._returnResult({data:{user:null,session:null},error:r})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,s,r,l,c,d,p,g,y,_;let x,E;if("message"in e)x=e.message,E=e.signature;else{const{chain:A,wallet:T,statement:M,options:R}=e;let O;if(Hs())if(typeof T=="object")O=T;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")O=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=T}const D=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),H=await O.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=ZU(H[0]);let V=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!V){const L=await O.request({method:"eth_chainId"});V=VX(L)}const F={domain:D.host,address:I,statement:M,uri:D.href,version:"1",chainId:V,nonce:(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.resources};x=kX(F),E=await O.request({method:"personal_sign",params:[HX(x),I]})}try{const{data:A,error:T}=await en(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:E},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:bo});if(T)throw T;if(!A||!A.session||!A.user){const M=new Fd;return this._returnResult({data:{user:null,session:null},error:M})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:T})}catch(A){if(kt(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var t,i,s,r,l,c,d,p,g,y,_,x;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:T,wallet:M,statement:R,options:O}=e;let D;if(Hs())if(typeof M=="object")D=M;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))D=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=M}const H=new URL((t=O==null?void 0:O.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const I=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),R?{statement:R}:null));let V;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")V=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)V=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)E=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),A=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${H.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(s=(i=O==null?void 0:O.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((r=O==null?void 0:O.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((d=O==null?void 0:O.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(g=O==null?void 0:O.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const I=await D.signMessage(new TextEncoder().encode(E),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=I}}try{const{data:T,error:M}=await en(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Wh(A)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:bo});if(M)throw M;if(!T||!T.session||!T.user){const R=new Fd;return this._returnResult({data:{user:null,session:null},error:R})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:M})}catch(T){if(kt(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(e){const t=await Oh(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(t??"").split("/");try{const{data:r,error:l}=await en(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:bo});if(await au(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!r||!r.session||!r.user){const c=new Fd;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:s??null}),error:l})}catch(r){if(kt(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(e){try{const{options:t,provider:i,token:s,access_token:r,nonce:l}=e,c=await en(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:r,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:bo}),{data:d,error:p}=c;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const g=new Fd;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:p})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,s,r,l;try{if("email"in e){const{email:c,options:d}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Vd(this.storage,this.storageKey));const{error:y}=await en(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:c,options:d}=e,{data:p,error:g}=await en(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g})}throw new __("You must provide either an email or phone number.")}catch(c){if(kt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var t,i;try{let s,r;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:c}=await en(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:bo});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,p=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(s){if(kt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,i,s,r,l;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Vd(this.storage,this.storageKey));const p=await en(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:UX});return!((r=p.data)===null||r===void 0)&&r.url&&Hs()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(c){if(kt(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new mr;const{error:s}=await en(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(kt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:r}=e,{error:l}=await en(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:i,type:s,options:r}=e,{data:l,error:c}=await en(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new __("You must provide either an email or phone number and a type")}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Oh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<NE:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await Oh(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=IE()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=RX(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await en(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:uu}):await this._useSession(async t=>{var i,s,r;const{data:l,error:c}=t;if(c)throw c;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mr}:await en(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0,xform:uu})})}catch(t){if(kt(t))return oX(t)&&(await this._removeSession(),await au(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:s,error:r}=i;if(r)throw r;if(!s.session)throw new mr;const l=s.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Vd(this.storage,this.storageKey));const{data:p,error:g}=await en(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:uu});if(g)throw g;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(i){if(kt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new mr;const t=Date.now()/1e3;let i=t,s=!0,r=null;const{payload:l}=LE(e.access_token);if(l.exp&&(i=l.exp,s=i<=t),s){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};r=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;r={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(t){if(kt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new mr;const{data:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Hs())throw new x_("No browser detected.");if(e.error||e.error_description||e.error_code)throw new x_(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new h2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new x_("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new h2("No code detected.");const{data:R,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:r,refresh_token:l,expires_in:c,expires_at:d,token_type:p}=e;if(!r||!c||!l||!p)throw new x_("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(c);let _=g+y;d&&(_=parseInt(d));const x=_-g;x*1e3<=Wd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${y}s`);const E=_-y;g-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,_,g):g-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,_,g);const{data:A,error:T}=await this._getUser(r);if(T)throw T;const M={provider_token:i,provider_refresh_token:s,access_token:r,expires_in:y,expires_at:_,refresh_token:l,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:e.type},error:null})}catch(i){if(kt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Oh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:s,error:r}=t;if(r)return this._returnResult({error:r});const l=(i=s.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(rX(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await au(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=mX(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,s;try{const{data:{session:r},error:l}=t;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await Vd(this.storage,this.storageKey,!0));try{return await en(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(kt(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:s}=await this._useSession(async r=>{var l,c,d,p,g;const{data:y,error:_}=r;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await en(this.fetch,"GET",x,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Hs()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(kt(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:s,data:{session:r}}=t;if(s)throw s;const{options:l,provider:c,token:d,access_token:p,nonce:g}=e,y=await en(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=r==null?void 0:r.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:d,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bo}),{data:_,error:x}=y;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Fd}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(s){if(kt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,s;const{data:r,error:l}=t;if(l)throw l;return await en(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await _X(async s=>(s>0&&await yX(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await en(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bo})),(s,r)=>{const l=200*Math.pow(2,s);return r&&UE(r)&&Date.now()+l-i<Wd})}catch(i){if(this._debug(t,"error",i),kt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Hs()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await Oh(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Oh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Yd(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:IE()}else if(s&&!s.user&&!s.user){const l=await Oh(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await au(this.storage,this.storageKey+"-user"),await Yd(this.storage,this.storageKey,s)):s.user=IE()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const r=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<NE;if(this._debug(i,`session has${r?"":" not"} expired with margin of ${NE}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),UE(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new mr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new _b;const{data:r,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!r.session)throw new mr;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const c={data:r.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(r){if(this._debug(s,"error",r),kt(r)){const l={data:null,error:r};return UE(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){r.push(d)}});if(await Promise.all(l),r.length>0){for(let c=0;c<r.length;c+=1)console.error(r[c]);throw r[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await Yd(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const r=g2(s);await Yd(this.storage,this.storageKey,r)}else{const s=g2(t);await Yd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await au(this.storage,this.storageKey),await au(this.storage,this.storageKey+"-code-verifier"),await au(this.storage,this.storageKey+"-user"),this.userStorage&&await au(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Hs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/Wd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Wd}ms, refresh threshold is ${P1} ticks`),s<=P1&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof KU)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const s=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[r,l]=await Vd(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(i!=null&&i.queryParams){const r=new URLSearchParams(i.queryParams);s.push(r.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:s,error:r}=t;return r?this._returnResult({data:null,error:r}):await en(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,s;const{data:r,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await en(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:s,error:r}=t;if(r)return this._returnResult({data:null,error:r});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?KX(e.webauthn.credential_response):ZX(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await en(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:s,error:r}=t;if(r)return this._returnResult({data:null,error:r});const l=await en(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:WX(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:YX(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const r of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(r),r.status==="verified"&&s[r.factor_type].push(r);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:i},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=LE(i.access_token);let l=null;r.aal&&(l=r.aal);let c=l;((t=(e=i.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(c="aal2");const p=r.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:s}=t;return s?this._returnResult({data:null,error:s}):i?await en(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new mr})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:s},error:r}=i;if(r)return this._returnResult({data:null,error:r});if(!s)return this._returnResult({data:null,error:new mr});const l=await en(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Hs()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(kt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:s},error:r}=i;if(r)return this._returnResult({data:null,error:r});if(!s)return this._returnResult({data:null,error:new mr});const l=await en(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Hs()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(kt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await en(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new mr})})}catch(e){if(kt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:s}=t;return s?this._returnResult({data:null,error:s}):i?(await en(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new mr})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(c=>c.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+sX>s)return i;const{data:r,error:l}=await en(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=s,i=r.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:x,error:E}=await this.getSession();if(E||!x.session)return this._returnResult({data:null,error:E});i=x.session.access_token}const{header:s,payload:r,signature:l,raw:{header:c,payload:d}}=LE(i);t!=null&&t.allowExpired||wX(r.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:r,header:s,signature:l},error:null}}const g=AX(s.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,dX(`${c}.${d}`)))throw new F1("Invalid JWT signature");return{data:{claims:r,header:s,signature:l},error:null}}catch(i){if(kt(i))return this._returnResult({data:null,error:i});throw i}}}x0.nextInstanceID={};const aW=x0;class rW extends aW{constructor(e){super(e)}}class oW{constructor(e,t,i){var s,r,l;this.supabaseUrl=e,this.supabaseKey=t;const c=$q(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:qq,realtime:Wq,auth:Object.assign(Object.assign({},Xq),{storageKey:d}),global:jq},g=Qq(i??{},p);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=g.global.headers)!==null&&r!==void 0?r:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=Zq(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new W7(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Hq(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new G7(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:s,userStorage:r,storageKey:l,flowType:c,lock:d,debug:p,throwOnError:g},y,_){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rW({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),y),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:s,userStorage:r,flowType:c,lock:d,debug:p,throwOnError:g,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new uq(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lW=(n,e,t)=>new oW(n,e,t);function cW(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}cW()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var E2;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(E2||(E2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M2;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(M2||(M2={}));var T2;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(T2||(T2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=["user","model","function","system"];var A2;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(A2||(A2={}));var C2;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(C2||(C2={}));var R2;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(R2||(R2={}));var O2;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(O2||(O2={}));var Gg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Gg||(Gg={}));var D2;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(D2||(D2={}));var N2;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(N2||(N2={}));var U2;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(U2||(U2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class jd extends la{constructor(e,t){super(e),this.response=t}}class QU extends la{constructor(e,t,i,s){super(e),this.status=t,this.statusText=i,this.errorDetails=s}}class fu extends la{}class $U extends la{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW="https://generativelanguage.googleapis.com",hW="v1beta",fW="0.24.1",dW="genai-js";var of;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(of||(of={}));class pW{constructor(e,t,i,s,r){this.model=e,this.task=t,this.apiKey=i,this.stream=s,this.requestOptions=r}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||hW;let r=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||uW}/${i}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function mW(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${dW}/${fW}`),e.join(" ")}async function gW(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",mW(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new fu(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,r]of i.entries()){if(s==="x-goog-api-key")throw new fu(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new fu(`Header name ${s} can only be set using the apiClient field`);t.append(s,r)}}return t}async function vW(n,e,t,i,s,r){const l=new pW(n,e,t,i,r);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},bW(r)),{method:"POST",headers:await gW(l),body:s})}}async function X0(n,e,t,i,s,r={},l=fetch){const{url:c,fetchOptions:d}=await vW(n,e,t,i,s,r);return yW(c,d,l)}async function yW(n,e,t=fetch){let i;try{i=await t(n,e)}catch(s){_W(s,n)}return i.ok||await xW(i,n),i}function _W(n,e){let t=n;throw t.name==="AbortError"?(t=new $U(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof QU||n instanceof fu||(t=new la(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function xW(n,e){let t="",i;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new QU(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function bW(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),O_(n.candidates[0]))throw new jd(`${lu(n)}`,n);return SW(n)}else if(n.promptFeedback)throw new jd(`Text not available. ${lu(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O_(n.candidates[0]))throw new jd(`${lu(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),L2(n)[0]}else if(n.promptFeedback)throw new jd(`Function call not available. ${lu(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O_(n.candidates[0]))throw new jd(`${lu(n)}`,n);return L2(n)}else if(n.promptFeedback)throw new jd(`Function call not available. ${lu(n)}`,n)},n}function SW(n){var e,t,i,s;const r=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)l.text&&r.push(l.text),l.executableCode&&r.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&r.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function L2(n){var e,t,i,s;const r=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)l.functionCall&&r.push(l.functionCall);if(r.length>0)return r}const EW=[Gg.RECITATION,Gg.SAFETY,Gg.LANGUAGE];function O_(n){return!!n.finishReason&&EW.includes(n.finishReason)}function lu(n){var e,t,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const r=n.candidates[0];O_(r)&&(s+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(s+=`: ${r.finishMessage}`))}return s}function b0(n){return this instanceof b0?(this.v=n,this):new b0(n)}function MW(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(_){i[_]&&(s[_]=function(x){return new Promise(function(E,A){r.push([_,x,E,A])>1||c(_,x)})})}function c(_,x){try{d(i[_](x))}catch(E){y(r[0][3],E)}}function d(_){_.value instanceof b0?Promise.resolve(_.value.v).then(p,g):y(r[0][2],_)}function p(_){c("next",_)}function g(_){c("throw",_)}function y(_,x){_(x),r.shift(),r.length&&c(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function TW(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=CW(e),[i,s]=t.tee();return{stream:AW(i),response:wW(s)}}async function wW(n){const e=[],t=n.getReader();for(;;){const{done:i,value:s}=await t.read();if(i)return DT(RW(e));e.push(s)}}function AW(n){return MW(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:s}=yield b0(t.read());if(s)break;yield yield b0(DT(i))}})}function CW(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return r();function r(){return e.read().then(({value:l,done:c})=>{if(c){if(s.trim()){i.error(new la("Failed to parse stream"));return}i.close();return}s+=l;let d=s.match(I2),p;for(;d;){try{p=JSON.parse(d[1])}catch{i.error(new la(`Error parsing JSON response: "${d[1]}"`));return}i.enqueue(p),s=s.substring(d[0].length),d=s.match(I2)}return r()}).catch(l=>{let c=l;throw c.stack=l.stack,c.name==="AbortError"?c=new $U("Request aborted when reading from the stream"):c=new la("Error reading from the stream"),c})}}})}function RW(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const r of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=r.citationMetadata,t.candidates[s].groundingMetadata=r.groundingMetadata,t.candidates[s].finishReason=r.finishReason,t.candidates[s].finishMessage=r.finishMessage,t.candidates[s].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[s].content||(t.candidates[s].content={role:r.content.role||"user",parts:[]});const l={};for(const c of r.content.parts)c.text&&(l.text=c.text),c.functionCall&&(l.functionCall=c.functionCall),c.executableCode&&(l.executableCode=c.executableCode),c.codeExecutionResult&&(l.codeExecutionResult=c.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),t.candidates[s].content.parts.push(l)}s++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(n,e,t,i){const s=await X0(e,of.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return TW(s)}async function tL(n,e,t,i){const r=await(await X0(e,of.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:DT(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function S0(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return OW(e)}function OW(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,s=!1;for(const r of n)"functionResponse"in r?(t.parts.push(r),s=!0):(e.parts.push(r),i=!0);if(i&&s)throw new la("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new la("No content is provided for sending chat message.");return i?e:t}function DW(n,e){var t;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new fu("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const r=S0(n);i.contents=[r]}return{generateContentRequest:i}}function P2(n){let e;return n.contents?e=n:e={contents:[S0(n)]},n.systemInstruction&&(e.systemInstruction=nL(n.systemInstruction)),e}function NW(n){return typeof n=="string"||Array.isArray(n)?{content:S0(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],UW={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function LW(n){let e=!1;for(const t of n){const{role:i,parts:s}=t;if(!e&&i!=="user")throw new la(`First content should be with role 'user', got ${i}`);if(!w2.includes(i))throw new la(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(w2)}`);if(!Array.isArray(s))throw new la("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new la("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of s)for(const d of B2)d in c&&(r[d]+=1);const l=UW[i];for(const c of B2)if(!l.includes(c)&&r[c]>0)throw new la(`Content with role '${i}' can't contain '${c}' part`);e=!0}}function z2(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const i of t.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="SILENT_ERROR";class IW{constructor(e,t,i,s={}){this.model=t,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(LW(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,s,r,l,c,d;await this._sendPromise;const p=S0(e),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),t);let _;return this._sendPromise=this._sendPromise.then(()=>tL(this._apiKey,this.model,g,y)).then(x=>{var E;if(z2(x.response)){this._history.push(p);const A=Object.assign({parts:[],role:"model"},(E=x.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(A)}else{const A=lu(x.response);A&&console.warn(`sendMessage() was unsuccessful. ${A}. Inspect response object for details.`)}_=x}).catch(x=>{throw this._sendPromise=Promise.resolve(),x}),await this._sendPromise,_}async sendMessageStream(e,t={}){var i,s,r,l,c,d;await this._sendPromise;const p=S0(e),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),t),_=eL(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>_).catch(x=>{throw new Error(F2)}).then(x=>x.response).then(x=>{if(z2(x)){this._history.push(p);const E=Object.assign({},x.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=lu(x);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(x=>{x.message!==F2&&console.error(x)}),_}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PW(n,e,t,i){return(await X0(e,of.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BW(n,e,t,i){return(await X0(e,of.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function zW(n,e,t,i){const s=t.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await X0(e,of.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=nL(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const s=P2(e),r=Object.assign(Object.assign({},this._requestOptions),t);return tL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}async generateContentStream(e,t={}){var i;const s=P2(e),r=Object.assign(Object.assign({},this._requestOptions),t);return eL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}startChat(e){var t;return new IW(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=DW(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return PW(this.apiKey,this.model,i,s)}async embedContent(e,t={}){const i=NW(e),s=Object.assign(Object.assign({},this._requestOptions),t);return BW(this.apiKey,this.model,i,s)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return zW(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new la("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new V2(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new fu("Cached content must contain a `name` field.");if(!e.model)throw new fu("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const l of s)if(t!=null&&t[l]&&e[l]&&(t==null?void 0:t[l])!==e[l]){if(l==="model"){const c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(c===d)continue}throw new fu(`Different value for "${l}" specified in modelParams (${t[l]}) and cachedContent (${e[l]})`)}const r=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new V2(this.apiKey,r,i)}}const VW="https://lbtaszuuwybbcuuzusdt.supabase.co",HW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxidGFzenV1d3liYmN1dXp1c2R0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNzUyOTYsImV4cCI6MjA3OTc1MTI5Nn0.5MTOWx_OkvCcUZi0pAPaq6r2hcjyxYtiqEH_xPJp1wU",qd=lW(VW,HW),kW=`
-- ==========================================================
-- COPIE E EXECUTE ESTE SCRIPT NO SQL EDITOR DO SUPABASE
-- ==========================================================

-- 1. Criao da Tabela
create table if not exists public.presentations (
  id uuid default gen_random_uuid() primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text,
  author text,
  date text,
  slides numeric,
  content jsonb,
  active boolean default false
);

-- 2. Habilitar Segurana a Nvel de Linha (RLS)
alter table public.presentations enable row level security;

-- 3. Polticas de Acesso (CRUD para usurios annimos - Demo)

-- Permitir leitura (SELECT)
create policy "Allow public read access"
on public.presentations for select
to anon
using (true);

-- Permitir insero (INSERT)
create policy "Allow public insert access"
on public.presentations for insert
to anon
with check (true);

-- Permitir atualizao (UPDATE)
create policy "Allow public update access"
on public.presentations for update
to anon
using (true);
`,H2=({content:n})=>q.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white p-6",children:q.jsxs("div",{className:"container mx-auto px-6 md:px-12 grid grid-cols-1 md:grid-cols-12 gap-12 items-start",children:[q.jsxs("div",{className:"md:col-span-4",children:[q.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:n.chapter}),q.jsx("h2",{className:"font-serif text-3xl md:text-4xl mb-6 leading-tight text-stone-900",children:n.title}),q.jsx("div",{className:"w-16 h-1 bg-nobel-gold mb-6"}),n.highlight&&q.jsxs("div",{className:"mt-8 p-4 bg-stone-50 border-l-2 border-nobel-gold text-stone-600 italic text-sm text-justify",children:['"',n.highlight,'"']})]}),q.jsx("div",{className:"md:col-span-8 text-lg text-stone-600 leading-relaxed space-y-6",children:n.text.map((e,t)=>q.jsx("p",{className:"text-justify",children:e},t))})]})}),GW=({content:n})=>q.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white border-t border-stone-100 p-6",children:q.jsx("div",{className:"container mx-auto px-6",children:q.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[q.jsxs("div",{children:[q.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-stone-100 text-stone-600 text-xs font-bold tracking-widest uppercase rounded-full mb-6 border border-stone-200",children:[q.jsx(sU,{size:14})," ",n.chapter]}),q.jsx("h2",{className:"font-serif text-4xl md:text-5xl mb-6 text-stone-900",children:n.title}),q.jsx("div",{className:"text-lg text-stone-600 mb-6 leading-relaxed space-y-4",children:n.text.map((e,t)=>q.jsx("p",{className:"text-justify",children:e},t))})]}),q.jsx("div",{children:q.jsx(L7,{})})]})})}),jW=({content:n})=>q.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-stone-900 text-stone-100 overflow-hidden relative p-6",children:[q.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[q.jsx("div",{className:"w-96 h-96 rounded-full bg-stone-600 blur-[100px] absolute top-[-100px] left-[-100px]"}),q.jsx("div",{className:"w-96 h-96 rounded-full bg-nobel-gold blur-[100px] absolute bottom-[-100px] right-[-100px]"})]}),q.jsx("div",{className:"container mx-auto px-6 relative z-10",children:q.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[q.jsx("div",{className:"order-2 lg:order-1 flex justify-center",children:q.jsx(I7,{})}),q.jsxs("div",{className:"order-1 lg:order-2",children:[q.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-stone-800 text-nobel-gold text-xs font-bold tracking-widest uppercase rounded-full mb-6 border border-stone-700",children:n.chapter}),q.jsx("h2",{className:"font-serif text-4xl md:text-5xl mb-6 text-white",children:n.title}),q.jsx("div",{className:"text-lg text-stone-400 mb-6 leading-relaxed space-y-4",children:n.text.map((e,t)=>q.jsx("p",{className:"text-justify",children:e},t))})]})]})})]}),qW=({content:n})=>q.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#F9F8F4] p-6",children:q.jsxs("div",{className:"container mx-auto px-6",children:[q.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-8",children:[q.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:n.chapter}),q.jsx("h2",{className:"font-serif text-4xl md:text-5xl mb-6 text-stone-900",children:n.title}),q.jsx("div",{className:"text-lg text-stone-600 leading-relaxed text-justify max-w-3xl mx-auto space-y-4",children:n.text.map((e,t)=>q.jsx("p",{children:e},t))})]}),q.jsx("div",{className:"max-w-3xl mx-auto",children:q.jsx(P7,{})})]})}),XW=({content:n})=>q.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white border-t border-stone-200 p-6",children:q.jsxs("div",{className:"container mx-auto px-6 grid grid-cols-1 md:grid-cols-12 gap-12 items-center",children:[q.jsx("div",{className:"md:col-span-5 relative",children:q.jsx("div",{className:"aspect-square bg-[#F5F4F0] rounded-xl overflow-hidden relative border border-stone-200 shadow-inner flex items-center justify-center",children:q.jsxs("div",{className:"text-center p-8",children:[q.jsx(M7,{size:64,className:"mx-auto text-nobel-gold mb-4",strokeWidth:1}),n.highlight&&q.jsxs("p",{className:"font-serif italic text-stone-500 text-xl text-center",children:['"',n.highlight,'"']})]})})}),q.jsxs("div",{className:"md:col-span-7 flex flex-col justify-center",children:[q.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:n.chapter}),q.jsx("h2",{className:"font-serif text-4xl mb-6 text-stone-900",children:n.title}),q.jsx("div",{className:"text-lg text-stone-600 mb-6 leading-relaxed space-y-4",children:n.text.map((e,t)=>q.jsx("p",{className:"text-justify",children:e},t))})]})]})}),iL=[{layout:"standard",content:{chapter:"Introduo",title:"Propsito Divino para o Casamento",text:["Em uma cultura que redefine o casamento como um contrato para a felicidade individual, a Escritura nos chama de volta  sua origem e propsito. Este estudo examina o casamento no como uma inveno social, mas como uma instituio divina com fins teleolgicos claros.","Na teologia reformada, o casamento  a 'piscina seminal' da Igreja, o principal meio pelo qual Deus levanta uma descendncia piedosa para Si mesmo, cumprindo Suas promessas pactuais de Gnesis a Apocalipse."]}},{layout:"quote",content:{chapter:"Introduo",title:"Mais que Companhia",highlight:"E se o propsito principal do seu casamento no for a sua felicidade, mas a expanso do Reino de Deus atravs da sua famlia?",text:["Frequentemente buscamos no casamento a satisfao pessoal e a realizao emocional. Embora sejam benefcios da unio, no so seu fim ltimo.","Somos comissionados divinamente para uma tarefa maior que ns mesmos: a construo de um legado de f que atravessa geraes e glorifica o Criador."]}},{layout:"standard",content:{chapter:"Ponto 1: Teleologia",title:"A Ilegitimidade da Inteno Contra a Vida",text:["O profeta Malaquias (2:15) estabelece a causa final da unio de 'uma s carne': 'Ele buscava uma descendncia para Deus'. Um casamento que decide, a priori e permanentemente, no ter filhos, atenta contra a prpria definio do pacto."," um casamento que deseja os benefcios da unio, como prazer e companhia, mas rejeita o seu fim primrio, a frutificao, contradizendo a natureza pactual estabelecida por Deus."]}},{layout:"dark-orbit",content:{chapter:"Ponto 1: Teleologia",title:"O Imperativo Criacional",text:["'Frutificai e multiplicai-vos' (Gnesis 1:28)  o primeiro mandamento da Bblia, o Mandato Cultural. Este mandamento foi dado antes da Queda, indicando que a procriao  parte da funo do homem como Imagem de Deus.","Negar a procriao , em essncia, negar a expanso da Imagem de Deus no mundo. Nossa vocao  encher a terra com reflexos da glria divina atravs de nossa descendncia."]}},{layout:"quote",content:{chapter:"Ponto 1: Teleologia",title:"Bno e Maldio",highlight:"Por que transformaramos voluntariamente uma bno (Salmo 127) em um fardo a ser evitado?",text:["Nas Escrituras, a madre aberta  invariavelmente descrita como bno (Sl 127:3). A esterilidade, por outro lado,  frequentemente vista como uma maldio ou juzo (Osias 9:14).","Examine seu corao. Sua viso de casamento est alinhada com o desgnio do Criador ou com o dogma da autonomia do mundo? O propsito de Deus deve prevalecer sobre preferncias pessoais."]}},{layout:"standard",content:{chapter:"Ponto 2: tica Crist",title:"Interveno e Mordomia",text:["Se  lcito usar a medicina para restaurar a fertilidade, reconhecemos que a biologia  uma rea de mordomia. Por coerncia, a regulao da fertilidade para espaamento no  intrinsecamente pecaminosa.","O controle no deve ser para evitar a vida permanentemente por egosmo, mas para gerenciar a famlia com prudncia e responsabilidade diante de Deus."]}},{layout:"timeline",content:{chapter:"Ponto 2: tica Crist",title:"Limites Legtimos",text:["A Escritura ordena: 'Se algum no tem cuidado dos seus... negou a f' (1 Timteo 5:8). Razes legtimas para o espaamento incluem risco grave  vida da me, incapacidade severa de sustento ou crises de sade.","A paternidade exige responsabilidade. No  um ato de f cega, mas de mordomia consciente, onde cada deciso visa o bem-estar e a educao crist da prole."]}},{layout:"quote",content:{chapter:"Ponto 2: tica Crist",title:"O Limite Absoluto",highlight:"Devemos distinguir claramente entre contracepo e aborto. Mtodos abortivos so inaceitveis.",text:["Mtodos que impedem a nidao do embrio so microabortivos e violam o mandamento 'No Matars'. Eles atentam contra uma vida humana j concebida  imagem de Deus.","Busque sabedoria. Suas decises so motivadas pela mordomia fiel e desejo de glorificar a Deus, ou pelo medo e egosmo?"]}},{layout:"standard",content:{chapter:"Ponto 3: Objees",title:"Economia e Providncia",text:["A mentalidade de escassez contradiz a promessa bblica. Deus, que alimenta as aves e veste os lrios (Mateus 6), no daria 'bocas' sem prover o 'po'.","Frequentemente, a 'falta de dinheiro'  uma recusa em ajustar o padro de vida e confiar na providncia de Deus. A f nos convida a depender do Pai celestial."]}},{layout:"dark-orbit",content:{chapter:"Ponto 3: Objees",title:"Pessimismo e Anttese",text:["O mundo jaz no maligno desde Gnesis 3. Justamente por isso, precisamos de mais luz. Gerar filhos piedosos  um ato de guerra espiritual."," lanar 'flechas' (Sl 127:4) contra as portas do inferno, confiando na segurana do Pacto para os eleitos e na promessa de que a luz prevalece sobre as trevas."]}},{layout:"chart",content:{chapter:"Ponto 3: Objees",title:"Hedonismo e Kenosis",text:["A recusa em sacrificar conforto, tempo e corpo por outrem  a anttese do Evangelho. A famlia  uma escola de santificao onde aprendemos a morrer para ns mesmos diariamente.","Imitamos a Cristo, que se esvaziou (Kenosis) por Sua Noiva, a Igreja. A paternidade  um chamado ao sacrifcio e ao amor que se doa."]}},{layout:"standard",content:{chapter:"Concluso",title:"Resgate do Propsito",text:["Vimos que o casamento tem um propsito divino de gerar uma descendncia para Deus, que a mordomia crist guia nosso planejamento familiar, e que a f em Cristo vence os medos e o egosmo do mundo.","Rejeite o esprito desta poca. No permita que o medo do mundo dite o tamanho da sua famlia, mas sim a esperana no Deus da Aliana."]}},{layout:"quote",content:{chapter:"Concluso",title:"Enchendo a Aljava",highlight:"Tenham filhos. Confiem na Providncia. Rejeitem a mentalidade estril deste sculo.",text:["Aos no casados, busquem um cnjuge para construir o Reino. Aos pais, criem seus filhos para o Pacto, no para o mercado. Aos casados, no sacrifiquem a bno dos filhos no altar do conforto.","Abracem a coragem de encher suas aljavas para a glria de Cristo, confiando que Ele capacitar aqueles a quem chama."]}}],WW=({formattedDate:n})=>q.jsxs("header",{className:"relative h-full flex items-center justify-center overflow-hidden",children:[q.jsx(t7,{}),q.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none bg-[radial-gradient(circle_at_center,rgba(249,248,244,0.92)_0%,rgba(249,248,244,0.6)_50%,rgba(249,248,244,0.3)_100%)]"}),q.jsxs("div",{className:"relative z-10 container mx-auto px-6 text-center",children:[q.jsxs("div",{className:"inline-block mb-4 px-3 py-1 border border-nobel-gold text-nobel-gold text-xs tracking-[0.2em] uppercase font-bold rounded-full backdrop-blur-sm bg-white/30",children:["PROFESSOR ABRAO GUIMARES SOUSA  ",n]}),q.jsxs("h1",{className:"font-serif text-4xl md:text-6xl lg:text-7xl font-medium leading-tight mb-8 text-stone-900 drop-shadow-sm",children:["O Mandato Pactual ",q.jsx("br",{}),q.jsx("span",{className:"italic font-normal text-stone-600 text-2xl md:text-4xl block mt-4",children:"Abertura  Vida e a Glria de Deus na Famlia"})]}),q.jsx("p",{className:"max-w-3xl mx-auto text-lg md:text-xl text-stone-700 font-light leading-relaxed mb-12",children:"O casamento como uma aliana divina cujo propsito primrio  a gerao de uma descendncia piedosa para a glria de Deus."})]})]}),sL=[{id:1,author:"A BBLIA SAGRADA.",title:"Livro de Gnesis.",details:"Captulo 1:28 (O Mandato Cultural)."},{id:2,author:"A BBLIA SAGRADA.",title:"Livro de Malaquias.",details:"Captulo 2:15 (Descendncia para Deus)."},{id:3,author:"A BBLIA SAGRADA.",title:"Livro de Salmos.",details:"Salmo 127 (Filhos como herana e flechas)."},{id:4,author:"A BBLIA SAGRADA.",title:"1 Timteo.",details:"Captulo 5:8 (O cuidado dos seus)."},{id:5,author:"A BBLIA SAGRADA.",title:"Evangelho de Mateus.",details:"Captulo 6:25-34 (A Providncia Divina)."},{id:6,author:"VAN TIL, Cornelius.",title:"A Estrutura da Aliana.",details:"Teologia Reformada e o Pacto."},{id:7,author:"BAVINCK, Herman.",title:"A Famlia Crist.",details:"tica e Dogmtica Reformada."},{id:8,author:"SPROUL, R.C.",title:"O Propsito do Casamento.",details:"Ligonier Ministries."}],YW=()=>{const n=sL.slice(0,4);return q.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#F9F8F4] p-6 md:p-16",children:q.jsxs("div",{className:"container mx-auto max-w-5xl h-full flex flex-col pt-10",children:[q.jsx("h2",{className:"font-sans text-4xl text-stone-600 uppercase tracking-widest mb-10 border-b border-stone-300 pb-4 text-left",children:"Referncias Bblicas"}),q.jsx("div",{className:"space-y-8 pr-4",children:n.map(e=>q.jsxs("div",{className:"flex items-start gap-8 group",children:[q.jsx("div",{className:"mt-1 shrink-0 text-stone-400 group-hover:text-[#6B4C9A] transition-colors duration-300",children:q.jsx(bT,{size:40,strokeWidth:1.2,className:"fill-stone-50/50"})}),q.jsxs("div",{className:"flex-1",children:[q.jsx("p",{className:"text-[#6B4C9A] font-medium text-lg tracking-wide mb-1",children:e.author}),q.jsx("p",{className:"text-stone-800 font-serif font-bold italic text-xl leading-snug mb-1",children:e.title}),q.jsx("p",{className:"text-[#6B4C9A] text-base opacity-90",children:e.details})]})]},e.id))})]})})},KW=()=>{const n=sL.slice(4);return q.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#F9F8F4] p-6 md:p-16",children:q.jsxs("div",{className:"container mx-auto max-w-5xl h-full flex flex-col pt-10",children:[q.jsx("h2",{className:"font-sans text-4xl text-stone-600 uppercase tracking-widest mb-10 border-b border-stone-300 pb-4 text-left",children:"Referncias Teolgicas"}),q.jsx("div",{className:"space-y-8 pr-4",children:n.map(e=>q.jsxs("div",{className:"flex items-start gap-8 group",children:[q.jsx("div",{className:"mt-1 shrink-0 text-stone-400 group-hover:text-[#6B4C9A] transition-colors duration-300",children:q.jsx(bT,{size:40,strokeWidth:1.2,className:"fill-stone-50/50"})}),q.jsxs("div",{className:"flex-1",children:[q.jsx("p",{className:"text-[#6B4C9A] font-medium text-lg tracking-wide mb-1",children:e.author}),q.jsx("p",{className:"text-stone-800 font-serif font-bold italic text-xl leading-snug mb-1",children:e.title}),q.jsx("p",{className:"text-[#6B4C9A] text-base opacity-90",children:e.details})]})]},e.id))})]})})},ZW=()=>q.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-stone-900 text-stone-400 p-6",children:[q.jsxs("div",{className:"text-center md:text-left",children:[q.jsx("div",{className:"text-white font-serif font-bold text-4xl mb-4",children:"O Mandato Pactual"}),q.jsx("p",{className:"text-lg",children:'"Abertura  Vida e a Glria de Deus na Famlia"'})]}),q.jsx("div",{className:"text-center mt-16 text-sm text-stone-600",children:"Baseado no estudo bblico apresentado por PROFESSOR ABRAO GUIMARES SOUSA."})]}),JW=({onSlidesGenerated:n,onClose:e})=>{const[t,i]=me.useState(""),[s,r]=me.useState(!1),[l,c]=me.useState(""),d=async()=>{if(!t.trim()){c("Por favor, descreva o tema dos slides que deseja gerar");return}r(!0),c("");try{const g=new FW("AIzaSyB96DNpxXLarc5FyMH8K1zyAWMsbIa1MHM").getGenerativeModel({model:"gemini-2.0-flash"}),y=`
Crie uma srie de slides educacionais sobre o seguinte tema: "${t}"

Responda em JSON com a seguinte estrutura:
{
  "slides": [
    {
      "layout": "standard|timeline|dark-orbit|chart|quote",
      "chapter": "Nome da seo",
      "title": "Ttulo do slide",
      "text": ["pargrafo 1", "pargrafo 2", ...],
      "highlight": "citao opcional"
    }
  ]
}

Crie entre 5 e 10 slides. Cada slide deve ter:
- chapter: uma seo ou tema (ex: "Introduo", "Ponto 1", "Concluso")
- title: ttulo descritivo
- text: array de pargrafos (mx 3-4 por slide)
- highlight: opcional, uma citao ou frase importante
- layout: escolha variedade entre os 5 tipos disponveis

IMPORTANTE: Responda APENAS com o JSON, sem markdown, sem comentrios.
            `,x=(await g.generateContent(y)).response.text();let E;try{E=JSON.parse(x)}catch{const T=x.match(/\{[\s\S]*\}/);if(T)E=JSON.parse(T[0]);else throw new Error("No foi possvel extrair JSON vlido da resposta")}const A=E.slides.map(T=>({layout:T.layout||"standard",content:{chapter:T.chapter||"Novo Slide",title:T.title||"Slide",text:Array.isArray(T.text)?T.text.filter(M=>M&&typeof M=="string"):[T.text||""],highlight:T.highlight||void 0}}));n(A),alert(` ${A.length} slides gerados com sucesso!`),e()}catch(p){console.error("Erro ao gerar slides com Gemini:",p),c(`Erro: ${p.message||"Falha ao conectar com Gemini"}`)}finally{r(!1)}};return q.jsx("div",{className:"fixed inset-0 z-[120] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:q.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[q.jsxs("div",{className:"p-6 border-b border-stone-200 flex justify-between items-center bg-gradient-to-r from-blue-500 to-purple-600",children:[q.jsxs("div",{children:[q.jsx("h2",{className:"text-2xl font-serif font-bold text-white",children:" Gerar Slides com Gemini"}),q.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Descreva o tema e deixe a IA criar slides estruturados"})]}),q.jsx("button",{onClick:e,className:"text-white hover:bg-white/20 p-2 rounded-lg transition",children:q.jsx(ST,{size:24})})]}),q.jsxs("div",{className:"p-8 space-y-6",children:[q.jsxs("div",{children:[q.jsx("label",{className:"block text-sm font-bold text-stone-600 mb-3 uppercase tracking-wide",children:"Descreva o tema dos slides"}),q.jsx("textarea",{value:t,onChange:p=>i(p.target.value),placeholder:"Ex: A histria da filosofia ocidental, principais correntes de pensamento e seus impactos na sociedade moderna...",className:"w-full h-32 px-4 py-3 border border-stone-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 resize-none",disabled:s}),q.jsx("p",{className:"text-xs text-stone-500 mt-2",children:" Dica: Seja especfico. Inclua contexto, pontos principais e tom desejado."})]}),l&&q.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[" ",l]}),s&&q.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-3",children:[q.jsx("div",{className:"animate-spin",children:q.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"})}),q.jsx("span",{className:"text-blue-700 font-medium",children:"Gerando slides com Gemini..."})]})]}),q.jsxs("div",{className:"p-6 bg-stone-50 border-t border-stone-200 flex justify-end gap-3",children:[q.jsx("button",{onClick:e,disabled:s,className:"px-6 py-2 border border-stone-300 text-stone-600 font-medium rounded-lg hover:bg-stone-100 transition-colors disabled:opacity-50",children:"Cancelar"}),q.jsx("button",{onClick:d,disabled:s||!t.trim(),className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors disabled:opacity-50",children:s?"Gerando...":" Gerar Slides"})]})]})})},QW=({slide:n,onSave:e,onClose:t,templates:i})=>{const[s,r]=me.useState((n==null?void 0:n.layout)||"standard"),[l,c]=me.useState((n==null?void 0:n.content.chapter)||""),[d,p]=me.useState((n==null?void 0:n.content.title)||""),[g,y]=me.useState(((n==null?void 0:n.content.text)||[""]).join(`

`)),[_,x]=me.useState((n==null?void 0:n.content.highlight)||""),E=()=>{const A={layout:s,content:{chapter:l,title:d,text:g.split(`

`).filter(T=>T.trim()),highlight:_.trim()||void 0}};e(A)};return q.jsx("div",{className:"fixed inset-0 z-[110] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",children:q.jsxs("div",{className:"bg-white w-full max-w-3xl h-[90vh] rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[q.jsxs("div",{className:"p-6 border-b border-stone-200 flex justify-between items-center bg-stone-50",children:[q.jsx("h2",{className:"text-2xl font-serif font-bold text-stone-900",children:n?"Editar Slide":"Novo Slide"}),q.jsx("button",{onClick:t,className:"text-stone-400 hover:text-stone-800",children:q.jsx(ST,{size:24})})]}),q.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[q.jsxs("div",{children:[q.jsx("label",{className:"block text-sm font-bold text-stone-600 mb-3 uppercase tracking-wide",children:"Modelo de Layout"}),q.jsx("div",{className:"grid grid-cols-5 gap-2",children:i.map(A=>q.jsx("button",{onClick:()=>r(A),className:`p-3 rounded-lg border-2 text-sm font-medium transition-all capitalize ${s===A?"border-nobel-gold bg-nobel-gold/10 text-nobel-gold":"border-stone-200 text-stone-600 hover:border-stone-300"}`,children:A==="dark-orbit"?" Escuro":A==="timeline"?" Timeline":A==="chart"?" Grfico":A==="quote"?" Citao":" Padro"},A))})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-sm font-bold text-stone-600 mb-2 uppercase tracking-wide",children:"Captulo/Seo"}),q.jsx("input",{type:"text",value:l,onChange:A=>c(A.target.value),placeholder:"ex: Introduo, Ponto 1, Concluso...",className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:outline-none focus:border-nobel-gold focus:ring-1 focus:ring-nobel-gold"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-sm font-bold text-stone-600 mb-2 uppercase tracking-wide",children:"Ttulo"}),q.jsx("input",{type:"text",value:d,onChange:A=>p(A.target.value),placeholder:"Ttulo principal do slide",className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:outline-none focus:border-nobel-gold focus:ring-1 focus:ring-nobel-gold"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-sm font-bold text-stone-600 mb-2 uppercase tracking-wide",children:"Contedo (pargrafos separados por linha em branco)"}),q.jsx("textarea",{value:g,onChange:A=>y(A.target.value),placeholder:"Escreva os pargrafos do slide. Separe cada pargrafo com uma linha em branco.",rows:8,className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:outline-none focus:border-nobel-gold focus:ring-1 focus:ring-nobel-gold font-mono text-sm"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-sm font-bold text-stone-600 mb-2 uppercase tracking-wide",children:"Destaque (opcional - para citaes e destaques)"}),q.jsx("input",{type:"text",value:_,onChange:A=>x(A.target.value),placeholder:"Uma citao marcante ou destaque...",className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:outline-none focus:border-nobel-gold focus:ring-1 focus:ring-nobel-gold italic"})]})]}),q.jsxs("div",{className:"p-6 border-t border-stone-200 bg-stone-50 flex justify-end gap-3",children:[q.jsx("button",{onClick:t,className:"px-6 py-2 border border-stone-300 text-stone-600 rounded-lg hover:bg-stone-100 transition-colors font-medium",children:"Cancelar"}),q.jsx("button",{onClick:E,className:"px-6 py-2 bg-nobel-gold text-white rounded-lg hover:bg-[#b08d4b] transition-colors font-medium",children:"Salvar Slide"})]})]})})},$W=({currentSlides:n,setSlides:e,totalSlides:t,close:i,activePresentationId:s,setActivePresentationId:r})=>{const l=[{id:"1",title:"O Mandato Pactual: Famlia e Glria de Deus",author:"PROFESSOR ABRAO GUIMARES SOUSA",date:"Nov 2024",slides:16,active:!0}],[c,d]=me.useState(l),[p,g]=me.useState(!1),[y,_]=me.useState(!1),[x,E]=me.useState(!1),[A,T]=me.useState(null),[M,R]=me.useState("presentations"),[O,D]=me.useState(null),H=["standard","timeline","dark-orbit","chart","quote"],I=()=>{T(null),_(!0)},V=Y=>{const fe=[...n,...Y];e(fe),E(!1)},F=Y=>{T(Y),_(!0)},L=Y=>{const fe=n.filter((ve,X)=>X!==Y);e(fe),alert("Slide deletado!")},P=Y=>{let fe;A!==null?fe=n.map((ve,X)=>X===A?Y:ve):fe=[...n,Y],e(fe),_(!1),T(null),alert(A!==null?"Slide atualizado!":"Novo slide adicionado!")},Z=async Y=>{try{g(!0);const fe={title:`${Y.title} (Cpia)`,author:Y.author,date:new Date().toLocaleDateString("pt-BR"),slides:Y.slides,content:n,active:!1},{data:ve,error:X}=await qd.from("presentations").insert([fe]).select().single();if(X)throw X;await xe(),alert(" Apresentao duplicada com sucesso!")}catch(fe){he(fe,"duplicar apresentao")}finally{g(!1)}},de=async Y=>{if(confirm(" Tem certeza que deseja deletar esta apresentao? Esta ao no pode ser desfeita."))try{g(!0);const{error:fe}=await qd.from("presentations").delete().eq("id",Y);if(fe)throw fe;await xe(),s===Y&&(r(null),e(iL)),alert(" Apresentao deletada com sucesso!")}catch(fe){he(fe,"deletar apresentao")}finally{g(!1)}},se=async Y=>{try{const fe=n,ve=`
                <html>
                <head>
                    <title>${Y.title}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 40px; color: #333; }
                        h1 { color: #C5A059; border-bottom: 2px solid #C5A059; padding-bottom: 10px; }
                        h2 { color: #666; margin-top: 30px; }
                        .slide { page-break-after: always; padding: 20px; border: 1px solid #ddd; margin-bottom: 20px; }
                        .metadata { font-size: 12px; color: #999; margin-bottom: 10px; }
                        p { line-height: 1.6; }
                    </style>
                </head>
                <body>
                    <h1>${Y.title}</h1>
                    <p><strong>Autor:</strong> ${Y.author}</p>
                    <p><strong>Data:</strong> ${Y.date}</p>
                    <p><strong>Total de Slides:</strong> ${fe.length}</p>
                    <hr>
                    ${fe.map((Re,le)=>`
                        <div class="slide">
                            <div class="metadata">Slide ${le+1} - Layout: ${Re.layout}</div>
                            <h2>${Re.content.title}</h2>
                            <p><strong>Seo:</strong> ${Re.content.chapter}</p>
                            ${Re.content.text.map(Oe=>`<p>${Oe}</p>`).join("")}
                            ${Re.content.highlight?`<blockquote style="border-left: 3px solid #C5A059; padding-left: 15px; font-style: italic;">${Re.content.highlight}</blockquote>`:""}
                        </div>
                    `).join("")}
                </body>
                </html>
            `,X=document.createElement("a"),oe=new Blob([ve],{type:"text/html"});X.href=URL.createObjectURL(oe),X.download=`${Y.title.replace(/\s+/g,"_")}.html`,document.body.appendChild(X),X.click(),document.body.removeChild(X),alert(" Apresentao exportada com sucesso!")}catch(fe){alert(" Erro ao exportar apresentao"),console.error(fe)}},he=(Y,fe)=>{console.error(`Full Error Object (${fe}):`,Y);let ve=`Ocorreu um erro ao ${fe}.`;(Y==null?void 0:Y.code)==="PGRST205"||(Y==null?void 0:Y.code)==="42P01"?(ve=`A tabela 'presentations' no existe no banco de dados.

Por favor, copie o script SQL do console (F12) e execute-o no Editor SQL do Supabase para corrigir isso.`,console.log("%c COPIE E EXECUTE O SEGUINTE SQL NO SUPABASE:","background: #C5A059; color: #fff; padding: 6px; font-weight: bold; font-size: 14px;"),console.log(kW)):(Y==null?void 0:Y.code)==="42501"?ve="Permisso negada (Erro 42501). Verifique se as Polticas de Segurana (RLS) do Supabase permitem INSERT/SELECT para a role 'anon'.":Y!=null&&Y.message?ve=`Erro: ${Y.message}`:typeof Y=="object"&&(ve=`Erro inesperado: ${JSON.stringify(Y)}`),alert(ve)},xe=async()=>{g(!0);try{const{data:Y,error:fe}=await qd.from("presentations").select("*").order("created_at",{ascending:!1});if(!fe&&Y&&Y.length>0){const ve=Y.map(X=>({id:X.id,title:X.title,author:X.author,date:X.date||new Date(X.created_at).toLocaleDateString("pt-BR"),slides:X.slides||0,active:X.id===s}));d(ve)}else fe&&fe.code!=="PGRST205"&&console.warn("Supabase fetch error (using fallback data):",fe.message)}catch(Y){console.error("Connection error:",Y)}finally{g(!1)}},k=async Y=>{g(!0);try{const{data:fe,error:ve}=await qd.from("presentations").select("content").eq("id",Y).single();if(ve)throw ve;fe&&fe.content?(e(fe.content),r(Y),d(X=>X.map(oe=>({...oe,active:oe.id===Y}))),alert("Apresentao carregada com sucesso!"),i()):alert("Nenhum contedo encontrado para esta apresentao.")}catch(fe){he(fe,"carregar apresentao")}finally{g(!1)}},te=async()=>{g(!0);try{const Y={title:"O Mandato Pactual: Abertura  Vida",author:"PROFESSOR ABRAO GUIMARES SOUSA",date:new Date().toLocaleDateString("pt-BR"),slides:t,content:n,active:!0};let fe,ve="";if(s){const{error:X,data:oe}=await qd.from("presentations").update(Y).eq("id",s).select();fe={error:X,data:oe},ve="atualizada"}else{const{error:X,data:oe}=await qd.from("presentations").insert([Y]).select().single();fe={error:X,data:oe},ve="salva",!X&&oe&&r(oe.id)}if(fe.error)throw fe.error;await xe(),alert(`Apresentao ${ve} com sucesso!`)}catch(Y){he(Y,"salvar apresentao")}finally{g(!1)}};return me.useEffect(()=>{xe()},[s]),q.jsxs("div",{className:"fixed inset-0 z-[100] bg-stone-900/50 backdrop-blur-sm flex items-center justify-center p-8",children:[q.jsxs("div",{className:"bg-[#F9F8F4] w-full max-w-5xl h-[85vh] rounded-xl border border-nobel-gold shadow-2xl flex flex-col overflow-hidden text-stone-800",children:[q.jsxs("div",{className:"p-6 border-b border-stone-300 flex justify-between items-center bg-white/50",children:[q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsx(m7,{className:"text-nobel-gold",size:24}),q.jsxs("div",{children:[q.jsxs("h2",{className:"text-2xl font-serif text-stone-900 font-bold",children:["Base de Conhecimento ",p&&q.jsx("span",{className:"text-sm font-normal text-stone-500 animate-pulse ml-2",children:"(Sincronizando...)"})]}),q.jsxs("div",{className:"flex gap-4 mt-3",children:[q.jsx("button",{onClick:()=>R("presentations"),className:`px-4 py-1 text-sm font-medium rounded-full transition-colors ${M==="presentations"?"bg-nobel-gold text-white":"bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:" Apresentaes"}),q.jsx("button",{onClick:()=>R("slides"),className:`px-4 py-1 text-sm font-medium rounded-full transition-colors ${M==="slides"?"bg-nobel-gold text-white":"bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:" Editar Slides"})]})]})]}),q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsxs("div",{className:"relative",children:[q.jsx(O7,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400",size:16}),q.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-9 pr-4 py-2 rounded-full border border-stone-300 bg-white text-sm focus:outline-none focus:border-nobel-gold focus:ring-1 focus:ring-nobel-gold w-64"})]}),M==="presentations"&&q.jsxs("button",{onClick:te,className:`flex items-center gap-2 px-4 py-2 text-white text-sm font-medium rounded-full transition-colors shadow-sm ${s?"bg-stone-700 hover:bg-stone-900":"bg-nobel-gold hover:bg-[#b08d4b]"}`,children:[s?q.jsx(w7,{size:16}):q.jsx(d7,{size:16}),q.jsx("span",{children:s?"Atualizar Atual":"Salvar Novo"})]}),M==="slides"&&q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-nobel-gold text-white text-sm font-medium rounded-full hover:bg-[#b08d4b] transition-colors shadow-sm",children:[q.jsx(sU,{size:16}),q.jsx("span",{children:"Novo Slide"})]}),q.jsx("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm font-medium rounded-full hover:from-blue-600 hover:to-purple-700 transition-colors shadow-sm",children:q.jsx("span",{children:" Gerar com IA"})})]}),q.jsx("button",{onClick:i,className:"text-stone-400 hover:text-stone-800 transition-colors bg-stone-200/50 p-2 rounded-full",children:q.jsx(ST,{size:20})})]})]}),q.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-[#F9F8F4]",children:M==="presentations"?q.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[q.jsxs("div",{className:"flex items-center justify-between px-6 py-2 text-xs font-bold tracking-widest text-stone-400 uppercase",children:[q.jsx("span",{className:"w-1/2",children:"Ttulo da Apresentao"}),q.jsx("span",{className:"w-1/6",children:"Autor"}),q.jsx("span",{className:"w-1/6 text-center",children:"Data"}),q.jsx("span",{className:"w-1/6 text-right",children:"Aes"})]}),c.map(Y=>q.jsxs("div",{className:`group flex items-center justify-between p-6 rounded-lg border transition-all duration-200 ${Y.active?"bg-white border-nobel-gold shadow-md":"bg-white/50 border-stone-200 hover:border-stone-300 hover:shadow-sm"}`,children:[q.jsxs("div",{className:"w-1/2 flex items-center gap-4",children:[q.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center shrink-0 ${Y.active?"bg-nobel-gold text-white":"bg-stone-200 text-stone-500"}`,children:Y.active?q.jsx(h7,{size:24}):q.jsx(bT,{size:24})}),q.jsxs("div",{children:[q.jsx("h3",{className:`text-lg font-serif font-bold leading-tight ${Y.active?"text-stone-900":"text-stone-700"}`,children:Y.title}),q.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-stone-500",children:[q.jsxs("span",{className:"flex items-center gap-1",children:[q.jsx(S7,{size:10})," ",Y.slides," slides"]}),Y.active&&q.jsx("span",{className:"text-nobel-gold font-bold px-2 py-0.5 bg-nobel-gold/10 rounded-full",children:"ATIVO"})]})]})]}),q.jsx("div",{className:"w-1/6 text-sm text-stone-600 font-medium truncate pr-4",children:Y.author}),q.jsx("div",{className:"w-1/6 text-center text-sm text-stone-500",children:Y.date}),q.jsxs("div",{className:"w-1/6 flex justify-end gap-2",children:[Y.active?q.jsx("button",{onClick:i,className:"px-4 py-2 bg-stone-900 text-white text-sm font-medium rounded-md hover:bg-stone-800 transition-colors shadow-sm",children:"Editar"}):q.jsx("button",{onClick:()=>k(Y.id),className:"px-4 py-2 border border-stone-300 text-stone-600 text-sm font-medium rounded-md hover:bg-stone-100 hover:text-stone-900 transition-colors",children:"Carregar"}),q.jsxs("div",{className:"relative group",children:[q.jsx("button",{onClick:()=>D(O===Y.id?null:Y.id),className:"p-2 text-stone-400 hover:text-stone-800 transition-colors hover:bg-stone-100 rounded-lg",children:q.jsx(v7,{size:18})}),O===Y.id&&q.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-stone-300 rounded-lg shadow-xl z-50",children:[q.jsx("button",{onClick:()=>{Z(Y),D(null)},className:"w-full text-left px-4 py-2 text-sm text-stone-700 hover:bg-stone-100 transition-colors flex items-center gap-2",children:" Duplicar"}),q.jsx("button",{onClick:()=>{se(Y),D(null)},className:"w-full text-left px-4 py-2 text-sm text-stone-700 hover:bg-stone-100 transition-colors flex items-center gap-2",children:" Baixar HTML"}),q.jsx("button",{onClick:()=>{de(Y.id),D(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center gap-2 border-t border-stone-200",children:" Excluir"})]})]})]})]},Y.id))]}):q.jsxs("div",{className:"space-y-4",children:[q.jsxs("div",{className:"text-sm text-stone-600 mb-4 p-4 bg-stone-100/50 rounded-lg border border-stone-200",children:[" Voc tem ",q.jsxs("strong",{children:[n.length," slides"]})," nesta apresentao. Edite, adicione ou remova slides conforme necessrio."]}),q.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map((Y,fe)=>q.jsxs("div",{className:"p-4 rounded-lg border border-stone-200 bg-white hover:shadow-md transition-all group flex items-center justify-between",children:[q.jsxs("div",{className:"flex-1",children:[q.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[q.jsx("span",{className:"text-xs font-bold text-nobel-gold bg-nobel-gold/10 px-2 py-1 rounded-full",children:Y.layout==="dark-orbit"?" Escuro":Y.layout==="timeline"?" Timeline":Y.layout==="chart"?" Grfico":Y.layout==="quote"?" Citao":" Padro"}),q.jsxs("span",{className:"text-xs text-stone-500",children:["Slide ",fe+1]})]}),q.jsx("p",{className:"font-serif font-bold text-stone-900",children:Y.content.title}),q.jsx("p",{className:"text-sm text-stone-600 mt-1",children:Y.content.chapter}),q.jsx("p",{className:"text-xs text-stone-500 mt-2 line-clamp-2",children:Y.content.text[0]})]}),q.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity ml-4 shrink-0",children:[q.jsx("button",{onClick:()=>F(fe),className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Editar slide",children:""}),q.jsx("button",{onClick:()=>L(fe),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Deletar slide",children:""})]})]},fe))})]})}),q.jsxs("div",{className:"p-4 bg-white border-t border-stone-200 text-center text-xs text-stone-400 font-mono flex justify-between items-center px-8",children:[q.jsx("span",{children:"Sistema de Gesto de Contedo Acadmico v2.4.0"}),q.jsxs("span",{children:["Conectado a: ",q.jsx("strong",{className:"text-stone-700",children:"Supabase"})]})]})]}),y&&q.jsx(QW,{slide:A!==null?n[A]:null,onSave:P,onClose:()=>_(!1),templates:H}),x&&q.jsx(JW,{onSlidesGenerated:V,onClose:()=>E(!1)})]})},eY=()=>{const[[n,e],t]=me.useState([0,0]),[i,s]=me.useState(!1),[r,l]=me.useState(iL),[c,d]=me.useState(null),[p,g]=me.useState("");me.useEffect(()=>{g(new Date().toLocaleDateString("pt-BR"))},[]);const y=T=>{const M=T-1,R=r[M];if(!R)return null;switch(R.layout){case"standard":return q.jsx(H2,{content:R.content});case"timeline":return q.jsx(GW,{content:R.content});case"dark-orbit":return q.jsx(jW,{content:R.content});case"chart":return q.jsx(qW,{content:R.content});case"quote":return q.jsx(XW,{content:R.content});default:return q.jsx(H2,{content:R.content})}},_=1+r.length+2+1,x=T=>{const M=n+T;M>=0&&M<_&&t([M,T])};me.useEffect(()=>{const T=M=>{if((M.ctrlKey||M.metaKey)&&M.shiftKey&&(M.key==="a"||M.key==="A")){M.preventDefault(),s(R=>!R);return}i||(M.key==="ArrowRight"?t(([R,O])=>{const D=R+1;return D<_?[D,1]:[R,O]}):M.key==="ArrowLeft"&&t(([R,O])=>{const D=R-1;return D>=0?[D,-1]:[R,O]}))};return window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}},[_,i]);const E={enter:T=>({x:T>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:"0%",opacity:1},exit:T=>({zIndex:0,x:T<0?"100%":"-100%",opacity:0})};let A;return n===0?A=q.jsx(WW,{formattedDate:p}):n>0&&n<=r.length?A=y(n):n===r.length+1?A=q.jsx(YW,{}):n===r.length+2?A=q.jsx(KW,{}):A=q.jsx(ZW,{}),q.jsxs("div",{className:"relative w-screen h-screen overflow-hidden bg-[#F9F8F4] text-stone-800 selection:bg-nobel-gold selection:text-white",children:[q.jsx(dB,{initial:!1,custom:e,children:q.jsx(Zg.div,{custom:e,variants:E,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:150,damping:25},opacity:{duration:.4}},className:"absolute w-full h-full pb-8",children:A},n)}),i&&q.jsx($W,{currentSlides:r,setSlides:l,totalSlides:_,close:()=>s(!1),activePresentationId:c,setActivePresentationId:d}),q.jsxs("div",{className:"absolute bottom-0 left-0 w-full z-50 flex h-8 text-xs font-sans shadow-[0_-2px_10px_rgba(0,0,0,0.05)] border-t border-stone-300/20",children:[q.jsx("button",{className:"flex-1 basis-0 flex items-center px-4 bg-[#E8DEC0] text-stone-800 truncate border-r border-stone-400/20 hover:bg-[#ded2b0] transition-colors text-left justify-start",onClick:()=>x(-1),disabled:n===0,"aria-label":"Previous slide",children:q.jsx("span",{className:"truncate font-medium opacity-90",children:"PROFESSOR ABRAO GUIMARES SOUSA"})}),q.jsx("div",{className:"flex-1 basis-0 flex items-center justify-center px-4 bg-[#C5A059] text-white truncate",children:q.jsx("span",{className:"truncate font-semibold tracking-wide",children:"O Mandato Pactual"})}),q.jsxs("button",{className:"flex-1 basis-0 flex items-center justify-between px-4 bg-[#8C7035] text-white/90 hover:bg-[#7a612e] transition-colors",onClick:()=>x(1),disabled:n===_-1,"aria-label":"Next slide",children:[q.jsx("span",{className:"mr-4 opacity-80 hidden sm:inline truncate",children:p}),q.jsxs("span",{className:"font-mono font-bold ml-auto shrink-0",children:[n+1," / ",_]})]})]})]})},aL=document.getElementById("root");if(!aL)throw new Error("Could not find root element to mount to");const tY=uI.createRoot(aL);tY.render(q.jsx(k2.StrictMode,{children:q.jsx(eY,{})}));
